{"version":3,"sources":["../node_modules/tslib/tslib.es6.js","../../../src/internal/util/isFunction.ts","../../src/internal/config.ts","../../../src/internal/util/hostReportError.ts","../../src/internal/Observer.ts","../../../src/internal/util/isArray.ts","../../../src/internal/util/isObject.ts","../../../src/internal/util/UnsubscriptionError.ts","../../src/internal/Subscription.ts","../../../src/internal/symbol/rxSubscriber.ts","../../src/internal/Subscriber.ts","../../../src/internal/util/canReportError.ts","../../../src/internal/util/toSubscriber.ts","../../../src/internal/symbol/observable.ts","../../../src/internal/util/noop.ts","../../../src/internal/util/pipe.ts","../../src/internal/Observable.ts","../../../src/internal/util/ObjectUnsubscribedError.ts","../../src/internal/SubjectSubscription.ts","../../src/internal/Subject.ts","../../../src/internal/operators/refCount.ts","../../../src/internal/observable/ConnectableObservable.ts","../../../src/internal/operators/groupBy.ts","../../src/internal/BehaviorSubject.ts","../../../src/internal/scheduler/Action.ts","../../../src/internal/scheduler/AsyncAction.ts","../../../src/internal/scheduler/QueueAction.ts","../../src/internal/Scheduler.ts","../../../src/internal/scheduler/AsyncScheduler.ts","../../../src/internal/scheduler/QueueScheduler.ts","../../../src/internal/scheduler/queue.ts","../../../src/internal/observable/empty.ts","../../../src/internal/util/isScheduler.ts","../../../src/internal/util/subscribeToArray.ts","../../../src/internal/scheduled/scheduleArray.ts","../../../src/internal/observable/fromArray.ts","../../../src/internal/observable/of.ts","../../../src/internal/observable/throwError.ts","../../src/internal/Notification.ts","../../../src/internal/operators/observeOn.ts","../../src/internal/ReplaySubject.ts","../../src/internal/AsyncSubject.ts","../../../src/internal/util/Immediate.ts","../../../src/internal/scheduler/AsapAction.ts","../../../src/internal/scheduler/AsapScheduler.ts","../../../src/internal/scheduler/asap.ts","../../../src/internal/scheduler/async.ts","../../../src/internal/scheduler/AnimationFrameAction.ts","../../../src/internal/scheduler/AnimationFrameScheduler.ts","../../../src/internal/scheduler/animationFrame.ts","../../../src/internal/scheduler/VirtualTimeScheduler.ts","../../../src/internal/util/identity.ts","../../../src/internal/util/isObservable.ts","../../../src/internal/util/ArgumentOutOfRangeError.ts","../../../src/internal/util/EmptyError.ts","../../../src/internal/util/TimeoutError.ts","../../../src/internal/operators/map.ts","../../../src/internal/observable/bindCallback.ts","../../../src/internal/observable/bindNodeCallback.ts","../../src/internal/OuterSubscriber.ts","../../src/internal/InnerSubscriber.ts","../../../src/internal/util/subscribeToPromise.ts","../../../src/internal/symbol/iterator.ts","../../../src/internal/util/subscribeToIterable.ts","../../../src/internal/util/subscribeToObservable.ts","../../../src/internal/util/isArrayLike.ts","../../../src/internal/util/isPromise.ts","../../../src/internal/util/subscribeTo.ts","../../../src/internal/util/subscribeToResult.ts","../../../src/internal/observable/combineLatest.ts","../../../src/internal/scheduled/scheduleObservable.ts","../../../src/internal/scheduled/schedulePromise.ts","../../../src/internal/scheduled/scheduleIterable.ts","../../../src/internal/util/isInteropObservable.ts","../../../src/internal/util/isIterable.ts","../../../src/internal/scheduled/scheduled.ts","../../../src/internal/observable/from.ts","../../../src/internal/operators/mergeMap.ts","../../../src/internal/operators/mergeAll.ts","../../../src/internal/operators/concatAll.ts","../../../src/internal/observable/concat.ts","../../../src/internal/observable/defer.ts","../../../src/internal/observable/forkJoin.ts","../../../src/internal/observable/fromEvent.ts","../../../src/internal/observable/fromEventPattern.ts","../../../src/internal/observable/generate.ts","../../../src/internal/observable/iif.ts","../../../src/internal/util/isNumeric.ts","../../../src/internal/observable/interval.ts","../../../src/internal/observable/merge.ts","../../../src/internal/observable/never.ts","../../../src/internal/observable/onErrorResumeNext.ts","../../../src/internal/observable/pairs.ts","../../../src/internal/util/not.ts","../../../src/internal/operators/filter.ts","../../../src/internal/observable/partition.ts","../../../src/internal/observable/race.ts","../../../src/internal/observable/range.ts","../../../src/internal/observable/timer.ts","../../../src/internal/observable/using.ts","../../../src/internal/observable/zip.ts","../src/index.ts","../../../src/internal/operators/audit.ts","../../../src/internal/operators/auditTime.ts","../../../src/internal/operators/buffer.ts","../../../src/internal/operators/bufferCount.ts","../../../src/internal/operators/bufferTime.ts","../../../src/internal/operators/bufferToggle.ts","../../../src/internal/operators/bufferWhen.ts","../../../src/internal/operators/catchError.ts","../../../src/internal/operators/combineAll.ts","../../../src/internal/operators/combineLatest.ts","../../../src/internal/operators/concat.ts","../../../src/internal/operators/concatMap.ts","../../../src/internal/operators/concatMapTo.ts","../../../src/internal/operators/count.ts","../../../src/internal/operators/debounce.ts","../../../src/internal/operators/debounceTime.ts","../../../src/internal/operators/defaultIfEmpty.ts","../../../src/internal/util/isDate.ts","../../../src/internal/operators/delay.ts","../../../src/internal/operators/delayWhen.ts","../../../src/internal/operators/dematerialize.ts","../../../src/internal/operators/distinct.ts","../../../src/internal/operators/distinctUntilChanged.ts","../../../src/internal/operators/distinctUntilKeyChanged.ts","../../../src/internal/operators/throwIfEmpty.ts","../../../src/internal/operators/take.ts","../../../src/internal/operators/elementAt.ts","../../../src/internal/operators/endWith.ts","../../../src/internal/operators/every.ts","../../../src/internal/operators/exhaust.ts","../../../src/internal/operators/exhaustMap.ts","../../../src/internal/operators/expand.ts","../../../src/internal/operators/finalize.ts","../../../src/internal/operators/find.ts","../../../src/internal/operators/findIndex.ts","../../../src/internal/operators/first.ts","../../../src/internal/operators/ignoreElements.ts","../../../src/internal/operators/isEmpty.ts","../../../src/internal/operators/takeLast.ts","../../../src/internal/operators/last.ts","../../../src/internal/operators/mapTo.ts","../../../src/internal/operators/materialize.ts","../../../src/internal/operators/scan.ts","../../../src/internal/operators/reduce.ts","../../../src/internal/operators/max.ts","../../../src/internal/operators/merge.ts","../../../src/internal/operators/mergeMapTo.ts","../../../src/internal/operators/mergeScan.ts","../../../src/internal/operators/min.ts","../../../src/internal/operators/multicast.ts","../../../src/internal/operators/onErrorResumeNext.ts","../../../src/internal/operators/pairwise.ts","../../../src/internal/operators/partition.ts","../../../src/internal/operators/pluck.ts","../../../src/internal/operators/publish.ts","../../../src/internal/operators/publishBehavior.ts","../../../src/internal/operators/publishLast.ts","../../../src/internal/operators/publishReplay.ts","../../../src/internal/operators/race.ts","../../../src/internal/operators/repeat.ts","../../../src/internal/operators/repeatWhen.ts","../../../src/internal/operators/retry.ts","../../../src/internal/operators/retryWhen.ts","../../../src/internal/operators/sample.ts","../../../src/internal/operators/sampleTime.ts","../../../src/internal/operators/sequenceEqual.ts","../../../src/internal/operators/share.ts","../../../src/internal/operators/shareReplay.ts","../../../src/internal/operators/single.ts","../../../src/internal/operators/skip.ts","../../../src/internal/operators/skipLast.ts","../../../src/internal/operators/skipUntil.ts","../../../src/internal/operators/skipWhile.ts","../../../src/internal/operators/startWith.ts","../../../src/internal/observable/SubscribeOnObservable.ts","../../../src/internal/operators/subscribeOn.ts","../../../src/internal/operators/switchMap.ts","../../../src/internal/operators/switchAll.ts","../../../src/internal/operators/switchMapTo.ts","../../../src/internal/operators/takeUntil.ts","../../../src/internal/operators/takeWhile.ts","../../../src/internal/operators/tap.ts","../../../src/internal/operators/throttle.ts","../../../src/internal/operators/throttleTime.ts","../../../src/internal/operators/timeInterval.ts","../../../src/internal/operators/timeoutWith.ts","../../../src/internal/operators/timeout.ts","../../../src/internal/operators/timestamp.ts","../../../src/internal/operators/toArray.ts","../../../src/internal/operators/window.ts","../../../src/internal/operators/windowCount.ts","../../../src/internal/operators/windowTime.ts","../../../src/internal/operators/windowToggle.ts","../../../src/internal/operators/windowWhen.ts","../../../src/internal/operators/withLatestFrom.ts","../../../src/internal/operators/zip.ts","../../../src/internal/operators/zipAll.ts","../../src/operators/index.ts","../node_modules/immutable/dist/immutable.es.js","logic/search/Skill.ts","logic/search/LeveledSkill.ts","logic/search/searchBuild.ts","logic/search/PartsCandidate.ts","logic/search/search.ts","logic/search/index.ts","logic/search/SetSkill.ts","logic/search/ArmorSet.ts","logic/search/ArmorPart.ts","logic/search/Decoration.ts","logic/search/Decorations.ts","logic/search/searchContext.ts","logic/search/search-in-webworker.ts","../node_modules/.pnpm/registry.npmjs.org/parcel-bundler/1.12.4/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__spreadArrays","il","k","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","DELETE","SHIFT","SIZE","MASK","NOT_SET","MakeRef","SetRef","ref","OwnerID","ensureSize","iter","size","undefined","__iterate","returnTrue","wrapIndex","index","uint32Index","NaN","wholeSlice","begin","end","isNeg","resolveBegin","resolveIndex","resolveEnd","defaultIndex","Infinity","Math","max","min","IS_COLLECTION_SYMBOL","isCollection","maybeCollection","Boolean","IS_KEYED_SYMBOL","isKeyed","maybeKeyed","IS_INDEXED_SYMBOL","isIndexed","maybeIndexed","isAssociative","maybeAssociative","Collection","Seq","KeyedCollection","KeyedSeq","IndexedCollection","IndexedSeq","SetCollection","SetSeq","Keyed","Indexed","Set","IS_SEQ_SYMBOL","isSeq","maybeSeq","IS_RECORD_SYMBOL","isRecord","maybeRecord","isImmutable","maybeImmutable","IS_ORDERED_SYMBOL","isOrdered","maybeOrdered","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","toString","KEYS","VALUES","ENTRIES","inspect","toSource","iteratorValue","type","iteratorResult","iteratorDone","hasIterator","maybeIterable","getIteratorFn","isIterator","maybeIterator","getIterator","iterable","iteratorFn","isArrayLike","isArray","Number","isInteger","keys","Collection$$1","emptySequence","toSeq","seqFromValue","__toString","cacheResult","_cache","__iterateUncached","entrySeq","toArray","fn","reverse","cache","entry","__iterator","__iteratorUncached","toKeyedSeq","fromEntrySeq","keyedSeqFromValue","toIndexedSeq","indexedSeqFromValue","of","toSetSeq","ArraySeq","array","_array","get","notSetValue","has","ii","ObjectSeq","object","_object","_keys","CollectionSeq","collection","_collection","iterations","EMPTY_SEQ","seq","maybeIndexedSeqFromValue","IS_MAP_SYMBOL","isMap","maybeMap","isOrderedMap","maybeOrderedMap","isValueObject","maybeValue","equals","hashCode","is","valueA","valueB","valueOf","imul","smi","i32","defaultValueOf","hash","hashNumber","STRING_HASH_CACHE_MIN_STRLEN","cachedHashString","hashString","hashJSObj","Error","string","hashed","stringHashCache","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","charCodeAt","obj","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","getIENodeHash","objHashUID","set","isExtensible","enumerable","configurable","writable","nodeType","node","uniqueID","documentElement","WeakMap","ToKeyedSequence","KeyedSeq$$1","indexed","useKeys","_iter","_useKeys","valueSeq","this$1","reversedSequence","reverseFactory","map","mapper","context","mappedSequence","mapFactory","ToIndexedSequence","IndexedSeq$$1","includes","ToSetSequence","SetSeq$$1","FromEntriesSequence","entries","validateEntry","indexedCollection","cacheResultThrough","flipFactory","flipSequence","makeSequence","flip","filterFactory","predicate","filterSequence","countByFactory","grouper","groups","Map","asMutable","update","asImmutable","groupByFactory","isKeyedIter","OrderedMap","coerce","collectionClass","arr","reify","sliceFactory","originalSize","resolvedBegin","resolvedEnd","resolvedSize","sliceSize","sliceSeq","skipped","isSkipping","takeWhileFactory","takeSequence","iterating","skipWhileFactory","skipSequence","skipping","concatFactory","values","isKeyedCollection","iters","filter","singleton","concatSeq","flatten","reduce","sum","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","stack","flatMapFactory","interposeFactory","separator","interposedSequence","sortFactory","comparator","defaultComparator","sort","forEach","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","zipAll","zipSequence","sizes","iterators","isDone","steps","every","some","arrCopy","offset","len","newArr","invariant","condition","assertNotInfinite","coerceKeyPath","keyPath","isPlainObj","name","isDataStructure","quoteString","JSON","stringify","String","_ignoreError","shallowCopy","from","to","remove","collectionCopy","splice","updateIn","updater","updatedValue","updateInDeeply","inImmutable","existing","wasNotSet","existingValue","newValue","slice","nextExisting","nextUpdated","emptyMap","setIn","setIn$1","removeIn","deleteIn","update$1","updateIn$1","merge","mergeIntoKeyedWith","mergeWith","merger","collections","collection$1","__ownerID","withMutations","mergeIntoCollection","oldVal","merge$1","sources","mergeWithSources","mergeWith$1","mergeDeep","mergeDeepWithSources","mergeDeepWith","deepMergerWith","merged","mergeItem","hasVal","nextVal","deepMerger","oldValue","mergeDeep$1","mergeDeepWith$1","mergeIn","mergeDeepIn","mutable","wasAltered","__ensureOwner","__altered","KeyedCollection$$1","keyValues","_root","updateMap","deleteAll","clear","__hash","sortBy","MapIterator","iterate","ownerID","makeMap","MapPrototype","removeAll","ArrayMapNode","keyHash","didChangeSize","didAlter","removed","idx","exists","MAX_ARRAY_MAP_SIZE","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","nodes","bit","popCount","keyHashFrag","newNode","updateNode","MAX_BITMAP_INDEXED_SIZE","expandNodes","isLeafNode","newBitmap","newNodes","setAt","spliceOut","spliceIn","HashArrayMapNode","count","newCount","MIN_HASH_ARRAY_MAP_SIZE","packNodes","HashCollisionNode","mergeIntoNode","ValueNode","keyMatch","maxIndex","Iterator$$1","_type","_reverse","_stack","mapIteratorFrame","mapIteratorValue","subNode","__prev","prev","root","hash$$1","EMPTY_MAP","newRoot","newSize","idx1","idx2","excluding","packedII","packedNodes","including","expandedNodes","x","val","canEdit","newArray","newLen","after","IS_LIST_SYMBOL","isList","maybeList","List","IndexedCollection$$1","empty","emptyList","makeList","VNode","list","setSize","_origin","listNodeFor","updateList","insert","_capacity","_level","_tail","oldSize","setListBounds","unshift","arguments$1","seqs","argument","iterateList","DONE","ListPrototype","removeBefore","level","originIndex","removingFirst","newChild","oldChild","editable","editableVNode","removeAfter","sizeIndex","left","right","tailPos","getTailOffset","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","origin","capacity","EMPTY_LIST","newTail","updateVNode","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","Map$$1","emptyOrderedMap","_map","_list","updateOrderedMap","newMap","newList","makeOrderedMap","omap","EMPTY_ORDERED_MAP","toMap","IS_STACK_SYMBOL","isStack","maybeStack","Stack","emptyStack","pushAll","head","_head","peek","makeStack","StackPrototype","unshiftAll","EMPTY_STACK","IS_SET_SYMBOL","isSet","maybeSet","isOrderedSet","maybeOrderedSet","deepEqual","notAssociative","flipped","allEqual","bSize","mixin","ctor","methods","keyCopier","toJS","result$1","SetCollection$$1","emptySet","add","fromKeys","keySeq","intersect","sets","SetPrototype","union","updateSet","removes","adds","mapped","toRemove","subtract","OrderedSet","__empty","__make","makeSet","EMPTY_SET","Range","start","abs","_start","_end","_step","ceil","EMPTY_RANGE","searchValue","possibleIndex","floor","offsetValue","lastIndexOf","other","getIn","searchKeyPath","getIn$1","hasIn","hasIn$1","toObject","isIterable","useTuples","toJS$1","toOrderedMap","toOrderedSet","toSet","toStack","toList","__toStringMapper","join","returnValue","find","findEntry","sideEffect","bind","joined","isFirst","reduce$1","reducer","initialReduction","reduceRight","not","butLast","isEmpty","countBy","entriesSequence","entryMapper","filterNot","found","findKey","findLast","findLastEntry","findLastKey","first","flatMap","searchKey","groupBy","isSubset","isSuperset","keyOf","keyMapper","last","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","rest","skip","amount","skipLast","skipWhile","skipUntil","take","takeLast","takeWhile","takeUntil","hashCollection","CollectionPrototype","toJSON","chain","contains","mapEntries","mapKeys","KeyedCollectionPrototype","findIndex","removeNum","numArgs","spliced","findLastIndex","interpose","interleave","zipped","interleaved","zip","defaultZipper","zipWith","IndexedCollectionPrototype","reduction","useFirst","ordered","keyed","h","hashMerge","murmurHashOfSize","Set$$1","emptyOrderedSet","OrderedSetPrototype","makeOrderedSet","EMPTY_ORDERED_SET","Record","defaultValues","hasInitialized","RecordType","indices","RecordTypePrototype","_indices","_name","_defaultValues","propName","console","warn","recordName","setProp","_values","l","RecordPrototype","displayName","str","recordSeq","newValues","makeRecord","getDescriptiveName","likeRecord","record","getPrototypeOf","Repeat","times","_value","EMPTY_REPEAT","fromJS","converter","fromJSWith","defaultConverter","parentValue","converted","version","Immutable","Iterable","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","message","overlay","createErrorOverlay","document","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","Function","deps","cached","cb"],"mappings":"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","file":"search-in-webworker.22eb00b8.js","sourceRoot":"../src","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export function isFunction(x: any): x is Function {\n  return typeof x === 'function';\n}\n","let _enable_super_gross_mode_that_will_cause_bad_things = false;\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport const config = {\n  /**\n   * The promise constructor used by default for methods such as\n   * {@link toPromise} and {@link forEach}\n   */\n  Promise: undefined as PromiseConstructorLike,\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n   * FOR MIGRATION REASONS.\n   */\n  set useDeprecatedSynchronousErrorHandling(value: boolean) {\n    if (value) {\n      const error = new Error();\n      console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n    } else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n      console.log('RxJS: Back to a better error behavior. Thank you. <3');\n    }\n    _enable_super_gross_mode_that_will_cause_bad_things = value;\n  },\n\n  get useDeprecatedSynchronousErrorHandling() {\n    return _enable_super_gross_mode_that_will_cause_bad_things;\n  },\n};\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nexport function hostReportError(err: any) {\n  setTimeout(() => { throw err; }, 0);\n}","import { Observer } from './types';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nexport const empty: Observer<any> = {\n  closed: true,\n  next(value: any): void { /* noop */},\n  error(err: any): void {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      throw err;\n    } else {\n      hostReportError(err);\n    }\n  },\n  complete(): void { /*noop*/ }\n};\n","export const isArray = (() => Array.isArray || (<T>(x: any): x is T[] => x && typeof x.length === 'number'))();\n","export function isObject(x: any): x is Object {\n  return x !== null && typeof x === 'object';\n}\n","export interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  new(errors: any[]): UnsubscriptionError;\n}\n\nconst UnsubscriptionErrorImpl = (() => {\n  function UnsubscriptionErrorImpl(this: any, errors: any[]) {\n    Error.call(this);\n    this.message = errors ?\n      `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}` : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n    return this;\n  }\n\n  UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n\n  return UnsubscriptionErrorImpl;\n})();\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = UnsubscriptionErrorImpl as any;","import { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic } from './types';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nexport class Subscription implements SubscriptionLike {\n  /** @nocollapse */\n  public static EMPTY: Subscription = (function(empty: any) {\n    empty.closed = true;\n    return empty;\n  }(new Subscription()));\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   * @type {boolean}\n   */\n  public closed: boolean = false;\n\n  /** @internal */\n  protected _parentOrParents: Subscription | Subscription[] = null;\n  /** @internal */\n  private _subscriptions: SubscriptionLike[] = null;\n\n  /**\n   * @param {function(): void} [unsubscribe] A function describing how to\n   * perform the disposal of resources when the `unsubscribe` method is called.\n   */\n  constructor(unsubscribe?: () => void) {\n    if (unsubscribe) {\n      (<any> this)._unsubscribe = unsubscribe;\n    }\n  }\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   * @return {void}\n   */\n  unsubscribe(): void {\n    let errors: any[];\n\n    if (this.closed) {\n      return;\n    }\n\n    let { _parentOrParents, _unsubscribe, _subscriptions } = (<any> this);\n\n    this.closed = true;\n    this._parentOrParents = null;\n    // null out _subscriptions first so any child subscriptions that attempt\n    // to remove themselves from this subscription will noop\n    this._subscriptions = null;\n\n    if (_parentOrParents instanceof Subscription) {\n      _parentOrParents.remove(this);\n    } else if (_parentOrParents !== null) {\n      for (let index = 0; index < _parentOrParents.length; ++index) {\n        const parent = _parentOrParents[index];\n        parent.remove(this);\n      }\n    }\n\n    if (isFunction(_unsubscribe)) {\n      try {\n        _unsubscribe.call(this);\n      } catch (e) {\n        errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n      }\n    }\n\n    if (isArray(_subscriptions)) {\n      let index = -1;\n      let len = _subscriptions.length;\n\n      while (++index < len) {\n        const sub = _subscriptions[index];\n        if (isObject(sub)) {\n          try {\n            sub.unsubscribe();\n          } catch (e) {\n            errors = errors || [];\n            if (e instanceof UnsubscriptionError) {\n              errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n            } else {\n              errors.push(e);\n            }\n          }\n        }\n      }\n    }\n\n    if (errors) {\n      throw new UnsubscriptionError(errors);\n    }\n  }\n\n  /**\n   * Adds a tear down to be called during the unsubscribe() of this\n   * Subscription. Can also be used to add a child subscription.\n   *\n   * If the tear down being added is a subscription that is already\n   * unsubscribed, is the same reference `add` is being called on, or is\n   * `Subscription.EMPTY`, it will not be added.\n   *\n   * If this subscription is already in an `closed` state, the passed\n   * tear down logic will be executed immediately.\n   *\n   * When a parent subscription is unsubscribed, any child subscriptions that were added to it are also unsubscribed.\n   *\n   * @param {TeardownLogic} teardown The additional logic to execute on\n   * teardown.\n   * @return {Subscription} Returns the Subscription used or created to be\n   * added to the inner subscriptions list. This Subscription can be used with\n   * `remove()` to remove the passed teardown logic from the inner subscriptions\n   * list.\n   */\n  add(teardown: TeardownLogic): Subscription {\n    let subscription = (<Subscription>teardown);\n\n    if (!(<any>teardown)) {\n      return Subscription.EMPTY;\n    }\n\n    switch (typeof teardown) {\n      case 'function':\n        subscription = new Subscription(<(() => void)>teardown);\n      case 'object':\n        if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n          // This also covers the case where `subscription` is `Subscription.EMPTY`, which is always in `closed` state.\n          return subscription;\n        } else if (this.closed) {\n          subscription.unsubscribe();\n          return subscription;\n        } else if (!(subscription instanceof Subscription)) {\n          const tmp = subscription;\n          subscription = new Subscription();\n          subscription._subscriptions = [tmp];\n        }\n        break;\n      default: {\n        throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n      }\n    }\n\n    // Add `this` as parent of `subscription` if that's not already the case.\n    let { _parentOrParents } = subscription;\n    if (_parentOrParents === null) {\n      // If we don't have a parent, then set `subscription._parents` to\n      // the `this`, which is the common case that we optimize for.\n      subscription._parentOrParents = this;\n    } else if (_parentOrParents instanceof Subscription) {\n      if (_parentOrParents === this) {\n        // The `subscription` already has `this` as a parent.\n        return subscription;\n      }\n      // If there's already one parent, but not multiple, allocate an\n      // Array to store the rest of the parent Subscriptions.\n      subscription._parentOrParents = [_parentOrParents, this];\n    } else if (_parentOrParents.indexOf(this) === -1) {\n      // Only add `this` to the _parentOrParents list if it's not already there.\n      _parentOrParents.push(this);\n    } else {\n      // The `subscription` already has `this` as a parent.\n      return subscription;\n    }\n\n    // Optimize for the common case when adding the first subscription.\n    const subscriptions = this._subscriptions;\n    if (subscriptions === null) {\n      this._subscriptions = [subscription];\n    } else {\n      subscriptions.push(subscription);\n    }\n\n    return subscription;\n  }\n\n  /**\n   * Removes a Subscription from the internal list of subscriptions that will\n   * unsubscribe during the unsubscribe process of this Subscription.\n   * @param {Subscription} subscription The subscription to remove.\n   * @return {void}\n   */\n  remove(subscription: Subscription): void {\n    const subscriptions = this._subscriptions;\n    if (subscriptions) {\n      const subscriptionIndex = subscriptions.indexOf(subscription);\n      if (subscriptionIndex !== -1) {\n        subscriptions.splice(subscriptionIndex, 1);\n      }\n    }\n  }\n}\n\nfunction flattenUnsubscriptionErrors(errors: any[]) {\n return errors.reduce((errs, err) => errs.concat((err instanceof UnsubscriptionError) ? err.errors : err), []);\n}\n","/** @deprecated do not use, this is no longer checked by RxJS internals */\nexport const rxSubscriber = (() =>\n  typeof Symbol === 'function'\n    ? Symbol('rxSubscriber')\n    : '@@rxSubscriber_' + Math.random())();\n\n/**\n * @deprecated use rxSubscriber instead\n */\nexport const $$rxSubscriber = rxSubscriber;\n","import { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Observer, PartialObserver, TeardownLogic } from './types';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n\n  [rxSubscriberSymbol]() { return this; }\n\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @nocollapse\n   */\n  static create<T>(next?: (x?: T) => void,\n                   error?: (e?: any) => void,\n                   complete?: () => void): Subscriber<T> {\n    const subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  }\n\n  /** @internal */ syncErrorValue: any = null;\n  /** @internal */ syncErrorThrown: boolean = false;\n  /** @internal */ syncErrorThrowable: boolean = false;\n\n  protected isStopped: boolean = false;\n  protected destination: PartialObserver<any> | Subscriber<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n   * defined Observer or a `next` callback function.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   */\n  constructor(destinationOrNext?: PartialObserver<any> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    switch (arguments.length) {\n      case 0:\n        this.destination = emptyObserver;\n        break;\n      case 1:\n        if (!destinationOrNext) {\n          this.destination = emptyObserver;\n          break;\n        }\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            this.destination = destinationOrNext;\n            destinationOrNext.add(this);\n          } else {\n            this.syncErrorThrowable = true;\n            this.destination = new SafeSubscriber<T>(this, <PartialObserver<any>> destinationOrNext);\n          }\n          break;\n        }\n      default:\n        this.syncErrorThrowable = true;\n        this.destination = new SafeSubscriber<T>(this, <((value: T) => void)> destinationOrNext, error, complete);\n        break;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param {T} [value] The `next` value.\n   * @return {void}\n   */\n  next(value?: T): void {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param {any} [err] The `error` exception.\n   * @return {void}\n   */\n  error(err?: any): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   * @return {void}\n   */\n  complete(): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (this.closed) {\n      return;\n    }\n    this.isStopped = true;\n    super.unsubscribe();\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    this.destination.error(err);\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.destination.complete();\n    this.unsubscribe();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribeAndRecycle(): Subscriber<T> {\n    const {  _parentOrParents } = this;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SafeSubscriber<T> extends Subscriber<T> {\n\n  private _context: any;\n\n  constructor(private _parentSubscriber: Subscriber<T>,\n              observerOrNext?: PartialObserver<T> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    let next: ((value: T) => void);\n    let context: any = this;\n\n    if (isFunction(observerOrNext)) {\n      next = (<((value: T) => void)> observerOrNext);\n    } else if (observerOrNext) {\n      next = (<PartialObserver<T>> observerOrNext).next;\n      error = (<PartialObserver<T>> observerOrNext).error;\n      complete = (<PartialObserver<T>> observerOrNext).complete;\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n        if (isFunction(context.unsubscribe)) {\n          this.add(<() => void> context.unsubscribe.bind(context));\n        }\n        context.unsubscribe = this.unsubscribe.bind(this);\n      }\n    }\n\n    this._context = context;\n    this._next = next;\n    this._error = error;\n    this._complete = complete;\n  }\n\n  next(value?: T): void {\n    if (!this.isStopped && this._next) {\n      const { _parentSubscriber } = this;\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  error(err?: any): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      const { useDeprecatedSynchronousErrorHandling } = config;\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n        this.unsubscribe();\n      }\n    }\n  }\n\n  complete(): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      if (this._complete) {\n        const wrappedComplete = () => this._complete.call(this._context);\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  private __tryOrUnsub(fn: Function, value?: any): void {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  }\n\n  private __tryOrSetError(parent: Subscriber<T>, fn: Function, value?: any): boolean {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _unsubscribe(): void {\n    const { _parentSubscriber } = this;\n    this._context = null;\n    this._parentSubscriber = null;\n    _parentSubscriber.unsubscribe();\n  }\n}\n","import { Subscriber } from '../Subscriber';\nimport { Subject } from '../Subject';\n\n/**\n * Determines whether the ErrorObserver is closed or stopped or has a\n * destination that is closed or stopped - in which case errors will\n * need to be reported via a different mechanism.\n * @param observer the observer\n */\nexport function canReportError(observer: Subscriber<any> | Subject<any>): boolean {\n  while (observer) {\n    const { closed, destination, isStopped } = observer as any;\n    if (closed || isStopped) {\n      return false;\n    } else if (destination && destination instanceof Subscriber) {\n      observer = destination;\n    } else {\n      observer = null;\n    }\n  }\n  return true;\n}\n","import { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nimport { PartialObserver } from '../types';\n\nexport function toSubscriber<T>(\n  nextOrObserver?: PartialObserver<T> | ((value: T) => void),\n  error?: (error: any) => void,\n  complete?: () => void): Subscriber<T> {\n\n  if (nextOrObserver) {\n    if (nextOrObserver instanceof Subscriber) {\n      return (<Subscriber<T>> nextOrObserver);\n    }\n\n    if (nextOrObserver[rxSubscriberSymbol]) {\n      return nextOrObserver[rxSubscriberSymbol]();\n    }\n  }\n\n  if (!nextOrObserver && !error && !complete) {\n    return new Subscriber(emptyObserver);\n  }\n\n  return new Subscriber(nextOrObserver, error, complete);\n}\n","/** Symbol.observable addition */\n/* Note: This will add Symbol.observable globally for all TypeScript users,\n  however, we are no longer polyfilling Symbol.observable */\ndeclare global {\n  interface SymbolConstructor {\n    readonly observable: symbol;\n  }\n}\n\n/** Symbol.observable or a string \"@@observable\". Used for interop */\nexport const observable = (() => typeof Symbol === 'function' && Symbol.observable || '@@observable')();\n","/* tslint:disable:no-empty */\nexport function noop() { }\n","import { noop } from './noop';\nimport { UnaryFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function pipe<T>(): UnaryFunction<T, T>;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>, ...fns: UnaryFunction<any, any>[]): UnaryFunction<T, {}>;\n/* tslint:enable:max-line-length */\n\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (!fns) {\n    return noop as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n","import { Operator } from './Operator';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, PartialObserver, Subscribable } from './types';\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { iif } from './observable/iif';\nimport { throwError } from './observable/throwError';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nexport class Observable<T> implements Subscribable<T> {\n\n  /** Internal implementation detail, do not use directly. */\n  public _isScalar: boolean = false;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  source: Observable<any>;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  operator: Operator<any, T>;\n\n  /**\n   * @constructor\n   * @param {Function} subscribe the function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new cold Observable by calling the Observable constructor\n   * @static true\n   * @owner Observable\n   * @method create\n   * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n   * @return {Observable} a new cold observable\n   * @nocollapse\n   * @deprecated use new Observable() instead\n   */\n  static create: Function = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  }\n\n  /**\n   * Creates a new Observable, with this Observable as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @method lift\n   * @param {Operator} operator the operator defining the operation to take on the observable\n   * @return {Observable} a new observable with the Operator applied\n   */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observer?: PartialObserver<T>): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: null | undefined, error: null | undefined, complete: () => void): Subscription;\n  /** @deprecated Use an observer instead of an error callback */\n  subscribe(next: null | undefined, error: (error: any) => void, complete?: () => void): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: (value: T) => void, error: null | undefined, complete: () => void): Subscription;\n  subscribe(next?: (value: T) => void, error?: (error: any) => void, complete?: () => void): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided, all errors will\n   * be left uncaught.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of Observer,\n   * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * ## Example\n   * ### Subscribe with an Observer\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Subscribe with functions\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Cancel a subscription\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe(\n   *   num => console.log(num),\n   *   undefined,\n   *   () => {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * );\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // \"unsubscribed!\" after 2.5s\n   * ```\n   *\n   * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n   *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n   *  Observable.\n   * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n   *  the error will be thrown as unhandled.\n   * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n   * @return {ISubscription} a subscription reference to the registered handlers\n   * @method subscribe\n   */\n  subscribe(observerOrNext?: PartialObserver<T> | ((value: T) => void),\n            error?: (error: any) => void,\n            complete?: () => void): Subscription {\n\n    const { operator } = this;\n    const sink = toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(\n        this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n        this._subscribe(sink) :\n        this._trySubscribe(sink)\n      );\n    }\n\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  }\n\n  /**\n   * @method forEach\n   * @param {Function} next a handler for each value emitted by the observable\n   * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n   * @return {Promise} a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   */\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      // Must be declared in a separate statement to avoid a ReferenceError when\n      // accessing subscription below in the closure due to Temporal Dead Zone.\n      let subscription: Subscription;\n      subscription = this.subscribe((value) => {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    }) as Promise<void>;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    const { source } = this;\n    return source && source.subscribe(subscriber);\n  }\n\n  // `if` and `throw` are special snow flakes, the compiler sees them as reserved words. Deprecated in\n  // favor of iif and throwError functions.\n  /**\n   * @nocollapse\n   * @deprecated In favor of iif creation function: import { iif } from 'rxjs';\n   */\n  static if: typeof iif;\n  /**\n   * @nocollapse\n   * @deprecated In favor of throwError creation function: import { throwError } from 'rxjs';\n   */\n  static throw: typeof throwError;\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @method Symbol.observable\n   * @return {Observable} this instance of the observable\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>): Observable<D>;\n  pipe<A, B, C, D, E>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>): Observable<E>;\n  pipe<A, B, C, D, E, F>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>, ...operations: OperatorFunction<any, any>[]): Observable<{}>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   * @method pipe\n   * @return {Observable} the Observable result of all of the operators having\n   * been called in the order they were passed in.\n   *\n   * ### Example\n   * ```ts\n   * import { interval } from 'rxjs';\n   * import { map, filter, scan } from 'rxjs/operators';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x))\n   * ```\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    if (operations.length === 0) {\n      return this as any;\n    }\n\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  toPromise<T>(this: Observable<T>): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: typeof Promise): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: PromiseConstructorLike): Promise<T>;\n  /* tslint:enable:max-line-length */\n\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: any;\n      this.subscribe((x: T) => value = x, (err: any) => reject(err), () => resolve(value));\n    }) as Promise<T>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}\n","export interface ObjectUnsubscribedError extends Error {\n}\n\nexport interface ObjectUnsubscribedErrorCtor {\n  new(): ObjectUnsubscribedError;\n}\n\nconst ObjectUnsubscribedErrorImpl = (() => {\n  function ObjectUnsubscribedErrorImpl(this: any) {\n    Error.call(this);\n    this.message = 'object unsubscribed';\n    this.name = 'ObjectUnsubscribedError';\n    return this;\n  }\n\n  ObjectUnsubscribedErrorImpl.prototype = Object.create(Error.prototype);\n\n  return ObjectUnsubscribedErrorImpl;\n})();\n\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nexport const ObjectUnsubscribedError: ObjectUnsubscribedErrorCtor = ObjectUnsubscribedErrorImpl as any;","import { Subject } from './Subject';\nimport { Observer } from './types';\nimport { Subscription } from './Subscription';\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SubjectSubscription<T> extends Subscription {\n  closed: boolean = false;\n\n  constructor(public subject: Subject<T>, public subscriber: Observer<T>) {\n    super();\n  }\n\n  unsubscribe() {\n    if (this.closed) {\n      return;\n    }\n\n    this.closed = true;\n\n    const subject = this.subject;\n    const observers = subject.observers;\n\n    this.subject = null;\n\n    if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n      return;\n    }\n\n    const subscriberIndex = observers.indexOf(this.subscriber);\n\n    if (subscriberIndex !== -1) {\n      observers.splice(subscriberIndex, 1);\n    }\n  }\n}\n","import { Operator } from './Operator';\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { Observer, SubscriptionLike, TeardownLogic } from './types';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\n\n/**\n * @class SubjectSubscriber<T>\n */\nexport class SubjectSubscriber<T> extends Subscriber<T> {\n  constructor(protected destination: Subject<T>) {\n    super(destination);\n  }\n}\n\n/**\n * A Subject is a special type of Observable that allows values to be\n * multicasted to many Observers. Subjects are like EventEmitters.\n *\n * Every Subject is an Observable and an Observer. You can subscribe to a\n * Subject, and you can call next to feed values as well as error and complete.\n *\n * @class Subject<T>\n */\nexport class Subject<T> extends Observable<T> implements SubscriptionLike {\n\n  [rxSubscriberSymbol]() {\n    return new SubjectSubscriber(this);\n  }\n\n  observers: Observer<T>[] = [];\n\n  closed = false;\n\n  isStopped = false;\n\n  hasError = false;\n\n  thrownError: any = null;\n\n  constructor() {\n    super();\n  }\n\n  /**@nocollapse\n   * @deprecated use new Subject() instead\n  */\n  static create: Function = <T>(destination: Observer<T>, source: Observable<T>): AnonymousSubject<T> => {\n    return new AnonymousSubject<T>(destination, source);\n  }\n\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const subject = new AnonymousSubject(this, this);\n    subject.operator = <any>operator;\n    return <any>subject;\n  }\n\n  next(value?: T) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    if (!this.isStopped) {\n      const { observers } = this;\n      const len = observers.length;\n      const copy = observers.slice();\n      for (let i = 0; i < len; i++) {\n        copy[i].next(value);\n      }\n    }\n  }\n\n  error(err: any) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.hasError = true;\n    this.thrownError = err;\n    this.isStopped = true;\n    const { observers } = this;\n    const len = observers.length;\n    const copy = observers.slice();\n    for (let i = 0; i < len; i++) {\n      copy[i].error(err);\n    }\n    this.observers.length = 0;\n  }\n\n  complete() {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.isStopped = true;\n    const { observers } = this;\n    const len = observers.length;\n    const copy = observers.slice();\n    for (let i = 0; i < len; i++) {\n      copy[i].complete();\n    }\n    this.observers.length = 0;\n  }\n\n  unsubscribe() {\n    this.isStopped = true;\n    this.closed = true;\n    this.observers = null;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _trySubscribe(subscriber: Subscriber<T>): TeardownLogic {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return super._trySubscribe(subscriber);\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>): Subscription {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.isStopped) {\n      subscriber.complete();\n      return Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      return new SubjectSubscription(this, subscriber);\n    }\n  }\n\n  /**\n   * Creates a new Observable with this Subject as the source. You can do this\n   * to create customize Observer-side logic of the Subject and conceal it from\n   * code that uses the Observable.\n   * @return {Observable} Observable that the Subject casts to\n   */\n  asObservable(): Observable<T> {\n    const observable = new Observable<T>();\n    (<any>observable).source = this;\n    return observable;\n  }\n}\n\n/**\n * @class AnonymousSubject<T>\n */\nexport class AnonymousSubject<T> extends Subject<T> {\n  constructor(protected destination?: Observer<T>, source?: Observable<T>) {\n    super();\n    this.source = source;\n  }\n\n  next(value: T) {\n    const { destination } = this;\n    if (destination && destination.next) {\n      destination.next(value);\n    }\n  }\n\n  error(err: any) {\n    const { destination } = this;\n    if (destination && destination.error) {\n      this.destination.error(err);\n    }\n  }\n\n  complete() {\n    const { destination } = this;\n    if (destination && destination.complete) {\n      this.destination.complete();\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>): Subscription {\n    const { source } = this;\n    if (source) {\n      return this.source.subscribe(subscriber);\n    } else {\n      return Subscription.EMPTY;\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\nimport { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { Observable } from '../Observable';\n\n/**\n * Make a {@link ConnectableObservable} behave like a ordinary observable and automates the way\n * you can connect to it.\n *\n * Internally it counts the subscriptions to the observable and subscribes (only once) to the source if\n * the number of subscriptions is larger than 0. If the number of subscriptions is smaller than 1, it\n * unsubscribes from the source. This way you can make sure that everything before the *published*\n * refCount has only a single subscription independently of the number of subscribers to the target\n * observable.\n *\n * Note that using the {@link share} operator is exactly the same as using the *publish* operator\n * (making the observable hot) and the *refCount* operator in a sequence.\n *\n * ![](refCount.png)\n *\n * ## Example\n *\n * In the following example there are two intervals turned into connectable observables\n * by using the *publish* operator. The first one uses the *refCount* operator, the\n * second one does not use it. You will notice that a connectable observable does nothing\n * until you call its connect function.\n *\n * ```ts\n * import { interval } from 'rxjs';\n * import { tap, publish, refCount } from 'rxjs/operators';\n *\n * // Turn the interval observable into a ConnectableObservable (hot)\n * const refCountInterval = interval(400).pipe(\n *   tap((num) => console.log(`refCount ${num}`)),\n *   publish(),\n *   refCount()\n * );\n *\n * const publishedInterval = interval(400).pipe(\n *   tap((num) => console.log(`publish ${num}`)),\n *   publish()\n * );\n *\n * refCountInterval.subscribe();\n * refCountInterval.subscribe();\n * // 'refCount 0' -----> 'refCount 1' -----> etc\n * // All subscriptions will receive the same value and the tap (and\n * // every other operator) before the publish operator will be executed\n * // only once per event independently of the number of subscriptions.\n *\n * publishedInterval.subscribe();\n * // Nothing happens until you call .connect() on the observable.\n * ```\n *\n * @see {@link ConnectableObservable}\n * @see {@link share}\n * @see {@link publish}\n */\nexport function refCount<T>(): MonoTypeOperatorFunction<T> {\n  return function refCountOperatorFunction(source: ConnectableObservable<T>): Observable<T> {\n    return source.lift(new RefCountOperator(source));\n  } as MonoTypeOperatorFunction<T>;\n}\n\nclass RefCountOperator<T> implements Operator<T, T> {\n  constructor(private connectable: ConnectableObservable<T>) {\n  }\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n\n    const { connectable } = this;\n    (<any> connectable)._refCount++;\n\n    const refCounter = new RefCountSubscriber(subscriber, connectable);\n    const subscription = source.subscribe(refCounter);\n\n    if (!refCounter.closed) {\n      (<any> refCounter).connection = connectable.connect();\n    }\n\n    return subscription;\n  }\n}\n\nclass RefCountSubscriber<T> extends Subscriber<T> {\n\n  private connection: Subscription;\n\n  constructor(destination: Subscriber<T>,\n              private connectable: ConnectableObservable<T>) {\n    super(destination);\n  }\n\n  protected _unsubscribe() {\n\n    const { connectable } = this;\n    if (!connectable) {\n      this.connection = null;\n      return;\n    }\n\n    this.connectable = null;\n    const refCount = (<any> connectable)._refCount;\n    if (refCount <= 0) {\n      this.connection = null;\n      return;\n    }\n\n    (<any> connectable)._refCount = refCount - 1;\n    if (refCount > 1) {\n      this.connection = null;\n      return;\n    }\n\n    ///\n    // Compare the local RefCountSubscriber's connection Subscription to the\n    // connection Subscription on the shared ConnectableObservable. In cases\n    // where the ConnectableObservable source synchronously emits values, and\n    // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n    // execution continues to here before the RefCountOperator has a chance to\n    // supply the RefCountSubscriber with the shared connection Subscription.\n    // For example:\n    // ```\n    // range(0, 10).pipe(\n    //   publish(),\n    //   refCount(),\n    //   take(5),\n    // )\n    // .subscribe();\n    // ```\n    // In order to account for this case, RefCountSubscriber should only dispose\n    // the ConnectableObservable's shared connection Subscription if the\n    // connection Subscription exists, *and* either:\n    //   a. RefCountSubscriber doesn't have a reference to the shared connection\n    //      Subscription yet, or,\n    //   b. RefCountSubscriber's connection Subscription reference is identical\n    //      to the shared connection Subscription\n    ///\n    const { connection } = this;\n    const sharedConnection = (<any> connectable)._connection;\n    this.connection = null;\n\n    if (sharedConnection && (!connection || sharedConnection === connection)) {\n      sharedConnection.unsubscribe();\n    }\n  }\n}\n","import { Subject, SubjectSubscriber } from '../Subject';\nimport { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { TeardownLogic } from '../types';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\n\n/**\n * @class ConnectableObservable<T>\n */\nexport class ConnectableObservable<T> extends Observable<T> {\n\n  protected _subject: Subject<T>;\n  protected _refCount: number = 0;\n  protected _connection: Subscription;\n  /** @internal */\n  _isComplete = false;\n\n  constructor(public source: Observable<T>,\n              protected subjectFactory: () => Subject<T>) {\n    super();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>) {\n    return this.getSubject().subscribe(subscriber);\n  }\n\n  protected getSubject(): Subject<T> {\n    const subject = this._subject;\n    if (!subject || subject.isStopped) {\n      this._subject = this.subjectFactory();\n    }\n    return this._subject;\n  }\n\n  connect(): Subscription {\n    let connection = this._connection;\n    if (!connection) {\n      this._isComplete = false;\n      connection = this._connection = new Subscription();\n      connection.add(this.source\n        .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n      if (connection.closed) {\n        this._connection = null;\n        connection = Subscription.EMPTY;\n      }\n    }\n    return connection;\n  }\n\n  refCount(): Observable<T> {\n    return higherOrderRefCount()(this) as Observable<T>;\n  }\n}\n\nexport const connectableObservableDescriptor: PropertyDescriptorMap = (() => {\n  const connectableProto = <any>ConnectableObservable.prototype;\n  return {\n    operator: { value: null as null },\n    _refCount: { value: 0, writable: true },\n    _subject: { value: null as null, writable: true },\n    _connection: { value: null as null, writable: true },\n    _subscribe: { value: connectableProto._subscribe },\n    _isComplete: { value: connectableProto._isComplete, writable: true },\n    getSubject: { value: connectableProto.getSubject },\n    connect: { value: connectableProto.connect },\n    refCount: { value: connectableProto.refCount }\n  };\n})();\n\nclass ConnectableSubscriber<T> extends SubjectSubscriber<T> {\n  constructor(destination: Subject<T>,\n              private connectable: ConnectableObservable<T>) {\n    super(destination);\n  }\n  protected _error(err: any): void {\n    this._unsubscribe();\n    super._error(err);\n  }\n  protected _complete(): void {\n    this.connectable._isComplete = true;\n    this._unsubscribe();\n    super._complete();\n  }\n  protected _unsubscribe() {\n    const connectable = <any>this.connectable;\n    if (connectable) {\n      this.connectable = null;\n      const connection = connectable._connection;\n      connectable._refCount = 0;\n      connectable._subject = null;\n      connectable._connection = null;\n      if (connection) {\n        connection.unsubscribe();\n      }\n    }\n  }\n}\n\nclass RefCountOperator<T> implements Operator<T, T> {\n  constructor(private connectable: ConnectableObservable<T>) {\n  }\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n\n    const { connectable } = this;\n    (<any> connectable)._refCount++;\n\n    const refCounter = new RefCountSubscriber(subscriber, connectable);\n    const subscription = source.subscribe(refCounter);\n\n    if (!refCounter.closed) {\n      (<any> refCounter).connection = connectable.connect();\n    }\n\n    return subscription;\n  }\n}\n\nclass RefCountSubscriber<T> extends Subscriber<T> {\n\n  private connection: Subscription;\n\n  constructor(destination: Subscriber<T>,\n              private connectable: ConnectableObservable<T>) {\n    super(destination);\n  }\n\n  protected _unsubscribe() {\n\n    const { connectable } = this;\n    if (!connectable) {\n      this.connection = null;\n      return;\n    }\n\n    this.connectable = null;\n    const refCount = (<any> connectable)._refCount;\n    if (refCount <= 0) {\n      this.connection = null;\n      return;\n    }\n\n    (<any> connectable)._refCount = refCount - 1;\n    if (refCount > 1) {\n      this.connection = null;\n      return;\n    }\n\n    ///\n    // Compare the local RefCountSubscriber's connection Subscription to the\n    // connection Subscription on the shared ConnectableObservable. In cases\n    // where the ConnectableObservable source synchronously emits values, and\n    // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n    // execution continues to here before the RefCountOperator has a chance to\n    // supply the RefCountSubscriber with the shared connection Subscription.\n    // For example:\n    // ```\n    // range(0, 10).pipe(\n    //   publish(),\n    //   refCount(),\n    //   take(5),\n    // ).subscribe();\n    // ```\n    // In order to account for this case, RefCountSubscriber should only dispose\n    // the ConnectableObservable's shared connection Subscription if the\n    // connection Subscription exists, *and* either:\n    //   a. RefCountSubscriber doesn't have a reference to the shared connection\n    //      Subscription yet, or,\n    //   b. RefCountSubscriber's connection Subscription reference is identical\n    //      to the shared connection Subscription\n    ///\n    const { connection } = this;\n    const sharedConnection = (<any> connectable)._connection;\n    this.connection = null;\n\n    if (sharedConnection && (!connection || sharedConnection === connection)) {\n      sharedConnection.unsubscribe();\n    }\n  }\n}\n","import { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subject } from '../Subject';\nimport { OperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function groupBy<T, K>(keySelector: (value: T) => K): OperatorFunction<T, GroupedObservable<K, T>>;\nexport function groupBy<T, K>(keySelector: (value: T) => K, elementSelector: void, durationSelector: (grouped: GroupedObservable<K, T>) => Observable<any>): OperatorFunction<T, GroupedObservable<K, T>>;\nexport function groupBy<T, K, R>(keySelector: (value: T) => K, elementSelector?: (value: T) => R, durationSelector?: (grouped: GroupedObservable<K, R>) => Observable<any>): OperatorFunction<T, GroupedObservable<K, R>>;\nexport function groupBy<T, K, R>(keySelector: (value: T) => K, elementSelector?: (value: T) => R, durationSelector?: (grouped: GroupedObservable<K, R>) => Observable<any>, subjectSelector?: () => Subject<R>): OperatorFunction<T, GroupedObservable<K, R>>;\n/* tslint:enable:max-line-length */\n\n/**\n * Groups the items emitted by an Observable according to a specified criterion,\n * and emits these grouped items as `GroupedObservables`, one\n * {@link GroupedObservable} per group.\n *\n * ![](groupBy.png)\n *\n * When the Observable emits an item, a key is computed for this item with the keySelector function.\n *\n * If a {@link GroupedObservable} for this key exists, this {@link GroupedObservable} emits. Elsewhere, a new\n * {@link GroupedObservable} for this key is created and emits.\n *\n * A {@link GroupedObservable} represents values belonging to the same group represented by a common key. The common\n * key is available as the key field of a {@link GroupedObservable} instance.\n *\n * The elements emitted by {@link GroupedObservable}s are by default the items emitted by the Observable, or elements\n * returned by the elementSelector function.\n *\n * ## Examples\n *\n * ### Group objects by id and return as array\n *\n * ```ts\n * import { of } from 'rxjs';\n * import { mergeMap, groupBy, reduce } from 'rxjs/operators';\n *\n * of(\n *   {id: 1, name: 'JavaScript'},\n *   {id: 2, name: 'Parcel'},\n *   {id: 2, name: 'webpack'},\n *   {id: 1, name: 'TypeScript'},\n *   {id: 3, name: 'TSLint'}\n * ).pipe(\n *   groupBy(p => p.id),\n *   mergeMap((group$) => group$.pipe(reduce((acc, cur) => [...acc, cur], []))),\n * )\n * .subscribe(p => console.log(p));\n *\n * // displays:\n * // [ { id: 1, name: 'JavaScript'},\n * //   { id: 1, name: 'TypeScript'} ]\n * //\n * // [ { id: 2, name: 'Parcel'},\n * //   { id: 2, name: 'webpack'} ]\n * //\n * // [ { id: 3, name: 'TSLint'} ]\n * ```\n *\n * ### Pivot data on the id field\n *\n * ```ts\n * import { of } from 'rxjs';\n * import { groupBy, map, mergeMap, reduce } from 'rxjs/operators';\n *\n * of(\n *   { id: 1, name: 'JavaScript' },\n *   { id: 2, name: 'Parcel' },\n *   { id: 2, name: 'webpack' },\n *   { id: 1, name: 'TypeScript' },\n *   { id: 3, name: 'TSLint' }\n * )\n *   .pipe(\n *     groupBy(p => p.id, p => p.name),\n *     mergeMap(group$ =>\n *       group$.pipe(reduce((acc, cur) => [...acc, cur], [`${group$.key}`]))\n *     ),\n *     map(arr => ({ id: parseInt(arr[0], 10), values: arr.slice(1) }))\n *  )\n *  .subscribe(p => console.log(p));\n *\n * // displays:\n * // { id: 1, values: [ 'JavaScript', 'TypeScript' ] }\n * // { id: 2, values: [ 'Parcel', 'webpack' ] }\n * // { id: 3, values: [ 'TSLint' ] }\n * ```\n *\n * @param {function(value: T): K} keySelector A function that extracts the key\n * for each item.\n * @param {function(value: T): R} [elementSelector] A function that extracts the\n * return element for each item.\n * @param {function(grouped: GroupedObservable<K,R>): Observable<any>} [durationSelector]\n * A function that returns an Observable to determine how long each group should\n * exist.\n * @return {Observable<GroupedObservable<K,R>>} An Observable that emits\n * GroupedObservables, each of which corresponds to a unique key value and each\n * of which emits those items from the source Observable that share that key\n * value.\n * @method groupBy\n * @owner Observable\n */\nexport function groupBy<T, K, R>(keySelector: (value: T) => K,\n                                 elementSelector?: ((value: T) => R) | void,\n                                 durationSelector?: (grouped: GroupedObservable<K, R>) => Observable<any>,\n                                 subjectSelector?: () => Subject<R>): OperatorFunction<T, GroupedObservable<K, R>> {\n  return (source: Observable<T>) =>\n    source.lift(new GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector));\n}\n\nexport interface RefCountSubscription {\n  count: number;\n  unsubscribe: () => void;\n  closed: boolean;\n  attemptedToUnsubscribe: boolean;\n}\n\nclass GroupByOperator<T, K, R> implements Operator<T, GroupedObservable<K, R>> {\n  constructor(private keySelector: (value: T) => K,\n              private elementSelector?: ((value: T) => R) | void,\n              private durationSelector?: (grouped: GroupedObservable<K, R>) => Observable<any>,\n              private subjectSelector?: () => Subject<R>) {\n  }\n\n  call(subscriber: Subscriber<GroupedObservable<K, R>>, source: any): any {\n    return source.subscribe(new GroupBySubscriber(\n      subscriber, this.keySelector, this.elementSelector, this.durationSelector, this.subjectSelector\n    ));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass GroupBySubscriber<T, K, R> extends Subscriber<T> implements RefCountSubscription {\n  private groups: Map<K, Subject<T | R>> = null;\n  public attemptedToUnsubscribe: boolean = false;\n  public count: number = 0;\n\n  constructor(destination: Subscriber<GroupedObservable<K, R>>,\n              private keySelector: (value: T) => K,\n              private elementSelector?: ((value: T) => R) | void,\n              private durationSelector?: (grouped: GroupedObservable<K, R>) => Observable<any>,\n              private subjectSelector?: () => Subject<R>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    let key: K;\n    try {\n      key = this.keySelector(value);\n    } catch (err) {\n      this.error(err);\n      return;\n    }\n\n    this._group(value, key);\n  }\n\n  private _group(value: T, key: K) {\n    let groups = this.groups;\n\n    if (!groups) {\n      groups = this.groups = new Map<K, Subject<T | R>>();\n    }\n\n    let group = groups.get(key);\n\n    let element: R;\n    if (this.elementSelector) {\n      try {\n        element = this.elementSelector(value);\n      } catch (err) {\n        this.error(err);\n      }\n    } else {\n      element = <any>value;\n    }\n\n    if (!group) {\n      group = (this.subjectSelector ? this.subjectSelector() : new Subject<R>()) as Subject<T | R>;\n      groups.set(key, group);\n      const groupedObservable = new GroupedObservable(key, group, this);\n      this.destination.next(groupedObservable);\n      if (this.durationSelector) {\n        let duration: any;\n        try {\n          duration = this.durationSelector(new GroupedObservable<K, R>(key, <Subject<R>>group));\n        } catch (err) {\n          this.error(err);\n          return;\n        }\n        this.add(duration.subscribe(new GroupDurationSubscriber(key, group, this)));\n      }\n    }\n\n    if (!group.closed) {\n      group.next(element);\n    }\n  }\n\n  protected _error(err: any): void {\n    const groups = this.groups;\n    if (groups) {\n      groups.forEach((group, key) => {\n        group.error(err);\n      });\n\n      groups.clear();\n    }\n    this.destination.error(err);\n  }\n\n  protected _complete(): void {\n    const groups = this.groups;\n    if (groups) {\n      groups.forEach((group, key) => {\n        group.complete();\n      });\n\n      groups.clear();\n    }\n    this.destination.complete();\n  }\n\n  removeGroup(key: K): void {\n    this.groups.delete(key);\n  }\n\n  unsubscribe() {\n    if (!this.closed) {\n      this.attemptedToUnsubscribe = true;\n      if (this.count === 0) {\n        super.unsubscribe();\n      }\n    }\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass GroupDurationSubscriber<K, T> extends Subscriber<T> {\n  constructor(private key: K,\n              private group: Subject<T>,\n              private parent: GroupBySubscriber<any, K, T | any>) {\n    super(group);\n  }\n\n  protected _next(value: T): void {\n    this.complete();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    const { parent, key } = this;\n    this.key = this.parent = null;\n    if (parent) {\n      parent.removeGroup(key);\n    }\n  }\n}\n\n/**\n * An Observable representing values belonging to the same group represented by\n * a common key. The values emitted by a GroupedObservable come from the source\n * Observable. The common key is available as the field `key` on a\n * GroupedObservable instance.\n *\n * @class GroupedObservable<K, T>\n */\nexport class GroupedObservable<K, T> extends Observable<T> {\n  /** @deprecated Do not construct this type. Internal use only */\n  constructor(public key: K,\n              private groupSubject: Subject<T>,\n              private refCountSubscription?: RefCountSubscription) {\n    super();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>) {\n    const subscription = new Subscription();\n    const { refCountSubscription, groupSubject } = this;\n    if (refCountSubscription && !refCountSubscription.closed) {\n      subscription.add(new InnerRefCountSubscription(refCountSubscription));\n    }\n    subscription.add(groupSubject.subscribe(subscriber));\n    return subscription;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass InnerRefCountSubscription extends Subscription {\n  constructor(private parent: RefCountSubscription) {\n    super();\n    parent.count++;\n  }\n\n  unsubscribe() {\n    const parent = this.parent;\n    if (!parent.closed && !this.closed) {\n      super.unsubscribe();\n      parent.count -= 1;\n      if (parent.count === 0 && parent.attemptedToUnsubscribe) {\n        parent.unsubscribe();\n      }\n    }\n  }\n}\n","import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { SubscriptionLike } from './types';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\n\n/**\n * A variant of Subject that requires an initial value and emits its current\n * value whenever it is subscribed to.\n *\n * @class BehaviorSubject<T>\n */\nexport class BehaviorSubject<T> extends Subject<T> {\n\n  constructor(private _value: T) {\n    super();\n  }\n\n  get value(): T {\n    return this.getValue();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>): Subscription {\n    const subscription = super._subscribe(subscriber);\n    if (subscription && !(<SubscriptionLike>subscription).closed) {\n      subscriber.next(this._value);\n    }\n    return subscription;\n  }\n\n  getValue(): T {\n    if (this.hasError) {\n      throw this.thrownError;\n    } else if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return this._value;\n    }\n  }\n\n  next(value: T): void {\n    super.next(this._value = value);\n  }\n}\n","import { Scheduler } from '../Scheduler';\nimport { Subscription } from '../Subscription';\nimport { SchedulerAction } from '../types';\n\n/**\n * A unit of work to be executed in a `scheduler`. An action is typically\n * created from within a {@link SchedulerLike} and an RxJS user does not need to concern\n * themselves about creating and manipulating an Action.\n *\n * ```ts\n * class Action<T> extends Subscription {\n *   new (scheduler: Scheduler, work: (state?: T) => void);\n *   schedule(state?: T, delay: number = 0): Subscription;\n * }\n * ```\n *\n * @class Action<T>\n */\nexport class Action<T> extends Subscription {\n  constructor(scheduler: Scheduler, work: (this: SchedulerAction<T>, state?: T) => void) {\n    super();\n  }\n  /**\n   * Schedules this action on its parent {@link SchedulerLike} for execution. May be passed\n   * some context object, `state`. May happen at some point in the future,\n   * according to the `delay` parameter, if specified.\n   * @param {T} [state] Some contextual data that the `work` function uses when\n   * called by the Scheduler.\n   * @param {number} [delay] Time to wait before executing the work, where the\n   * time unit is implicit and defined by the Scheduler.\n   * @return {void}\n   */\n  public schedule(state?: T, delay: number = 0): Subscription {\n    return this;\n  }\n}\n","import { Action } from './Action';\nimport { SchedulerAction } from '../types';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class AsyncAction<T> extends Action<T> {\n\n  public id: any;\n  public state: T;\n  public delay: number;\n  protected pending: boolean = false;\n\n  constructor(protected scheduler: AsyncScheduler,\n              protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n\n    if (this.closed) {\n      return this;\n    }\n\n    // Always replace the current state with the new state.\n    this.state = state;\n\n    const id = this.id;\n    const scheduler = this.scheduler;\n\n    //\n    // Important implementation note:\n    //\n    // Actions only execute once by default, unless rescheduled from within the\n    // scheduled callback. This allows us to implement single and repeat\n    // actions via the same code path, without adding API surface area, as well\n    // as mimic traditional recursion but across asynchronous boundaries.\n    //\n    // However, JS runtimes and timers distinguish between intervals achieved by\n    // serial `setTimeout` calls vs. a single `setInterval` call. An interval of\n    // serial `setTimeout` calls can be individually delayed, which delays\n    // scheduling the next `setTimeout`, and so on. `setInterval` attempts to\n    // guarantee the interval callback will be invoked more precisely to the\n    // interval period, regardless of load.\n    //\n    // Therefore, we use `setInterval` to schedule single and repeat actions.\n    // If the action reschedules itself with the same delay, the interval is not\n    // canceled. If the action doesn't reschedule, or reschedules with a\n    // different delay, the interval will be canceled after scheduled callback\n    // execution.\n    //\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, delay);\n    }\n\n    // Set the pending flag indicating that this action has been scheduled, or\n    // has recursively rescheduled itself.\n    this.pending = true;\n\n    this.delay = delay;\n    // If this action has already an async Id, don't request a new one.\n    this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n\n    return this;\n  }\n\n  protected requestAsyncId(scheduler: AsyncScheduler, id?: any, delay: number = 0): any {\n    return setInterval(scheduler.flush.bind(scheduler, this), delay);\n  }\n\n  protected recycleAsyncId(scheduler: AsyncScheduler, id: any, delay: number = 0): any {\n    // If this action is rescheduled with the same delay time, don't clear the interval id.\n    if (delay !== null && this.delay === delay && this.pending === false) {\n      return id;\n    }\n    // Otherwise, if the action's delay time is different from the current delay,\n    // or the action has been rescheduled before it's executed, clear the interval id\n    clearInterval(id);\n    return undefined;\n  }\n\n  /**\n   * Immediately executes this action and the `work` it contains.\n   * @return {any}\n   */\n  public execute(state: T, delay: number): any {\n\n    if (this.closed) {\n      return new Error('executing a cancelled action');\n    }\n\n    this.pending = false;\n    const error = this._execute(state, delay);\n    if (error) {\n      return error;\n    } else if (this.pending === false && this.id != null) {\n      // Dequeue if the action didn't reschedule itself. Don't call\n      // unsubscribe(), because the action could reschedule later.\n      // For example:\n      // ```\n      // scheduler.schedule(function doWork(counter) {\n      //   /* ... I'm a busy worker bee ... */\n      //   var originalAction = this;\n      //   /* wait 100ms before rescheduling the action */\n      //   setTimeout(function () {\n      //     originalAction.schedule(counter + 1);\n      //   }, 100);\n      // }, 1000);\n      // ```\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n    }\n  }\n\n  protected _execute(state: T, delay: number): any {\n    let errored: boolean = false;\n    let errorValue: any = undefined;\n    try {\n      this.work(state);\n    } catch (e) {\n      errored = true;\n      errorValue = !!e && e || new Error(e);\n    }\n    if (errored) {\n      this.unsubscribe();\n      return errorValue;\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n\n    const id = this.id;\n    const scheduler = this.scheduler;\n    const actions = scheduler.actions;\n    const index = actions.indexOf(this);\n\n    this.work  = null;\n    this.state = null;\n    this.pending = false;\n    this.scheduler = null;\n\n    if (index !== -1) {\n      actions.splice(index, 1);\n    }\n\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, null);\n    }\n\n    this.delay = null;\n  }\n}\n","import { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { QueueScheduler } from './QueueScheduler';\nimport { SchedulerAction } from '../types';\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class QueueAction<T> extends AsyncAction<T> {\n\n  constructor(protected scheduler: QueueScheduler,\n              protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (delay > 0) {\n      return super.schedule(state, delay);\n    }\n    this.delay = delay;\n    this.state = state;\n    this.scheduler.flush(this);\n    return this;\n  }\n\n  public execute(state: T, delay: number): any {\n    return (delay > 0 || this.closed) ?\n      super.execute(state, delay) :\n      this._execute(state, delay) ;\n  }\n\n  protected requestAsyncId(scheduler: QueueScheduler, id?: any, delay: number = 0): any {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n    // Otherwise flush the scheduler starting with this action.\n    return scheduler.flush(this);\n  }\n}\n","import { Action } from './scheduler/Action';\nimport { Subscription } from './Subscription';\nimport { SchedulerLike, SchedulerAction } from './types';\n\n/**\n * An execution context and a data structure to order tasks and schedule their\n * execution. Provides a notion of (potentially virtual) time, through the\n * `now()` getter method.\n *\n * Each unit of work in a Scheduler is called an `Action`.\n *\n * ```ts\n * class Scheduler {\n *   now(): number;\n *   schedule(work, delay?, state?): Subscription;\n * }\n * ```\n *\n * @class Scheduler\n * @deprecated Scheduler is an internal implementation detail of RxJS, and\n * should not be used directly. Rather, create your own class and implement\n * {@link SchedulerLike}\n */\nexport class Scheduler implements SchedulerLike {\n\n  /**\n   * Note: the extra arrow function wrapper is to make testing by overriding\n   * Date.now easier.\n   * @nocollapse\n   */\n  public static now: () => number = () => Date.now();\n\n  constructor(private SchedulerAction: typeof Action,\n              now: () => number = Scheduler.now) {\n    this.now = now;\n  }\n\n  /**\n   * A getter method that returns a number representing the current time\n   * (at the time this function was called) according to the scheduler's own\n   * internal clock.\n   * @return {number} A number that represents the current time. May or may not\n   * have a relation to wall-clock time. May or may not refer to a time unit\n   * (e.g. milliseconds).\n   */\n  public now: () => number;\n\n  /**\n   * Schedules a function, `work`, for execution. May happen at some point in\n   * the future, according to the `delay` parameter, if specified. May be passed\n   * some context object, `state`, which will be passed to the `work` function.\n   *\n   * The given arguments will be processed an stored as an Action object in a\n   * queue of actions.\n   *\n   * @param {function(state: ?T): ?Subscription} work A function representing a\n   * task, or some unit of work to be executed by the Scheduler.\n   * @param {number} [delay] Time to wait before executing the work, where the\n   * time unit is implicit and defined by the Scheduler itself.\n   * @param {T} [state] Some contextual data that the `work` function uses when\n   * called by the Scheduler.\n   * @return {Subscription} A subscription in order to be able to unsubscribe\n   * the scheduled work.\n   */\n  public schedule<T>(work: (this: SchedulerAction<T>, state?: T) => void, delay: number = 0, state?: T): Subscription {\n    return new this.SchedulerAction<T>(this, work).schedule(state, delay);\n  }\n}\n","import { Scheduler } from '../Scheduler';\nimport { Action } from './Action';\nimport { AsyncAction } from './AsyncAction';\nimport { SchedulerAction } from '../types';\nimport { Subscription } from '../Subscription';\n\nexport class AsyncScheduler extends Scheduler {\n  public static delegate?: Scheduler;\n  public actions: Array<AsyncAction<any>> = [];\n  /**\n   * A flag to indicate whether the Scheduler is currently executing a batch of\n   * queued actions.\n   * @type {boolean}\n   * @deprecated internal use only\n   */\n  public active: boolean = false;\n  /**\n   * An internal ID used to track the latest asynchronous task such as those\n   * coming from `setTimeout`, `setInterval`, `requestAnimationFrame`, and\n   * others.\n   * @type {any}\n   * @deprecated internal use only\n   */\n  public scheduled: any = undefined;\n\n  constructor(SchedulerAction: typeof Action,\n              now: () => number = Scheduler.now) {\n    super(SchedulerAction, () => {\n      if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n        return AsyncScheduler.delegate.now();\n      } else {\n        return now();\n      }\n    });\n  }\n\n  public schedule<T>(work: (this: SchedulerAction<T>, state?: T) => void, delay: number = 0, state?: T): Subscription {\n    if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n      return AsyncScheduler.delegate.schedule(work, delay, state);\n    } else {\n      return super.schedule(work, delay, state);\n    }\n  }\n\n  public flush(action: AsyncAction<any>): void {\n\n    const {actions} = this;\n\n    if (this.active) {\n      actions.push(action);\n      return;\n    }\n\n    let error: any;\n    this.active = true;\n\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (action = actions.shift()); // exhaust the scheduler queue\n\n    this.active = false;\n\n    if (error) {\n      while (action = actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n","import { AsyncScheduler } from './AsyncScheduler';\n\nexport class QueueScheduler extends AsyncScheduler {\n}\n","import { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\n\n/**\n *\n * Queue Scheduler\n *\n * <span class=\"informal\">Put every next task on a queue, instead of executing it immediately</span>\n *\n * `queue` scheduler, when used with delay, behaves the same as {@link asyncScheduler} scheduler.\n *\n * When used without delay, it schedules given task synchronously - executes it right when\n * it is scheduled. However when called recursively, that is when inside the scheduled task,\n * another task is scheduled with queue scheduler, instead of executing immediately as well,\n * that task will be put on a queue and wait for current one to finish.\n *\n * This means that when you execute task with `queue` scheduler, you are sure it will end\n * before any other task scheduled with that scheduler will start.\n *\n * ## Examples\n * Schedule recursively first, then do something\n * ```ts\n * import { queueScheduler } from 'rxjs';\n *\n * queueScheduler.schedule(() => {\n *   queueScheduler.schedule(() => console.log('second')); // will not happen now, but will be put on a queue\n *\n *   console.log('first');\n * });\n *\n * // Logs:\n * // \"first\"\n * // \"second\"\n * ```\n *\n * Reschedule itself recursively\n * ```ts\n * import { queueScheduler } from 'rxjs';\n *\n * queueScheduler.schedule(function(state) {\n *   if (state !== 0) {\n *     console.log('before', state);\n *     this.schedule(state - 1); // `this` references currently executing Action,\n *                               // which we reschedule with new state\n *     console.log('after', state);\n *   }\n * }, 0, 3);\n *\n * // In scheduler that runs recursively, you would expect:\n * // \"before\", 3\n * // \"before\", 2\n * // \"before\", 1\n * // \"after\", 1\n * // \"after\", 2\n * // \"after\", 3\n *\n * // But with queue it logs:\n * // \"before\", 3\n * // \"after\", 3\n * // \"before\", 2\n * // \"after\", 2\n * // \"before\", 1\n * // \"after\", 1\n * ```\n *\n * @static true\n * @name queue\n * @owner Scheduler\n */\n\nexport const queue = new QueueScheduler(QueueAction);\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\n/**\n * The same Observable instance returned by any call to {@link empty} without a\n * `scheduler`. It is preferrable to use this over `empty()`.\n */\nexport const EMPTY = new Observable<never>(subscriber => subscriber.complete());\n\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.\n * </span>\n *\n * ![](empty.png)\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the complete notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * ## Examples\n * ### Emit the number 7, then complete\n * ```ts\n * import { empty } from 'rxjs';\n * import { startWith } from 'rxjs/operators';\n *\n * const result = empty().pipe(startWith(7));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * ### Map and flatten only odd numbers to the sequence 'a', 'b', 'c'\n * ```ts\n * import { empty, interval, of } from 'rxjs';\n * import { mergeMap } from 'rxjs/operators';\n *\n * const interval$ = interval(1000);\n * const result = interval$.pipe(\n *   mergeMap(x => x % 2 === 1 ? of('a', 'b', 'c') : empty()),\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval eg(0,1,2,3,...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1 print abc\n * // if x % 2 is not equal to 1 nothing will be output\n * ```\n *\n * @see {@link Observable}\n * @see {@link never}\n * @see {@link of}\n * @see {@link throwError}\n *\n * @param scheduler A {@link SchedulerLike} to use for scheduling\n * the emission of the complete notification.\n * @return An \"empty\" Observable: emits only the complete\n * notification.\n * @deprecated Deprecated in favor of using {@link EMPTY} constant, or {@link scheduled} (e.g. `scheduled([], scheduler)`)\n */\nexport function empty(scheduler?: SchedulerLike) {\n  return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\n\nfunction emptyScheduled(scheduler: SchedulerLike) {\n  return new Observable<never>(subscriber => scheduler.schedule(() => subscriber.complete()));\n}\n","import { SchedulerLike } from '../types';\n\nexport function isScheduler(value: any): value is SchedulerLike {\n  return value && typeof (<any>value).schedule === 'function';\n}\n","import { Subscriber } from '../Subscriber';\n\n/**\n * Subscribes to an ArrayLike with a subscriber\n * @param array The array or array-like to subscribe to\n */\nexport const subscribeToArray = <T>(array: ArrayLike<T>) => (subscriber: Subscriber<T>) => {\n  for (let i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n    subscriber.next(array[i]);\n  }\n  subscriber.complete();\n};\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { Subscription } from '../Subscription';\n\nexport function scheduleArray<T>(input: ArrayLike<T>, scheduler: SchedulerLike) {\n  return new Observable<T>(subscriber => {\n    const sub = new Subscription();\n    let i = 0;\n    sub.add(scheduler.schedule(function () {\n      if (i === input.length) {\n        subscriber.complete();\n        return;\n      }\n      subscriber.next(input[i++]);\n      if (!subscriber.closed) {\n        sub.add(this.schedule());\n      }\n    }));\n    return sub;\n  });\n}\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\n\nexport function fromArray<T>(input: ArrayLike<T>, scheduler?: SchedulerLike) {\n  if (!scheduler) {\n    return new Observable<T>(subscribeToArray(input));\n  } else {\n    return scheduleArray(input, scheduler);\n  }\n}\n","import { SchedulerLike } from '../types';\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { Observable } from '../Observable';\nimport { scheduleArray } from '../scheduled/scheduleArray';\n\n/* tslint:disable:max-line-length */\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T>(a: T, scheduler: SchedulerLike): Observable<T>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2>(a: T, b: T2, scheduler: SchedulerLike): Observable<T | T2>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2, T3>(a: T, b: T2, c: T3, scheduler: SchedulerLike): Observable<T | T2 | T3>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2, T3, T4>(a: T, b: T2, c: T3, d: T4, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2, T3, T4, T5>(a: T, b: T2, c: T3, d: T4, e: T5, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4 | T5>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2, T3, T4, T5, T6>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4 | T5 | T6>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2, T3, T4, T5, T6, T7>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6, g: T7, scheduler: SchedulerLike):\n  Observable<T | T2 | T3 | T4 | T5 | T6 | T7>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2, T3, T4, T5, T6, T7, T8>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6, g: T7, h: T8, scheduler: SchedulerLike):\n  Observable<T | T2 | T3 | T4 | T5 | T6 | T7 | T8>;\n/** @deprecated use {@link scheduled} instead `scheduled([a, b, c], scheduler)` */\nexport function of<T, T2, T3, T4, T5, T6, T7, T8, T9>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6, g: T7, h: T8, i: T9, scheduler: SchedulerLike):\n  Observable<T | T2 | T3 | T4 | T5 | T6 | T7 | T8 | T9>;\nexport function of<T>(...args: (T | SchedulerLike)[]): Observable<T>;\n\n// TODO(benlesh): Update the typings for this when we can switch to TS 3.x\nexport function of<T>(a: T): Observable<T>;\nexport function of<T, T2>(a: T, b: T2): Observable<T | T2>;\nexport function of<T, T2, T3>(a: T, b: T2, c: T3): Observable<T | T2 | T3>;\nexport function of<T, T2, T3, T4>(a: T, b: T2, c: T3, d: T4): Observable<T | T2 | T3 | T4>;\nexport function of<T, T2, T3, T4, T5>(a: T, b: T2, c: T3, d: T4, e: T5): Observable<T | T2 | T3 | T4 | T5>;\nexport function of<T, T2, T3, T4, T5, T6>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6): Observable<T | T2 | T3 | T4 | T5 | T6>;\nexport function of<T, T2, T3, T4, T5, T6, T7>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6, g: T7):\n  Observable<T | T2 | T3 | T4 | T5 | T6 | T7>;\nexport function of<T, T2, T3, T4, T5, T6, T7, T8>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6, g: T7, h: T8):\n  Observable<T | T2 | T3 | T4 | T5 | T6 | T7 | T8>;\nexport function of<T, T2, T3, T4, T5, T6, T7, T8, T9>(a: T, b: T2, c: T3, d: T4, e: T5, f: T6, g: T7, h: T8, i: T9):\n  Observable<T | T2 | T3 | T4 | T5 | T6 | T7 | T8 | T9>;\nexport function of<T>(...args: T[]): Observable<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Converts the arguments to an observable sequence.\n *\n * <span class=\"informal\">Each argument becomes a `next` notification.</span>\n *\n * ![](of.png)\n *\n * Unlike {@link from}, it does not do any flattening and emits each argument in whole\n * as a separate `next` notification.\n *\n * ## Examples\n *\n * Emit the values `10, 20, 30`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of(10, 20, 30)\n * .subscribe(\n *   next => console.log('next:', next),\n *   err => console.log('error:', err),\n *   () => console.log('the end'),\n * );\n * // result:\n * // 'next: 10'\n * // 'next: 20'\n * // 'next: 30'\n *\n * ```\n *\n * Emit the array `[1,2,3]`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of([1,2,3])\n * .subscribe(\n *   next => console.log('next:', next),\n *   err => console.log('error:', err),\n *   () => console.log('the end'),\n * );\n * // result:\n * // 'next: [1,2,3]'\n * ```\n *\n * @see {@link from}\n * @see {@link range}\n *\n * @param {...T} values A comma separated list of arguments you want to be emitted\n * @return {Observable} An Observable that emits the arguments\n * described above and then completes.\n * @method of\n * @owner Observable\n */\n\nexport function of<T>(...args: Array<T | SchedulerLike>): Observable<T> {\n  let scheduler = args[args.length - 1] as SchedulerLike;\n  if (isScheduler(scheduler)) {\n    args.pop();\n    return scheduleArray(args as T[], scheduler);\n  } else {\n    return fromArray(args as T[]);\n  }\n}\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { Subscriber } from '../Subscriber';\n\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits an error notification.\n *\n * <span class=\"informal\">Just emits 'error', and nothing else.\n * </span>\n *\n * ![](throw.png)\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the error notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * ## Examples\n * ### Emit the number 7, then emit an error\n * ```ts\n * import { throwError, concat, of } from 'rxjs';\n *\n * const result = concat(of(7), throwError(new Error('oops!')));\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n * // Logs:\n * // 7\n * // Error: oops!\n * ```\n *\n * ---\n *\n * ### Map and flatten numbers to the sequence 'a', 'b', 'c', but throw an error for 2\n * ```ts\n * import { throwError, interval, of } from 'rxjs';\n * import { mergeMap } from 'rxjs/operators';\n *\n * interval(1000).pipe(\n *   mergeMap(x => x === 2\n *     ? throwError('Twos are bad')\n *     : of('a', 'b', 'c')\n *   ),\n * ).subscribe(x => console.log(x), e => console.error(e));\n *\n * // Logs:\n * // a\n * // b\n * // c\n * // a\n * // b\n * // c\n * // Twos are bad\n * ```\n *\n * @see {@link Observable}\n * @see {@link empty}\n * @see {@link never}\n * @see {@link of}\n *\n * @param {any} error The particular Error to pass to the error notification.\n * @param {SchedulerLike} [scheduler] A {@link SchedulerLike} to use for scheduling\n * the emission of the error notification.\n * @return {Observable} An error Observable: emits only the error notification\n * using the given error argument.\n * @static true\n * @name throwError\n * @owner Observable\n */\nexport function throwError(error: any, scheduler?: SchedulerLike): Observable<never> {\n  if (!scheduler) {\n    return new Observable(subscriber => subscriber.error(error));\n  } else {\n    return new Observable(subscriber => scheduler.schedule(dispatch, 0, { error, subscriber }));\n  }\n}\n\ninterface DispatchArg {\n  error: any;\n  subscriber: Subscriber<any>;\n}\n\nfunction dispatch({ error, subscriber }: DispatchArg) {\n  subscriber.error(error);\n}\n","import { PartialObserver } from './types';\nimport { Observable } from './Observable';\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nimport { deprecate } from 'util';\n\n// TODO: When this enum is removed, replace it with a type alias. See #4556.\n/**\n * @deprecated NotificationKind is deprecated as const enums are not compatible with isolated modules. Use a string literal instead.\n */\nexport enum NotificationKind {\n  NEXT = 'N',\n  ERROR = 'E',\n  COMPLETE = 'C',\n}\n\n/**\n * Represents a push-based event or value that an {@link Observable} can emit.\n * This class is particularly useful for operators that manage notifications,\n * like {@link materialize}, {@link dematerialize}, {@link observeOn}, and\n * others. Besides wrapping the actual delivered value, it also annotates it\n * with metadata of, for instance, what type of push message it is (`next`,\n * `error`, or `complete`).\n *\n * @see {@link materialize}\n * @see {@link dematerialize}\n * @see {@link observeOn}\n *\n * @class Notification<T>\n */\nexport class Notification<T> {\n  hasValue: boolean;\n\n  constructor(public kind: 'N' | 'E' | 'C', public value?: T, public error?: any) {\n    this.hasValue = kind === 'N';\n  }\n\n  /**\n   * Delivers to the given `observer` the value wrapped by this Notification.\n   * @param {Observer} observer\n   * @return\n   */\n  observe(observer: PartialObserver<T>): any {\n    switch (this.kind) {\n      case 'N':\n        return observer.next && observer.next(this.value);\n      case 'E':\n        return observer.error && observer.error(this.error);\n      case 'C':\n        return observer.complete && observer.complete();\n    }\n  }\n\n  /**\n   * Given some {@link Observer} callbacks, deliver the value represented by the\n   * current Notification to the correctly corresponding callback.\n   * @param {function(value: T): void} next An Observer `next` callback.\n   * @param {function(err: any): void} [error] An Observer `error` callback.\n   * @param {function(): void} [complete] An Observer `complete` callback.\n   * @return {any}\n   */\n  do(next: (value: T) => void, error?: (err: any) => void, complete?: () => void): any {\n    const kind = this.kind;\n    switch (kind) {\n      case 'N':\n        return next && next(this.value);\n      case 'E':\n        return error && error(this.error);\n      case 'C':\n        return complete && complete();\n    }\n  }\n\n  /**\n   * Takes an Observer or its individual callback functions, and calls `observe`\n   * or `do` methods accordingly.\n   * @param {Observer|function(value: T): void} nextOrObserver An Observer or\n   * the `next` callback.\n   * @param {function(err: any): void} [error] An Observer `error` callback.\n   * @param {function(): void} [complete] An Observer `complete` callback.\n   * @return {any}\n   */\n  accept(nextOrObserver: PartialObserver<T> | ((value: T) => void), error?: (err: any) => void, complete?: () => void) {\n    if (nextOrObserver && typeof (<PartialObserver<T>>nextOrObserver).next === 'function') {\n      return this.observe(<PartialObserver<T>>nextOrObserver);\n    } else {\n      return this.do(<(value: T) => void>nextOrObserver, error, complete);\n    }\n  }\n\n  /**\n   * Returns a simple Observable that just delivers the notification represented\n   * by this Notification instance.\n   * @return {any}\n   */\n  toObservable(): Observable<T> {\n    const kind = this.kind;\n    switch (kind) {\n      case 'N':\n        return of(this.value);\n      case 'E':\n        return throwError(this.error);\n      case 'C':\n        return empty();\n    }\n    throw new Error('unexpected notification kind value');\n  }\n\n  private static completeNotification: Notification<any> = new Notification('C');\n  private static undefinedValueNotification: Notification<any> = new Notification('N', undefined);\n\n  /**\n   * A shortcut to create a Notification instance of the type `next` from a\n   * given value.\n   * @param {T} value The `next` value.\n   * @return {Notification<T>} The \"next\" Notification representing the\n   * argument.\n   * @nocollapse\n   */\n  static createNext<T>(value: T): Notification<T> {\n    if (typeof value !== 'undefined') {\n      return new Notification('N', value);\n    }\n    return Notification.undefinedValueNotification;\n  }\n\n  /**\n   * A shortcut to create a Notification instance of the type `error` from a\n   * given error.\n   * @param {any} [err] The `error` error.\n   * @return {Notification<T>} The \"error\" Notification representing the\n   * argument.\n   * @nocollapse\n   */\n  static createError<T>(err?: any): Notification<T> {\n    return new Notification('E', undefined, err);\n  }\n\n  /**\n   * A shortcut to create a Notification instance of the type `complete`.\n   * @return {Notification<any>} The valueless \"complete\" Notification.\n   * @nocollapse\n   */\n  static createComplete(): Notification<any> {\n    return Notification.completeNotification;\n  }\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { Notification } from '../Notification';\nimport { MonoTypeOperatorFunction, PartialObserver, SchedulerAction, SchedulerLike, TeardownLogic } from '../types';\n\n/**\n *\n * Re-emits all notifications from source Observable with specified scheduler.\n *\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\n *\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\n *\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\n * little bit more, to ensure that they are emitted at expected moments.\n *\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\n * will delay all notifications - including error notifications - while `delay` will pass through error\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\n * for notification emissions in general.\n *\n * ## Example\n * Ensure values in subscribe are called just before browser repaint.\n * ```ts\n * import { interval } from 'rxjs';\n * import { observeOn } from 'rxjs/operators';\n *\n * const intervals = interval(10);                // Intervals are scheduled\n *                                                // with async scheduler by default...\n * intervals.pipe(\n *   observeOn(animationFrameScheduler),          // ...but we will observe on animationFrame\n * )                                              // scheduler to ensure smooth animation.\n * .subscribe(val => {\n *   someDiv.style.height = val + 'px';\n * });\n * ```\n *\n * @see {@link delay}\n *\n * @param {SchedulerLike} scheduler Scheduler that will be used to reschedule notifications from source Observable.\n * @param {number} [delay] Number of milliseconds that states with what delay every notification should be rescheduled.\n * @return {Observable<T>} Observable that emits the same notifications as the source Observable,\n * but with provided scheduler.\n *\n * @method observeOn\n * @owner Observable\n */\nexport function observeOn<T>(scheduler: SchedulerLike, delay: number = 0): MonoTypeOperatorFunction<T> {\n  return function observeOnOperatorFunction(source: Observable<T>): Observable<T> {\n    return source.lift(new ObserveOnOperator(scheduler, delay));\n  };\n}\n\nexport class ObserveOnOperator<T> implements Operator<T, T> {\n  constructor(private scheduler: SchedulerLike, private delay: number = 0) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class ObserveOnSubscriber<T> extends Subscriber<T> {\n  /** @nocollapse */\n  static dispatch(this: SchedulerAction<ObserveOnMessage>, arg: ObserveOnMessage) {\n    const { notification, destination } = arg;\n    notification.observe(destination);\n    this.unsubscribe();\n  }\n\n  constructor(destination: Subscriber<T>,\n              private scheduler: SchedulerLike,\n              private delay: number = 0) {\n    super(destination);\n  }\n\n  private scheduleMessage(notification: Notification<any>): void {\n    const destination = this.destination as Subscription;\n    destination.add(this.scheduler.schedule(\n      ObserveOnSubscriber.dispatch,\n      this.delay,\n      new ObserveOnMessage(notification, this.destination)\n    ));\n  }\n\n  protected _next(value: T): void {\n    this.scheduleMessage(Notification.createNext(value));\n  }\n\n  protected _error(err: any): void {\n    this.scheduleMessage(Notification.createError(err));\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.scheduleMessage(Notification.createComplete());\n    this.unsubscribe();\n  }\n}\n\nexport class ObserveOnMessage {\n  constructor(public notification: Notification<any>,\n              public destination: PartialObserver<any>) {\n  }\n}\n","import { Subject } from './Subject';\nimport { SchedulerLike } from './types';\nimport { queue } from './scheduler/queue';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\n/**\n * A variant of Subject that \"replays\" or emits old values to new subscribers.\n * It buffers a set number of values and will emit those values immediately to\n * any new subscribers in addition to emitting new values to existing subscribers.\n *\n * @class ReplaySubject<T>\n */\nexport class ReplaySubject<T> extends Subject<T> {\n  private _events: (ReplayEvent<T> | T)[] = [];\n  private _bufferSize: number;\n  private _windowTime: number;\n  private _infiniteTimeWindow: boolean = false;\n\n  constructor(bufferSize: number = Number.POSITIVE_INFINITY,\n              windowTime: number = Number.POSITIVE_INFINITY,\n              private scheduler?: SchedulerLike) {\n    super();\n    this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n    this._windowTime = windowTime < 1 ? 1 : windowTime;\n\n    if (windowTime === Number.POSITIVE_INFINITY) {\n      this._infiniteTimeWindow = true;\n      this.next = this.nextInfiniteTimeWindow;\n    } else {\n      this.next = this.nextTimeWindow;\n    }\n  }\n\n  private nextInfiniteTimeWindow(value: T): void {\n    const _events = this._events;\n    _events.push(value);\n    // Since this method is invoked in every next() call than the buffer\n    // can overgrow the max size only by one item\n    if (_events.length > this._bufferSize) {\n      _events.shift();\n    }\n\n    super.next(value);\n  }\n\n  private nextTimeWindow(value: T): void {\n    this._events.push(new ReplayEvent(this._getNow(), value));\n    this._trimBufferThenGetEvents();\n\n    super.next(value);\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>): Subscription {\n    // When `_infiniteTimeWindow === true` then the buffer is already trimmed\n    const _infiniteTimeWindow = this._infiniteTimeWindow;\n    const _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n    const scheduler = this.scheduler;\n    const len = _events.length;\n    let subscription: Subscription;\n\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.isStopped || this.hasError) {\n      subscription = Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      subscription = new SubjectSubscription(this, subscriber);\n    }\n\n    if (scheduler) {\n      subscriber.add(subscriber = new ObserveOnSubscriber<T>(subscriber, scheduler));\n    }\n\n    if (_infiniteTimeWindow) {\n      for (let i = 0; i < len && !subscriber.closed; i++) {\n        subscriber.next(<T>_events[i]);\n      }\n    } else {\n      for (let i = 0; i < len && !subscriber.closed; i++) {\n        subscriber.next((<ReplayEvent<T>>_events[i]).value);\n      }\n    }\n\n    if (this.hasError) {\n      subscriber.error(this.thrownError);\n    } else if (this.isStopped) {\n      subscriber.complete();\n    }\n\n    return subscription;\n  }\n\n  _getNow(): number {\n    return (this.scheduler || queue).now();\n  }\n\n  private _trimBufferThenGetEvents(): ReplayEvent<T>[] {\n    const now = this._getNow();\n    const _bufferSize = this._bufferSize;\n    const _windowTime = this._windowTime;\n    const _events = <ReplayEvent<T>[]>this._events;\n\n    const eventsCount = _events.length;\n    let spliceCount = 0;\n\n    // Trim events that fall out of the time window.\n    // Start at the front of the list. Break early once\n    // we encounter an event that falls within the window.\n    while (spliceCount < eventsCount) {\n      if ((now - _events[spliceCount].time) < _windowTime) {\n        break;\n      }\n      spliceCount++;\n    }\n\n    if (eventsCount > _bufferSize) {\n      spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n    }\n\n    if (spliceCount > 0) {\n      _events.splice(0, spliceCount);\n    }\n\n    return _events;\n  }\n\n}\n\nclass ReplayEvent<T> {\n  constructor(public time: number, public value: T) {\n  }\n}\n","import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\n\n/**\n * A variant of Subject that only emits a value when it completes. It will emit\n * its latest value to all its observers on completion.\n *\n * @class AsyncSubject<T>\n */\nexport class AsyncSubject<T> extends Subject<T> {\n  private value: T = null;\n  private hasNext: boolean = false;\n  private hasCompleted: boolean = false;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<any>): Subscription {\n    if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.hasCompleted && this.hasNext) {\n      subscriber.next(this.value);\n      subscriber.complete();\n      return Subscription.EMPTY;\n    }\n    return super._subscribe(subscriber);\n  }\n\n  next(value: T): void {\n    if (!this.hasCompleted) {\n      this.value = value;\n      this.hasNext = true;\n    }\n  }\n\n  error(error: any): void {\n    if (!this.hasCompleted) {\n      super.error(error);\n    }\n  }\n\n  complete(): void {\n    this.hasCompleted = true;\n    if (this.hasNext) {\n      super.next(this.value);\n    }\n    super.complete();\n  }\n}\n","let nextHandle = 1;\nconst RESOLVED = (() => Promise.resolve())();\nconst activeHandles: { [key: number]: any } = {};\n\n/**\n * Finds the handle in the list of active handles, and removes it.\n * Returns `true` if found, `false` otherwise. Used both to clear\n * Immediate scheduled tasks, and to identify if a task should be scheduled.\n */\nfunction findAndClearHandle(handle: number): boolean {\n  if (handle in activeHandles) {\n    delete activeHandles[handle];\n    return true;\n  }\n  return false;\n}\n\n/**\n * Helper functions to schedule and unschedule microtasks.\n */\nexport const Immediate = {\n  setImmediate(cb: () => void): number {\n    const handle = nextHandle++;\n    activeHandles[handle] = true;\n    RESOLVED.then(() => findAndClearHandle(handle) && cb());\n    return handle;\n  },\n\n  clearImmediate(handle: number): void {\n    findAndClearHandle(handle);\n  },\n};\n\n/**\n * Used for internal testing purposes only. Do not export from library.\n */\nexport const TestTools = {\n  pending() {\n    return Object.keys(activeHandles).length;\n  }\n};\n","import { Immediate } from '../util/Immediate';\nimport { AsyncAction } from './AsyncAction';\nimport { AsapScheduler } from './AsapScheduler';\nimport { SchedulerAction } from '../types';\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class AsapAction<T> extends AsyncAction<T> {\n\n  constructor(protected scheduler: AsapScheduler,\n              protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  protected requestAsyncId(scheduler: AsapScheduler, id?: any, delay: number = 0): any {\n    // If delay is greater than 0, request as an async action.\n    if (delay !== null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n    // Push the action to the end of the scheduler queue.\n    scheduler.actions.push(this);\n    // If a microtask has already been scheduled, don't schedule another\n    // one. If a microtask hasn't been scheduled yet, schedule one now. Return\n    // the current scheduled microtask id.\n    return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(\n      scheduler.flush.bind(scheduler, null)\n    ));\n  }\n  protected recycleAsyncId(scheduler: AsapScheduler, id?: any, delay: number = 0): any {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.recycleAsyncId(scheduler, id, delay);\n    }\n    // If the scheduler queue is empty, cancel the requested microtask and\n    // set the scheduled flag to undefined so the next AsapAction will schedule\n    // its own.\n    if (scheduler.actions.length === 0) {\n      Immediate.clearImmediate(id);\n      scheduler.scheduled = undefined;\n    }\n    // Return undefined so the action knows to request a new async id if it's rescheduled.\n    return undefined;\n  }\n}\n","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\nexport class AsapScheduler extends AsyncScheduler {\n  public flush(action?: AsyncAction<any>): void {\n\n    this.active = true;\n    this.scheduled = undefined;\n\n    const {actions} = this;\n    let error: any;\n    let index: number = -1;\n    let count: number = actions.length;\n    action = action || actions.shift();\n\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (++index < count && (action = actions.shift()));\n\n    this.active = false;\n\n    if (error) {\n      while (++index < count && (action = actions.shift())) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n","import { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\n\n/**\n *\n * Asap Scheduler\n *\n * <span class=\"informal\">Perform task as fast as it can be performed asynchronously</span>\n *\n * `asap` scheduler behaves the same as {@link asyncScheduler} scheduler when you use it to delay task\n * in time. If however you set delay to `0`, `asap` will wait for current synchronously executing\n * code to end and then it will try to execute given task as fast as possible.\n *\n * `asap` scheduler will do its best to minimize time between end of currently executing code\n * and start of scheduled task. This makes it best candidate for performing so called \"deferring\".\n * Traditionally this was achieved by calling `setTimeout(deferredTask, 0)`, but that technique involves\n * some (although minimal) unwanted delay.\n *\n * Note that using `asap` scheduler does not necessarily mean that your task will be first to process\n * after currently executing code. In particular, if some task was also scheduled with `asap` before,\n * that task will execute first. That being said, if you need to schedule task asynchronously, but\n * as soon as possible, `asap` scheduler is your best bet.\n *\n * ## Example\n * Compare async and asap scheduler<\n * ```ts\n * import { asapScheduler, asyncScheduler } from 'rxjs';\n *\n * asyncScheduler.schedule(() => console.log('async')); // scheduling 'async' first...\n * asapScheduler.schedule(() => console.log('asap'));\n *\n * // Logs:\n * // \"asap\"\n * // \"async\"\n * // ... but 'asap' goes first!\n * ```\n * @static true\n * @name asap\n * @owner Scheduler\n */\n\nexport const asap = new AsapScheduler(AsapAction);\n","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\n/**\n *\n * Async Scheduler\n *\n * <span class=\"informal\">Schedule task as if you used setTimeout(task, duration)</span>\n *\n * `async` scheduler schedules tasks asynchronously, by putting them on the JavaScript\n * event loop queue. It is best used to delay tasks in time or to schedule tasks repeating\n * in intervals.\n *\n * If you just want to \"defer\" task, that is to perform it right after currently\n * executing synchronous code ends (commonly achieved by `setTimeout(deferredTask, 0)`),\n * better choice will be the {@link asapScheduler} scheduler.\n *\n * ## Examples\n * Use async scheduler to delay task\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * const task = () => console.log('it works!');\n *\n * asyncScheduler.schedule(task, 2000);\n *\n * // After 2 seconds logs:\n * // \"it works!\"\n * ```\n *\n * Use async scheduler to repeat task in intervals\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * function task(state) {\n *   console.log(state);\n *   this.schedule(state + 1, 1000); // `this` references currently executing Action,\n *                                   // which we reschedule with new state and delay\n * }\n *\n * asyncScheduler.schedule(task, 3000, 0);\n *\n * // Logs:\n * // 0 after 3s\n * // 1 after 4s\n * // 2 after 5s\n * // 3 after 6s\n * ```\n *\n * @static true\n * @name async\n * @owner Scheduler\n */\n\nexport const async = new AsyncScheduler(AsyncAction);\n","import { AsyncAction } from './AsyncAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\nimport { SchedulerAction } from '../types';\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class AnimationFrameAction<T> extends AsyncAction<T> {\n\n  constructor(protected scheduler: AnimationFrameScheduler,\n              protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  protected requestAsyncId(scheduler: AnimationFrameScheduler, id?: any, delay: number = 0): any {\n    // If delay is greater than 0, request as an async action.\n    if (delay !== null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n    // Push the action to the end of the scheduler queue.\n    scheduler.actions.push(this);\n    // If an animation frame has already been requested, don't request another\n    // one. If an animation frame hasn't been requested yet, request one. Return\n    // the current animation frame request id.\n    return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(\n      () => scheduler.flush(null)));\n  }\n  protected recycleAsyncId(scheduler: AnimationFrameScheduler, id?: any, delay: number = 0): any {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.recycleAsyncId(scheduler, id, delay);\n    }\n    // If the scheduler queue is empty, cancel the requested animation frame and\n    // set the scheduled flag to undefined so the next AnimationFrameAction will\n    // request its own.\n    if (scheduler.actions.length === 0) {\n      cancelAnimationFrame(id);\n      scheduler.scheduled = undefined;\n    }\n    // Return undefined so the action knows to request a new async id if it's rescheduled.\n    return undefined;\n  }\n}\n","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\nexport class AnimationFrameScheduler extends AsyncScheduler {\n  public flush(action?: AsyncAction<any>): void {\n\n    this.active = true;\n    this.scheduled = undefined;\n\n    const {actions} = this;\n    let error: any;\n    let index: number = -1;\n    let count: number = actions.length;\n    action = action || actions.shift();\n\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (++index < count && (action = actions.shift()));\n\n    this.active = false;\n\n    if (error) {\n      while (++index < count && (action = actions.shift())) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n","import { AnimationFrameAction } from './AnimationFrameAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\n\n/**\n *\n * Animation Frame Scheduler\n *\n * <span class=\"informal\">Perform task when `window.requestAnimationFrame` would fire</span>\n *\n * When `animationFrame` scheduler is used with delay, it will fall back to {@link asyncScheduler} scheduler\n * behaviour.\n *\n * Without delay, `animationFrame` scheduler can be used to create smooth browser animations.\n * It makes sure scheduled task will happen just before next browser content repaint,\n * thus performing animations as efficiently as possible.\n *\n * ## Example\n * Schedule div height animation\n * ```ts\n * // html: <div style=\"background: #0ff;\"></div>\n * import { animationFrameScheduler } from 'rxjs';\n *\n * const div = document.querySelector('div');\n *\n * animationFrameScheduler.schedule(function(height) {\n *   div.style.height = height + \"px\";\n *\n *   this.schedule(height + 1);  // `this` references currently executing Action,\n *                               // which we reschedule with new state\n * }, 0, 0);\n *\n * // You will see a div element growing in height\n * ```\n *\n * @static true\n * @name animationFrame\n * @owner Scheduler\n */\n\nexport const animationFrame = new AnimationFrameScheduler(AnimationFrameAction);\n","import { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nimport { SchedulerAction } from '../types';\n\nexport class VirtualTimeScheduler extends AsyncScheduler {\n\n  protected static frameTimeFactor: number = 10;\n\n  public frame: number = 0;\n  public index: number = -1;\n\n  constructor(SchedulerAction: typeof AsyncAction = VirtualAction as any,\n              public maxFrames: number = Number.POSITIVE_INFINITY) {\n    super(SchedulerAction, () => this.frame);\n  }\n\n  /**\n   * Prompt the Scheduler to execute all of its queued actions, therefore\n   * clearing its queue.\n   * @return {void}\n   */\n  public flush(): void {\n\n    const {actions, maxFrames} = this;\n    let error: any, action: AsyncAction<any>;\n\n    while ((action = actions[0]) && action.delay <= maxFrames) {\n      actions.shift();\n      this.frame = action.delay;\n\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    }\n\n    if (error) {\n      while (action = actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @nodoc\n */\nexport class VirtualAction<T> extends AsyncAction<T> {\n\n  protected active: boolean = true;\n\n  constructor(protected scheduler: VirtualTimeScheduler,\n              protected work: (this: SchedulerAction<T>, state?: T) => void,\n              protected index: number = scheduler.index += 1) {\n    super(scheduler, work);\n    this.index = scheduler.index = index;\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (!this.id) {\n      return super.schedule(state, delay);\n    }\n    this.active = false;\n    // If an action is rescheduled, we save allocations by mutating its state,\n    // pushing it to the end of the scheduler queue, and recycling the action.\n    // But since the VirtualTimeScheduler is used for testing, VirtualActions\n    // must be immutable so they can be inspected later.\n    const action = new VirtualAction(this.scheduler, this.work);\n    this.add(action);\n    return action.schedule(state, delay);\n  }\n\n  protected requestAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): any {\n    this.delay = scheduler.frame + delay;\n    const {actions} = scheduler;\n    actions.push(this);\n    (actions as Array<VirtualAction<T>>).sort(VirtualAction.sortActions);\n    return true;\n  }\n\n  protected recycleAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): any {\n    return undefined;\n  }\n\n  protected _execute(state: T, delay: number): any {\n    if (this.active === true) {\n      return super._execute(state, delay);\n    }\n  }\n\n  public static sortActions<T>(a: VirtualAction<T>, b: VirtualAction<T>) {\n    if (a.delay === b.delay) {\n      if (a.index === b.index) {\n        return 0;\n      } else if (a.index > b.index) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else if (a.delay > b.delay) {\n      return 1;\n    } else {\n      return -1;\n    }\n  }\n}\n","export function identity<T>(x: T): T {\n  return x;\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput } from '../types';\n\n/**\n * Tests to see if the object is an RxJS {@link Observable}\n * @param obj the object to test\n */\nexport function isObservable<T>(obj: any): obj is Observable<T> {\n  return !!obj && (obj instanceof Observable || (typeof obj.lift === 'function' && typeof obj.subscribe === 'function'));\n}\n","export interface ArgumentOutOfRangeError extends Error {\n}\n\nexport interface ArgumentOutOfRangeErrorCtor {\n  new(): ArgumentOutOfRangeError;\n}\n\nconst ArgumentOutOfRangeErrorImpl = (() => {\n  function ArgumentOutOfRangeErrorImpl(this: any) {\n    Error.call(this);\n    this.message = 'argument out of range';\n    this.name = 'ArgumentOutOfRangeError';\n    return this;\n  }\n\n  ArgumentOutOfRangeErrorImpl.prototype = Object.create(Error.prototype);\n\n  return ArgumentOutOfRangeErrorImpl;\n})();\n\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nexport const ArgumentOutOfRangeError: ArgumentOutOfRangeErrorCtor = ArgumentOutOfRangeErrorImpl as any;","export interface EmptyError extends Error {\n}\n\nexport interface EmptyErrorCtor {\n  new(): EmptyError;\n}\n\nconst EmptyErrorImpl = (() => {\n  function EmptyErrorImpl(this: any) {\n    Error.call(this);\n    this.message = 'no elements in sequence';\n    this.name = 'EmptyError';\n    return this;\n  }\n\n  EmptyErrorImpl.prototype = Object.create(Error.prototype);\n\n  return EmptyErrorImpl;\n})();\n\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n *\n * @class EmptyError\n */\nexport const EmptyError: EmptyErrorCtor = EmptyErrorImpl as any;","export interface TimeoutError extends Error {\n}\n\nexport interface TimeoutErrorCtor {\n  new(): TimeoutError;\n}\n\nconst TimeoutErrorImpl = (() => {\n  function TimeoutErrorImpl(this: any) {\n    Error.call(this);\n    this.message = 'Timeout has occurred';\n    this.name = 'TimeoutError';\n    return this;\n  }\n\n  TimeoutErrorImpl.prototype = Object.create(Error.prototype);\n\n  return TimeoutErrorImpl;\n})();\n\n/**\n * An error thrown when duetime elapses.\n *\n * @see {@link operators/timeout}\n *\n * @class TimeoutError\n */\nexport const TimeoutError: TimeoutErrorCtor = TimeoutErrorImpl as any;\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction } from '../types';\n\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * ![](map.png)\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * ## Example\n * Map every click to the clientX position of that click\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { map } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const positions = clicks.pipe(map(ev => ev.clientX));\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\n  return function mapOperation(source: Observable<T>): Observable<R> {\n    if (typeof project !== 'function') {\n      throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n    }\n    return source.lift(new MapOperator(project, thisArg));\n  };\n}\n\nexport class MapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => R, private thisArg: any) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass MapSubscriber<T, R> extends Subscriber<T> {\n  count: number = 0;\n  private thisArg: any;\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => R,\n              thisArg: any) {\n    super(destination);\n    this.thisArg = thisArg || this;\n  }\n\n  // NOTE: This looks unoptimized, but it's actually purposefully NOT\n  // using try/catch optimizations.\n  protected _next(value: T) {\n    let result: R;\n    try {\n      result = this.project.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  }\n}\n","import { SchedulerLike, SchedulerAction } from '../types';\nimport { Observable } from '../Observable';\nimport { AsyncSubject } from '../AsyncSubject';\nimport { Subscriber } from '../Subscriber';\nimport { map } from '../operators/map';\nimport { canReportError } from '../util/canReportError';\nimport { isArray } from '../util/isArray';\nimport { isScheduler } from '../util/isScheduler';\n\n// tslint:disable:max-line-length\n/** @deprecated resultSelector is no longer supported, use a mapping function. */\nexport function bindCallback(callbackFunc: Function, resultSelector: Function, scheduler?: SchedulerLike): (...args: any[]) => Observable<any>;\n\nexport function bindCallback<R1, R2, R3, R4>(callbackFunc: (callback: (res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): () => Observable<any[]>;\nexport function bindCallback<R1, R2, R3>(callbackFunc: (callback: (res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): () => Observable<[R1, R2, R3]>;\nexport function bindCallback<R1, R2>(callbackFunc: (callback: (res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): () => Observable<[R1, R2]>;\nexport function bindCallback<R1>(callbackFunc: (callback: (res1: R1) => any) => any, scheduler?: SchedulerLike): () => Observable<R1>;\nexport function bindCallback(callbackFunc: (callback: () => any) => any, scheduler?: SchedulerLike): () => Observable<void>;\n\nexport function bindCallback<A1, R1, R2, R3, R4>(callbackFunc: (arg1: A1, callback: (res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<any[]>;\nexport function bindCallback<A1, R1, R2, R3>(callbackFunc: (arg1: A1, callback: (res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<[R1, R2, R3]>;\nexport function bindCallback<A1, R1, R2>(callbackFunc: (arg1: A1, callback: (res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<[R1, R2]>;\nexport function bindCallback<A1, R1>(callbackFunc: (arg1: A1, callback: (res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<R1>;\nexport function bindCallback<A1>(callbackFunc: (arg1: A1, callback: () => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<void>;\n\nexport function bindCallback<A1, A2, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, callback: (res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<any[]>;\nexport function bindCallback<A1, A2, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, callback: (res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<[R1, R2, R3]>;\nexport function bindCallback<A1, A2, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, callback: (res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<[R1, R2]>;\nexport function bindCallback<A1, A2, R1>(callbackFunc: (arg1: A1, arg2: A2, callback: (res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<R1>;\nexport function bindCallback<A1, A2>(callbackFunc: (arg1: A1, arg2: A2, callback: () => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<void>;\n\nexport function bindCallback<A1, A2, A3, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<any[]>;\nexport function bindCallback<A1, A2, A3, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<[R1, R2, R3]>;\nexport function bindCallback<A1, A2, A3, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<[R1, R2]>;\nexport function bindCallback<A1, A2, A3, R1>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<R1>;\nexport function bindCallback<A1, A2, A3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: () => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<void>;\n\nexport function bindCallback<A1, A2, A3, A4, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<any[]>;\nexport function bindCallback<A1, A2, A3, A4, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<[R1, R2, R3]>;\nexport function bindCallback<A1, A2, A3, A4, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<[R1, R2]>;\nexport function bindCallback<A1, A2, A3, A4, R1>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<R1>;\nexport function bindCallback<A1, A2, A3, A4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: () => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<void>;\n\nexport function bindCallback<A1, A2, A3, A4, A5, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<any[]>;\nexport function bindCallback<A1, A2, A3, A4, A5, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<[R1, R2, R3]>;\nexport function bindCallback<A1, A2, A3, A4, A5, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<[R1, R2]>;\nexport function bindCallback<A1, A2, A3, A4, A5, R1>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<R1>;\nexport function bindCallback<A1, A2, A3, A4, A5>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: () => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<void>;\n\nexport function bindCallback<A, R>(callbackFunc: (...args: Array<A | ((result: R) => any)>) => any, scheduler?: SchedulerLike): (...args: A[]) => Observable<R>;\nexport function bindCallback<A, R>(callbackFunc: (...args: Array<A | ((...results: R[]) => any)>) => any, scheduler?: SchedulerLike): (...args: A[]) => Observable<R[]>;\n\nexport function bindCallback(callbackFunc: Function, scheduler?: SchedulerLike): (...args: any[]) => Observable<any>;\n\n// tslint:enable:max-line-length\n\n/**\n * Converts a callback API to a function that returns an Observable.\n *\n * <span class=\"informal\">Give it a function `f` of type `f(x, callback)` and\n * it will return a function `g` that when called as `g(x)` will output an\n * Observable.</span>\n *\n * `bindCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters. The\n * last parameter must be a callback function that `func` calls when it is\n * done.\n *\n * The output of `bindCallback` is a function that takes the same parameters\n * as `func`, except the last one (the callback). When the output function\n * is called with arguments it will return an Observable. If function `func`\n * calls its callback with one argument, the Observable will emit that value.\n * If on the other hand the callback is called with multiple values the resulting\n * Observable will emit an array with said values as arguments.\n *\n * It is **very important** to remember that input function `func` is not called\n * when the output function is, but rather when the Observable returned by the output\n * function is subscribed. This means if `func` makes an AJAX request, that request\n * will be made every time someone subscribes to the resulting Observable, but not before.\n *\n * The last optional parameter - `scheduler` - can be used to control when the call\n * to `func` happens after someone subscribes to Observable, as well as when results\n * passed to callback will be emitted. By default, the subscription to an Observable calls `func`\n * synchronously, but using {@link asyncScheduler} as the last parameter will defer the call to `func`,\n * just like wrapping the call in `setTimeout` with a timeout of `0` would. If you were to use the async Scheduler\n * and call `subscribe` on the output Observable, all function calls that are currently executing\n * will end before `func` is invoked.\n *\n * By default, results passed to the callback are emitted immediately after `func` invokes the callback.\n * In particular, if the callback is called synchronously, then the subscription of the resulting Observable\n * will call the `next` function synchronously as well.  If you want to defer that call,\n * you may use {@link asyncScheduler} just as before.  This means that by using `Scheduler.async` you can\n * ensure that `func` always calls its callback asynchronously, thus avoiding terrifying Zalgo.\n *\n * Note that the Observable created by the output function will always emit a single value\n * and then complete immediately. If `func` calls the callback multiple times, values from subsequent\n * calls will not appear in the stream. If you need to listen for multiple calls,\n *  you probably want to use {@link fromEvent} or {@link fromEventPattern} instead.\n *\n * If `func` depends on some context (`this` property) and is not already bound, the context of `func`\n * will be the context that the output function has at call time. In particular, if `func`\n * is called as a method of some objec and if `func` is not already bound, in order to preserve the context\n * it is recommended that the context of the output function is set to that object as well.\n *\n * If the input function calls its callback in the \"node style\" (i.e. first argument to callback is\n * optional error parameter signaling whether the call failed or not), {@link bindNodeCallback}\n * provides convenient error handling and probably is a better choice.\n * `bindCallback` will treat such functions the same as any other and error parameters\n * (whether passed or not) will always be interpreted as regular callback argument.\n *\n * ## Examples\n *\n * ### Convert jQuery's getJSON to an Observable API\n * ```ts\n * import { bindCallback } from 'rxjs';\n * import * as jQuery from 'jquery';\n *\n * // Suppose we have jQuery.getJSON('/my/url', callback)\n * const getJSONAsObservable = bindCallback(jQuery.getJSON);\n * const result = getJSONAsObservable('/my/url');\n * result.subscribe(x => console.log(x), e => console.error(e));\n * ```\n *\n * ### Receive an array of arguments passed to a callback\n * ```ts\n * import { bindCallback } from 'rxjs';\n *\n * const someFunction = (a, b, c) => {\n *   console.log(a); // 5\n *   console.log(b); // 'some string'\n *   console.log(c); // {someProperty: 'someValue'}\n * };\n *\n * const boundSomeFunction = bindCallback(someFunction);\n * boundSomeFunction().subscribe(values => {\n *   console.log(values) // [5, 'some string', {someProperty: 'someValue'}]\n * });\n * ```\n *\n * ### Compare behaviour with and without async Scheduler\n * ```ts\n * import { bindCallback } from 'rxjs';\n *\n * function iCallMyCallbackSynchronously(cb) {\n *   cb();\n * }\n *\n * const boundSyncFn = bindCallback(iCallMyCallbackSynchronously);\n * const boundAsyncFn = bindCallback(iCallMyCallbackSynchronously, null, Rx.Scheduler.async);\n *\n * boundSyncFn().subscribe(() => console.log('I was sync!'));\n * boundAsyncFn().subscribe(() => console.log('I was async!'));\n * console.log('This happened...');\n *\n * // Logs:\n * // I was sync!\n * // This happened...\n * // I was async!\n * ```\n *\n * ### Use bindCallback on an object method\n * ```ts\n * import { bindCallback } from 'rxjs';\n *\n * const boundMethod = bindCallback(someObject.methodWithCallback);\n * boundMethod.call(someObject) // make sure methodWithCallback has access to someObject\n * .subscribe(subscriber);\n * ```\n *\n * @see {@link bindNodeCallback}\n * @see {@link from}\n *\n * @param {function} func A function with a callback as the last parameter.\n * @param {SchedulerLike} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the callback would deliver.\n * @name bindCallback\n */\nexport function bindCallback<T>(\n  callbackFunc: Function,\n  resultSelector?: Function|SchedulerLike,\n  scheduler?: SchedulerLike\n): (...args: any[]) => Observable<T> {\n  if (resultSelector) {\n    if (isScheduler(resultSelector)) {\n      scheduler = resultSelector;\n    } else {\n      // DEPRECATED PATH\n      return (...args: any[]) => bindCallback(callbackFunc, scheduler)(...args).pipe(\n        map((args) => isArray(args) ? resultSelector(...args) : resultSelector(args)),\n      );\n    }\n  }\n\n  return function (this: any, ...args: any[]): Observable<T> {\n    const context = this;\n    let subject: AsyncSubject<T>;\n    const params = {\n      context,\n      subject,\n      callbackFunc,\n      scheduler,\n    };\n    return new Observable<T>(subscriber => {\n      if (!scheduler) {\n        if (!subject) {\n          subject = new AsyncSubject<T>();\n          const handler = (...innerArgs: any[]) => {\n            subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n            subject.complete();\n          };\n\n          try {\n            callbackFunc.apply(context, [...args, handler]);\n          } catch (err) {\n            if (canReportError(subject)) {\n              subject.error(err);\n            } else {\n              console.warn(err);\n            }\n          }\n        }\n        return subject.subscribe(subscriber);\n      } else {\n        const state: DispatchState<T> = {\n          args, subscriber, params,\n        };\n        return scheduler.schedule<DispatchState<T>>(dispatch, 0, state);\n      }\n    });\n  };\n}\n\ninterface DispatchState<T> {\n  args: any[];\n  subscriber: Subscriber<T>;\n  params: ParamsContext<T>;\n}\n\ninterface ParamsContext<T> {\n  callbackFunc: Function;\n  scheduler: SchedulerLike;\n  context: any;\n  subject: AsyncSubject<T>;\n}\n\nfunction dispatch<T>(this: SchedulerAction<DispatchState<T>>, state: DispatchState<T>) {\n  const self = this;\n  const { args, subscriber, params } = state;\n  const { callbackFunc, context, scheduler } = params;\n  let { subject } = params;\n  if (!subject) {\n    subject = params.subject = new AsyncSubject<T>();\n\n    const handler = (...innerArgs: any[]) => {\n      const value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n      this.add(scheduler.schedule<NextState<T>>(dispatchNext, 0, { value, subject }));\n    };\n\n    try {\n      callbackFunc.apply(context, [...args, handler]);\n    } catch (err) {\n      subject.error(err);\n    }\n  }\n\n  this.add(subject.subscribe(subscriber));\n}\n\ninterface NextState<T> {\n  subject: AsyncSubject<T>;\n  value: T;\n}\n\nfunction dispatchNext<T>(this: SchedulerAction<NextState<T>>, state: NextState<T>) {\n  const { value, subject } = state;\n  subject.next(value);\n  subject.complete();\n}\n\ninterface ErrorState<T> {\n  subject: AsyncSubject<T>;\n  err: any;\n}\n\nfunction dispatchError<T>(this: SchedulerAction<ErrorState<T>>, state: ErrorState<T>) {\n  const { err, subject } = state;\n  subject.error(err);\n}\n","import { Observable } from '../Observable';\nimport { AsyncSubject } from '../AsyncSubject';\nimport { Subscriber } from '../Subscriber';\nimport { SchedulerAction, SchedulerLike } from '../types';\nimport { map } from '../operators/map';\nimport { canReportError } from '../util/canReportError';\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\n\n/* tslint:disable:max-line-length */\n/** @deprecated resultSelector is deprecated, pipe to map instead */\nexport function bindNodeCallback(callbackFunc: Function, resultSelector: Function, scheduler?: SchedulerLike): (...args: any[]) => Observable<any>;\n\nexport function bindNodeCallback<R1, R2, R3, R4>(callbackFunc: (callback: (err: any, res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (...args: any[]) => Observable<any[]>;\nexport function bindNodeCallback<R1, R2, R3>(callbackFunc: (callback: (err: any, res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): () => Observable<[R1, R2, R3]>;\nexport function bindNodeCallback<R1, R2>(callbackFunc: (callback: (err: any, res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): () => Observable<[R1, R2]>;\nexport function bindNodeCallback<R1>(callbackFunc: (callback: (err: any, res1: R1) => any) => any, scheduler?: SchedulerLike): () => Observable<R1>;\nexport function bindNodeCallback(callbackFunc: (callback: (err: any) => any) => any, scheduler?: SchedulerLike): () => Observable<void>;\n\nexport function bindNodeCallback<A1, R1, R2, R3, R4>(callbackFunc: (arg1: A1, callback: (err: any, res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (...args: any[]) => Observable<any[]>;\nexport function bindNodeCallback<A1, R1, R2, R3>(callbackFunc: (arg1: A1, callback: (err: any, res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<[R1, R2, R3]>;\nexport function bindNodeCallback<A1, R1, R2>(callbackFunc: (arg1: A1, callback: (err: any, res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<[R1, R2]>;\nexport function bindNodeCallback<A1, R1>(callbackFunc: (arg1: A1, callback: (err: any, res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<R1>;\nexport function bindNodeCallback<A1>(callbackFunc: (arg1: A1, callback: (err: any) => any) => any, scheduler?: SchedulerLike): (arg1: A1) => Observable<void>;\n\nexport function bindNodeCallback<A1, A2, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, callback: (err: any, res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (...args: any[]) => Observable<any[]>;\nexport function bindNodeCallback<A1, A2, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, callback: (err: any, res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<[R1, R2, R3]>;\nexport function bindNodeCallback<A1, A2, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, callback: (err: any, res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<[R1, R2]>;\nexport function bindNodeCallback<A1, A2, R1>(callbackFunc: (arg1: A1, arg2: A2, callback: (err: any, res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<R1>;\nexport function bindNodeCallback<A1, A2>(callbackFunc: (arg1: A1, arg2: A2, callback: (err: any) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2) => Observable<void>;\n\nexport function bindNodeCallback<A1, A2, A3, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (err: any, res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (...args: any[]) => Observable<any[]>;\nexport function bindNodeCallback<A1, A2, A3, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (err: any, res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<[R1, R2, R3]>;\nexport function bindNodeCallback<A1, A2, A3, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (err: any, res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<[R1, R2]>;\nexport function bindNodeCallback<A1, A2, A3, R1>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (err: any, res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<R1>;\nexport function bindNodeCallback<A1, A2, A3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, callback: (err: any) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3) => Observable<void>;\n\nexport function bindNodeCallback<A1, A2, A3, A4, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (err: any, res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (...args: any[]) => Observable<any[]>;\nexport function bindNodeCallback<A1, A2, A3, A4, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (err: any, res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<[R1, R2, R3]>;\nexport function bindNodeCallback<A1, A2, A3, A4, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (err: any, res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<[R1, R2]>;\nexport function bindNodeCallback<A1, A2, A3, A4, R1>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (err: any, res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<R1>;\nexport function bindNodeCallback<A1, A2, A3, A4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, callback: (err: any) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4) => Observable<void>;\n\nexport function bindNodeCallback<A1, A2, A3, A4, A5, R1, R2, R3, R4>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (err: any, res1: R1, res2: R2, res3: R3, res4: R4, ...args: any[]) => any) => any, scheduler?: SchedulerLike): (...args: any[]) => Observable<any[]>;\nexport function bindNodeCallback<A1, A2, A3, A4, A5, R1, R2, R3>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (err: any, res1: R1, res2: R2, res3: R3) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<[R1, R2, R3]>;\nexport function bindNodeCallback<A1, A2, A3, A4, A5, R1, R2>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (err: any, res1: R1, res2: R2) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<[R1, R2]>;\nexport function bindNodeCallback<A1, A2, A3, A4, A5, R1>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (err: any, res1: R1) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<R1>;\nexport function bindNodeCallback<A1, A2, A3, A4, A5>(callbackFunc: (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5, callback: (err: any) => any) => any, scheduler?: SchedulerLike): (arg1: A1, arg2: A2, arg3: A3, arg4: A4, arg5: A5) => Observable<void>; /* tslint:enable:max-line-length */\n\nexport function bindNodeCallback(callbackFunc: Function, scheduler?: SchedulerLike): (...args: any[]) => Observable<any[]>;\n/**\n * Converts a Node.js-style callback API to a function that returns an\n * Observable.\n *\n * <span class=\"informal\">It's just like {@link bindCallback}, but the\n * callback is expected to be of type `callback(error, result)`.</span>\n *\n * `bindNodeCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters, but the\n * last parameter must be a callback function that `func` calls when it is\n * done. The callback function is expected to follow Node.js conventions,\n * where the first argument to the callback is an error object, signaling\n * whether call was successful. If that object is passed to callback, it means\n * something went wrong.\n *\n * The output of `bindNodeCallback` is a function that takes the same\n * parameters as `func`, except the last one (the callback). When the output\n * function is called with arguments, it will return an Observable.\n * If `func` calls its callback with error parameter present, Observable will\n * error with that value as well. If error parameter is not passed, Observable will emit\n * second parameter. If there are more parameters (third and so on),\n * Observable will emit an array with all arguments, except first error argument.\n *\n * Note that `func` will not be called at the same time output function is,\n * but rather whenever resulting Observable is subscribed. By default call to\n * `func` will happen synchronously after subscription, but that can be changed\n * with proper `scheduler` provided as optional third parameter. {@link SchedulerLike}\n * can also control when values from callback will be emitted by Observable.\n * To find out more, check out documentation for {@link bindCallback}, where\n * {@link SchedulerLike} works exactly the same.\n *\n * As in {@link bindCallback}, context (`this` property) of input function will be set to context\n * of returned function, when it is called.\n *\n * After Observable emits value, it will complete immediately. This means\n * even if `func` calls callback again, values from second and consecutive\n * calls will never appear on the stream. If you need to handle functions\n * that call callbacks multiple times, check out {@link fromEvent} or\n * {@link fromEventPattern} instead.\n *\n * Note that `bindNodeCallback` can be used in non-Node.js environments as well.\n * \"Node.js-style\" callbacks are just a convention, so if you write for\n * browsers or any other environment and API you use implements that callback style,\n * `bindNodeCallback` can be safely used on that API functions as well.\n *\n * Remember that Error object passed to callback does not have to be an instance\n * of JavaScript built-in `Error` object. In fact, it does not even have to an object.\n * Error parameter of callback function is interpreted as \"present\", when value\n * of that parameter is truthy. It could be, for example, non-zero number, non-empty\n * string or boolean `true`. In all of these cases resulting Observable would error\n * with that value. This means usually regular style callbacks will fail very often when\n * `bindNodeCallback` is used. If your Observable errors much more often then you\n * would expect, check if callback really is called in Node.js-style and, if not,\n * switch to {@link bindCallback} instead.\n *\n * Note that even if error parameter is technically present in callback, but its value\n * is falsy, it still won't appear in array emitted by Observable.\n *\n * ## Examples\n * ###  Read a file from the filesystem and get the data as an Observable\n * ```ts\n * import * as fs from 'fs';\n * const readFileAsObservable = bindNodeCallback(fs.readFile);\n * const result = readFileAsObservable('./roadNames.txt', 'utf8');\n * result.subscribe(x => console.log(x), e => console.error(e));\n * ```\n *\n * ### Use on function calling callback with multiple arguments\n * ```ts\n * someFunction((err, a, b) => {\n *   console.log(err); // null\n *   console.log(a); // 5\n *   console.log(b); // \"some string\"\n * });\n * const boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(value => {\n *   console.log(value); // [5, \"some string\"]\n * });\n * ```\n *\n * ### Use on function calling callback in regular style\n * ```ts\n * someFunction(a => {\n *   console.log(a); // 5\n * });\n * const boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(\n *   value => {}             // never gets called\n *   err => console.log(err) // 5\n * );\n * ```\n *\n * @see {@link bindCallback}\n * @see {@link from}\n *\n * @param {function} func Function with a Node.js-style callback as the last parameter.\n * @param {SchedulerLike} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the Node.js callback would\n * deliver.\n * @name bindNodeCallback\n */\nexport function bindNodeCallback<T>(\n  callbackFunc: Function,\n  resultSelector: Function|SchedulerLike,\n  scheduler?: SchedulerLike\n): (...args: any[]) => Observable<T> {\n\n  if (resultSelector) {\n    if (isScheduler(resultSelector)) {\n      scheduler = resultSelector;\n    } else {\n      // DEPRECATED PATH\n      return (...args: any[]) => bindNodeCallback(callbackFunc, scheduler)(...args).pipe(\n        map(args => isArray(args) ? resultSelector(...args) : resultSelector(args))\n      );\n    }\n  }\n\n  return function(this: any, ...args: any[]): Observable<T> {\n    const params: ParamsState<T> = {\n      subject: undefined,\n      args,\n      callbackFunc,\n      scheduler,\n      context: this,\n    };\n    return new Observable<T>(subscriber => {\n      const { context } = params;\n      let { subject } = params;\n      if (!scheduler) {\n        if (!subject) {\n          subject = params.subject = new AsyncSubject<T>();\n          const handler = (...innerArgs: any[]) => {\n            const err = innerArgs.shift();\n\n            if (err) {\n              subject.error(err);\n              return;\n            }\n\n            subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n            subject.complete();\n          };\n\n          try {\n            callbackFunc.apply(context, [...args, handler]);\n          } catch (err) {\n            if (canReportError(subject)) {\n              subject.error(err);\n            } else {\n              console.warn(err);\n            }\n          }\n        }\n        return subject.subscribe(subscriber);\n      } else {\n        return scheduler.schedule<DispatchState<T>>(dispatch, 0, { params, subscriber, context });\n      }\n    });\n  };\n}\n\ninterface DispatchState<T> {\n  subscriber: Subscriber<T>;\n  context: any;\n  params: ParamsState<T>;\n}\n\ninterface ParamsState<T> {\n  callbackFunc: Function;\n  args: any[];\n  scheduler: SchedulerLike;\n  subject: AsyncSubject<T>;\n  context: any;\n}\n\nfunction dispatch<T>(this: SchedulerAction<DispatchState<T>>, state: DispatchState<T>) {\n  const { params, subscriber, context } = state;\n  const { callbackFunc, args, scheduler } = params;\n  let subject = params.subject;\n\n  if (!subject) {\n    subject = params.subject = new AsyncSubject<T>();\n\n    const handler = (...innerArgs: any[]) => {\n      const err = innerArgs.shift();\n      if (err) {\n        this.add(scheduler.schedule<DispatchErrorArg<T>>(dispatchError, 0, { err, subject }));\n      } else {\n        const value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n        this.add(scheduler.schedule<DispatchNextArg<T>>(dispatchNext, 0, { value, subject }));\n      }\n    };\n\n    try {\n      callbackFunc.apply(context, [...args, handler]);\n    } catch (err) {\n      this.add(scheduler.schedule<DispatchErrorArg<T>>(dispatchError, 0, { err, subject }));\n    }\n  }\n\n  this.add(subject.subscribe(subscriber));\n}\n\ninterface DispatchNextArg<T> {\n  subject: AsyncSubject<T>;\n  value: T;\n}\n\nfunction dispatchNext<T>(arg: DispatchNextArg<T>) {\n  const { value, subject } = arg;\n  subject.next(value);\n  subject.complete();\n}\n\ninterface DispatchErrorArg<T> {\n  subject: AsyncSubject<T>;\n  err: any;\n}\n\nfunction dispatchError<T>(arg: DispatchErrorArg<T>) {\n  const { err, subject } = arg;\n  subject.error(err);\n}\n","import { Subscriber } from './Subscriber';\nimport { InnerSubscriber } from './InnerSubscriber';\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class OuterSubscriber<T, R> extends Subscriber<T> {\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.destination.next(innerValue);\n  }\n\n  notifyError(error: any, innerSub: InnerSubscriber<T, R>): void {\n    this.destination.error(error);\n  }\n\n  notifyComplete(innerSub: InnerSubscriber<T, R>): void {\n    this.destination.complete();\n  }\n}\n","import { Subscriber } from './Subscriber';\nimport { OuterSubscriber } from './OuterSubscriber';\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class InnerSubscriber<T, R> extends Subscriber<R> {\n  private index = 0;\n\n  constructor(private parent: OuterSubscriber<T, R>, public outerValue: T, public outerIndex: number) {\n    super();\n  }\n\n  protected _next(value: R): void {\n    this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n  }\n\n  protected _error(error: any): void {\n    this.parent.notifyError(error, this);\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.parent.notifyComplete(this);\n    this.unsubscribe();\n  }\n}\n","import { Subscriber } from '../Subscriber';\nimport { hostReportError } from './hostReportError';\n\nexport const subscribeToPromise = <T>(promise: PromiseLike<T>) => (subscriber: Subscriber<T>) => {\n  promise.then(\n    (value) => {\n      if (!subscriber.closed) {\n        subscriber.next(value);\n        subscriber.complete();\n      }\n    },\n    (err: any) => subscriber.error(err)\n  )\n  .then(null, hostReportError);\n  return subscriber;\n};\n","export function getSymbolIterator(): symbol {\n  if (typeof Symbol !== 'function' || !Symbol.iterator) {\n    return '@@iterator' as any;\n  }\n\n  return Symbol.iterator;\n}\n\nexport const iterator = getSymbolIterator();\n\n/**\n * @deprecated use {@link iterator} instead\n */\nexport const $$iterator = iterator;\n","import { Subscriber } from '../Subscriber';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\n\nexport const subscribeToIterable = <T>(iterable: Iterable<T>) => (subscriber: Subscriber<T>) => {\n  const iterator = iterable[Symbol_iterator]();\n  do {\n    const item = iterator.next();\n    if (item.done) {\n      subscriber.complete();\n      break;\n    }\n    subscriber.next(item.value);\n    if (subscriber.closed) {\n      break;\n    }\n  } while (true);\n\n  // Finalize the iterator if it happens to be a Generator\n  if (typeof iterator.return === 'function') {\n    subscriber.add(() => {\n      if (iterator.return) {\n        iterator.return();\n      }\n    });\n  }\n\n  return subscriber;\n};\n","import { Subscriber } from '../Subscriber';\nimport { observable as Symbol_observable } from '../symbol/observable';\n\n/**\n * Subscribes to an object that implements Symbol.observable with the given\n * Subscriber.\n * @param obj An object that implements Symbol.observable\n */\nexport const subscribeToObservable = <T>(obj: any) => (subscriber: Subscriber<T>) => {\n  const obs = obj[Symbol_observable]();\n  if (typeof obs.subscribe !== 'function') {\n    // Should be caught by observable subscribe function error handling.\n    throw new TypeError('Provided object does not correctly implement Symbol.observable');\n  } else {\n    return obs.subscribe(subscriber);\n  }\n};\n","export const isArrayLike = (<T>(x: any): x is ArrayLike<T> => x && typeof x.length === 'number' && typeof x !== 'function');","/**\n * Tests to see if the object is an ES2015 (ES6) Promise\n * @see {@link https://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects}\n * @param value the object to test\n */\nexport function isPromise(value: any): value is PromiseLike<any> {\n  return !!value && typeof (<any>value).subscribe !== 'function' && typeof (value as any).then === 'function';\n}\n","import { ObservableInput } from '../types';\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nimport { Subscription } from '../Subscription';\nimport { Subscriber } from '../Subscriber';\n\nexport const subscribeTo = <T>(result: ObservableInput<T>): (subscriber: Subscriber<T>) => Subscription | void => {\n  if (!!result && typeof result[Symbol_observable] === 'function') {\n    return subscribeToObservable(result as any);\n  } else if (isArrayLike(result)) {\n    return subscribeToArray(result);\n  } else if (isPromise(result)) {\n    return subscribeToPromise(result as Promise<any>);\n  } else if (!!result && typeof result[Symbol_iterator] === 'function') {\n    return subscribeToIterable(result as any);\n  } else {\n    const value = isObject(result) ? 'an invalid object' : `'${result}'`;\n    const msg = `You provided ${value} where a stream was expected.`\n      + ' You can provide an Observable, Promise, Array, or Iterable.';\n    throw new TypeError(msg);\n  }\n};\n","import { Subscription } from '../Subscription';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { Subscriber } from '../Subscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\n\nexport function subscribeToResult<T, R>(\n  outerSubscriber: OuterSubscriber<T, R>,\n  result: any,\n  outerValue: undefined,\n  outerIndex: undefined,\n  innerSubscriber: InnerSubscriber<T, R>\n): Subscription | undefined;\n\nexport function subscribeToResult<T, R>(\n  outerSubscriber: OuterSubscriber<T, R>,\n  result: any,\n  outerValue?: T,\n  outerIndex?: number\n): Subscription | undefined;\n\nexport function subscribeToResult<T, R>(\n  outerSubscriber: OuterSubscriber<T, R>,\n  result: any,\n  outerValue?: T,\n  outerIndex?: number,\n  innerSubscriber: Subscriber<R> = new InnerSubscriber(outerSubscriber, outerValue, outerIndex)\n): Subscription | undefined {\n  if (innerSubscriber.closed) {\n    return undefined;\n  }\n  if (result instanceof Observable) {\n    return result.subscribe(innerSubscriber);\n  }\n  return subscribeTo(result)(innerSubscriber) as Subscription;\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike, ObservedValueOf } from '../types';\nimport { isScheduler  } from '../util/isScheduler';\nimport { isArray  } from '../util/isArray';\nimport { Subscriber } from '../Subscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { Operator } from '../Operator';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { fromArray } from './fromArray';\n\nconst NONE = {};\n\n/* tslint:disable:max-line-length */\n\n// If called with a single array, it \"auto-spreads\" the array, with result selector\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, R>(sources: [O1], resultSelector: (v1: ObservedValueOf<O1>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, R>(sources: [O1, O2], resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, R>(sources: [O1, O2, O3], resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, R>(sources: [O1, O2, O3, O4], resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, R>(sources: [O1, O2, O3, O4, O5], resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>, R>(sources: [O1, O2, O3, O4, O5, O6], resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>, v6: ObservedValueOf<O6>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O extends ObservableInput<any>, R>(sources: O[], resultSelector: (...args: ObservedValueOf<O>[]) => R, scheduler?: SchedulerLike): Observable<R>;\n\n// standard call, but with a result selector\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, R>(v1: O1, resultSelector: (v1: ObservedValueOf<O1>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, R>(v1: O1, v2: O2, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, v4: O4, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>) => R, scheduler?: SchedulerLike): Observable<R>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, v6: O6, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>, v6: ObservedValueOf<O6>) => R, scheduler?: SchedulerLike): Observable<R>;\n\n// With a scheduler (deprecated)\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O1 extends ObservableInput<any>>(sources: [O1], scheduler: SchedulerLike): Observable<[ObservedValueOf<O1>]>;\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>>(sources: [O1, O2], scheduler: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>]>;\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>>(sources: [O1, O2, O3], scheduler: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>]>;\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>>(sources: [O1, O2, O3, O4], scheduler: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>]>;\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>>(sources: [O1, O2, O3, O4, O5], scheduler: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>]>;\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>>(sources: [O1, O2, O3, O4, O5, O6], scheduler: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>, ObservedValueOf<O6>]>;\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O extends ObservableInput<any>>(sources: O[], scheduler: SchedulerLike): Observable<ObservedValueOf<O>[]>;\n\n// Best case\nexport function combineLatest<O1 extends ObservableInput<any>>(sources: [O1]): Observable<[ObservedValueOf<O1>]>;\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>>(sources: [O1, O2]): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>]>;\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>>(sources: [O1, O2, O3]): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>]>;\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>>(sources: [O1, O2, O3, O4]): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>]>;\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>>(sources: [O1, O2, O3, O4, O5]): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>]>;\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>>(sources: [O1, O2, O3, O4, O5, O6]): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>, ObservedValueOf<O6>]>;\nexport function combineLatest<O extends ObservableInput<any>>(sources: O[]): Observable<ObservedValueOf<O>[]>;\n\n// Standard calls\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O1 extends ObservableInput<any>>(v1: O1, scheduler?: SchedulerLike): Observable<[ObservedValueOf<O1>]>;\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>>(v1: O1, v2: O2, scheduler?: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>]>;\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, scheduler?: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>]>;\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, scheduler?: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>]>;\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, scheduler?: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>]>;\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, v6: O6, scheduler?: SchedulerLike): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>, ObservedValueOf<O6>]>;\n\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O extends ObservableInput<any>>(...observables: O[]): Observable<any[]>;\n\n/** @deprecated Pass arguments in a single array instead `combineLatest([a, b, c])` */\nexport function combineLatest<O extends ObservableInput<any>, R>(...observables: Array<ObservableInput<any> | ((...values: Array<any>) => R)>): Observable<R>;\n\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function combineLatest<O extends ObservableInput<any>, R>(array: O[], resultSelector: (...values: ObservedValueOf<O>[]) => R, scheduler?: SchedulerLike): Observable<R>;\n\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O extends ObservableInput<any>>(...observables: Array<O | SchedulerLike>): Observable<any[]>;\n\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<O extends ObservableInput<any>, R>(...observables: Array<O | ((...values: ObservedValueOf<O>[]) => R) | SchedulerLike>): Observable<R>;\n\n/** @deprecated Passing a scheduler here is deprecated, use {@link subscribeOn} and/or {@link observeOn} instead */\nexport function combineLatest<R>(...observables: Array<ObservableInput<any> | ((...values: Array<any>) => R) | SchedulerLike>): Observable<R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Combines multiple Observables to create an Observable whose values are\n * calculated from the latest values of each of its input Observables.\n *\n * <span class=\"informal\">Whenever any input Observable emits a value, it\n * computes a formula using the latest values from all the inputs, then emits\n * the output of that formula.</span>\n *\n * ![](combineLatest.png)\n *\n * `combineLatest` combines the values from all the Observables passed as\n * arguments. This is done by subscribing to each Observable in order and,\n * whenever any Observable emits, collecting an array of the most recent\n * values from each Observable. So if you pass `n` Observables to operator,\n * returned Observable will always emit an array of `n` values, in order\n * corresponding to order of passed Observables (value from the first Observable\n * on the first place and so on).\n *\n * Static version of `combineLatest` accepts either an array of Observables\n * or each Observable can be put directly as an argument. Note that array of\n * Observables is good choice, if you don't know beforehand how many Observables\n * you will combine. Passing empty array will result in Observable that\n * completes immediately.\n *\n * To ensure output array has always the same length, `combineLatest` will\n * actually wait for all input Observables to emit at least once,\n * before it starts emitting results. This means if some Observable emits\n * values before other Observables started emitting, all these values but the last\n * will be lost. On the other hand, if some Observable does not emit a value but\n * completes, resulting Observable will complete at the same moment without\n * emitting anything, since it will be now impossible to include value from\n * completed Observable in resulting array. Also, if some input Observable does\n * not emit any value and never completes, `combineLatest` will also never emit\n * and never complete, since, again, it will wait for all streams to emit some\n * value.\n *\n * If at least one Observable was passed to `combineLatest` and all passed Observables\n * emitted something, resulting Observable will complete when all combined\n * streams complete. So even if some Observable completes, result of\n * `combineLatest` will still emit values when other Observables do. In case\n * of completed Observable, its value from now on will always be the last\n * emitted value. On the other hand, if any Observable errors, `combineLatest`\n * will error immediately as well, and all other Observables will be unsubscribed.\n *\n * `combineLatest` accepts as optional parameter `project` function, which takes\n * as arguments all values that would normally be emitted by resulting Observable.\n * `project` can return any kind of value, which will be then emitted by Observable\n * instead of default array. Note that `project` does not take as argument that array\n * of values, but values themselves. That means default `project` can be imagined\n * as function that takes all its arguments and puts them into an array.\n *\n * ## Examples\n * ### Combine two timer Observables\n * ```ts\n * import { combineLatest, timer } from 'rxjs';\n *\n * const firstTimer = timer(0, 1000); // emit 0, 1, 2... after every second, starting from now\n * const secondTimer = timer(500, 1000); // emit 0, 1, 2... after every second, starting 0,5s from now\n * const combinedTimers = combineLatest(firstTimer, secondTimer);\n * combinedTimers.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0] after 0.5s\n * // [1, 0] after 1s\n * // [1, 1] after 1.5s\n * // [2, 1] after 2s\n * ```\n *\n * ### Combine an array of Observables\n * ```ts\n * import { combineLatest, of } from 'rxjs';\n * import { delay, starWith } from 'rxjs/operators';\n *\n * const observables = [1, 5, 10].map(\n *   n => of(n).pipe(\n *     delay(n * 1000),   // emit 0 and then emit n after n seconds\n *     startWith(0),\n *   )\n * );\n * const combined = combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0, 0] immediately\n * // [1, 0, 0] after 1s\n * // [1, 5, 0] after 5s\n * // [1, 5, 10] after 10s\n * ```\n *\n *\n * ### Use project function to dynamically calculate the Body-Mass Index\n * ```ts\n * import { combineLatest, of } from 'rxjs';\n * import { map } from 'rxjs/operators';\n *\n * const weight = of(70, 72, 76, 79, 75);\n * const height = of(1.76, 1.77, 1.78);\n * const bmi = combineLatest(weight, height).pipe(\n *   map(([w, h]) => w / (h * h)),\n * );\n * bmi.subscribe(x => console.log('BMI is ' + x));\n *\n * // With output to console:\n * // BMI is 24.212293388429753\n * // BMI is 23.93948099205209\n * // BMI is 23.671253629592222\n * ```\n *\n * @see {@link combineAll}\n * @see {@link merge}\n * @see {@link withLatestFrom}\n *\n * @param {ObservableInput} observable1 An input Observable to combine with other Observables.\n * @param {ObservableInput} observable2 An input Observable to combine with other Observables.\n * More than one input Observables may be given as arguments\n * or an array of Observables may be given as the first argument.\n * @param {function} [project] An optional function to project the values from\n * the combined latest values into a new value on the output Observable.\n * @param {SchedulerLike} [scheduler=null] The {@link SchedulerLike} to use for subscribing to\n * each input Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n */\nexport function combineLatest<O extends ObservableInput<any>, R>(\n  ...observables: (O | ((...values: ObservedValueOf<O>[]) => R) | SchedulerLike)[]\n): Observable<R> {\n  let resultSelector: (...values: Array<any>) => R =  null;\n  let scheduler: SchedulerLike = null;\n\n  if (isScheduler(observables[observables.length - 1])) {\n    scheduler = observables.pop() as SchedulerLike;\n  }\n\n  if (typeof observables[observables.length - 1] === 'function') {\n    resultSelector = observables.pop() as (...values: Array<any>) => R;\n  }\n\n  // if the first and only other argument besides the resultSelector is an array\n  // assume it's been called with `combineLatest([obs1, obs2, obs3], resultSelector)`\n  if (observables.length === 1 && isArray(observables[0])) {\n    observables = observables[0] as any;\n  }\n\n  return fromArray(observables, scheduler).lift(new CombineLatestOperator<ObservedValueOf<O>, R>(resultSelector));\n}\n\nexport class CombineLatestOperator<T, R> implements Operator<T, R> {\n  constructor(private resultSelector?: (...values: Array<any>) => R) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class CombineLatestSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private active: number = 0;\n  private values: any[] = [];\n  private observables: any[] = [];\n  private toRespond: number;\n\n  constructor(destination: Subscriber<R>, private resultSelector?: (...values: Array<any>) => R) {\n    super(destination);\n  }\n\n  protected _next(observable: any) {\n    this.values.push(NONE);\n    this.observables.push(observable);\n  }\n\n  protected _complete() {\n    const observables = this.observables;\n    const len = observables.length;\n    if (len === 0) {\n      this.destination.complete();\n    } else {\n      this.active = len;\n      this.toRespond = len;\n      for (let i = 0; i < len; i++) {\n        const observable = observables[i];\n        this.add(subscribeToResult(this, observable, observable, i));\n      }\n    }\n  }\n\n  notifyComplete(unused: Subscriber<R>): void {\n    if ((this.active -= 1) === 0) {\n      this.destination.complete();\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    const values = this.values;\n    const oldVal = values[outerIndex];\n    const toRespond = !this.toRespond\n      ? 0\n      : oldVal === NONE ? --this.toRespond : this.toRespond;\n    values[outerIndex] = innerValue;\n\n    if (toRespond === 0) {\n      if (this.resultSelector) {\n        this._tryResultSelector(values);\n      } else {\n        this.destination.next(values.slice());\n      }\n    }\n  }\n\n  private _tryResultSelector(values: any[]) {\n    let result: any;\n    try {\n      result = this.resultSelector.apply(this, values);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  }\n}\n","import { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nimport { InteropObservable, SchedulerLike, Subscribable } from '../types';\n\nexport function scheduleObservable<T>(input: InteropObservable<T>, scheduler: SchedulerLike) {\n  return new Observable<T>(subscriber => {\n    const sub = new Subscription();\n    sub.add(scheduler.schedule(() => {\n      const observable: Subscribable<T> = input[Symbol_observable]();\n      sub.add(observable.subscribe({\n        next(value) { sub.add(scheduler.schedule(() => subscriber.next(value))); },\n        error(err) { sub.add(scheduler.schedule(() => subscriber.error(err))); },\n        complete() { sub.add(scheduler.schedule(() => subscriber.complete())); },\n      }));\n    }));\n    return sub;\n  });\n}\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { Subscription } from '../Subscription';\n\nexport function schedulePromise<T>(input: PromiseLike<T>, scheduler: SchedulerLike) {\n  return new Observable<T>(subscriber => {\n    const sub = new Subscription();\n    sub.add(scheduler.schedule(() => input.then(\n      value => {\n        sub.add(scheduler.schedule(() => {\n          subscriber.next(value);\n          sub.add(scheduler.schedule(() => subscriber.complete()));\n        }));\n      },\n      err => {\n        sub.add(scheduler.schedule(() => subscriber.error(err)));\n      }\n    )));\n    return sub;\n  });\n}\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\n\nexport function scheduleIterable<T>(input: Iterable<T>, scheduler: SchedulerLike) {\n  if (!input) {\n    throw new Error('Iterable cannot be null');\n  }\n  return new Observable<T>(subscriber => {\n    const sub = new Subscription();\n    let iterator: Iterator<T>;\n    sub.add(() => {\n      // Finalize generators\n      if (iterator && typeof iterator.return === 'function') {\n        iterator.return();\n      }\n    });\n    sub.add(scheduler.schedule(() => {\n      iterator = input[Symbol_iterator]();\n      sub.add(scheduler.schedule(function () {\n        if (subscriber.closed) {\n          return;\n        }\n        let value: T;\n        let done: boolean;\n        try {\n          const result = iterator.next();\n          value = result.value;\n          done = result.done;\n        } catch (err) {\n          subscriber.error(err);\n          return;\n        }\n        if (done) {\n          subscriber.complete();\n        } else {\n          subscriber.next(value);\n          this.schedule();\n        }\n      }));\n    }));\n    return sub;\n  });\n}\n","import { InteropObservable } from '../types';\nimport { observable as Symbol_observable } from '../symbol/observable';\n\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\nexport function isInteropObservable(input: any): input is InteropObservable<any> {\n  return input && typeof input[Symbol_observable] === 'function';\n}\n","import { iterator as Symbol_iterator } from '../symbol/iterator';\n\n/** Identifies an input as being an Iterable */\nexport function isIterable(input: any): input is Iterable<any> {\n  return input && typeof input[Symbol_iterator] === 'function';\n}\n","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { ObservableInput, SchedulerLike, Observable } from 'rxjs';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\n\n/**\n * Converts from a common {@link ObservableInput} type to an observable where subscription and emissions\n * are scheduled on the provided scheduler.\n *\n * @see from\n * @see of\n *\n * @param input The observable, array, promise, iterable, etc you would like to schedule\n * @param scheduler The scheduler to use to schedule the subscription and emissions from\n * the returned observable.\n */\nexport function scheduled<T>(input: ObservableInput<T>, scheduler: SchedulerLike): Observable<T> {\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return scheduleObservable(input, scheduler);\n    } else if (isPromise(input)) {\n      return schedulePromise(input, scheduler);\n    } else if (isArrayLike(input)) {\n      return scheduleArray(input, scheduler);\n    }  else if (isIterable(input) || typeof input === 'string') {\n      return scheduleIterable(input, scheduler);\n    }\n  }\n\n  throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n","import { Observable } from '../Observable';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { ObservableInput, SchedulerLike, ObservedValueOf } from '../types';\nimport { scheduled } from '../scheduled/scheduled';\n\nexport function from<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\n/** @deprecated use {@link scheduled} instead. */\nexport function from<O extends ObservableInput<any>>(input: O, scheduler: SchedulerLike): Observable<ObservedValueOf<O>>;\n\n/**\n * Creates an Observable from an Array, an array-like object, a Promise, an iterable object, or an Observable-like object.\n *\n * <span class=\"informal\">Converts almost anything to an Observable.</span>\n *\n * ![](from.png)\n *\n * `from` converts various other objects and data types into Observables. It also converts a Promise, an array-like, or an\n * <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#iterable\" target=\"_blank\">iterable</a>\n * object into an Observable that emits the items in that promise, array, or iterable. A String, in this context, is treated\n * as an array of characters. Observable-like objects (contains a function named with the ES2015 Symbol for Observable) can also be\n * converted through this operator.\n *\n * ## Examples\n *\n * ### Converts an array to an Observable\n *\n * ```ts\n * import { from } from 'rxjs';\n *\n * const array = [10, 20, 30];\n * const result = from(array);\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 10\n * // 20\n * // 30\n * ```\n *\n * ---\n *\n * ### Convert an infinite iterable (from a generator) to an Observable\n *\n * ```ts\n * import { from } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * function* generateDoubles(seed) {\n *    let i = seed;\n *    while (true) {\n *      yield i;\n *      i = 2 * i; // double it\n *    }\n * }\n *\n * const iterator = generateDoubles(3);\n * const result = from(iterator).pipe(take(10));\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 3\n * // 6\n * // 12\n * // 24\n * // 48\n * // 96\n * // 192\n * // 384\n * // 768\n * // 1536\n * ```\n *\n * ---\n *\n * ### With async scheduler\n *\n * ```ts\n * import { from, asyncScheduler } from 'rxjs';\n *\n * console.log('start');\n *\n * const array = [10, 20, 30];\n * const result = from(array, asyncScheduler);\n *\n * result.subscribe(x => console.log(x));\n *\n * console.log('end');\n *\n * // Logs:\n * // start\n * // end\n * // 10\n * // 20\n * // 30\n * ```\n *\n * @see {@link fromEvent}\n * @see {@link fromEventPattern}\n *\n * @param {ObservableInput<T>} A subscription object, a Promise, an Observable-like,\n * an Array, an iterable, or an array-like object to be converted.\n * @param {SchedulerLike} An optional {@link SchedulerLike} on which to schedule the emission of values.\n * @return {Observable<T>}\n * @name from\n * @owner Observable\n */\nexport function from<T>(input: ObservableInput<T>, scheduler?: SchedulerLike): Observable<T> {\n  if (!scheduler) {\n    if (input instanceof Observable) {\n      return input;\n    }\n    return new Observable<T>(subscribeTo(input));\n  } else {\n    return scheduled(input, scheduler);\n  }\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { map } from './map';\nimport { from } from '../observable/from';\n\n/* tslint:disable:max-line-length */\nexport function mergeMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) => O, concurrent?: number): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector no longer supported, use inner map instead */\nexport function mergeMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) => O, resultSelector: undefined, concurrent?: number): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector no longer supported, use inner map instead */\nexport function mergeMap<T, R, O extends ObservableInput<any>>(project: (value: T, index: number) => O, resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R, concurrent?: number): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link mergeAll}.</span>\n *\n * ![](mergeMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger.\n *\n * ## Example\n * Map and flatten each letter to an Observable ticking every 1 second\n * ```ts\n * import { of, interval } from 'rxjs';\n * import { mergeMap, map } from 'rxjs/operators';\n *\n * const letters = of('a', 'b', 'c');\n * const result = letters.pipe(\n *   mergeMap(x => interval(1000).pipe(map(i => x+i))),\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // a0\n * // b0\n * // c0\n * // a1\n * // b1\n * // c1\n * // continues to list a,b,c with respective ascending integers\n * ```\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional deprecated `resultSelector`) to each item\n * emitted by the source Observable and merging the results of the Observables\n * obtained from this transformation.\n * @method mergeMap\n * @owner Observable\n */\nexport function mergeMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: ((outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R) | number,\n  concurrent: number = Number.POSITIVE_INFINITY\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  if (typeof resultSelector === 'function') {\n    // DEPRECATED PATH\n    return (source: Observable<T>) => source.pipe(\n      mergeMap((a, i) => from(project(a, i)).pipe(\n        map((b: any, ii: number) => resultSelector(a, b, i, ii)),\n      ), concurrent)\n    );\n  } else if (typeof resultSelector === 'number') {\n    concurrent = resultSelector;\n  }\n  return (source: Observable<T>) => source.lift(new MergeMapOperator(project, concurrent));\n}\n\nexport class MergeMapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => ObservableInput<R>,\n              private concurrent: number = Number.POSITIVE_INFINITY) {\n  }\n\n  call(observer: Subscriber<R>, source: any): any {\n    return source.subscribe(new MergeMapSubscriber(\n      observer, this.project, this.concurrent\n    ));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class MergeMapSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private hasCompleted: boolean = false;\n  private buffer: T[] = [];\n  private active: number = 0;\n  protected index: number = 0;\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => ObservableInput<R>,\n              private concurrent: number = Number.POSITIVE_INFINITY) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    if (this.active < this.concurrent) {\n      this._tryNext(value);\n    } else {\n      this.buffer.push(value);\n    }\n  }\n\n  protected _tryNext(value: T) {\n    let result: ObservableInput<R>;\n    const index = this.index++;\n    try {\n      result = this.project(value, index);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.active++;\n    this._innerSub(result, value, index);\n  }\n\n  private _innerSub(ish: ObservableInput<R>, value: T, index: number): void {\n    const innerSubscriber = new InnerSubscriber(this, value, index);\n    const destination = this.destination as Subscription;\n    destination.add(innerSubscriber);\n    const innerSubscription = subscribeToResult<T, R>(this, ish, undefined, undefined, innerSubscriber);\n    // The returned subscription will usually be the subscriber that was\n    // passed. However, interop subscribers will be wrapped and for\n    // unsubscriptions to chain correctly, the wrapper needs to be added, too.\n    if (innerSubscription !== innerSubscriber) {\n      destination.add(innerSubscription);\n    }\n  }\n\n  protected _complete(): void {\n    this.hasCompleted = true;\n    if (this.active === 0 && this.buffer.length === 0) {\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.destination.next(innerValue);\n  }\n\n  notifyComplete(innerSub: Subscription): void {\n    const buffer = this.buffer;\n    this.remove(innerSub);\n    this.active--;\n    if (buffer.length > 0) {\n      this._next(buffer.shift());\n    } else if (this.active === 0 && this.hasCompleted) {\n      this.destination.complete();\n    }\n  }\n}\n","\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nimport { OperatorFunction, ObservableInput } from '../types';\n\n/**\n * Converts a higher-order Observable into a first-order Observable which\n * concurrently delivers all values that are emitted on the inner Observables.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables.</span>\n *\n * ![](mergeAll.png)\n *\n * `mergeAll` subscribes to an Observable that emits Observables, also known as\n * a higher-order Observable. Each time it observes one of these emitted inner\n * Observables, it subscribes to that and delivers all the values from the\n * inner Observable on the output Observable. The output Observable only\n * completes once all inner Observables have completed. Any error delivered by\n * a inner Observable will be immediately emitted on the output Observable.\n *\n * ## Examples\n * Spawn a new interval Observable for each click event, and blend their outputs as one Observable\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { map, mergeAll } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(map((ev) => interval(1000)));\n * const firstOrder = higherOrder.pipe(mergeAll());\n * firstOrder.subscribe(x => console.log(x));\n * ```\n *\n * Count from 0 to 9 every second for each click, but only allow 2 concurrent timers\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { take, map, mergeAll } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map((ev) => interval(1000).pipe(take(10))),\n * );\n * const firstOrder = higherOrder.pipe(mergeAll(2));\n * firstOrder.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link exhaust}\n * @see {@link merge}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link zipAll}\n *\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of inner\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits values coming from all the\n * inner Observables emitted by the source Observable.\n * @method mergeAll\n * @owner Observable\n */\nexport function mergeAll<T>(concurrent: number = Number.POSITIVE_INFINITY): OperatorFunction<ObservableInput<T>, T> {\n  return mergeMap(identity, concurrent);\n}\n","\nimport { mergeAll } from './mergeAll';\nimport { OperatorFunction, ObservableInput } from '../types';\n\nexport function concatAll<T>(): OperatorFunction<ObservableInput<T>, T>;\nexport function concatAll<R>(): OperatorFunction<any, R>;\n\n/**\n * Converts a higher-order Observable into a first-order Observable by\n * concatenating the inner Observables in order.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by putting one\n * inner Observable after the other.</span>\n *\n * ![](concatAll.png)\n *\n * Joins every Observable emitted by the source (a higher-order Observable), in\n * a serial fashion. It subscribes to each inner Observable only after the\n * previous inner Observable has completed, and merges all of their values into\n * the returned observable.\n *\n * __Warning:__ If the source Observable emits Observables quickly and\n * endlessly, and the inner Observables it emits generally complete slower than\n * the source emits, you can run into memory issues as the incoming Observables\n * collect in an unbounded buffer.\n *\n * Note: `concatAll` is equivalent to `mergeAll` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n *\n * For each click event, tick every second from 0 to 3, with no concurrency\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { map, take, concatAll } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map(ev => interval(1000).pipe(take(4))),\n * );\n * const firstOrder = higherOrder.pipe(concatAll());\n * firstOrder.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link combineAll}\n * @see {@link concat}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link exhaust}\n * @see {@link mergeAll}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable emitting values from all the inner\n * Observables concatenated.\n * @method concatAll\n * @owner Observable\n */\nexport function concatAll<T>(): OperatorFunction<ObservableInput<T>, T> {\n  return mergeAll<T>(1);\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike, ObservedValueOf } from '../types';\nimport { isScheduler } from '../util/isScheduler';\nimport { of } from './of';\nimport { from } from './from';\nimport { concatAll } from '../operators/concatAll';\n\n/* tslint:disable:max-line-length */\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<O1 extends ObservableInput<any>>(v1: O1, scheduler: SchedulerLike): Observable<ObservedValueOf<O1>>;\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>>(v1: O1, v2: O2, scheduler: SchedulerLike): Observable<ObservedValueOf<O1> | ObservedValueOf<O2>>;\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, scheduler: SchedulerLike): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3>>;\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, scheduler: SchedulerLike): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3> | ObservedValueOf<O4>>;\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, scheduler: SchedulerLike): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3> | ObservedValueOf<O4> | ObservedValueOf<O5>>;\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, v6: O6, scheduler: SchedulerLike): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3> | ObservedValueOf<O4> | ObservedValueOf<O5> | ObservedValueOf<O6>>;\n\nexport function concat<O1 extends ObservableInput<any>>(v1: O1): Observable<ObservedValueOf<O1>>;\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>>(v1: O1, v2: O2): Observable<ObservedValueOf<O1> | ObservedValueOf<O2>>;\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3>>;\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3> | ObservedValueOf<O4>>;\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3> | ObservedValueOf<O4> | ObservedValueOf<O5>>;\nexport function concat<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, v6: O6): Observable<ObservedValueOf<O1> | ObservedValueOf<O2> | ObservedValueOf<O3> | ObservedValueOf<O4> | ObservedValueOf<O5> | ObservedValueOf<O6>>;\nexport function concat<O extends ObservableInput<any>>(...observables: O[]): Observable<ObservedValueOf<O>>;\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<O extends ObservableInput<any>>(...observables: (O | SchedulerLike)[]): Observable<ObservedValueOf<O>>;\nexport function concat<R>(...observables: ObservableInput<any>[]): Observable<R>;\n/** @deprecated Use {@link scheduled} and {@link concatAll} (e.g. `scheduled([o1, o2, o3], scheduler).pipe(concatAll())`) */\nexport function concat<R>(...observables: (ObservableInput<any> | SchedulerLike)[]): Observable<R>;\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which sequentially emits all values from given\n * Observable and then moves on to the next.\n *\n * <span class=\"informal\">Concatenates multiple Observables together by\n * sequentially emitting their values, one Observable after the other.</span>\n *\n * ![](concat.png)\n *\n * `concat` joins multiple Observables together, by subscribing to them one at a time and\n * merging their results into the output Observable. You can pass either an array of\n * Observables, or put them directly as arguments. Passing an empty array will result\n * in Observable that completes immediately.\n *\n * `concat` will subscribe to first input Observable and emit all its values, without\n * changing or affecting them in any way. When that Observable completes, it will\n * subscribe to then next Observable passed and, again, emit its values. This will be\n * repeated, until the operator runs out of Observables. When last input Observable completes,\n * `concat` will complete as well. At any given moment only one Observable passed to operator\n * emits values. If you would like to emit values from passed Observables concurrently, check out\n * {@link merge} instead, especially with optional `concurrent` parameter. As a matter of fact,\n * `concat` is an equivalent of `merge` operator with `concurrent` parameter set to `1`.\n *\n * Note that if some input Observable never completes, `concat` will also never complete\n * and Observables following the one that did not complete will never be subscribed. On the other\n * hand, if some Observable simply completes immediately after it is subscribed, it will be\n * invisible for `concat`, which will just move on to the next Observable.\n *\n * If any Observable in chain errors, instead of passing control to the next Observable,\n * `concat` will error immediately as well. Observables that would be subscribed after\n * the one that emitted error, never will.\n *\n * If you pass to `concat` the same Observable many times, its stream of values\n * will be \"replayed\" on every subscription, which means you can repeat given Observable\n * as many times as you like. If passing the same Observable to `concat` 1000 times becomes tedious,\n * you can always use {@link repeat}.\n *\n * ## Examples\n * ### Concatenate a timer counting from 0 to 3 with a synchronous sequence from 1 to 10\n * ```ts\n * import { concat, interval, range } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const timer = interval(1000).pipe(take(4));\n * const sequence = range(1, 10);\n * const result = concat(timer, sequence);\n * result.subscribe(x => console.log(x));\n *\n * // results in:\n * // 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3 -immediate-> 1 ... 10\n * ```\n *\n * ### Concatenate 3 Observables\n * ```ts\n * import { concat, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const timer1 = interval(1000).pipe(take(10));\n * const timer2 = interval(2000).pipe(take(6));\n * const timer3 = interval(500).pipe(take(10));\n *\n * const result = concat(timer1, timer2, timer3);\n * result.subscribe(x => console.log(x));\n *\n * // results in the following:\n * // (Prints to console sequentially)\n * // -1000ms-> 0 -1000ms-> 1 -1000ms-> ... 9\n * // -2000ms-> 0 -2000ms-> 1 -2000ms-> ... 5\n * // -500ms-> 0 -500ms-> 1 -500ms-> ... 9\n * ```\n *\n * ### Concatenate the same Observable to repeat it\n * ```ts\n * import { concat, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const timer = interval(1000).pipe(take(2));\n *\n * concat(timer, timer) // concatenating the same Observable!\n * .subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('...and it is done!')\n * );\n *\n * // Logs:\n * // 0 after 1s\n * // 1 after 2s\n * // 0 after 3s\n * // 1 after 4s\n * // \"...and it is done!\" also after 4s\n * ```\n *\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link startWith}\n * @see {@link endWith}\n *\n * @param {ObservableInput} input1 An input Observable to concatenate with others.\n * @param {ObservableInput} input2 An input Observable to concatenate with others.\n * More than one input Observables may be given as argument.\n * @param {SchedulerLike} [scheduler=null] An optional {@link SchedulerLike} to schedule each\n * Observable subscription on.\n * @return {Observable} All values of each passed Observable merged into a\n * single Observable, in order, in serial fashion.\n * @static true\n * @name concat\n * @owner Observable\n */\nexport function concat<O extends ObservableInput<any>, R>(...observables: Array<O | SchedulerLike>): Observable<ObservedValueOf<O> | R> {\n  return concatAll<R>()(of(...observables));\n}\n","import { Observable } from '../Observable';\nimport { SubscribableOrPromise, ObservedValueOf, ObservableInput } from '../types';\nimport { from } from './from'; // lol\nimport { empty } from './empty';\n\n/**\n * Creates an Observable that, on subscribe, calls an Observable factory to\n * make an Observable for each new Observer.\n *\n * <span class=\"informal\">Creates the Observable lazily, that is, only when it\n * is subscribed.\n * </span>\n *\n * ![](defer.png)\n *\n * `defer` allows you to create the Observable only when the Observer\n * subscribes, and create a fresh Observable for each Observer. It waits until\n * an Observer subscribes to it, and then it generates an Observable,\n * typically with an Observable factory function. It does this afresh for each\n * subscriber, so although each subscriber may think it is subscribing to the\n * same Observable, in fact each subscriber gets its own individual\n * Observable.\n *\n * ## Example\n * ### Subscribe to either an Observable of clicks or an Observable of interval, at random\n * ```ts\n * import { defer, fromEvent, interval } from 'rxjs';\n *\n * const clicksOrInterval = defer(function () {\n *   return Math.random() > 0.5\n *     ? fromEvent(document, 'click')\n *     : interval(1000);\n * });\n * clicksOrInterval.subscribe(x => console.log(x));\n *\n * // Results in the following behavior:\n * // If the result of Math.random() is greater than 0.5 it will listen\n * // for clicks anywhere on the \"document\"; when document is clicked it\n * // will log a MouseEvent object to the console. If the result is less\n * // than 0.5 it will emit ascending numbers, one every second(1000ms).\n * ```\n *\n * @see {@link Observable}\n *\n * @param {function(): SubscribableOrPromise} observableFactory The Observable\n * factory function to invoke for each Observer that subscribes to the output\n * Observable. May also return a Promise, which will be converted on the fly\n * to an Observable.\n * @return {Observable} An Observable whose Observers' subscriptions trigger\n * an invocation of the given Observable factory function.\n * @static true\n * @name defer\n * @owner Observable\n */\nexport function defer<R extends ObservableInput<any> | void>(observableFactory: () => R): Observable<ObservedValueOf<R>> {\n  return new Observable<ObservedValueOf<R>>(subscriber => {\n    let input: R | void;\n    try {\n      input = observableFactory();\n    } catch (err) {\n      subscriber.error(err);\n      return undefined;\n    }\n    const source = input ? from(input as ObservableInput<ObservedValueOf<R>>) : empty();\n    return source.subscribe(subscriber);\n  });\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput, ObservedValuesFromArray, ObservedValueOf, SubscribableOrPromise } from '../types';\nimport { isArray } from '../util/isArray';\nimport { map } from '../operators/map';\nimport { isObject } from '../util/isObject';\nimport { isObservable } from '../util/isObservable';\nimport { from } from './from';\n\n/* tslint:disable:max-line-length */\n\n// forkJoin(a$, b$, c$)\n/** @deprecated Use the version that takes an array of Observables instead */\nexport function forkJoin<T>(v1: SubscribableOrPromise<T>): Observable<[T]>;\n/** @deprecated Use the version that takes an array of Observables instead */\nexport function forkJoin<T, T2>(v1: ObservableInput<T>, v2: ObservableInput<T2>): Observable<[T, T2]>;\n/** @deprecated Use the version that takes an array of Observables instead */\nexport function forkJoin<T, T2, T3>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>): Observable<[T, T2, T3]>;\n/** @deprecated Use the version that takes an array of Observables instead */\nexport function forkJoin<T, T2, T3, T4>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>): Observable<[T, T2, T3, T4]>;\n/** @deprecated Use the version that takes an array of Observables instead */\nexport function forkJoin<T, T2, T3, T4, T5>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>): Observable<[T, T2, T3, T4, T5]>;\n/** @deprecated Use the version that takes an array of Observables instead */\nexport function forkJoin<T, T2, T3, T4, T5, T6>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>): Observable<[T, T2, T3, T4, T5, T6]>;\n\n// forkJoin([a$, b$, c$]);\n// TODO(benlesh): Uncomment for TS 3.0\n// export function forkJoin(sources: []): Observable<never>;\nexport function forkJoin<A>(sources: [ObservableInput<A>]): Observable<[A]>;\nexport function forkJoin<A, B>(sources: [ObservableInput<A>, ObservableInput<B>]): Observable<[A, B]>;\nexport function forkJoin<A, B, C>(sources: [ObservableInput<A>, ObservableInput<B>, ObservableInput<C>]): Observable<[A, B, C]>;\nexport function forkJoin<A, B, C, D>(sources: [ObservableInput<A>, ObservableInput<B>, ObservableInput<C>, ObservableInput<D>]): Observable<[A, B, C, D]>;\nexport function forkJoin<A, B, C, D, E>(sources: [ObservableInput<A>, ObservableInput<B>, ObservableInput<C>, ObservableInput<D>, ObservableInput<E>]): Observable<[A, B, C, D, E]>;\nexport function forkJoin<A, B, C, D, E, F>(sources: [ObservableInput<A>, ObservableInput<B>, ObservableInput<C>, ObservableInput<D>, ObservableInput<E>, ObservableInput<F>]): Observable<[A, B, C, D, E, F]>;\nexport function forkJoin<A extends ObservableInput<any>[]>(sources: A): Observable<ObservedValuesFromArray<A>[]>;\n\n// forkJoin({})\nexport function forkJoin(sourcesObject: {}): Observable<never>;\nexport function forkJoin<T, K extends keyof T>(sourcesObject: T): Observable<{ [K in keyof T]: ObservedValueOf<T[K]> }>;\n\n/** @deprecated resultSelector is deprecated, pipe to map instead */\nexport function forkJoin(...args: Array<ObservableInput<any>|Function>): Observable<any>;\n/** @deprecated Use the version that takes an array of Observables instead */\nexport function forkJoin<T>(...sources: ObservableInput<T>[]): Observable<T[]>;\n/* tslint:enable:max-line-length */\n\n/**\n * Accepts an `Array` of {@link ObservableInput} or a dictionary `Object` of {@link ObservableInput} and returns\n * an {@link Observable} that emits either an array of values in the exact same order as the passed array,\n * or a dictionary of values in the same shape as the passed dictionary.\n *\n * <span class=\"informal\">Wait for Observables to complete and then combine last values they emitted.</span>\n *\n * ![](forkJoin.png)\n *\n * `forkJoin` is an operator that takes any number of input observables which can be passed either as an array\n * or a dictionary of input observables. If no input observables are provided, resulting stream will complete\n * immediately.\n *\n * `forkJoin` will wait for all passed observables to complete and then it will emit an array or an object with last\n * values from corresponding observables.\n *\n * If you pass an array of `n` observables to the operator, resulting\n * array will have `n` values, where first value is the last thing emitted by the first observable,\n * second value is the last thing emitted by the second observable and so on.\n *\n * If you pass a dictionary of observables to the operator, resulting\n * objects will have the same keys as the dictionary passed, with their last values they've emitted\n * located at the corresponding key.\n *\n * That means `forkJoin` will not emit more than once and it will complete after that. If you need to emit combined\n * values not only at the end of lifecycle of passed observables, but also throughout it, try out {@link combineLatest}\n * or {@link zip} instead.\n *\n * In order for resulting array to have the same length as the number of input observables, whenever any of\n * that observables completes without emitting any value, `forkJoin` will complete at that moment as well\n * and it will not emit anything either, even if it already has some last values from other observables.\n * Conversely, if there is an observable that never completes, `forkJoin` will never complete as well,\n * unless at any point some other observable completes without emitting value, which brings us back to\n * the previous case. Overall, in order for `forkJoin` to emit a value, all observables passed as arguments\n * have to emit something at least once and complete.\n *\n * If any input observable errors at some point, `forkJoin` will error as well and all other observables\n * will be immediately unsubscribed.\n *\n * Optionally `forkJoin` accepts project function, that will be called with values which normally\n * would land in emitted array. Whatever is returned by project function, will appear in output\n * observable instead. This means that default project can be thought of as a function that takes\n * all its arguments and puts them into an array. Note that project function will be called only\n * when output observable is supposed to emit a result.\n *\n * ## Examples\n *\n * ### Use forkJoin with a dictionary of observable inputs\n * ```ts\n * import { forkJoin, of, timer } from 'rxjs';\n *\n * const observable = forkJoin({\n *   foo: of(1, 2, 3, 4),\n *   bar: Promise.resolve(8),\n *   baz: timer(4000),\n * });\n * observable.subscribe({\n *  next: value => console.log(value),\n *  complete: () => console.log('This is how it ends!'),\n * });\n *\n * // Logs:\n * // { foo: 4, bar: 8, baz: 0 } after 4 seconds\n * // \"This is how it ends!\" immediately after\n * ```\n *\n * ### Use forkJoin with an array of observable inputs\n * ```ts\n * import { forkJoin, of } from 'rxjs';\n *\n * const observable = forkJoin([\n *   of(1, 2, 3, 4),\n *   Promise.resolve(8),\n *   timer(4000),\n * ]);\n * observable.subscribe({\n *  next: value => console.log(value),\n *  complete: () => console.log('This is how it ends!'),\n * });\n *\n * // Logs:\n * // [4, 8, 0] after 4 seconds\n * // \"This is how it ends!\" immediately after\n * ```\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n *\n * @param {...ObservableInput} sources Any number of Observables provided either as an array or as an arguments\n * passed directly to the operator.\n * @param {function} [project] Function that takes values emitted by input Observables and returns value\n * that will appear in resulting Observable instead of default array.\n * @return {Observable} Observable emitting either an array of last values emitted by passed Observables\n * or value from project function.\n */\nexport function forkJoin(\n  ...sources: any[]\n): Observable<any> {\n  if (sources.length === 1) {\n    const first = sources[0];\n    if (isArray(first)) {\n      return forkJoinInternal(first, null);\n    }\n    // TODO(benlesh): isObservable check will not be necessary when deprecated path is removed.\n    if (isObject(first) && Object.getPrototypeOf(first) === Object.prototype) {\n      const keys = Object.keys(first);\n      return forkJoinInternal(keys.map(key => first[key]), keys);\n    }\n  }\n\n  // DEPRECATED PATHS BELOW HERE\n  if (typeof sources[sources.length - 1] === 'function') {\n    const resultSelector = sources.pop() as Function;\n    sources = (sources.length === 1 && isArray(sources[0])) ? sources[0] : sources;\n    return forkJoinInternal(sources, null).pipe(\n      map((args: any[]) => resultSelector(...args))\n    );\n  }\n\n  return forkJoinInternal(sources, null);\n}\n\nfunction forkJoinInternal(sources: ObservableInput<any>[], keys: string[] | null): Observable<any> {\n  return new Observable(subscriber => {\n    const len = sources.length;\n    if (len === 0) {\n      subscriber.complete();\n      return;\n    }\n    const values = new Array(len);\n    let completed = 0;\n    let emitted = 0;\n    for (let i = 0; i < len; i++) {\n      const source = from(sources[i]);\n      let hasValue = false;\n      subscriber.add(source.subscribe({\n        next: value => {\n          if (!hasValue) {\n            hasValue = true;\n            emitted++;\n          }\n          values[i] = value;\n        },\n        error: err => subscriber.error(err),\n        complete: () => {\n          completed++;\n          if (completed === len || !hasValue) {\n            if (emitted === len) {\n              subscriber.next(keys ?\n                keys.reduce((result, key, i) => (result[key] = values[i], result), {}) :\n                values);\n            }\n            subscriber.complete();\n          }\n        }\n      }));\n    }\n  });\n}\n","import { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { Subscriber } from '../Subscriber';\nimport { map } from '../operators/map';\n\nconst toString: Function = (() => Object.prototype.toString)();\n\nexport interface NodeStyleEventEmitter {\n  addListener: (eventName: string | symbol, handler: NodeEventHandler) => this;\n  removeListener: (eventName: string | symbol, handler: NodeEventHandler) => this;\n}\n\nexport type NodeEventHandler = (...args: any[]) => void;\n\n// For APIs that implement `addListener` and `removeListener` methods that may\n// not use the same arguments or return EventEmitter values\n// such as React Native\nexport interface NodeCompatibleEventEmitter {\n  addListener: (eventName: string, handler: NodeEventHandler) => void | {};\n  removeListener: (eventName: string, handler: NodeEventHandler) => void | {};\n}\n\nexport interface JQueryStyleEventEmitter {\n  on: (eventName: string, handler: Function) => void;\n  off: (eventName: string, handler: Function) => void;\n}\n\nexport interface HasEventTargetAddRemove<E> {\n  addEventListener(type: string, listener: ((evt: E) => void) | null, options?: boolean | AddEventListenerOptions): void;\n  removeEventListener(type: string, listener?: ((evt: E) => void) | null, options?: EventListenerOptions | boolean): void;\n}\n\nexport type EventTargetLike<T> = HasEventTargetAddRemove<T> | NodeStyleEventEmitter | NodeCompatibleEventEmitter | JQueryStyleEventEmitter;\n\nexport type FromEventTarget<T> = EventTargetLike<T> | ArrayLike<EventTargetLike<T>>;\n\nexport interface EventListenerOptions {\n  capture?: boolean;\n  passive?: boolean;\n  once?: boolean;\n}\n\nexport interface AddEventListenerOptions extends EventListenerOptions {\n  once?: boolean;\n  passive?: boolean;\n}\n\n/* tslint:disable:max-line-length */\nexport function fromEvent<T>(target: FromEventTarget<T>, eventName: string): Observable<T>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function fromEvent<T>(target: FromEventTarget<T>, eventName: string, resultSelector: (...args: any[]) => T): Observable<T>;\nexport function fromEvent<T>(target: FromEventTarget<T>, eventName: string, options: EventListenerOptions): Observable<T>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function fromEvent<T>(target: FromEventTarget<T>, eventName: string, options: EventListenerOptions, resultSelector: (...args: any[]) => T): Observable<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Creates an Observable that emits events of a specific type coming from the\n * given event target.\n *\n * <span class=\"informal\">Creates an Observable from DOM events, or Node.js\n * EventEmitter events or others.</span>\n *\n * ![](fromEvent.png)\n *\n * `fromEvent` accepts as a first argument event target, which is an object with methods\n * for registering event handler functions. As a second argument it takes string that indicates\n * type of event we want to listen for. `fromEvent` supports selected types of event targets,\n * which are described in detail below. If your event target does not match any of the ones listed,\n * you should use {@link fromEventPattern}, which can be used on arbitrary APIs.\n * When it comes to APIs supported by `fromEvent`, their methods for adding and removing event\n * handler functions have different names, but they all accept a string describing event type\n * and function itself, which will be called whenever said event happens.\n *\n * Every time resulting Observable is subscribed, event handler function will be registered\n * to event target on given event type. When that event fires, value\n * passed as a first argument to registered function will be emitted by output Observable.\n * When Observable is unsubscribed, function will be unregistered from event target.\n *\n * Note that if event target calls registered function with more than one argument, second\n * and following arguments will not appear in resulting stream. In order to get access to them,\n * you can pass to `fromEvent` optional project function, which will be called with all arguments\n * passed to event handler. Output Observable will then emit value returned by project function,\n * instead of the usual value.\n *\n * Remember that event targets listed below are checked via duck typing. It means that\n * no matter what kind of object you have and no matter what environment you work in,\n * you can safely use `fromEvent` on that object if it exposes described methods (provided\n * of course they behave as was described above). So for example if Node.js library exposes\n * event target which has the same method names as DOM EventTarget, `fromEvent` is still\n * a good choice.\n *\n * If the API you use is more callback then event handler oriented (subscribed\n * callback function fires only once and thus there is no need to manually\n * unregister it), you should use {@link bindCallback} or {@link bindNodeCallback}\n * instead.\n *\n * `fromEvent` supports following types of event targets:\n *\n * **DOM EventTarget**\n *\n * This is an object with `addEventListener` and `removeEventListener` methods.\n *\n * In the browser, `addEventListener` accepts - apart from event type string and event\n * handler function arguments - optional third parameter, which is either an object or boolean,\n * both used for additional configuration how and when passed function will be called. When\n * `fromEvent` is used with event target of that type, you can provide this values\n * as third parameter as well.\n *\n * **Node.js EventEmitter**\n *\n * An object with `addListener` and `removeListener` methods.\n *\n * **JQuery-style event target**\n *\n * An object with `on` and `off` methods\n *\n * **DOM NodeList**\n *\n * List of DOM Nodes, returned for example by `document.querySelectorAll` or `Node.childNodes`.\n *\n * Although this collection is not event target in itself, `fromEvent` will iterate over all Nodes\n * it contains and install event handler function in every of them. When returned Observable\n * is unsubscribed, function will be removed from all Nodes.\n *\n * **DOM HtmlCollection**\n *\n * Just as in case of NodeList it is a collection of DOM nodes. Here as well event handler function is\n * installed and removed in each of elements.\n *\n *\n * ## Examples\n * ### Emits clicks happening on the DOM document\n * ```ts\n * import { fromEvent } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * clicks.subscribe(x => console.log(x));\n *\n * // Results in:\n * // MouseEvent object logged to console every time a click\n * // occurs on the document.\n * ```\n *\n * ### Use addEventListener with capture option\n * ```ts\n * import { fromEvent } from 'rxjs';\n *\n * const clicksInDocument = fromEvent(document, 'click', true); // note optional configuration parameter\n *                                                              // which will be passed to addEventListener\n * const clicksInDiv = fromEvent(someDivInDocument, 'click');\n *\n * clicksInDocument.subscribe(() => console.log('document'));\n * clicksInDiv.subscribe(() => console.log('div'));\n *\n * // By default events bubble UP in DOM tree, so normally\n * // when we would click on div in document\n * // \"div\" would be logged first and then \"document\".\n * // Since we specified optional `capture` option, document\n * // will catch event when it goes DOWN DOM tree, so console\n * // will log \"document\" and then \"div\".\n * ```\n *\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n * @see {@link fromEventPattern}\n *\n * @param {FromEventTarget<T>} target The DOM EventTarget, Node.js\n * EventEmitter, JQuery-like event target, NodeList or HTMLCollection to attach the event handler to.\n * @param {string} eventName The event name of interest, being emitted by the\n * `target`.\n * @param {EventListenerOptions} [options] Options to pass through to addEventListener\n * @return {Observable<T>}\n * @name fromEvent\n */\nexport function fromEvent<T>(\n  target: FromEventTarget<T>,\n  eventName: string,\n  options?: EventListenerOptions | ((...args: any[]) => T),\n  resultSelector?: ((...args: any[]) => T)\n): Observable<T> {\n\n  if (isFunction(options)) {\n    // DEPRECATED PATH\n    resultSelector = options;\n    options = undefined;\n  }\n  if (resultSelector) {\n    // DEPRECATED PATH\n    return fromEvent<T>(target, eventName, <EventListenerOptions | undefined>options).pipe(\n      map(args => isArray(args) ? resultSelector(...args) : resultSelector(args))\n    );\n  }\n\n  return new Observable<T>(subscriber => {\n    function handler(e: T) {\n      if (arguments.length > 1) {\n        subscriber.next(Array.prototype.slice.call(arguments));\n      } else {\n        subscriber.next(e);\n      }\n    }\n    setupSubscription(target, eventName, handler, subscriber, options as EventListenerOptions);\n  });\n}\n\nfunction setupSubscription<T>(sourceObj: FromEventTarget<T>, eventName: string,\n                              handler: (...args: any[]) => void, subscriber: Subscriber<T>,\n                              options?: EventListenerOptions) {\n  let unsubscribe: () => void;\n  if (isEventTarget(sourceObj)) {\n    const source = sourceObj;\n    sourceObj.addEventListener(eventName, handler, options);\n    unsubscribe = () => source.removeEventListener(eventName, handler, options);\n  } else if (isJQueryStyleEventEmitter(sourceObj)) {\n    const source = sourceObj;\n    sourceObj.on(eventName, handler);\n    unsubscribe = () => source.off(eventName, handler);\n  } else if (isNodeStyleEventEmitter(sourceObj)) {\n    const source = sourceObj;\n    sourceObj.addListener(eventName, handler as NodeEventHandler);\n    unsubscribe = () => source.removeListener(eventName, handler as NodeEventHandler);\n  } else if (sourceObj && (sourceObj as any).length) {\n    for (let i = 0, len = (sourceObj as any).length; i < len; i++) {\n      setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n    }\n  } else {\n    throw new TypeError('Invalid event target');\n  }\n\n  subscriber.add(unsubscribe);\n}\n\nfunction isNodeStyleEventEmitter(sourceObj: any): sourceObj is NodeStyleEventEmitter {\n  return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\n\nfunction isJQueryStyleEventEmitter(sourceObj: any): sourceObj is JQueryStyleEventEmitter {\n  return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\n\nfunction isEventTarget(sourceObj: any): sourceObj is HasEventTargetAddRemove<any> {\n  return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n","import { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { NodeEventHandler } from './fromEvent';\nimport { map } from '../operators/map';\n\n/* tslint:disable:max-line-length */\nexport function fromEventPattern<T>(addHandler: (handler: NodeEventHandler) => any, removeHandler?: (handler: NodeEventHandler, signal?: any) => void): Observable<T>;\n/** @deprecated resultSelector no longer supported, pipe to map instead */\nexport function fromEventPattern<T>(addHandler: (handler: NodeEventHandler) => any, removeHandler?: (handler: NodeEventHandler, signal?: any) => void, resultSelector?: (...args: any[]) => T): Observable<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Creates an Observable from an arbitrary API for registering event handlers.\n *\n * <span class=\"informal\">When that method for adding event handler was something {@link fromEvent}\n * was not prepared for.</span>\n *\n * ![](fromEventPattern.png)\n *\n * `fromEventPattern` allows you to convert into an Observable any API that supports registering handler functions\n * for events. It is similar to {@link fromEvent}, but far\n * more flexible. In fact, all use cases of {@link fromEvent} could be easily handled by\n * `fromEventPattern` (although in slightly more verbose way).\n *\n * This operator accepts as a first argument an `addHandler` function, which will be injected with\n * handler parameter. That handler is actually an event handler function that you now can pass\n * to API expecting it. `addHandler` will be called whenever Observable\n * returned by the operator is subscribed, so registering handler in API will not\n * necessarily happen when `fromEventPattern` is called.\n *\n * After registration, every time an event that we listen to happens,\n * Observable returned by `fromEventPattern` will emit value that event handler\n * function was called with. Note that if event handler was called with more\n * then one argument, second and following arguments will not appear in the Observable.\n *\n * If API you are using allows to unregister event handlers as well, you can pass to `fromEventPattern`\n * another function - `removeHandler` - as a second parameter. It will be injected\n * with the same handler function as before, which now you can use to unregister\n * it from the API. `removeHandler` will be called when consumer of resulting Observable\n * unsubscribes from it.\n *\n * In some APIs unregistering is actually handled differently. Method registering an event handler\n * returns some kind of token, which is later used to identify which function should\n * be unregistered or it itself has method that unregisters event handler.\n * If that is the case with your API, make sure token returned\n * by registering method is returned by `addHandler`. Then it will be passed\n * as a second argument to `removeHandler`, where you will be able to use it.\n *\n * If you need access to all event handler parameters (not only the first one),\n * or you need to transform them in any way, you can call `fromEventPattern` with optional\n * third parameter - project function which will accept all arguments passed to\n * event handler when it is called. Whatever is returned from project function will appear on\n * resulting stream instead of usual event handlers first argument. This means\n * that default project can be thought of as function that takes its first parameter\n * and ignores the rest.\n *\n * ## Example\n * ### Emits clicks happening on the DOM document\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * function addClickHandler(handler) {\n *   document.addEventListener('click', handler);\n * }\n *\n * function removeClickHandler(handler) {\n *   document.removeEventListener('click', handler);\n * }\n *\n * const clicks = fromEventPattern(\n *   addClickHandler,\n *   removeClickHandler\n * );\n * clicks.subscribe(x => console.log(x));\n *\n * // Whenever you click anywhere in the browser, DOM MouseEvent\n * // object will be logged.\n * ```\n *\n * ## Example\n * ### Use with API that returns cancellation token\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * const token = someAPI.registerEventHandler(function() {});\n * someAPI.unregisterEventHandler(token); // this APIs cancellation method accepts\n *                                        // not handler itself, but special token.\n *\n * const someAPIObservable = fromEventPattern(\n *   function(handler) { return someAPI.registerEventHandler(handler); }, // Note that we return the token here...\n *   function(handler, token) { someAPI.unregisterEventHandler(token); }  // ...to then use it here.\n * );\n * ```\n *\n * ## Example\n * ### Use with project function\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * someAPI.registerEventHandler((eventType, eventMessage) => {\n *   console.log(eventType, eventMessage); // Logs \"EVENT_TYPE\" \"EVENT_MESSAGE\" to console.\n * });\n *\n * const someAPIObservable = fromEventPattern(\n *   handler => someAPI.registerEventHandler(handler),\n *   handler => someAPI.unregisterEventHandler(handler)\n *   (eventType, eventMessage) => eventType + \" --- \" + eventMessage // without that function only \"EVENT_TYPE\"\n * );                                                                // would be emitted by the Observable\n *\n * someAPIObservable.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"EVENT_TYPE --- EVENT_MESSAGE\"\n * ```\n *\n * @see {@link fromEvent}\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n *\n * @param {function(handler: Function): any} addHandler A function that takes\n * a `handler` function as argument and attaches it somehow to the actual\n * source of events.\n * @param {function(handler: Function, token?: any): void} [removeHandler] A function that\n * takes a `handler` function as an argument and removes it from the event source. If `addHandler`\n * returns some kind of token, `removeHandler` function will have it as a second parameter.\n * @param {function(...args: any): T} [project] A function to\n * transform results. It takes the arguments from the event handler and\n * should return a single value.\n * @return {Observable<T>} Observable which, when an event happens, emits first parameter\n * passed to registered event handler. Alternatively it emits whatever project function returns\n * at that moment.\n * @static true\n * @name fromEventPattern\n * @owner Observable\n */\n\nexport function fromEventPattern<T>(addHandler: (handler: NodeEventHandler) => any,\n                                    removeHandler?: (handler: NodeEventHandler, signal?: any) => void,\n                                    resultSelector?: (...args: any[]) => T): Observable<T | T[]> {\n\n  if (resultSelector) {\n    // DEPRECATED PATH\n    return fromEventPattern<T>(addHandler, removeHandler).pipe(\n      map(args => isArray(args) ? resultSelector(...args) : resultSelector(args))\n    );\n  }\n\n  return new Observable<T | T[]>(subscriber => {\n    const handler = (...e: T[]) => subscriber.next(e.length === 1 ? e[0] : e);\n\n    let retValue: any;\n    try {\n      retValue = addHandler(handler);\n    } catch (err) {\n      subscriber.error(err);\n      return undefined;\n    }\n\n    if (!isFunction(removeHandler)) {\n      return undefined;\n    }\n\n    return () => removeHandler(handler, retValue) ;\n  });\n}\n","import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { identity } from '../util/identity';\nimport { SchedulerAction, SchedulerLike } from '../types';\nimport { isScheduler } from '../util/isScheduler';\n\nexport type ConditionFunc<S> = (state: S) => boolean;\nexport type IterateFunc<S> = (state: S) => S;\nexport type ResultFunc<S, T> = (state: S) => T;\n\ninterface SchedulerState<T, S> {\n  needIterate?: boolean;\n  state: S;\n  subscriber: Subscriber<T>;\n  condition?: ConditionFunc<S>;\n  iterate: IterateFunc<S>;\n  resultSelector: ResultFunc<S, T>;\n}\n\nexport interface GenerateBaseOptions<S> {\n  /**\n   * Initial state.\n   */\n  initialState: S;\n  /**\n   * Condition function that accepts state and returns boolean.\n   * When it returns false, the generator stops.\n   * If not specified, a generator never stops.\n   */\n  condition?: ConditionFunc<S>;\n  /**\n   * Iterate function that accepts state and returns new state.\n   */\n  iterate: IterateFunc<S>;\n  /**\n   * SchedulerLike to use for generation process.\n   * By default, a generator starts immediately.\n   */\n  scheduler?: SchedulerLike;\n}\n\nexport interface GenerateOptions<T, S> extends GenerateBaseOptions<S> {\n  /**\n   * Result selection function that accepts state and returns a value to emit.\n   */\n  resultSelector: ResultFunc<S, T>;\n}\n\n/**\n * Generates an observable sequence by running a state-driven loop\n * producing the sequence's elements, using the specified scheduler\n * to send out observer messages.\n *\n * ![](generate.png)\n *\n * @example <caption>Produces sequence of 0, 1, 2, ... 9, then completes.</caption>\n * const res = generate(0, x => x < 10, x => x + 1, x => x);\n *\n * @example <caption>Using asap scheduler, produces sequence of 2, 3, 5, then completes.</caption>\n * const res = generate(1, x => x < 5, x => x * 2, x => x + 1, asap);\n *\n * @see {@link from}\n * @see {@link Observable}\n *\n * @param {S} initialState Initial state.\n * @param {function (state: S): boolean} condition Condition to terminate generation (upon returning false).\n * @param {function (state: S): S} iterate Iteration step function.\n * @param {function (state: S): T} resultSelector Selector function for results produced in the sequence. (deprecated)\n * @param {SchedulerLike} [scheduler] A {@link SchedulerLike} on which to run the generator loop. If not provided, defaults to emit immediately.\n * @returns {Observable<T>} The generated sequence.\n */\n  export function generate<T, S>(initialState: S,\n                                 condition: ConditionFunc<S>,\n                                 iterate: IterateFunc<S>,\n                                 resultSelector: ResultFunc<S, T>,\n                                 scheduler?: SchedulerLike): Observable<T>;\n\n/**\n * Generates an Observable by running a state-driven loop\n * that emits an element on each iteration.\n *\n * <span class=\"informal\">Use it instead of nexting values in a for loop.</span>\n *\n * <img src=\"./img/generate.png\" width=\"100%\">\n *\n * `generate` allows you to create stream of values generated with a loop very similar to\n * traditional for loop. First argument of `generate` is a beginning value. Second argument\n * is a function that accepts this value and tests if some condition still holds. If it does,\n * loop continues, if not, it stops. Third value is a function which takes previously defined\n * value and modifies it in some way on each iteration. Note how these three parameters\n * are direct equivalents of three expressions in regular for loop: first expression\n * initializes some state (for example numeric index), second tests if loop can make next\n * iteration (for example if index is lower than 10) and third states how defined value\n * will be modified on every step (index will be incremented by one).\n *\n * Return value of a `generate` operator is an Observable that on each loop iteration\n * emits a value. First, condition function is ran. If it returned true, Observable\n * emits currently stored value (initial value at the first iteration) and then updates\n * that value with iterate function. If at some point condition returned false, Observable\n * completes at that moment.\n *\n * Optionally you can pass fourth parameter to `generate` - a result selector function which allows you\n * to immediately map value that would normally be emitted by an Observable.\n *\n * If you find three anonymous functions in `generate` call hard to read, you can provide\n * single object to the operator instead. That object has properties: `initialState`,\n * `condition`, `iterate` and `resultSelector`, which should have respective values that you\n * would normally pass to `generate`. `resultSelector` is still optional, but that form\n * of calling `generate` allows you to omit `condition` as well. If you omit it, that means\n * condition always holds, so output Observable will never complete.\n *\n * Both forms of `generate` can optionally accept a scheduler. In case of multi-parameter call,\n * scheduler simply comes as a last argument (no matter if there is resultSelector\n * function or not). In case of single-parameter call, you can provide it as a\n * `scheduler` property on object passed to the operator. In both cases scheduler decides when\n * next iteration of the loop will happen and therefore when next value will be emitted\n * by the Observable. For example to ensure that each value is pushed to the observer\n * on separate task in event loop, you could use `async` scheduler. Note that\n * by default (when no scheduler is passed) values are simply emitted synchronously.\n *\n *\n * @example <caption>Use with condition and iterate functions.</caption>\n * const generated = generate(0, x => x < 3, x => x + 1);\n *\n * generated.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('Yo!')\n * );\n *\n * // Logs:\n * // 0\n * // 1\n * // 2\n * // \"Yo!\"\n *\n *\n * @example <caption>Use with condition, iterate and resultSelector functions.</caption>\n * const generated = generate(0, x => x < 3, x => x + 1, x => x * 1000);\n *\n * generated.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('Yo!')\n * );\n *\n * // Logs:\n * // 0\n * // 1000\n * // 2000\n * // \"Yo!\"\n *\n *\n * @example <caption>Use with options object.</caption>\n * const generated = generate({\n *   initialState: 0,\n *   condition(value) { return value < 3; },\n *   iterate(value) { return value + 1; },\n *   resultSelector(value) { return value * 1000; }\n * });\n *\n * generated.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('Yo!')\n * );\n *\n * // Logs:\n * // 0\n * // 1000\n * // 2000\n * // \"Yo!\"\n *\n * @example <caption>Use options object without condition function.</caption>\n * const generated = generate({\n *   initialState: 0,\n *   iterate(value) { return value + 1; },\n *   resultSelector(value) { return value * 1000; }\n * });\n *\n * generated.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('Yo!') // This will never run.\n * );\n *\n * // Logs:\n * // 0\n * // 1000\n * // 2000\n * // 3000\n * // ...and never stops.\n *\n *\n * @see {@link from}\n * @see {@link index/Observable.create}\n *\n * @param {S} initialState Initial state.\n * @param {function (state: S): boolean} condition Condition to terminate generation (upon returning false).\n * @param {function (state: S): S} iterate Iteration step function.\n * @param {function (state: S): T} [resultSelector] Selector function for results produced in the sequence.\n * @param {Scheduler} [scheduler] A {@link Scheduler} on which to run the generator loop. If not provided, defaults to emitting immediately.\n * @return {Observable<T>} The generated sequence.\n */\nexport function generate<S>(initialState: S,\n                            condition: ConditionFunc<S>,\n                            iterate: IterateFunc<S>,\n                            scheduler?: SchedulerLike): Observable<S>;\n\n/**\n * Generates an observable sequence by running a state-driven loop\n * producing the sequence's elements, using the specified scheduler\n * to send out observer messages.\n * The overload accepts options object that might contain initial state, iterate,\n * condition and scheduler.\n *\n * ![](generate.png)\n *\n * @example <caption>Produces sequence of 0, 1, 2, ... 9, then completes.</caption>\n * const res = generate({\n *   initialState: 0,\n *   condition: x => x < 10,\n *   iterate: x => x + 1,\n * });\n *\n * @see {@link from}\n * @see {@link Observable}\n *\n * @param {GenerateBaseOptions<S>} options Object that must contain initialState, iterate and might contain condition and scheduler.\n * @returns {Observable<S>} The generated sequence.\n */\nexport function generate<S>(options: GenerateBaseOptions<S>): Observable<S>;\n\n/**\n * Generates an observable sequence by running a state-driven loop\n * producing the sequence's elements, using the specified scheduler\n * to send out observer messages.\n * The overload accepts options object that might contain initial state, iterate,\n * condition, result selector and scheduler.\n *\n * ![](generate.png)\n *\n * @example <caption>Produces sequence of 0, 1, 2, ... 9, then completes.</caption>\n * const res = generate({\n *   initialState: 0,\n *   condition: x => x < 10,\n *   iterate: x => x + 1,\n *   resultSelector: x => x,\n * });\n *\n * @see {@link from}\n * @see {@link Observable}\n *\n * @param {GenerateOptions<T, S>} options Object that must contain initialState, iterate, resultSelector and might contain condition and scheduler.\n * @returns {Observable<T>} The generated sequence.\n */\nexport function generate<T, S>(options: GenerateOptions<T, S>): Observable<T>;\n\nexport function generate<T, S>(initialStateOrOptions: S | GenerateOptions<T, S>,\n                               condition?: ConditionFunc<S>,\n                               iterate?: IterateFunc<S>,\n                               resultSelectorOrObservable?: (ResultFunc<S, T>) | SchedulerLike,\n                               scheduler?: SchedulerLike): Observable<T> {\n\n  let resultSelector: ResultFunc<S, T>;\n  let initialState: S;\n\n  if (arguments.length == 1) {\n    const options = initialStateOrOptions as GenerateOptions<T, S>;\n    initialState = options.initialState;\n    condition = options.condition;\n    iterate = options.iterate;\n    resultSelector = options.resultSelector || identity as ResultFunc<S, T>;\n    scheduler = options.scheduler;\n  } else if (resultSelectorOrObservable === undefined || isScheduler(resultSelectorOrObservable)) {\n    initialState = initialStateOrOptions as S;\n    resultSelector = identity as ResultFunc<S, T>;\n    scheduler = resultSelectorOrObservable as SchedulerLike;\n  } else {\n    initialState = initialStateOrOptions as S;\n    resultSelector = resultSelectorOrObservable as ResultFunc<S, T>;\n  }\n\n  return new Observable<T>(subscriber => {\n    let state = initialState;\n    if (scheduler) {\n      return scheduler.schedule<SchedulerState<T, S>>(dispatch, 0, {\n        subscriber,\n        iterate,\n        condition,\n        resultSelector,\n        state\n      });\n    }\n\n    do {\n      if (condition) {\n        let conditionResult: boolean;\n        try {\n          conditionResult = condition(state);\n        } catch (err) {\n          subscriber.error(err);\n          return undefined;\n        }\n        if (!conditionResult) {\n          subscriber.complete();\n          break;\n        }\n      }\n      let value: T;\n      try {\n        value = resultSelector(state);\n      } catch (err) {\n        subscriber.error(err);\n        return undefined;\n      }\n      subscriber.next(value);\n      if (subscriber.closed) {\n        break;\n      }\n      try {\n        state = iterate(state);\n      } catch (err) {\n        subscriber.error(err);\n        return undefined;\n      }\n    } while (true);\n\n    return undefined;\n  });\n}\n\nfunction dispatch<T, S>(this: SchedulerAction<SchedulerState<T, S>>, state: SchedulerState<T, S>) {\n  const { subscriber, condition } = state;\n  if (subscriber.closed) {\n    return undefined;\n  }\n  if (state.needIterate) {\n    try {\n      state.state = state.iterate(state.state);\n    } catch (err) {\n      subscriber.error(err);\n      return undefined;\n    }\n  } else {\n    state.needIterate = true;\n  }\n  if (condition) {\n    let conditionResult: boolean;\n    try {\n      conditionResult = condition(state.state);\n    } catch (err) {\n      subscriber.error(err);\n      return undefined;\n    }\n    if (!conditionResult) {\n      subscriber.complete();\n      return undefined;\n    }\n    if (subscriber.closed) {\n      return undefined;\n    }\n  }\n  let value: T;\n  try {\n    value = state.resultSelector(state.state);\n  } catch (err) {\n    subscriber.error(err);\n    return undefined;\n  }\n  if (subscriber.closed) {\n    return undefined;\n  }\n  subscriber.next(value);\n  if (subscriber.closed) {\n    return undefined;\n  }\n  return this.schedule(state);\n}\n","import { Observable } from '../Observable';\nimport { defer } from './defer';\nimport { EMPTY } from './empty';\nimport { SubscribableOrPromise } from '../types';\n\n/**\n * Decides at subscription time which Observable will actually be subscribed.\n *\n * <span class=\"informal\">`If` statement for Observables.</span>\n *\n * `iif` accepts a condition function and two Observables. When\n * an Observable returned by the operator is subscribed, condition function will be called.\n * Based on what boolean it returns at that moment, consumer will subscribe either to\n * the first Observable (if condition was true) or to the second (if condition was false). Condition\n * function may also not return anything - in that case condition will be evaluated as false and\n * second Observable will be subscribed.\n *\n * Note that Observables for both cases (true and false) are optional. If condition points to an Observable that\n * was left undefined, resulting stream will simply complete immediately. That allows you to, rather\n * than controlling which Observable will be subscribed, decide at runtime if consumer should have access\n * to given Observable or not.\n *\n * If you have more complex logic that requires decision between more than two Observables, {@link defer}\n * will probably be a better choice. Actually `iif` can be easily implemented with {@link defer}\n * and exists only for convenience and readability reasons.\n *\n *\n * ## Examples\n * ### Change at runtime which Observable will be subscribed\n * ```ts\n * import { iif, of } from 'rxjs';\n *\n * let subscribeToFirst;\n * const firstOrSecond = iif(\n *   () => subscribeToFirst,\n *   of('first'),\n *   of('second'),\n * );\n *\n * subscribeToFirst = true;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"first\"\n *\n * subscribeToFirst = false;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"second\"\n *\n * ```\n *\n * ### Control an access to an Observable\n * ```ts\n * let accessGranted;\n * const observableIfYouHaveAccess = iif(\n *   () => accessGranted,\n *   of('It seems you have an access...'), // Note that only one Observable is passed to the operator.\n * );\n *\n * accessGranted = true;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end'),\n * );\n *\n * // Logs:\n * // \"It seems you have an access...\"\n * // \"The end\"\n *\n * accessGranted = false;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end'),\n * );\n *\n * // Logs:\n * // \"The end\"\n * ```\n *\n * @see {@link defer}\n *\n * @param {function(): boolean} condition Condition which Observable should be chosen.\n * @param {Observable} [trueObservable] An Observable that will be subscribed if condition is true.\n * @param {Observable} [falseObservable] An Observable that will be subscribed if condition is false.\n * @return {Observable} Either first or second Observable, depending on condition.\n * @static true\n * @name iif\n * @owner Observable\n*/\nexport function iif<T = never, F = never>(\n  condition: () => boolean,\n  trueResult: SubscribableOrPromise<T> = EMPTY,\n  falseResult: SubscribableOrPromise<F> = EMPTY\n): Observable<T|F> {\n  return defer(() => condition() ? trueResult : falseResult);\n}\n","import { isArray } from './isArray';\n\nexport function isNumeric(val: any): val is number | string {\n  // parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n  // ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n  // subtraction forces infinities to NaN\n  // adding 1 corrects loss of precision from parseFloat (#15100)\n  return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n","import { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { SchedulerAction, SchedulerLike } from '../types';\nimport { isNumeric } from '../util/isNumeric';\nimport { Subscriber } from '../Subscriber';\n\n/**\n * Creates an Observable that emits sequential numbers every specified\n * interval of time, on a specified {@link SchedulerLike}.\n *\n * <span class=\"informal\">Emits incremental numbers periodically in time.\n * </span>\n *\n * ![](interval.png)\n *\n * `interval` returns an Observable that emits an infinite sequence of\n * ascending integers, with a constant interval of time of your choosing\n * between those emissions. The first emission is not sent immediately, but\n * only after the first period has passed. By default, this operator uses the\n * `async` {@link SchedulerLike} to provide a notion of time, but you may pass any\n * {@link SchedulerLike} to it.\n *\n * ## Example\n * Emits ascending numbers, one every second (1000ms) up to the number 3\n * ```ts\n * import { interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const numbers = interval(1000);\n *\n * const takeFourNumbers = numbers.pipe(take(4));\n *\n * takeFourNumbers.subscribe(x => console.log('Next: ', x));\n *\n * // Logs:\n * // Next: 0\n * // Next: 1\n * // Next: 2\n * // Next: 3\n * ```\n *\n * @see {@link timer}\n * @see {@link delay}\n *\n * @param {number} [period=0] The interval size in milliseconds (by default)\n * or the time unit determined by the scheduler's clock.\n * @param {SchedulerLike} [scheduler=async] The {@link SchedulerLike} to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a sequential number each time\n * interval.\n * @static true\n * @name interval\n * @owner Observable\n */\nexport function interval(period = 0,\n                         scheduler: SchedulerLike = async): Observable<number> {\n  if (!isNumeric(period) || period < 0) {\n    period = 0;\n  }\n\n  if (!scheduler || typeof scheduler.schedule !== 'function') {\n    scheduler = async;\n  }\n\n  return new Observable<number>(subscriber => {\n    subscriber.add(\n      scheduler.schedule(dispatch, period, { subscriber, counter: 0, period })\n    );\n    return subscriber;\n  });\n}\n\nfunction dispatch(this: SchedulerAction<IntervalState>, state: IntervalState) {\n  const { subscriber, counter, period } = state;\n  subscriber.next(counter);\n  this.schedule({ subscriber, counter: counter + 1, period }, period);\n}\n\ninterface IntervalState {\n  subscriber: Subscriber<number>;\n  counter: number;\n  period: number;\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike} from '../types';\nimport { isScheduler } from '../util/isScheduler';\nimport { mergeAll } from '../operators/mergeAll';\nimport { fromArray } from './fromArray';\n\n/* tslint:disable:max-line-length */\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T>(v1: ObservableInput<T>, scheduler: SchedulerLike): Observable<T>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T>(v1: ObservableInput<T>, concurrent: number, scheduler: SchedulerLike): Observable<T>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2>(v1: ObservableInput<T>, v2: ObservableInput<T2>, scheduler: SchedulerLike): Observable<T | T2>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2>(v1: ObservableInput<T>, v2: ObservableInput<T2>, concurrent: number, scheduler: SchedulerLike): Observable<T | T2>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, scheduler: SchedulerLike): Observable<T | T2 | T3>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, concurrent: number, scheduler: SchedulerLike): Observable<T | T2 | T3>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3, T4>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3, T4>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, concurrent: number, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3, T4, T5>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4 | T5>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3, T4, T5>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, concurrent: number, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4 | T5>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3, T4, T5, T6>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4 | T5 | T6>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, T2, T3, T4, T5, T6>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, concurrent: number, scheduler: SchedulerLike): Observable<T | T2 | T3 | T4 | T5 | T6>;\n\nexport function merge<T>(v1: ObservableInput<T>): Observable<T>;\nexport function merge<T>(v1: ObservableInput<T>, concurrent?: number): Observable<T>;\nexport function merge<T, T2>(v1: ObservableInput<T>, v2: ObservableInput<T2>): Observable<T | T2>;\nexport function merge<T, T2>(v1: ObservableInput<T>, v2: ObservableInput<T2>, concurrent?: number): Observable<T | T2>;\nexport function merge<T, T2, T3>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>): Observable<T | T2 | T3>;\nexport function merge<T, T2, T3>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, concurrent?: number): Observable<T | T2 | T3>;\nexport function merge<T, T2, T3, T4>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>): Observable<T | T2 | T3 | T4>;\nexport function merge<T, T2, T3, T4>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, concurrent?: number): Observable<T | T2 | T3 | T4>;\nexport function merge<T, T2, T3, T4, T5>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>): Observable<T | T2 | T3 | T4 | T5>;\nexport function merge<T, T2, T3, T4, T5>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, concurrent?: number): Observable<T | T2 | T3 | T4 | T5>;\nexport function merge<T, T2, T3, T4, T5, T6>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>): Observable<T | T2 | T3 | T4 | T5 | T6>;\nexport function merge<T, T2, T3, T4, T5, T6>(v1: ObservableInput<T>, v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, concurrent?: number): Observable<T | T2 | T3 | T4 | T5 | T6>;\nexport function merge<T>(...observables: (ObservableInput<T> | number)[]): Observable<T>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T>(...observables: (ObservableInput<T> | SchedulerLike | number)[]): Observable<T>;\nexport function merge<T, R>(...observables: (ObservableInput<any> | number)[]): Observable<R>;\n/** @deprecated use {@link scheduled} and {@link mergeAll} (e.g. `scheduled([ob1, ob2, ob3], scheduled).pipe(mergeAll())*/\nexport function merge<T, R>(...observables: (ObservableInput<any> | SchedulerLike | number)[]): Observable<R>;\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which concurrently emits all values from every\n * given input Observable.\n *\n * <span class=\"informal\">Flattens multiple Observables together by blending\n * their values into one Observable.</span>\n *\n * ![](merge.png)\n *\n * `merge` subscribes to each given input Observable (as arguments), and simply\n * forwards (without doing any transformation) all the values from all the input\n * Observables to the output Observable. The output Observable only completes\n * once all input Observables have completed. Any error delivered by an input\n * Observable will be immediately emitted on the output Observable.\n *\n * ## Examples\n * ### Merge together two Observables: 1s interval and clicks\n * ```ts\n * import { merge, fromEvent, interval } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const timer = interval(1000);\n * const clicksOrTimer = merge(clicks, timer);\n * clicksOrTimer.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // timer will emit ascending values, one every second(1000ms) to console\n * // clicks logs MouseEvents to console everytime the \"document\" is clicked\n * // Since the two streams are merged you see these happening\n * // as they occur.\n * ```\n *\n * ### Merge together 3 Observables, but only 2 run concurrently\n * ```ts\n * import { merge, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const timer1 = interval(1000).pipe(take(10));\n * const timer2 = interval(2000).pipe(take(6));\n * const timer3 = interval(500).pipe(take(10));\n * const concurrent = 2; // the argument\n * const merged = merge(timer1, timer2, timer3, concurrent);\n * merged.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - First timer1 and timer2 will run concurrently\n * // - timer1 will emit a value every 1000ms for 10 iterations\n * // - timer2 will emit a value every 2000ms for 6 iterations\n * // - after timer1 hits it's max iteration, timer2 will\n * //   continue, and timer3 will start to run concurrently with timer2\n * // - when timer2 hits it's max iteration it terminates, and\n * //   timer3 will continue to emit a value every 500ms until it is complete\n * ```\n *\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n *\n * @param {...ObservableInput} observables Input Observables to merge together.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {SchedulerLike} [scheduler=null] The {@link SchedulerLike} to use for managing\n * concurrency of input Observables.\n * @return {Observable} an Observable that emits items that are the result of\n * every input Observable.\n * @static true\n * @name merge\n * @owner Observable\n */\nexport function merge<T, R>(...observables: Array<ObservableInput<any> | SchedulerLike | number>): Observable<R> {\n let concurrent = Number.POSITIVE_INFINITY;\n let scheduler: SchedulerLike = null;\n  let last: any = observables[observables.length - 1];\n  if (isScheduler(last)) {\n    scheduler = <SchedulerLike>observables.pop();\n    if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n      concurrent = <number>observables.pop();\n    }\n  } else if (typeof last === 'number') {\n    concurrent = <number>observables.pop();\n  }\n\n  if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n    return <Observable<R>>observables[0];\n  }\n\n  return mergeAll<R>(concurrent)(fromArray<any>(observables, scheduler));\n}\n","import { Observable } from '../Observable';\nimport { noop } from '../util/noop';\n\n/**\n * An Observable that emits no items to the Observer and never completes.\n *\n * ![](never.png)\n *\n * A simple Observable that emits neither values nor errors nor the completion\n * notification. It can be used for testing purposes or for composing with other\n * Observables. Please note that by never emitting a complete notification, this\n * Observable keeps the subscription from being disposed automatically.\n * Subscriptions need to be manually disposed.\n *\n * ##  Example\n * ### Emit the number 7, then never emit anything else (not even complete)\n * ```ts\n * import { NEVER } from 'rxjs';\n * import { startWith } from 'rxjs/operators';\n *\n * function info() {\n *   console.log('Will not be called');\n * }\n * const result = NEVER.pipe(startWith(7));\n * result.subscribe(x => console.log(x), info, info);\n *\n * ```\n *\n * @see {@link Observable}\n * @see {@link index/EMPTY}\n * @see {@link of}\n * @see {@link throwError}\n */\nexport const NEVER = new Observable<never>(noop);\n\n/**\n * @deprecated Deprecated in favor of using {@link NEVER} constant.\n */\nexport function never () {\n  return NEVER;\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput } from '../types';\nimport { from } from './from';\nimport { isArray } from '../util/isArray';\nimport { EMPTY } from './empty';\n\n/* tslint:disable:max-line-length */\nexport function onErrorResumeNext<R>(v: ObservableInput<R>): Observable<R>;\nexport function onErrorResumeNext<T2, T3, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>): Observable<R>;\nexport function onErrorResumeNext<T2, T3, T4, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>): Observable<R>;\nexport function onErrorResumeNext<T2, T3, T4, T5, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>): Observable<R>;\nexport function onErrorResumeNext<T2, T3, T4, T5, T6, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>): Observable<R>;\n\nexport function onErrorResumeNext<R>(...observables: Array<ObservableInput<any> | ((...values: Array<any>) => R)>): Observable<R>;\nexport function onErrorResumeNext<R>(array: ObservableInput<any>[]): Observable<R>;\n/* tslint:enable:max-line-length */\n\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * ![](onErrorResumeNext.png)\n *\n * `onErrorResumeNext` Will subscribe to each observable source it is provided, in order.\n * If the source it's subscribed to emits an error or completes, it will move to the next source\n * without error.\n *\n * If `onErrorResumeNext` is provided no arguments, or a single, empty array, it will return {@link index/EMPTY}.\n *\n * `onErrorResumeNext` is basically {@link concat}, only it will continue, even if one of its\n * sources emits an error.\n *\n * Note that there is no way to handle any errors thrown by sources via the result of\n * `onErrorResumeNext`. If you want to handle errors thrown in any given source, you can\n * always use the {@link catchError} operator on them before passing them into `onErrorResumeNext`.\n *\n * ## Example\n * Subscribe to the next Observable after map fails</caption>\n * ```ts\n * import { onErrorResumeNext, of } from 'rxjs';\n * import { map } from 'rxjs/operators';\n *\n * onErrorResumeNext(\n *  of(1, 2, 3, 0).pipe(\n *    map(x => {\n *      if (x === 0) throw Error();\n *      return 10 / x;\n *    })\n *  ),\n *  of(1, 2, 3),\n * )\n * .subscribe(\n *   val => console.log(val),\n *   err => console.log(err),          // Will never be called.\n *   () => console.log('done'),\n * );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"done\"\n * ```\n *\n * @see {@link concat}\n * @see {@link catchError}\n *\n * @param {...ObservableInput} sources Observables (or anything that *is* observable) passed either directly or as an array.\n * @return {Observable} An Observable that concatenates all sources, one after the other,\n * ignoring all errors, such that any error causes it to move on to the next source.\n */\nexport function onErrorResumeNext<T, R>(...sources: Array<ObservableInput<any> |\n                                                              Array<ObservableInput<any>> |\n                                                              ((...values: Array<any>) => R)>): Observable<R> {\n\n  if (sources.length === 0) {\n    return EMPTY;\n  }\n\n  const [ first, ...remainder ] = sources;\n\n  if (sources.length === 1 && isArray(first)) {\n    return onErrorResumeNext(...first);\n  }\n\n  return new Observable(subscriber => {\n    const subNext = () => subscriber.add(\n      onErrorResumeNext(...remainder).subscribe(subscriber)\n    );\n\n    return from(first).subscribe({\n      next(value) { subscriber.next(value); },\n      error: subNext,\n      complete: subNext,\n    });\n  });\n}\n","import { Observable } from '../Observable';\nimport { SchedulerAction, SchedulerLike } from '../types';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\n\n/**\n * Convert an object into an Observable of `[key, value]` pairs.\n *\n * <span class=\"informal\">Turn entries of an object into a stream.</span>\n *\n * <img src=\"./img/pairs.png\" width=\"100%\">\n *\n * `pairs` takes an arbitrary object and returns an Observable that emits arrays. Each\n * emitted array has exactly two elements - the first is a key from the object\n * and the second is a value corresponding to that key. Keys are extracted from\n * an object via `Object.keys` function, which means that they will be only\n * enumerable keys that are present on an object directly - not ones inherited\n * via prototype chain.\n *\n * By default these arrays are emitted synchronously. To change that you can\n * pass a {@link SchedulerLike} as a second argument to `pairs`.\n *\n * @example <caption>Converts a javascript object to an Observable</caption>\n * ```ts\n * import { pairs } from 'rxjs';\n *\n * const obj = {\n *   foo: 42,\n *   bar: 56,\n *   baz: 78\n * };\n *\n * pairs(obj)\n * .subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('the end!')\n * );\n *\n * // Logs:\n * // [\"foo\", 42],\n * // [\"bar\", 56],\n * // [\"baz\", 78],\n * // \"the end!\"\n * ```\n *\n * @param {Object} obj The object to inspect and turn into an\n * Observable sequence.\n * @param {Scheduler} [scheduler] An optional IScheduler to schedule\n * when resulting Observable will emit values.\n * @returns {(Observable<Array<string|T>>)} An observable sequence of\n * [key, value] pairs from the object.\n */\nexport function pairs<T>(obj: Object, scheduler?: SchedulerLike): Observable<[string, T]> {\n  if (!scheduler) {\n    return new Observable<[string, T]>(subscriber => {\n      const keys = Object.keys(obj);\n      for (let i = 0; i < keys.length && !subscriber.closed; i++) {\n        const key = keys[i];\n        if (obj.hasOwnProperty(key)) {\n          subscriber.next([key, obj[key]]);\n        }\n      }\n      subscriber.complete();\n    });\n  } else {\n    return new Observable<[string, T]>(subscriber => {\n      const keys = Object.keys(obj);\n      const subscription = new Subscription();\n      subscription.add(\n        scheduler.schedule<{ keys: string[], index: number, subscriber: Subscriber<[string, T]>, subscription: Subscription, obj: Object }>\n          (dispatch, 0, { keys, index: 0, subscriber, subscription, obj }));\n      return subscription;\n    });\n  }\n}\n\n/** @internal */\nexport function dispatch<T>(this: SchedulerAction<any>,\n                            state: { keys: string[], index: number, subscriber: Subscriber<[string, T]>, subscription: Subscription, obj: Object }) {\n  const { keys, index, subscriber, subscription, obj } = state;\n  if (!subscriber.closed) {\n    if (index < keys.length) {\n      const key = keys[index];\n      subscriber.next([key, obj[key]]);\n      subscription.add(this.schedule({ keys, index: index + 1, subscriber, subscription, obj }));\n    } else {\n      subscriber.complete();\n    }\n  }\n}\n","export function not(pred: Function, thisArg: any): Function {\n  function notPred(): any {\n    return !((<any> notPred).pred.apply((<any> notPred).thisArg, arguments));\n  }\n  (<any> notPred).pred = pred;\n  (<any> notPred).thisArg = thisArg;\n  return notPred;\n}","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction, MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S,\n                                       thisArg?: any): OperatorFunction<T, S>;\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * ![](filter.png)\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * ## Example\n * Emit only click events whose target was a DIV element\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { filter } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksOnDivs = clicks.pipe(filter(ev => ev.target.tagName === 'DIV'));\n * clicksOnDivs.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T> {\n  return function filterOperatorFunction(source: Observable<T>): Observable<T> {\n    return source.lift(new FilterOperator(predicate, thisArg));\n  };\n}\n\nclass FilterOperator<T> implements Operator<T, T> {\n  constructor(private predicate: (value: T, index: number) => boolean,\n              private thisArg?: any) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass FilterSubscriber<T> extends Subscriber<T> {\n\n  count: number = 0;\n\n  constructor(destination: Subscriber<T>,\n              private predicate: (value: T, index: number) => boolean,\n              private thisArg: any) {\n    super(destination);\n  }\n\n  // the try catch block below is left specifically for\n  // optimization and perf reasons. a tryCatcher is not necessary here.\n  protected _next(value: T) {\n    let result: any;\n    try {\n      result = this.predicate.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    if (result) {\n      this.destination.next(value);\n    }\n  }\n}\n","import { not } from '../util/not';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { filter } from '../operators/filter';\nimport { ObservableInput } from '../types';\nimport { Observable } from '../Observable';\n\n/**\n * Splits the source Observable into two, one with values that satisfy a\n * predicate, and another with values that don't satisfy the predicate.\n *\n * <span class=\"informal\">It's like {@link filter}, but returns two Observables:\n * one like the output of {@link filter}, and the other with values that did not\n * pass the condition.</span>\n *\n * ![](partition.png)\n *\n * `partition` outputs an array with two Observables that partition the values\n * from the source Observable through the given `predicate` function. The first\n * Observable in that array emits source values for which the predicate argument\n * returns true. The second Observable emits source values for which the\n * predicate returns false. The first behaves like {@link filter} and the second\n * behaves like {@link filter} with the predicate negated.\n *\n * ## Example\n * Partition a set of numbers into odds and evens observables\n * ```ts\n * import { of, partition } from 'rxjs';\n *\n * const observableValues = of(1, 2, 3, 4, 5, 6);\n * const [evens$, odds$] = partition(observableValues, (value, index) => value % 2 === 0);\n *\n * odds$.subscribe(x => console.log('odds', x));\n * evens$.subscribe(x => console.log('evens', x));\n *\n * // Logs:\n * // odds 1\n * // odds 3\n * // odds 5\n * // evens 2\n * // evens 4\n * // evens 6\n * ```\n *\n * @see {@link filter}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted on the first Observable in the returned array, if\n * `false` the value is emitted on the second Observable in the array. The\n * `index` parameter is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {[Observable<T>, Observable<T>]} An array with two Observables: one\n * with values that passed the predicate, and another with values that did not\n * pass the predicate.\n */\nexport function partition<T>(\n  source: ObservableInput<T>,\n  predicate: (value: T, index: number) => boolean,\n  thisArg?: any\n): [Observable<T>, Observable<T>] {\n  return [\n    filter(predicate, thisArg)(new Observable<T>(subscribeTo(source))),\n    filter(not(predicate, thisArg) as any)(new Observable<T>(subscribeTo(source)))\n  ] as [Observable<T>, Observable<T>];\n}\n","import { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { fromArray } from './fromArray';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { TeardownLogic, ObservableInput } from '../types';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\n// tslint:disable:max-line-length\nexport function race<A>(arg: [ObservableInput<A>]): Observable<A>;\nexport function race<A, B>(arg: [ObservableInput<A>, ObservableInput<B>]): Observable<A | B>;\nexport function race<A, B, C>(arg: [ObservableInput<A>, ObservableInput<B>, ObservableInput<C>]): Observable<A | B | C>;\nexport function race<A, B, C, D>(arg: [ObservableInput<A>, ObservableInput<B>, ObservableInput<C>, ObservableInput<D>]): Observable<A | B | C | D>;\nexport function race<A, B, C, D, E>(arg: [ObservableInput<A>, ObservableInput<B>, ObservableInput<C>, ObservableInput<D>, ObservableInput<E>]): Observable<A | B | C | D | E>;\nexport function race<T>(arg: ObservableInput<T>[]): Observable<T>;\nexport function race(arg: ObservableInput<any>[]): Observable<{}>;\n\nexport function race<A>(a: ObservableInput<A>): Observable<A>;\nexport function race<A, B>(a: ObservableInput<A>, b: ObservableInput<B>): Observable<A | B>;\nexport function race<A, B, C>(a: ObservableInput<A>, b: ObservableInput<B>, c: ObservableInput<C>): Observable<A | B | C>;\nexport function race<A, B, C, D>(a: ObservableInput<A>, b: ObservableInput<B>, c: ObservableInput<C>, d: ObservableInput<D>): Observable<A | B | C | D>;\nexport function race<A, B, C, D, E>(a: ObservableInput<A>, b: ObservableInput<B>, c: ObservableInput<C>, d: ObservableInput<D>, e: ObservableInput<E>): Observable<A | B | C | D | E>;\n// tslint:enable:max-line-length\n\nexport function race<T>(observables: ObservableInput<T>[]): Observable<T>;\nexport function race(observables: ObservableInput<any>[]): Observable<{}>;\nexport function race<T>(...observables: ObservableInput<T>[]): Observable<T>;\nexport function race(...observables: ObservableInput<any>[]): Observable<{}>;\n\n/**\n * Returns an Observable that mirrors the first source Observable to emit an item.\n *\n * ## Example\n * ### Subscribes to the observable that was the first to start emitting.\n *\n * ```ts\n * import { race, interval } from 'rxjs';\n * import { mapTo } from 'rxjs/operators';\n *\n * const obs1 = interval(1000).pipe(mapTo('fast one'));\n * const obs2 = interval(3000).pipe(mapTo('medium one'));\n * const obs3 = interval(5000).pipe(mapTo('slow one'));\n *\n * race(obs3, obs1, obs2)\n * .subscribe(\n *   winner => console.log(winner)\n * );\n *\n * // result:\n * // a series of 'fast one'\n * ```\n *\n * @param {...Observables} ...observables sources used to race for which Observable emits first.\n * @return {Observable} an Observable that mirrors the output of the first Observable to emit an item.\n * @static true\n * @name race\n * @owner Observable\n */\nexport function race<T>(...observables: ObservableInput<any>[]): Observable<T> {\n  // if the only argument is an array, it was most likely called with\n  // `race([obs1, obs2, ...])`\n  if (observables.length === 1) {\n    if (isArray(observables[0])) {\n      observables = observables[0] as Observable<any>[];\n    } else {\n      return observables[0] as Observable<T>;\n    }\n  }\n\n  return fromArray(observables, undefined).lift(new RaceOperator<T>());\n}\n\nexport class RaceOperator<T> implements Operator<T, T> {\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new RaceSubscriber(subscriber));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class RaceSubscriber<T> extends OuterSubscriber<T, T> {\n  private hasFirst: boolean = false;\n  private observables: Observable<any>[] = [];\n  private subscriptions: Subscription[] = [];\n\n  constructor(destination: Subscriber<T>) {\n    super(destination);\n  }\n\n  protected _next(observable: any): void {\n    this.observables.push(observable);\n  }\n\n  protected _complete() {\n    const observables = this.observables;\n    const len = observables.length;\n\n    if (len === 0) {\n      this.destination.complete();\n    } else {\n      for (let i = 0; i < len && !this.hasFirst; i++) {\n        let observable = observables[i];\n        let subscription = subscribeToResult(this, observable, observable as any, i);\n\n        if (this.subscriptions) {\n          this.subscriptions.push(subscription);\n        }\n        this.add(subscription);\n      }\n      this.observables = null;\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: T,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, T>): void {\n    if (!this.hasFirst) {\n      this.hasFirst = true;\n\n      for (let i = 0; i < this.subscriptions.length; i++) {\n        if (i !== outerIndex) {\n          let subscription = this.subscriptions[i];\n\n          subscription.unsubscribe();\n          this.remove(subscription);\n        }\n      }\n\n      this.subscriptions = null;\n    }\n\n    this.destination.next(innerValue);\n  }\n}\n","import { SchedulerAction, SchedulerLike } from '../types';\nimport { Observable } from '../Observable';\n\n/**\n * Creates an Observable that emits a sequence of numbers within a specified\n * range.\n *\n * <span class=\"informal\">Emits a sequence of numbers in a range.</span>\n *\n * ![](range.png)\n *\n * `range` operator emits a range of sequential integers, in order, where you\n * select the `start` of the range and its `length`. By default, uses no\n * {@link SchedulerLike} and just delivers the notifications synchronously, but may use\n * an optional {@link SchedulerLike} to regulate those deliveries.\n *\n * ## Example\n * Emits the numbers 1 to 10</caption>\n * ```ts\n * import { range } from 'rxjs';\n *\n * const numbers = range(1, 10);\n * numbers.subscribe(x => console.log(x));\n * ```\n * @see {@link timer}\n * @see {@link index/interval}\n *\n * @param {number} [start=0] The value of the first integer in the sequence.\n * @param {number} count The number of sequential integers to generate.\n * @param {SchedulerLike} [scheduler] A {@link SchedulerLike} to use for scheduling\n * the emissions of the notifications.\n * @return {Observable} An Observable of numbers that emits a finite range of\n * sequential integers.\n * @static true\n * @name range\n * @owner Observable\n */\nexport function range(start: number = 0,\n                      count?: number,\n                      scheduler?: SchedulerLike): Observable<number> {\n  return new Observable<number>(subscriber => {\n    if (count === undefined) {\n      count = start;\n      start = 0;\n    }\n\n    let index = 0;\n    let current = start;\n\n    if (scheduler) {\n      return scheduler.schedule(dispatch, 0, {\n        index, count, start, subscriber\n      });\n    } else {\n      do {\n        if (index++ >= count) {\n          subscriber.complete();\n          break;\n        }\n        subscriber.next(current++);\n        if (subscriber.closed) {\n          break;\n        }\n      } while (true);\n    }\n\n    return undefined;\n  });\n}\n\n/** @internal */\nexport function dispatch(this: SchedulerAction<any>, state: any) {\n  const { start, index, count, subscriber } = state;\n\n  if (index >= count) {\n    subscriber.complete();\n    return;\n  }\n\n  subscriber.next(start);\n\n  if (subscriber.closed) {\n    return;\n  }\n\n  state.index = index + 1;\n  state.start = start + 1;\n\n  this.schedule(state);\n}\n","import { Observable } from '../Observable';\nimport { SchedulerAction, SchedulerLike } from '../types';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nimport { Subscriber } from '../Subscriber';\n\n/**\n * Creates an Observable that starts emitting after an `dueTime` and\n * emits ever increasing numbers after each `period` of time thereafter.\n *\n * <span class=\"informal\">Its like {@link index/interval}, but you can specify when\n * should the emissions start.</span>\n *\n * ![](timer.png)\n *\n * `timer` returns an Observable that emits an infinite sequence of ascending\n * integers, with a constant interval of time, `period` of your choosing\n * between those emissions. The first emission happens after the specified\n * `dueTime`. The initial delay may be a `Date`. By default, this\n * operator uses the {@link asyncScheduler} {@link SchedulerLike} to provide a notion of time, but you\n * may pass any {@link SchedulerLike} to it. If `period` is not specified, the output\n * Observable emits only one value, `0`. Otherwise, it emits an infinite\n * sequence.\n *\n * ## Examples\n * ### Emits ascending numbers, one every second (1000ms), starting after 3 seconds\n * ```ts\n * import { timer } from 'rxjs';\n *\n * const numbers = timer(3000, 1000);\n * numbers.subscribe(x => console.log(x));\n * ```\n *\n * ### Emits one number after five seconds\n * ```ts\n * import { timer } from 'rxjs';\n *\n * const numbers = timer(5000);\n * numbers.subscribe(x => console.log(x));\n * ```\n * @see {@link index/interval}\n * @see {@link delay}\n *\n * @param {number|Date} [dueTime] The initial delay time specified as a Date object or as an integer denoting\n * milliseconds to wait before emitting the first value of 0`.\n * @param {number|SchedulerLike} [periodOrScheduler] The period of time between emissions of the\n * subsequent numbers.\n * @param {SchedulerLike} [scheduler=async] The {@link SchedulerLike} to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a `0` after the\n * `dueTime` and ever increasing numbers after each `period` of time\n * thereafter.\n * @static true\n * @name timer\n * @owner Observable\n */\nexport function timer(dueTime: number | Date = 0,\n                      periodOrScheduler?: number | SchedulerLike,\n                      scheduler?: SchedulerLike): Observable<number> {\n  let period = -1;\n  if (isNumeric(periodOrScheduler)) {\n    period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n  } else if (isScheduler(periodOrScheduler)) {\n    scheduler = periodOrScheduler as any;\n  }\n\n  if (!isScheduler(scheduler)) {\n    scheduler = async;\n  }\n\n  return new Observable(subscriber => {\n    const due = isNumeric(dueTime)\n      ? (dueTime as number)\n      : (+dueTime - scheduler.now());\n\n    return scheduler.schedule(dispatch, due, {\n      index: 0, period, subscriber\n    });\n  });\n}\n\ninterface TimerState {\n  index: number;\n  period: number;\n  subscriber: Subscriber<number>;\n}\n\nfunction dispatch(this: SchedulerAction<TimerState>, state: TimerState) {\n  const { index, period, subscriber } = state;\n  subscriber.next(index);\n\n  if (subscriber.closed) {\n    return;\n  } else if (period === -1) {\n    return subscriber.complete();\n  }\n\n  state.index = index + 1;\n  this.schedule(state, period);\n}\n","import { Observable } from '../Observable';\nimport { Unsubscribable, ObservableInput } from '../types';\nimport { from } from './from'; // from from from! LAWL\nimport { EMPTY } from './empty';\n\n/**\n * Creates an Observable that uses a resource which will be disposed at the same time as the Observable.\n *\n * <span class=\"informal\">Use it when you catch yourself cleaning up after an Observable.</span>\n *\n * `using` is a factory operator, which accepts two functions. First function returns a disposable resource.\n * It can be an arbitrary object that implements `unsubscribe` method. Second function will be injected with\n * that object and should return an Observable. That Observable can use resource object during its execution.\n * Both functions passed to `using` will be called every time someone subscribes - neither an Observable nor\n * resource object will be shared in any way between subscriptions.\n *\n * When Observable returned by `using` is subscribed, Observable returned from the second function will be subscribed\n * as well. All its notifications (nexted values, completion and error events) will be emitted unchanged by the output\n * Observable. If however someone unsubscribes from the Observable or source Observable completes or errors by itself,\n * the `unsubscribe` method on resource object will be called. This can be used to do any necessary clean up, which\n * otherwise would have to be handled by hand. Note that complete or error notifications are not emitted when someone\n * cancels subscription to an Observable via `unsubscribe`, so `using` can be used as a hook, allowing you to make\n * sure that all resources which need to exist during an Observable execution will be disposed at appropriate time.\n *\n * @see {@link defer}\n *\n * @param {function(): ISubscription} resourceFactory A function which creates any resource object\n * that implements `unsubscribe` method.\n * @param {function(resource: ISubscription): Observable<T>} observableFactory A function which\n * creates an Observable, that can use injected resource object.\n * @return {Observable<T>} An Observable that behaves the same as Observable returned by `observableFactory`, but\n * which - when completed, errored or unsubscribed - will also call `unsubscribe` on created resource object.\n */\nexport function using<T>(resourceFactory: () => Unsubscribable | void,\n                         observableFactory: (resource: Unsubscribable | void) => ObservableInput<T> | void): Observable<T> {\n  return new Observable<T>(subscriber => {\n    let resource: Unsubscribable | void;\n\n    try {\n      resource = resourceFactory();\n    } catch (err) {\n      subscriber.error(err);\n      return undefined;\n    }\n\n    let result: ObservableInput<T> | void;\n    try {\n      result = observableFactory(resource);\n    } catch (err) {\n      subscriber.error(err);\n      return undefined;\n    }\n\n    const source = result ? from(result) : EMPTY;\n    const subscription = source.subscribe(subscriber);\n    return () => {\n      subscription.unsubscribe();\n      if (resource) {\n        resource.unsubscribe();\n      }\n    };\n  });\n}\n","import { Observable } from '../Observable';\nimport { fromArray } from './fromArray';\nimport { isArray } from '../util/isArray';\nimport { Operator } from '../Operator';\nimport { ObservableInput, PartialObserver, ObservedValueOf } from '../types';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { iterator as Symbol_iterator } from '../../internal/symbol/iterator';\n\n/* tslint:disable:max-line-length */\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<O1 extends ObservableInput<any>, R>(v1: O1, resultSelector: (v1: ObservedValueOf<O1>) => R): Observable<R>;\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, R>(v1: O1, v2: O2, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>) => R): Observable<R>;\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>) => R): Observable<R>;\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, v4: O4, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>) => R): Observable<R>;\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>) => R): Observable<R>;\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>, R>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, v6: O6, resultSelector: (v1: ObservedValueOf<O1>, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>, v6: ObservedValueOf<O6>) => R): Observable<R>;\n\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>>(v1: O1, v2: O2): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>]>;\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>]>;\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>]>;\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>]>;\nexport function zip<O1 extends ObservableInput<any>, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>>(v1: O1, v2: O2, v3: O3, v4: O4, v5: O5, v6: O6): Observable<[ObservedValueOf<O1>, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>, ObservedValueOf<O6>]>;\n\nexport function zip<O extends ObservableInput<any>>(array: O[]): Observable<ObservedValueOf<O>[]>;\nexport function zip<R>(array: ObservableInput<any>[]): Observable<R>;\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<O extends ObservableInput<any>, R>(array: O[], resultSelector: (...values: ObservedValueOf<O>[]) => R): Observable<R>;\n/** @deprecated resultSelector is no longer supported, pipe to map instead */\nexport function zip<R>(array: ObservableInput<any>[], resultSelector: (...values: any[]) => R): Observable<R>;\n\nexport function zip<O extends ObservableInput<any>>(...observables: O[]): Observable<ObservedValueOf<O>[]>;\nexport function zip<O extends ObservableInput<any>, R>(...observables: Array<O | ((...values: ObservedValueOf<O>[]) => R)>): Observable<R>;\nexport function zip<R>(...observables: Array<ObservableInput<any> | ((...values: Array<any>) => R)>): Observable<R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Combines multiple Observables to create an Observable whose values are calculated from the values, in order, of each\n * of its input Observables.\n *\n * If the last parameter is a function, this function is used to compute the created value from the input values.\n * Otherwise, an array of the input values is returned.\n *\n * ## Example\n * Combine age and name from different sources\n * ```ts\n * import { zip, of } from 'rxjs';\n * import { map } from 'rxjs/operators';\n *\n * let age$ = of<number>(27, 25, 29);\n * let name$ = of<string>('Foo', 'Bar', 'Beer');\n * let isDev$ = of<boolean>(true, true, false);\n *\n * zip(age$, name$, isDev$).pipe(\n *   map(([age, name, isDev]) => ({ age, name, isDev })),\n * )\n * .subscribe(x => console.log(x));\n *\n * // outputs\n * // { age: 27, name: 'Foo', isDev: true }\n * // { age: 25, name: 'Bar', isDev: true }\n * // { age: 29, name: 'Beer', isDev: false }\n * ```\n * @param observables\n * @return {Observable<R>}\n * @static true\n * @name zip\n * @owner Observable\n */\nexport function zip<O extends ObservableInput<any>, R>(\n  ...observables: Array<O | ((...values: ObservedValueOf<O>[]) => R)>\n): Observable<ObservedValueOf<O>[]|R> {\n  const resultSelector = <((...ys: Array<any>) => R)> observables[observables.length - 1];\n  if (typeof resultSelector === 'function') {\n    observables.pop();\n  }\n  return fromArray(observables, undefined).lift(new ZipOperator(resultSelector));\n}\n\nexport class ZipOperator<T, R> implements Operator<T, R> {\n\n  resultSelector: (...values: Array<any>) => R;\n\n  constructor(resultSelector?: (...values: Array<any>) => R) {\n    this.resultSelector = resultSelector;\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class ZipSubscriber<T, R> extends Subscriber<T> {\n  private values: any;\n  private resultSelector: (...values: Array<any>) => R;\n  private iterators: LookAheadIterator<any>[] = [];\n  private active = 0;\n\n  constructor(destination: Subscriber<R>,\n              resultSelector?: (...values: Array<any>) => R,\n              values: any = Object.create(null)) {\n    super(destination);\n    this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : null;\n    this.values = values;\n  }\n\n  protected _next(value: any) {\n    const iterators = this.iterators;\n    if (isArray(value)) {\n      iterators.push(new StaticArrayIterator(value));\n    } else if (typeof value[Symbol_iterator] === 'function') {\n      iterators.push(new StaticIterator(value[Symbol_iterator]()));\n    } else {\n      iterators.push(new ZipBufferIterator(this.destination, this, value));\n    }\n  }\n\n  protected _complete() {\n    const iterators = this.iterators;\n    const len = iterators.length;\n\n    this.unsubscribe();\n\n    if (len === 0) {\n      this.destination.complete();\n      return;\n    }\n\n    this.active = len;\n    for (let i = 0; i < len; i++) {\n      let iterator: ZipBufferIterator<any, any> = <any>iterators[i];\n      if (iterator.stillUnsubscribed) {\n        const destination = this.destination as Subscription;\n        destination.add(iterator.subscribe(iterator, i));\n      } else {\n        this.active--; // not an observable\n      }\n    }\n  }\n\n  notifyInactive() {\n    this.active--;\n    if (this.active === 0) {\n      this.destination.complete();\n    }\n  }\n\n  checkIterators() {\n    const iterators = this.iterators;\n    const len = iterators.length;\n    const destination = this.destination;\n\n    // abort if not all of them have values\n    for (let i = 0; i < len; i++) {\n      let iterator = iterators[i];\n      if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\n        return;\n      }\n    }\n\n    let shouldComplete = false;\n    const args: any[] = [];\n    for (let i = 0; i < len; i++) {\n      let iterator = iterators[i];\n      let result = iterator.next();\n\n      // check to see if it's completed now that you've gotten\n      // the next value.\n      if (iterator.hasCompleted()) {\n        shouldComplete = true;\n      }\n\n      if (result.done) {\n        destination.complete();\n        return;\n      }\n\n      args.push(result.value);\n    }\n\n    if (this.resultSelector) {\n      this._tryresultSelector(args);\n    } else {\n      destination.next(args);\n    }\n\n    if (shouldComplete) {\n      destination.complete();\n    }\n  }\n\n  protected _tryresultSelector(args: any[]) {\n    let result: any;\n    try {\n      result = this.resultSelector.apply(this, args);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  }\n}\n\ninterface LookAheadIterator<T> extends Iterator<T> {\n  hasValue(): boolean;\n  hasCompleted(): boolean;\n}\n\nclass StaticIterator<T> implements LookAheadIterator<T> {\n  private nextResult: IteratorResult<T>;\n\n  constructor(private iterator: Iterator<T>) {\n    this.nextResult = iterator.next();\n  }\n\n  hasValue() {\n    return true;\n  }\n\n  next(): IteratorResult<T> {\n    const result = this.nextResult;\n    this.nextResult = this.iterator.next();\n    return result;\n  }\n\n  hasCompleted() {\n    const nextResult = this.nextResult;\n    return nextResult && nextResult.done;\n  }\n}\n\nclass StaticArrayIterator<T> implements LookAheadIterator<T> {\n  private index = 0;\n  private length = 0;\n\n  constructor(private array: T[]) {\n    this.length = array.length;\n  }\n\n  [Symbol_iterator]() {\n    return this;\n  }\n\n  next(value?: any): IteratorResult<T> {\n    const i = this.index++;\n    const array = this.array;\n    return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n  }\n\n  hasValue() {\n    return this.array.length > this.index;\n  }\n\n  hasCompleted() {\n    return this.array.length === this.index;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass ZipBufferIterator<T, R> extends OuterSubscriber<T, R> implements LookAheadIterator<T> {\n  stillUnsubscribed = true;\n  buffer: T[] = [];\n  isComplete = false;\n\n  constructor(destination: PartialObserver<T>,\n              private parent: ZipSubscriber<T, R>,\n              private observable: Observable<T>) {\n    super(destination);\n  }\n\n  [Symbol_iterator]() {\n    return this;\n  }\n\n  // NOTE: there is actually a name collision here with Subscriber.next and Iterator.next\n  //    this is legit because `next()` will never be called by a subscription in this case.\n  next(): IteratorResult<T> {\n    const buffer = this.buffer;\n    if (buffer.length === 0 && this.isComplete) {\n      return { value: null, done: true };\n    } else {\n      return { value: buffer.shift(), done: false };\n    }\n  }\n\n  hasValue() {\n    return this.buffer.length > 0;\n  }\n\n  hasCompleted() {\n    return this.buffer.length === 0 && this.isComplete;\n  }\n\n  notifyComplete() {\n    if (this.buffer.length > 0) {\n      this.isComplete = true;\n      this.parent.notifyInactive();\n    } else {\n      this.destination.complete();\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: any,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.buffer.push(innerValue);\n    this.parent.checkIterators();\n  }\n\n  subscribe(value: any, index: number) {\n    return subscribeToResult<any, any>(this, this.observable, this, index);\n  }\n}\n","/* Observable */\nexport { Observable } from './internal/Observable';\nexport { ConnectableObservable } from './internal/observable/ConnectableObservable';\nexport { GroupedObservable } from './internal/operators/groupBy';\nexport { Operator } from './internal/Operator';\nexport { observable } from './internal/symbol/observable';\n\n/* Subjects */\nexport { Subject } from './internal/Subject';\nexport { BehaviorSubject } from './internal/BehaviorSubject';\nexport { ReplaySubject } from './internal/ReplaySubject';\nexport { AsyncSubject } from './internal/AsyncSubject';\n\n/* Schedulers */\nexport { asap as asapScheduler } from './internal/scheduler/asap';\nexport { async as asyncScheduler } from './internal/scheduler/async';\nexport { queue as queueScheduler } from './internal/scheduler/queue';\nexport { animationFrame as animationFrameScheduler } from './internal/scheduler/animationFrame';\nexport { VirtualTimeScheduler, VirtualAction } from './internal/scheduler/VirtualTimeScheduler';\nexport { Scheduler } from './internal/Scheduler';\n\n/* Subscription */\nexport { Subscription } from './internal/Subscription';\nexport { Subscriber } from './internal/Subscriber';\n\n/* Notification */\nexport { Notification, NotificationKind } from './internal/Notification';\n\n/* Utils */\nexport { pipe } from './internal/util/pipe';\nexport { noop } from './internal/util/noop';\nexport { identity } from './internal/util/identity';\nexport { isObservable } from './internal/util/isObservable';\n\n/* Error types */\nexport { ArgumentOutOfRangeError } from './internal/util/ArgumentOutOfRangeError';\nexport { EmptyError } from './internal/util/EmptyError';\nexport { ObjectUnsubscribedError } from './internal/util/ObjectUnsubscribedError';\nexport { UnsubscriptionError } from './internal/util/UnsubscriptionError';\nexport { TimeoutError } from './internal/util/TimeoutError';\n\n/* Static observable creation exports */\nexport { bindCallback } from './internal/observable/bindCallback';\nexport { bindNodeCallback } from './internal/observable/bindNodeCallback';\nexport { combineLatest } from './internal/observable/combineLatest';\nexport { concat } from './internal/observable/concat';\nexport { defer } from './internal/observable/defer';\nexport { empty } from './internal/observable/empty';\nexport { forkJoin } from './internal/observable/forkJoin';\nexport { from } from './internal/observable/from';\nexport { fromEvent } from './internal/observable/fromEvent';\nexport { fromEventPattern } from './internal/observable/fromEventPattern';\nexport { generate } from './internal/observable/generate';\nexport { iif } from './internal/observable/iif';\nexport { interval } from './internal/observable/interval';\nexport { merge } from './internal/observable/merge';\nexport { never } from './internal/observable/never';\nexport { of } from './internal/observable/of';\nexport { onErrorResumeNext } from './internal/observable/onErrorResumeNext';\nexport { pairs } from './internal/observable/pairs';\nexport { partition } from './internal/observable/partition';\nexport { race } from './internal/observable/race';\nexport { range } from './internal/observable/range';\nexport { throwError } from './internal/observable/throwError';\nexport { timer } from './internal/observable/timer';\nexport { using } from './internal/observable/using';\nexport { zip } from './internal/observable/zip';\nexport { scheduled } from './internal/scheduled/scheduled';\n\n/* Constants */\nexport { EMPTY } from './internal/observable/empty';\nexport { NEVER } from './internal/observable/never';\n\n/* Types */\nexport * from './internal/types';\n\n/* Config */\nexport { config } from './internal/config';\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, SubscribableOrPromise, TeardownLogic } from '../types';\n\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\n/**\n * Ignores source values for a duration determined by another Observable, then\n * emits the most recent value from the source Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link auditTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * ![](audit.png)\n *\n * `audit` is similar to `throttle`, but emits the last value from the silenced\n * time window, instead of the first value. `audit` emits the most recent value\n * from the source Observable on the output Observable as soon as its internal\n * timer becomes disabled, and ignores source values while the timer is enabled.\n * Initially, the timer is disabled. As soon as the first source value arrives,\n * the timer is enabled by calling the `durationSelector` function with the\n * source value, which returns the \"duration\" Observable. When the duration\n * Observable emits a value or completes, the timer is disabled, then the most\n * recent source value is emitted on the output Observable, and this process\n * repeats for the next source value.\n *\n * ## Example\n *\n * Emit clicks at a rate of at most one click per second\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { audit } from 'rxjs/operators'\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(audit(ev => interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration, returned as an Observable or a Promise.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method audit\n * @owner Observable\n */\nexport function audit<T>(durationSelector: (value: T) => SubscribableOrPromise<any>): MonoTypeOperatorFunction<T> {\n  return function auditOperatorFunction(source: Observable<T>) {\n    return source.lift(new AuditOperator(durationSelector));\n  };\n}\n\nclass AuditOperator<T> implements Operator<T, T> {\n  constructor(private durationSelector: (value: T) => SubscribableOrPromise<any>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new AuditSubscriber<T, T>(subscriber, this.durationSelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass AuditSubscriber<T, R> extends OuterSubscriber<T, R> {\n\n  private value: T;\n  private hasValue: boolean = false;\n  private throttled: Subscription;\n\n  constructor(destination: Subscriber<T>,\n              private durationSelector: (value: T) => SubscribableOrPromise<any>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    this.value = value;\n    this.hasValue = true;\n    if (!this.throttled) {\n      let duration;\n      try {\n        const { durationSelector } = this;\n        duration = durationSelector(value);\n      } catch (err) {\n        return this.destination.error(err);\n      }\n      const innerSubscription = subscribeToResult(this, duration);\n      if (!innerSubscription || innerSubscription.closed) {\n        this.clearThrottle();\n      } else {\n        this.add(this.throttled = innerSubscription);\n      }\n    }\n  }\n\n  clearThrottle() {\n    const { value, hasValue, throttled } = this;\n    if (throttled) {\n      this.remove(throttled);\n      this.throttled = null;\n      throttled.unsubscribe();\n    }\n    if (hasValue) {\n      this.value = null;\n      this.hasValue = false;\n      this.destination.next(value);\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: R, outerIndex: number, innerIndex: number): void {\n    this.clearThrottle();\n  }\n\n  notifyComplete(): void {\n    this.clearThrottle();\n  }\n}\n","import { async } from '../scheduler/async';\nimport { audit } from './audit';\nimport { timer } from '../observable/timer';\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\n\n/**\n * Ignores source values for `duration` milliseconds, then emits the most recent\n * value from the source Observable, then repeats this process.\n *\n * <span class=\"informal\">When it sees a source value, it ignores that plus\n * the next ones for `duration` milliseconds, and then it emits the most recent\n * value from the source.</span>\n *\n * ![](auditTime.png)\n *\n * `auditTime` is similar to `throttleTime`, but emits the last value from the\n * silenced time window, instead of the first value. `auditTime` emits the most\n * recent value from the source Observable on the output Observable as soon as\n * its internal timer becomes disabled, and ignores source values while the\n * timer is enabled. Initially, the timer is disabled. As soon as the first\n * source value arrives, the timer is enabled. After `duration` milliseconds (or\n * the time unit determined internally by the optional `scheduler`) has passed,\n * the timer is disabled, then the most recent source value is emitted on the\n * output Observable, and this process repeats for the next source value.\n * Optionally takes a {@link SchedulerLike} for managing timers.\n *\n * ## Example\n *\n * Emit clicks at a rate of at most one click per second\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { auditTime } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(auditTime(1000));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} duration Time to wait before emitting the most recent source\n * value, measured in milliseconds or the time unit determined internally\n * by the optional `scheduler`.\n * @param {SchedulerLike} [scheduler=async] The {@link SchedulerLike} to use for\n * managing the timers that handle the rate-limiting behavior.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method auditTime\n * @owner Observable\n */\nexport function auditTime<T>(duration: number, scheduler: SchedulerLike = async): MonoTypeOperatorFunction<T> {\n  return audit(() => timer(duration, scheduler));\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OperatorFunction } from '../types';\n\n/**\n * Buffers the source Observable values until `closingNotifier` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when another Observable emits.</span>\n *\n * ![](buffer.png)\n *\n * Buffers the incoming Observable values until the given `closingNotifier`\n * Observable emits a value, at which point it emits the buffer on the output\n * Observable and starts a new buffer internally, awaiting the next time\n * `closingNotifier` emits.\n *\n * ## Example\n *\n * On every click, emit array of most recent interval events\n *\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { buffer } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const intervalEvents = interval(1000);\n * const buffered = intervalEvents.pipe(buffer(clicks));\n * buffered.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link window}\n *\n * @param {Observable<any>} closingNotifier An Observable that signals the\n * buffer to be emitted on the output Observable.\n * @return {Observable<T[]>} An Observable of buffers, which are arrays of\n * values.\n * @method buffer\n * @owner Observable\n */\nexport function buffer<T>(closingNotifier: Observable<any>): OperatorFunction<T, T[]> {\n  return function bufferOperatorFunction(source: Observable<T>) {\n    return source.lift(new BufferOperator<T>(closingNotifier));\n  };\n}\n\nclass BufferOperator<T> implements Operator<T, T[]> {\n\n  constructor(private closingNotifier: Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<T[]>, source: any): any {\n    return source.subscribe(new BufferSubscriber(subscriber, this.closingNotifier));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass BufferSubscriber<T> extends OuterSubscriber<T, any> {\n  private buffer: T[] = [];\n\n  constructor(destination: Subscriber<T[]>, closingNotifier: Observable<any>) {\n    super(destination);\n    this.add(subscribeToResult(this, closingNotifier));\n  }\n\n  protected _next(value: T) {\n    this.buffer.push(value);\n  }\n\n  notifyNext(outerValue: T, innerValue: any,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, any>): void {\n    const buffer = this.buffer;\n    this.buffer = [];\n    this.destination.next(buffer);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Buffers the source Observable values until the size hits the maximum\n * `bufferSize` given.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when its size reaches `bufferSize`.</span>\n *\n * ![](bufferCount.png)\n *\n * Buffers a number of values from the source Observable by `bufferSize` then\n * emits the buffer and clears it, and starts a new buffer each\n * `startBufferEvery` values. If `startBufferEvery` is not provided or is\n * `null`, then new buffers are started immediately at the start of the source\n * and when each buffer closes and is emitted.\n *\n * ## Examples\n *\n * Emit the last two click events as an array\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { bufferCount } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const buffered = clicks.pipe(bufferCount(2));\n * buffered.subscribe(x => console.log(x));\n * ```\n *\n * On every click, emit the last two click events as an array\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { bufferCount } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const buffered = clicks.pipe(bufferCount(2, 1));\n * buffered.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link buffer}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link pairwise}\n * @see {@link windowCount}\n *\n * @param {number} bufferSize The maximum size of the buffer emitted.\n * @param {number} [startBufferEvery] Interval at which to start a new buffer.\n * For example if `startBufferEvery` is `2`, then a new buffer will be started\n * on every other value from the source. A new buffer is started at the\n * beginning of the source by default.\n * @return {Observable<T[]>} An Observable of arrays of buffered values.\n * @method bufferCount\n * @owner Observable\n */\nexport function bufferCount<T>(bufferSize: number, startBufferEvery: number = null): OperatorFunction<T, T[]> {\n  return function bufferCountOperatorFunction(source: Observable<T>) {\n    return source.lift(new BufferCountOperator<T>(bufferSize, startBufferEvery));\n  };\n}\n\nclass BufferCountOperator<T> implements Operator<T, T[]> {\n  private subscriberClass: any;\n\n  constructor(private bufferSize: number, private startBufferEvery: number) {\n    if (!startBufferEvery || bufferSize === startBufferEvery) {\n      this.subscriberClass = BufferCountSubscriber;\n    } else {\n      this.subscriberClass = BufferSkipCountSubscriber;\n    }\n  }\n\n  call(subscriber: Subscriber<T[]>, source: any): TeardownLogic {\n    return source.subscribe(new this.subscriberClass(subscriber, this.bufferSize, this.startBufferEvery));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass BufferCountSubscriber<T> extends Subscriber<T> {\n  private buffer: T[] = [];\n\n  constructor(destination: Subscriber<T[]>, private bufferSize: number) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    const buffer = this.buffer;\n\n    buffer.push(value);\n\n    if (buffer.length == this.bufferSize) {\n      this.destination.next(buffer);\n      this.buffer = [];\n    }\n  }\n\n  protected _complete(): void {\n    const buffer = this.buffer;\n    if (buffer.length > 0) {\n      this.destination.next(buffer);\n    }\n    super._complete();\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass BufferSkipCountSubscriber<T> extends Subscriber<T> {\n  private buffers: Array<T[]> = [];\n  private count: number = 0;\n\n  constructor(destination: Subscriber<T[]>, private bufferSize: number, private startBufferEvery: number) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    const { bufferSize, startBufferEvery, buffers, count } = this;\n\n    this.count++;\n    if (count % startBufferEvery === 0) {\n      buffers.push([]);\n    }\n\n    for (let i = buffers.length; i--; ) {\n      const buffer = buffers[i];\n      buffer.push(value);\n      if (buffer.length === bufferSize) {\n        buffers.splice(i, 1);\n        this.destination.next(buffer);\n      }\n    }\n  }\n\n  protected _complete(): void {\n    const { buffers, destination } = this;\n\n    while (buffers.length > 0) {\n      let buffer = buffers.shift();\n      if (buffer.length > 0) {\n        destination.next(buffer);\n      }\n    }\n    super._complete();\n  }\n\n}\n","import { Operator } from '../Operator';\nimport { async } from '../scheduler/async';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { isScheduler } from '../util/isScheduler';\nimport { OperatorFunction, SchedulerAction, SchedulerLike } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function bufferTime<T>(bufferTimeSpan: number, scheduler?: SchedulerLike): OperatorFunction<T, T[]>;\nexport function bufferTime<T>(bufferTimeSpan: number, bufferCreationInterval: number | null | undefined, scheduler?: SchedulerLike): OperatorFunction<T, T[]>;\nexport function bufferTime<T>(bufferTimeSpan: number, bufferCreationInterval: number | null | undefined, maxBufferSize: number, scheduler?: SchedulerLike): OperatorFunction<T, T[]>;\n/* tslint:enable:max-line-length */\n\n/**\n * Buffers the source Observable values for a specific time period.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * those arrays periodically in time.</span>\n *\n * ![](bufferTime.png)\n *\n * Buffers values from the source for a specific time duration `bufferTimeSpan`.\n * Unless the optional argument `bufferCreationInterval` is given, it emits and\n * resets the buffer every `bufferTimeSpan` milliseconds. If\n * `bufferCreationInterval` is given, this operator opens the buffer every\n * `bufferCreationInterval` milliseconds and closes (emits and resets) the\n * buffer every `bufferTimeSpan` milliseconds. When the optional argument\n * `maxBufferSize` is specified, the buffer will be closed either after\n * `bufferTimeSpan` milliseconds or when it contains `maxBufferSize` elements.\n *\n * ## Examples\n *\n * Every second, emit an array of the recent click events\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { bufferTime } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const buffered = clicks.pipe(bufferTime(1000));\n * buffered.subscribe(x => console.log(x));\n * ```\n *\n * Every 5 seconds, emit the click events from the next 2 seconds\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { bufferTime } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const buffered = clicks.pipe(bufferTime(2000, 5000));\n * buffered.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link windowTime}\n *\n * @param {number} bufferTimeSpan The amount of time to fill each buffer array.\n * @param {number} [bufferCreationInterval] The interval at which to start new\n * buffers.\n * @param {number} [maxBufferSize] The maximum buffer size.\n * @param {SchedulerLike} [scheduler=async] The scheduler on which to schedule the\n * intervals that determine buffer boundaries.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferTime\n * @owner Observable\n */\nexport function bufferTime<T>(bufferTimeSpan: number): OperatorFunction<T, T[]> {\n  let length: number = arguments.length;\n\n  let scheduler: SchedulerLike = async;\n  if (isScheduler(arguments[arguments.length - 1])) {\n    scheduler = arguments[arguments.length - 1];\n    length--;\n  }\n\n  let bufferCreationInterval: number = null;\n  if (length >= 2) {\n    bufferCreationInterval = arguments[1];\n  }\n\n  let maxBufferSize: number = Number.POSITIVE_INFINITY;\n  if (length >= 3) {\n    maxBufferSize = arguments[2];\n  }\n\n  return function bufferTimeOperatorFunction(source: Observable<T>) {\n    return source.lift(new BufferTimeOperator<T>(bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler));\n  };\n}\n\nclass BufferTimeOperator<T> implements Operator<T, T[]> {\n  constructor(private bufferTimeSpan: number,\n              private bufferCreationInterval: number,\n              private maxBufferSize: number,\n              private scheduler: SchedulerLike) {\n  }\n\n  call(subscriber: Subscriber<T[]>, source: any): any {\n    return source.subscribe(new BufferTimeSubscriber(\n      subscriber, this.bufferTimeSpan, this.bufferCreationInterval, this.maxBufferSize, this.scheduler\n    ));\n  }\n}\n\nclass Context<T> {\n  buffer: T[] = [];\n  closeAction: Subscription;\n}\n\ninterface DispatchCreateArg<T> {\n  bufferTimeSpan: number;\n  bufferCreationInterval: number;\n  subscriber: BufferTimeSubscriber<T>;\n  scheduler: SchedulerLike;\n}\n\ninterface DispatchCloseArg<T> {\n  subscriber: BufferTimeSubscriber<T>;\n  context: Context<T>;\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass BufferTimeSubscriber<T> extends Subscriber<T> {\n  private contexts: Array<Context<T>> = [];\n  private timespanOnly: boolean;\n\n  constructor(destination: Subscriber<T[]>,\n              private bufferTimeSpan: number,\n              private bufferCreationInterval: number,\n              private maxBufferSize: number,\n              private scheduler: SchedulerLike) {\n    super(destination);\n    const context = this.openContext();\n    this.timespanOnly = bufferCreationInterval == null || bufferCreationInterval < 0;\n    if (this.timespanOnly) {\n      const timeSpanOnlyState = { subscriber: this, context, bufferTimeSpan };\n      this.add(context.closeAction = scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n    } else {\n      const closeState = { subscriber: this, context };\n      const creationState: DispatchCreateArg<T> = { bufferTimeSpan, bufferCreationInterval, subscriber: this, scheduler };\n      this.add(context.closeAction = scheduler.schedule<DispatchCloseArg<T>>(dispatchBufferClose, bufferTimeSpan, closeState));\n      this.add(scheduler.schedule<DispatchCreateArg<T>>(dispatchBufferCreation, bufferCreationInterval, creationState));\n    }\n  }\n\n  protected _next(value: T) {\n    const contexts = this.contexts;\n    const len = contexts.length;\n    let filledBufferContext: Context<T>;\n    for (let i = 0; i < len; i++) {\n      const context = contexts[i];\n      const buffer = context.buffer;\n      buffer.push(value);\n      if (buffer.length == this.maxBufferSize) {\n        filledBufferContext = context;\n      }\n    }\n\n    if (filledBufferContext) {\n      this.onBufferFull(filledBufferContext);\n    }\n  }\n\n  protected _error(err: any) {\n    this.contexts.length = 0;\n    super._error(err);\n  }\n\n  protected _complete() {\n    const { contexts, destination } = this;\n    while (contexts.length > 0) {\n      const context = contexts.shift();\n      destination.next(context.buffer);\n    }\n    super._complete();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    this.contexts = null;\n  }\n\n  protected onBufferFull(context: Context<T>) {\n    this.closeContext(context);\n    const closeAction = context.closeAction;\n    closeAction.unsubscribe();\n    this.remove(closeAction);\n\n    if (!this.closed && this.timespanOnly) {\n      context = this.openContext();\n      const bufferTimeSpan = this.bufferTimeSpan;\n      const timeSpanOnlyState = { subscriber: this, context, bufferTimeSpan };\n      this.add(context.closeAction = this.scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n    }\n  }\n\n  openContext(): Context<T> {\n    const context: Context<T> = new Context<T>();\n    this.contexts.push(context);\n    return context;\n  }\n\n  closeContext(context: Context<T>) {\n    this.destination.next(context.buffer);\n    const contexts = this.contexts;\n\n    const spliceIndex = contexts ? contexts.indexOf(context) : -1;\n    if (spliceIndex >= 0) {\n      contexts.splice(contexts.indexOf(context), 1);\n    }\n  }\n}\n\nfunction dispatchBufferTimeSpanOnly(this: SchedulerAction<any>, state: any) {\n  const subscriber: BufferTimeSubscriber<any> = state.subscriber;\n\n  const prevContext = state.context;\n  if (prevContext) {\n    subscriber.closeContext(prevContext);\n  }\n\n  if (!subscriber.closed) {\n    state.context = subscriber.openContext();\n    state.context.closeAction = this.schedule(state, state.bufferTimeSpan);\n  }\n}\n\nfunction dispatchBufferCreation<T>(this: SchedulerAction<DispatchCreateArg<T>>, state: DispatchCreateArg<T>) {\n  const { bufferCreationInterval, bufferTimeSpan, subscriber, scheduler } = state;\n  const context = subscriber.openContext();\n  const action = <SchedulerAction<DispatchCreateArg<T>>>this;\n  if (!subscriber.closed) {\n    subscriber.add(context.closeAction = scheduler.schedule<DispatchCloseArg<T>>(dispatchBufferClose, bufferTimeSpan, { subscriber, context }));\n    action.schedule(state, bufferCreationInterval);\n  }\n}\n\nfunction dispatchBufferClose<T>(arg: DispatchCloseArg<T>) {\n  const { subscriber, context } = arg;\n  subscriber.closeContext(context);\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { OperatorFunction, SubscribableOrPromise } from '../types';\n\n/**\n * Buffers the source Observable values starting from an emission from\n * `openings` and ending when the output of `closingSelector` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array. Starts\n * collecting only when `opening` emits, and calls the `closingSelector`\n * function to get an Observable that tells when to close the buffer.</span>\n *\n * ![](bufferToggle.png)\n *\n * Buffers values from the source by opening the buffer via signals from an\n * Observable provided to `openings`, and closing and sending the buffers when\n * a Subscribable or Promise returned by the `closingSelector` function emits.\n *\n * ## Example\n *\n * Every other second, emit the click events from the next 500ms\n *\n * ```ts\n * import { fromEvent, interval, EMPTY } from 'rxjs';\n * import { bufferToggle } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const openings = interval(1000);\n * const buffered = clicks.pipe(bufferToggle(openings, i =>\n *   i % 2 ? interval(500) : EMPTY\n * ));\n * buffered.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferWhen}\n * @see {@link windowToggle}\n *\n * @param {SubscribableOrPromise<O>} openings A Subscribable or Promise of notifications to start new\n * buffers.\n * @param {function(value: O): SubscribableOrPromise} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns a Subscribable or Promise,\n * which, when it emits, signals that the associated buffer should be emitted\n * and cleared.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferToggle\n * @owner Observable\n */\nexport function bufferToggle<T, O>(\n  openings: SubscribableOrPromise<O>,\n  closingSelector: (value: O) => SubscribableOrPromise<any>\n): OperatorFunction<T, T[]> {\n  return function bufferToggleOperatorFunction(source: Observable<T>) {\n    return source.lift(new BufferToggleOperator<T, O>(openings, closingSelector));\n  };\n}\n\nclass BufferToggleOperator<T, O> implements Operator<T, T[]> {\n\n  constructor(private openings: SubscribableOrPromise<O>,\n              private closingSelector: (value: O) => SubscribableOrPromise<any>) {\n  }\n\n  call(subscriber: Subscriber<T[]>, source: any): any {\n    return source.subscribe(new BufferToggleSubscriber(subscriber, this.openings, this.closingSelector));\n  }\n}\n\ninterface BufferContext<T> {\n  buffer: T[];\n  subscription: Subscription;\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass BufferToggleSubscriber<T, O> extends OuterSubscriber<T, O> {\n  private contexts: Array<BufferContext<T>> = [];\n\n  constructor(destination: Subscriber<T[]>,\n              private openings: SubscribableOrPromise<O>,\n              private closingSelector: (value: O) => SubscribableOrPromise<any> | void) {\n    super(destination);\n    this.add(subscribeToResult(this, openings));\n  }\n\n  protected _next(value: T): void {\n    const contexts = this.contexts;\n    const len = contexts.length;\n    for (let i = 0; i < len; i++) {\n      contexts[i].buffer.push(value);\n    }\n  }\n\n  protected _error(err: any): void {\n    const contexts = this.contexts;\n    while (contexts.length > 0) {\n      const context = contexts.shift();\n      context.subscription.unsubscribe();\n      context.buffer = null;\n      context.subscription = null;\n    }\n    this.contexts = null;\n    super._error(err);\n  }\n\n  protected _complete(): void {\n    const contexts = this.contexts;\n    while (contexts.length > 0) {\n      const context = contexts.shift();\n      this.destination.next(context.buffer);\n      context.subscription.unsubscribe();\n      context.buffer = null;\n      context.subscription = null;\n    }\n    this.contexts = null;\n    super._complete();\n  }\n\n  notifyNext(outerValue: any, innerValue: O,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, O>): void {\n    outerValue ? this.closeBuffer(outerValue) : this.openBuffer(innerValue);\n  }\n\n  notifyComplete(innerSub: InnerSubscriber<T, O>): void {\n    this.closeBuffer((<any> innerSub).context);\n  }\n\n  private openBuffer(value: O): void {\n    try {\n      const closingSelector = this.closingSelector;\n      const closingNotifier = closingSelector.call(this, value);\n      if (closingNotifier) {\n        this.trySubscribe(closingNotifier);\n      }\n    } catch (err) {\n      this._error(err);\n    }\n  }\n\n  private closeBuffer(context: BufferContext<T>): void {\n    const contexts = this.contexts;\n\n    if (contexts && context) {\n      const { buffer, subscription } = context;\n      this.destination.next(buffer);\n      contexts.splice(contexts.indexOf(context), 1);\n      this.remove(subscription);\n      subscription.unsubscribe();\n    }\n  }\n\n  private trySubscribe(closingNotifier: any): void {\n    const contexts = this.contexts;\n\n    const buffer: Array<T> = [];\n    const subscription = new Subscription();\n    const context = { buffer, subscription };\n    contexts.push(context);\n\n    const innerSubscription = subscribeToResult(this, closingNotifier, <any>context);\n\n    if (!innerSubscription || innerSubscription.closed) {\n      this.closeBuffer(context);\n    } else {\n      (<any> innerSubscription).context = context;\n\n      this.add(innerSubscription);\n      subscription.add(innerSubscription);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OperatorFunction } from '../types';\n\n/**\n * Buffers the source Observable values, using a factory function of closing\n * Observables to determine when to close, emit, and reset the buffer.\n *\n * <span class=\"informal\">Collects values from the past as an array. When it\n * starts collecting values, it calls a function that returns an Observable that\n * tells when to close the buffer and restart collecting.</span>\n *\n * ![](bufferWhen.png)\n *\n * Opens a buffer immediately, then closes the buffer when the observable\n * returned by calling `closingSelector` function emits a value. When it closes\n * the buffer, it immediately opens a new buffer and repeats the process.\n *\n * ## Example\n *\n * Emit an array of the last clicks every [1-5] random seconds\n *\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { bufferWhen } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const buffered = clicks.pipe(bufferWhen(() =>\n *   interval(1000 + Math.random() * 4000)\n * ));\n * buffered.subscribe(x => console.log(x));\n * ```\n *\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link windowWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals buffer closure.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferWhen\n * @owner Observable\n */\nexport function bufferWhen<T>(closingSelector: () => Observable<any>): OperatorFunction<T, T[]> {\n  return function (source: Observable<T>) {\n    return source.lift(new BufferWhenOperator(closingSelector));\n  };\n}\n\nclass BufferWhenOperator<T> implements Operator<T, T[]> {\n\n  constructor(private closingSelector: () => Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<T[]>, source: any): any {\n    return source.subscribe(new BufferWhenSubscriber(subscriber, this.closingSelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass BufferWhenSubscriber<T> extends OuterSubscriber<T, any> {\n  private buffer: T[];\n  private subscribing: boolean = false;\n  private closingSubscription: Subscription;\n\n  constructor(destination: Subscriber<T[]>, private closingSelector: () => Observable<any>) {\n    super(destination);\n    this.openBuffer();\n  }\n\n  protected _next(value: T) {\n    this.buffer.push(value);\n  }\n\n  protected _complete() {\n    const buffer = this.buffer;\n    if (buffer) {\n      this.destination.next(buffer);\n    }\n    super._complete();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    this.buffer = null;\n    this.subscribing = false;\n  }\n\n  notifyNext(outerValue: T, innerValue: any,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, any>): void {\n    this.openBuffer();\n  }\n\n  notifyComplete(): void {\n    if (this.subscribing) {\n      this.complete();\n    } else {\n      this.openBuffer();\n    }\n  }\n\n  openBuffer() {\n    let { closingSubscription } = this;\n\n    if (closingSubscription) {\n      this.remove(closingSubscription);\n      closingSubscription.unsubscribe();\n    }\n\n    const buffer = this.buffer;\n    if (this.buffer) {\n      this.destination.next(buffer);\n    }\n\n    this.buffer = [];\n\n    let closingNotifier;\n    try {\n      const { closingSelector } = this;\n      closingNotifier = closingSelector();\n    } catch (err) {\n      return this.error(err);\n    }\n    closingSubscription = new Subscription();\n    this.closingSubscription = closingSubscription;\n    this.add(closingSubscription);\n    this.subscribing = true;\n    closingSubscription.add(subscribeToResult(this, closingNotifier));\n    this.subscribing = false;\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\n\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function catchError<T, O extends ObservableInput<any>>(selector: (err: any, caught: Observable<T>) => O): OperatorFunction<T, T | ObservedValueOf<O>>;\n/* tslint:enable:max-line-length */\n\n/**\n * Catches errors on the observable to be handled by returning a new observable or throwing an error.\n *\n * ![](catch.png)\n *\n * ## Examples\n * Continues with a different Observable when there's an error\n *\n * ```ts\n * import { of } from 'rxjs';\n * import { map, catchError } from 'rxjs/operators';\n *\n * of(1, 2, 3, 4, 5).pipe(\n *     map(n => {\n *   \t   if (n === 4) {\n * \t       throw 'four!';\n *       }\n *\t     return n;\n *     }),\n *     catchError(err => of('I', 'II', 'III', 'IV', 'V')),\n *   )\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, I, II, III, IV, V\n * ```\n *\n * Retries the caught source Observable again in case of error, similar to retry() operator\n *\n * ```ts\n * import { of } from 'rxjs';\n * import { map, catchError, take } from 'rxjs/operators';\n *\n * of(1, 2, 3, 4, 5).pipe(\n *     map(n => {\n *   \t   if (n === 4) {\n *   \t     throw 'four!';\n *       }\n * \t     return n;\n *     }),\n *     catchError((err, caught) => caught),\n *     take(30),\n *   )\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, 1, 2, 3, ...\n * ```\n *\n * Throws a new error when the source Observable throws an error\n *\n * ```ts\n * import { of } from 'rxjs';\n * import { map, catchError } from 'rxjs/operators';\n *\n * of(1, 2, 3, 4, 5).pipe(\n *     map(n => {\n *       if (n === 4) {\n *         throw 'four!';\n *       }\n *       return n;\n *     }),\n *     catchError(err => {\n *       throw 'error in source. Details: ' + err;\n *     }),\n *   )\n *   .subscribe(\n *     x => console.log(x),\n *     err => console.log(err)\n *   );\n *   // 1, 2, 3, error in source. Details: four!\n * ```\n *\n *  @param {function} selector a function that takes as arguments `err`, which is the error, and `caught`, which\n *  is the source observable, in case you'd like to \"retry\" that observable by returning it again. Whatever observable\n *  is returned by the `selector` will be used to continue the observable chain.\n * @return {Observable} An observable that originates from either the source or the observable returned by the\n *  catch `selector` function.\n * @name catchError\n */\nexport function catchError<T, O extends ObservableInput<any>>(\n  selector: (err: any, caught: Observable<T>) => O\n): OperatorFunction<T, T | ObservedValueOf<O>> {\n  return function catchErrorOperatorFunction(source: Observable<T>): Observable<T | ObservedValueOf<O>> {\n    const operator = new CatchOperator(selector);\n    const caught = source.lift(operator);\n    return (operator.caught = caught as Observable<T>);\n  };\n}\n\nclass CatchOperator<T, R> implements Operator<T, T | R> {\n  caught: Observable<T>;\n\n  constructor(private selector: (err: any, caught: Observable<T>) => ObservableInput<T | R>) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new CatchSubscriber(subscriber, this.selector, this.caught));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass CatchSubscriber<T, R> extends OuterSubscriber<T, T | R> {\n  constructor(destination: Subscriber<any>,\n              private selector: (err: any, caught: Observable<T>) => ObservableInput<T | R>,\n              private caught: Observable<T>) {\n    super(destination);\n  }\n\n  // NOTE: overriding `error` instead of `_error` because we don't want\n  // to have this flag this subscriber as `isStopped`. We can mimic the\n  // behavior of the RetrySubscriber (from the `retry` operator), where\n  // we unsubscribe from our source chain, reset our Subscriber flags,\n  // then subscribe to the selector result.\n  error(err: any) {\n    if (!this.isStopped) {\n      let result: any;\n      try {\n        result = this.selector(err, this.caught);\n      } catch (err2) {\n        super.error(err2);\n        return;\n      }\n      this._unsubscribeAndRecycle();\n      const innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n      this.add(innerSubscriber);\n      const innerSubscription = subscribeToResult(this, result, undefined, undefined, innerSubscriber);\n      // The returned subscription will usually be the subscriber that was\n      // passed. However, interop subscribers will be wrapped and for\n      // unsubscriptions to chain correctly, the wrapper needs to be added, too.\n      if (innerSubscription !== innerSubscriber) {\n        this.add(innerSubscription);\n      }\n    }\n  }\n}\n","import { CombineLatestOperator } from '../observable/combineLatest';\nimport { Observable } from '../Observable';\nimport { OperatorFunction, ObservableInput } from '../types';\n\nexport function combineAll<T>(): OperatorFunction<ObservableInput<T>, T[]>;\nexport function combineAll<T>(): OperatorFunction<any, T[]>;\nexport function combineAll<T, R>(project: (...values: T[]) => R): OperatorFunction<ObservableInput<T>, R>;\nexport function combineAll<R>(project: (...values: Array<any>) => R): OperatorFunction<any, R>;\n/**\n * Flattens an Observable-of-Observables by applying {@link combineLatest} when the Observable-of-Observables completes.\n *\n * ![](combineAll.png)\n *\n * `combineAll` takes an Observable of Observables, and collects all Observables from it. Once the outer Observable completes,\n * it subscribes to all collected Observables and combines their values using the {@link combineLatest}</a> strategy, such that:\n *\n * * Every time an inner Observable emits, the output Observable emits\n * * When the returned observable emits, it emits all of the latest values by:\n *    * If a `project` function is provided, it is called with each recent value from each inner Observable in whatever order they\n *      arrived, and the result of the `project` function is what is emitted by the output Observable.\n *    * If there is no `project` function, an array of all the most recent values is emitted by the output Observable.\n *\n * ---\n *\n * ## Examples\n *\n * ### Map two click events to a finite interval Observable, then apply `combineAll`\n *\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { map, combineAll, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map(ev =>\n *      interval(Math.random() * 2000).pipe(take(3))\n *   ),\n *   take(2)\n * );\n * const result = higherOrder.pipe(\n *   combineAll()\n * );\n *\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link combineLatest}\n * @see {@link mergeAll}\n *\n * @param {function(...values: Array<any>)} An optional function to map the most recent values from each inner Observable into a new result.\n * Takes each of the most recent values from each collected inner Observable as arguments, in order.\n * @return {Observable<T>}\n * @name combineAll\n */\nexport function combineAll<T, R>(project?: (...values: Array<any>) => R): OperatorFunction<T, R> {\n  return (source: Observable<T>) => source.lift(new CombineLatestOperator(project));\n}\n","\nimport { isArray } from '../util/isArray';\nimport { CombineLatestOperator } from '../observable/combineLatest';\nimport { from } from '../observable/from';\nimport { Observable } from '../Observable';\nimport { ObservableInput, OperatorFunction } from '../types';\n\nconst none = {};\n\n/* tslint:disable:max-line-length */\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, R>(project: (v1: T) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, R>(v2: ObservableInput<T2>, project: (v1: T, v2: T2) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, project: (v1: T, v2: T2, v3: T3) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3, T4, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, project: (v1: T, v2: T2, v3: T3, v4: T4) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3, T4, T5, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, project: (v1: T, v2: T2, v3: T3, v4: T4, v5: T5) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3, T4, T5, T6, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, project: (v1: T, v2: T2, v3: T3, v4: T4, v5: T5, v6: T6) => R): OperatorFunction<T, R> ;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2>(v2: ObservableInput<T2>): OperatorFunction<T, [T, T2]>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3>(v2: ObservableInput<T2>, v3: ObservableInput<T3>): OperatorFunction<T, [T, T2, T3]>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3, T4>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>): OperatorFunction<T, [T, T2, T3, T4]>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3, T4, T5>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>): OperatorFunction<T, [T, T2, T3, T4, T5]>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, T2, T3, T4, T5, T6>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>): OperatorFunction<T, [T, T2, T3, T4, T5, T6]> ;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, R>(...observables: Array<ObservableInput<T> | ((...values: Array<T>) => R)>): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, R>(array: ObservableInput<T>[]): OperatorFunction<T, Array<T>>;\n/** @deprecated Deprecated in favor of static combineLatest. */\nexport function combineLatest<T, TOther, R>(array: ObservableInput<TOther>[], project: (v1: T, ...values: Array<TOther>) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * @deprecated Deprecated in favor of static {@link combineLatest}.\n */\nexport function combineLatest<T, R>(...observables: Array<ObservableInput<any> |\n                                                    Array<ObservableInput<any>> |\n                                                    ((...values: Array<any>) => R)>): OperatorFunction<T, R> {\n  let project: (...values: Array<any>) => R = null;\n  if (typeof observables[observables.length - 1] === 'function') {\n    project = <(...values: Array<any>) => R>observables.pop();\n  }\n\n  // if the first and only other argument besides the resultSelector is an array\n  // assume it's been called with `combineLatest([obs1, obs2, obs3], project)`\n  if (observables.length === 1 && isArray(observables[0])) {\n    observables = (<any>observables[0]).slice();\n  }\n\n  return (source: Observable<T>) => source.lift.call(from([source, ...observables]), new CombineLatestOperator(project));\n}\n","import {  concat as concatStatic } from '../observable/concat';\nimport { Observable } from '../Observable';\nimport { ObservableInput, OperatorFunction, MonoTypeOperatorFunction, SchedulerLike } from '../types';\n\n/* tslint:disable:max-line-length */\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T>(scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T, T2>(v2: ObservableInput<T2>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2>;\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T, T2, T3>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3>;\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T, T2, T3, T4>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4>;\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T, T2, T3, T4, T5>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4 | T5>;\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T, T2, T3, T4, T5, T6>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4 | T5 | T6>;\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T>(...observables: Array<ObservableInput<T> | SchedulerLike>): MonoTypeOperatorFunction<T>;\n/** @deprecated Deprecated in favor of static concat. */\nexport function concat<T, R>(...observables: Array<ObservableInput<any> | SchedulerLike>): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * @deprecated Deprecated in favor of static {@link concat}.\n */\nexport function concat<T, R>(...observables: Array<ObservableInput<any> | SchedulerLike>): OperatorFunction<T, R> {\n  return (source: Observable<T>) => source.lift.call(concatStatic(source, ...observables));\n}\n","import { mergeMap } from './mergeMap';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function concatMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) =>  O): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector no longer supported, use inner map instead */\nexport function concatMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) => O, resultSelector: undefined): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector no longer supported, use inner map instead */\nexport function concatMap<T, R, O extends ObservableInput<any>>(project: (value: T, index: number) =>  O, resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, in a serialized fashion waiting for each one to complete before\n * merging the next.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link concatAll}.</span>\n *\n * ![](concatMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each new inner Observable is\n * concatenated with the previous inner Observable.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMap` is equivalent to `mergeMap` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n * For each click event, tick every second from 0 to 3, with no concurrency\n *\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { concatMap, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   concatMap(ev => interval(1000).pipe(take(4)))\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMapTo}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional deprecated `resultSelector`) to each item emitted\n * by the source Observable and taking values from each projected inner\n * Observable sequentially.\n * @method concatMap\n * @owner Observable\n */\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  return mergeMap(project, resultSelector, 1);\n}\n","import { concatMap } from './concatMap';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function concatMapTo<T, O extends ObservableInput<any>>(observable: O): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated */\nexport function concatMapTo<T, O extends ObservableInput<any>>(observable: O, resultSelector: undefined): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated */\nexport function concatMapTo<T, R, O extends ObservableInput<any>>(observable: O, resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in a serialized fashion on the output Observable.\n *\n * <span class=\"informal\">It's like {@link concatMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * ![](concatMapTo.png)\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. Each new `innerObservable`\n * instance emitted on the output Observable is concatenated with the previous\n * `innerObservable` instance.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMapTo` is equivalent to `mergeMapTo` with concurrency parameter\n * set to `1`.\n *\n * ## Example\n * For each click event, tick every second from 0 to 3, with no concurrency\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { concatMapTo, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   concatMapTo(interval(1000).pipe(take(4))),\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link mergeMapTo}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An observable of values merged together by joining the\n * passed observable with itself, one after the other, for each value emitted\n * from the source.\n * @method concatMapTo\n * @owner Observable\n */\nexport function concatMapTo<T, R, O extends ObservableInput<any>>(\n  innerObservable: O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  return concatMap(() => innerObservable, resultSelector);\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Observer, OperatorFunction } from '../types';\nimport { Subscriber } from '../Subscriber';\n/**\n * Counts the number of emissions on the source and emits that number when the\n * source completes.\n *\n * <span class=\"informal\">Tells how many values were emitted, when the source\n * completes.</span>\n *\n * ![](count.png)\n *\n * `count` transforms an Observable that emits values into an Observable that\n * emits a single value that represents the number of values emitted by the\n * source Observable. If the source Observable terminates with an error, `count`\n * will pass this error notification along without emitting a value first. If\n * the source Observable does not terminate at all, `count` will neither emit\n * a value nor terminate. This operator takes an optional `predicate` function\n * as argument, in which case the output emission will represent the number of\n * source values that matched `true` with the `predicate`.\n *\n * ## Examples\n *\n * Counts how many seconds have passed before the first click happened\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { count, takeUntil } from 'rxjs/operators';\n *\n * const seconds = interval(1000);\n * const clicks = fromEvent(document, 'click');\n * const secondsBeforeClick = seconds.pipe(takeUntil(clicks));\n * const result = secondsBeforeClick.pipe(count());\n * result.subscribe(x => console.log(x));\n * ```\n *\n * Counts how many odd numbers are there between 1 and 7\n * ```ts\n * import { range } from 'rxjs';\n * import { count } from 'rxjs/operators';\n *\n * const numbers = range(1, 7);\n * const result = numbers.pipe(count(i => i % 2 === 1));\n * result.subscribe(x => console.log(x));\n * // Results in:\n * // 4\n * ```\n *\n * @see {@link max}\n * @see {@link min}\n * @see {@link reduce}\n *\n * @param {function(value: T, i: number, source: Observable<T>): boolean} [predicate] A\n * boolean function to select what values are to be counted. It is provided with\n * arguments of:\n * - `value`: the value from the source Observable.\n * - `index`: the (zero-based) \"index\" of the value from the source Observable.\n * - `source`: the source Observable instance itself.\n * @return {Observable} An Observable of one number that represents the count as\n * described above.\n * @method count\n * @owner Observable\n */\n\nexport function count<T>(predicate?: (value: T, index: number, source: Observable<T>) => boolean): OperatorFunction<T, number> {\n  return (source: Observable<T>) => source.lift(new CountOperator(predicate, source));\n}\n\nclass CountOperator<T> implements Operator<T, number> {\n  constructor(private predicate?: (value: T, index: number, source: Observable<T>) => boolean,\n              private source?: Observable<T>) {\n  }\n\n  call(subscriber: Subscriber<number>, source: any): any {\n    return source.subscribe(new CountSubscriber(subscriber, this.predicate, this.source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass CountSubscriber<T> extends Subscriber<T> {\n  private count: number = 0;\n  private index: number = 0;\n\n  constructor(destination: Observer<number>,\n              private predicate?: (value: T, index: number, source: Observable<T>) => boolean,\n              private source?: Observable<T>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    if (this.predicate) {\n      this._tryPredicate(value);\n    } else {\n      this.count++;\n    }\n  }\n\n  private _tryPredicate(value: T) {\n    let result: any;\n\n    try {\n      result = this.predicate(value, this.index++, this.source);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n\n    if (result) {\n      this.count++;\n    }\n  }\n\n  protected _complete(): void {\n    this.destination.next(this.count);\n    this.destination.complete();\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, SubscribableOrPromise, TeardownLogic } from '../types';\n\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\n/**\n * Emits a value from the source Observable only after a particular time span\n * determined by another Observable has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link debounceTime}, but the time span of\n * emission silence is determined by a second Observable.</span>\n *\n * ![](debounce.png)\n *\n * `debounce` delays values emitted by the source Observable, but drops previous\n * pending delayed emissions if a new value arrives on the source Observable.\n * This operator keeps track of the most recent value from the source\n * Observable, and spawns a duration Observable by calling the\n * `durationSelector` function. The value is emitted only when the duration\n * Observable emits a value or completes, and if no other value was emitted on\n * the source Observable since the duration Observable was spawned. If a new\n * value appears before the duration Observable emits, the previous value will\n * be dropped and will not be emitted on the output Observable.\n *\n * Like {@link debounceTime}, this is a rate-limiting operator, and also a\n * delay-like operator since output emissions do not necessarily occur at the\n * same time as they did on the source Observable.\n *\n * ## Example\n * Emit the most recent click after a burst of clicks\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { debounce } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(debounce(() => interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the timeout\n * duration for each source value, returned as an Observable or a Promise.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified duration Observable returned by\n * `durationSelector`, and may drop some values if they occur too frequently.\n * @method debounce\n * @owner Observable\n */\nexport function debounce<T>(durationSelector: (value: T) => SubscribableOrPromise<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new DebounceOperator(durationSelector));\n}\n\nclass DebounceOperator<T> implements Operator<T, T> {\n  constructor(private durationSelector: (value: T) => SubscribableOrPromise<any>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DebounceSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private value: T;\n  private hasValue: boolean = false;\n  private durationSubscription: Subscription = null;\n\n  constructor(destination: Subscriber<R>,\n              private durationSelector: (value: T) => SubscribableOrPromise<any>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    try {\n      const result = this.durationSelector.call(this, value);\n\n      if (result) {\n        this._tryNext(value, result);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  }\n\n  protected _complete(): void {\n    this.emitValue();\n    this.destination.complete();\n  }\n\n  private _tryNext(value: T, duration: SubscribableOrPromise<any>): void {\n    let subscription = this.durationSubscription;\n    this.value = value;\n    this.hasValue = true;\n    if (subscription) {\n      subscription.unsubscribe();\n      this.remove(subscription);\n    }\n\n    subscription = subscribeToResult(this, duration);\n    if (subscription && !subscription.closed) {\n      this.add(this.durationSubscription = subscription);\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.emitValue();\n  }\n\n  notifyComplete(): void {\n    this.emitValue();\n  }\n\n  emitValue(): void {\n    if (this.hasValue) {\n      const value = this.value;\n      const subscription = this.durationSubscription;\n      if (subscription) {\n        this.durationSubscription = null;\n        subscription.unsubscribe();\n        this.remove(subscription);\n      }\n      // This must be done *before* passing the value\n      // along to the destination because it's possible for\n      // the value to synchronously re-enter this operator\n      // recursively if the duration selector Observable\n      // emits synchronously\n      this.value = null;\n      this.hasValue = false;\n      super._next(value);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { async } from '../scheduler/async';\nimport { MonoTypeOperatorFunction, SchedulerLike, TeardownLogic } from '../types';\n\n/**\n * Emits a value from the source Observable only after a particular time span\n * has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link delay}, but passes only the most\n * recent value from each burst of emissions.</span>\n *\n * ![](debounceTime.png)\n *\n * `debounceTime` delays values emitted by the source Observable, but drops\n * previous pending delayed emissions if a new value arrives on the source\n * Observable. This operator keeps track of the most recent value from the\n * source Observable, and emits that only when `dueTime` enough time has passed\n * without any other value appearing on the source Observable. If a new value\n * appears before `dueTime` silence occurs, the previous value will be dropped\n * and will not be emitted on the output Observable.\n *\n * This is a rate-limiting operator, because it is impossible for more than one\n * value to be emitted in any time window of duration `dueTime`, but it is also\n * a delay-like operator since output emissions do not occur at the same time as\n * they did on the source Observable. Optionally takes a {@link SchedulerLike} for\n * managing timers.\n *\n * ## Example\n * Emit the most recent click after a burst of clicks\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { debounceTime } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(debounceTime(1000));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} dueTime The timeout duration in milliseconds (or the time\n * unit determined internally by the optional `scheduler`) for the window of\n * time required to wait for emission silence before emitting the most recent\n * source value.\n * @param {SchedulerLike} [scheduler=async] The {@link SchedulerLike} to use for\n * managing the timers that handle the timeout for each value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified `dueTime`, and may drop some values if they occur\n * too frequently.\n * @method debounceTime\n * @owner Observable\n */\nexport function debounceTime<T>(dueTime: number, scheduler: SchedulerLike = async): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new DebounceTimeOperator(dueTime, scheduler));\n}\n\nclass DebounceTimeOperator<T> implements Operator<T, T> {\n  constructor(private dueTime: number, private scheduler: SchedulerLike) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DebounceTimeSubscriber<T> extends Subscriber<T> {\n  private debouncedSubscription: Subscription = null;\n  private lastValue: T = null;\n  private hasValue: boolean = false;\n\n  constructor(destination: Subscriber<T>,\n              private dueTime: number,\n              private scheduler: SchedulerLike) {\n    super(destination);\n  }\n\n  protected _next(value: T) {\n    this.clearDebounce();\n    this.lastValue = value;\n    this.hasValue = true;\n    this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext, this.dueTime, this));\n  }\n\n  protected _complete() {\n    this.debouncedNext();\n    this.destination.complete();\n  }\n\n  debouncedNext(): void {\n    this.clearDebounce();\n\n    if (this.hasValue) {\n      const { lastValue } = this;\n      // This must be done *before* passing the value\n      // along to the destination because it's possible for\n      // the value to synchronously re-enter this operator\n      // recursively when scheduled with things like\n      // VirtualScheduler/TestScheduler.\n      this.lastValue = null;\n      this.hasValue = false;\n      this.destination.next(lastValue);\n    }\n  }\n\n  private clearDebounce(): void {\n    const debouncedSubscription = this.debouncedSubscription;\n\n    if (debouncedSubscription !== null) {\n      this.remove(debouncedSubscription);\n      debouncedSubscription.unsubscribe();\n      this.debouncedSubscription = null;\n    }\n  }\n}\n\nfunction dispatchNext(subscriber: DebounceTimeSubscriber<any>) {\n  subscriber.debouncedNext();\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction, MonoTypeOperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function defaultIfEmpty<T>(defaultValue?: T): MonoTypeOperatorFunction<T>;\nexport function defaultIfEmpty<T, R>(defaultValue?: R): OperatorFunction<T, T | R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Emits a given value if the source Observable completes without emitting any\n * `next` value, otherwise mirrors the source Observable.\n *\n * <span class=\"informal\">If the source Observable turns out to be empty, then\n * this operator will emit a default value.</span>\n *\n * ![](defaultIfEmpty.png)\n *\n * `defaultIfEmpty` emits the values emitted by the source Observable or a\n * specified default value if the source Observable is empty (completes without\n * having emitted any `next` value).\n *\n * ## Example\n * If no clicks happen in 5 seconds, then emit \"no clicks\"\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { defaultIfEmpty, takeUntil } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksBeforeFive = clicks.pipe(takeUntil(interval(5000)));\n * const result = clicksBeforeFive.pipe(defaultIfEmpty('no clicks'));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link empty}\n * @see {@link last}\n *\n * @param {any} [defaultValue=null] The default value used if the source\n * Observable is empty.\n * @return {Observable} An Observable that emits either the specified\n * `defaultValue` if the source Observable emits no items, or the values emitted\n * by the source Observable.\n * @method defaultIfEmpty\n * @owner Observable\n */\nexport function defaultIfEmpty<T, R>(defaultValue: R = null): OperatorFunction<T, T | R> {\n  return (source: Observable<T>) => source.lift(new DefaultIfEmptyOperator(defaultValue)) as Observable<T | R>;\n}\n\nclass DefaultIfEmptyOperator<T, R> implements Operator<T, T | R> {\n\n  constructor(private defaultValue: R) {\n  }\n\n  call(subscriber: Subscriber<T | R>, source: any): any {\n    return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DefaultIfEmptySubscriber<T, R> extends Subscriber<T> {\n  private isEmpty: boolean = true;\n\n  constructor(destination: Subscriber<T | R>, private defaultValue: R) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    this.isEmpty = false;\n    this.destination.next(value);\n  }\n\n  protected _complete(): void {\n    if (this.isEmpty) {\n      this.destination.next(this.defaultValue);\n    }\n    this.destination.complete();\n  }\n}\n","export function isDate(value: any): value is Date {\n  return value instanceof Date && !isNaN(+value);\n}\n","import { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { Notification } from '../Notification';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, PartialObserver, SchedulerAction, SchedulerLike, TeardownLogic } from '../types';\n\n/**\n * Delays the emission of items from the source Observable by a given timeout or\n * until a given Date.\n *\n * <span class=\"informal\">Time shifts each item by some specified amount of\n * milliseconds.</span>\n *\n * ![](delay.png)\n *\n * If the delay argument is a Number, this operator time shifts the source\n * Observable by that amount of time expressed in milliseconds. The relative\n * time intervals between the values are preserved.\n *\n * If the delay argument is a Date, this operator time shifts the start of the\n * Observable execution until the given date occurs.\n *\n * ## Examples\n * Delay each click by one second\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { delay } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const delayedClicks = clicks.pipe(delay(1000)); // each click emitted after 1 second\n * delayedClicks.subscribe(x => console.log(x));\n * ```\n *\n * Delay all clicks until a future date happens\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { delay } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const date = new Date('March 15, 2050 12:00:00'); // in the future\n * const delayedClicks = clicks.pipe(delay(date)); // click emitted only after that date\n * delayedClicks.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n *\n * @param {number|Date} delay The delay duration in milliseconds (a `number`) or\n * a `Date` until which the emission of the source items is delayed.\n * @param {SchedulerLike} [scheduler=async] The {@link SchedulerLike} to use for\n * managing the timers that handle the time-shift for each item.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified timeout or Date.\n * @method delay\n * @owner Observable\n */\nexport function delay<T>(delay: number|Date,\n                         scheduler: SchedulerLike = async): MonoTypeOperatorFunction<T> {\n  const absoluteDelay = isDate(delay);\n  const delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(<number>delay);\n  return (source: Observable<T>) => source.lift(new DelayOperator(delayFor, scheduler));\n}\n\nclass DelayOperator<T> implements Operator<T, T> {\n  constructor(private delay: number,\n              private scheduler: SchedulerLike) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n  }\n}\n\ninterface DelayState<T> {\n  source: DelaySubscriber<T>;\n  destination: PartialObserver<T>;\n  scheduler: SchedulerLike;\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DelaySubscriber<T> extends Subscriber<T> {\n  private queue: Array<DelayMessage<T>> = [];\n  private active: boolean = false;\n  private errored: boolean = false;\n\n  private static dispatch<T>(this: SchedulerAction<DelayState<T>>, state: DelayState<T>): void {\n    const source = state.source;\n    const queue = source.queue;\n    const scheduler = state.scheduler;\n    const destination = state.destination;\n\n    while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n      queue.shift().notification.observe(destination);\n    }\n\n    if (queue.length > 0) {\n      const delay = Math.max(0, queue[0].time - scheduler.now());\n      this.schedule(state, delay);\n    } else {\n      this.unsubscribe();\n      source.active = false;\n    }\n  }\n\n  constructor(destination: Subscriber<T>,\n              private delay: number,\n              private scheduler: SchedulerLike) {\n    super(destination);\n  }\n\n  private _schedule(scheduler: SchedulerLike): void {\n    this.active = true;\n    const destination = this.destination as Subscription;\n    destination.add(scheduler.schedule<DelayState<T>>(DelaySubscriber.dispatch, this.delay, {\n      source: this, destination: this.destination, scheduler: scheduler\n    }));\n  }\n\n  private scheduleNotification(notification: Notification<T>): void {\n    if (this.errored === true) {\n      return;\n    }\n\n    const scheduler = this.scheduler;\n    const message = new DelayMessage(scheduler.now() + this.delay, notification);\n    this.queue.push(message);\n\n    if (this.active === false) {\n      this._schedule(scheduler);\n    }\n  }\n\n  protected _next(value: T) {\n    this.scheduleNotification(Notification.createNext(value));\n  }\n\n  protected _error(err: any) {\n    this.errored = true;\n    this.queue = [];\n    this.destination.error(err);\n    this.unsubscribe();\n  }\n\n  protected _complete() {\n    this.scheduleNotification(Notification.createComplete());\n    this.unsubscribe();\n  }\n}\n\nclass DelayMessage<T> {\n  constructor(public readonly time: number,\n              public readonly notification: Notification<T>) {\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/* tslint:disable:max-line-length */\n/** @deprecated In future versions, empty notifiers will no longer re-emit the source value on the output observable. */\nexport function delayWhen<T>(delayDurationSelector: (value: T, index: number) => Observable<never>, subscriptionDelay?: Observable<any>): MonoTypeOperatorFunction<T>;\nexport function delayWhen<T>(delayDurationSelector: (value: T, index: number) => Observable<any>, subscriptionDelay?: Observable<any>): MonoTypeOperatorFunction<T>;\n/* tslint:disable:max-line-length */\n\n/**\n * Delays the emission of items from the source Observable by a given time span\n * determined by the emissions of another Observable.\n *\n * <span class=\"informal\">It's like {@link delay}, but the time span of the\n * delay duration is determined by a second Observable.</span>\n *\n * ![](delayWhen.png)\n *\n * `delayWhen` time shifts each emitted value from the source Observable by a\n * time span determined by another Observable. When the source emits a value,\n * the `delayDurationSelector` function is called with the source value as\n * argument, and should return an Observable, called the \"duration\" Observable.\n * The source value is emitted on the output Observable only when the duration\n * Observable emits a value or completes.\n * The completion of the notifier triggering the emission of the source value\n * is deprecated behavior and will be removed in future versions.\n *\n * Optionally, `delayWhen` takes a second argument, `subscriptionDelay`, which\n * is an Observable. When `subscriptionDelay` emits its first value or\n * completes, the source Observable is subscribed to and starts behaving like\n * described in the previous paragraph. If `subscriptionDelay` is not provided,\n * `delayWhen` will subscribe to the source Observable as soon as the output\n * Observable is subscribed.\n *\n * ## Example\n * Delay each click by a random amount of time, between 0 and 5 seconds\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { delayWhen } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const delayedClicks = clicks.pipe(\n *   delayWhen(event => interval(Math.random() * 5000)),\n * );\n * delayedClicks.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link delay}\n * @see {@link throttle}\n * @see {@link throttleTime}\n * @see {@link debounce}\n * @see {@link debounceTime}\n * @see {@link sample}\n * @see {@link sampleTime}\n * @see {@link audit}\n * @see {@link auditTime}\n *\n * @param {function(value: T, index: number): Observable} delayDurationSelector A function that\n * returns an Observable for each value emitted by the source Observable, which\n * is then used to delay the emission of that item on the output Observable\n * until the Observable returned from this function emits a value.\n * @param {Observable} subscriptionDelay An Observable that triggers the\n * subscription to the source Observable once it emits any value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by an amount of time specified by the Observable returned by\n * `delayDurationSelector`.\n * @method delayWhen\n * @owner Observable\n */\nexport function delayWhen<T>(delayDurationSelector: (value: T, index: number) => Observable<any>,\n                             subscriptionDelay?: Observable<any>): MonoTypeOperatorFunction<T> {\n  if (subscriptionDelay) {\n    return (source: Observable<T>) =>\n      new SubscriptionDelayObservable(source, subscriptionDelay)\n        .lift(new DelayWhenOperator(delayDurationSelector));\n  }\n  return (source: Observable<T>) => source.lift(new DelayWhenOperator(delayDurationSelector));\n}\n\nclass DelayWhenOperator<T> implements Operator<T, T> {\n  constructor(private delayDurationSelector: (value: T, index: number) => Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new DelayWhenSubscriber(subscriber, this.delayDurationSelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DelayWhenSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private completed: boolean = false;\n  private delayNotifierSubscriptions: Array<Subscription> = [];\n  private index: number = 0;\n\n  constructor(destination: Subscriber<T>,\n              private delayDurationSelector: (value: T, index: number) => Observable<any>) {\n    super(destination);\n  }\n\n  notifyNext(outerValue: T, innerValue: any,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.destination.next(outerValue);\n    this.removeSubscription(innerSub);\n    this.tryComplete();\n  }\n\n  notifyError(error: any, innerSub: InnerSubscriber<T, R>): void {\n    this._error(error);\n  }\n\n  notifyComplete(innerSub: InnerSubscriber<T, R>): void {\n    const value = this.removeSubscription(innerSub);\n    if (value) {\n      this.destination.next(value);\n    }\n    this.tryComplete();\n  }\n\n  protected _next(value: T): void {\n    const index = this.index++;\n    try {\n      const delayNotifier = this.delayDurationSelector(value, index);\n      if (delayNotifier) {\n        this.tryDelay(delayNotifier, value);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  }\n\n  protected _complete(): void {\n    this.completed = true;\n    this.tryComplete();\n    this.unsubscribe();\n  }\n\n  private removeSubscription(subscription: InnerSubscriber<T, R>): T {\n    subscription.unsubscribe();\n\n    const subscriptionIdx = this.delayNotifierSubscriptions.indexOf(subscription);\n    if (subscriptionIdx !== -1) {\n      this.delayNotifierSubscriptions.splice(subscriptionIdx, 1);\n    }\n\n    return subscription.outerValue;\n  }\n\n  private tryDelay(delayNotifier: Observable<any>, value: T): void {\n    const notifierSubscription = subscribeToResult(this, delayNotifier, value);\n\n    if (notifierSubscription && !notifierSubscription.closed) {\n      const destination = this.destination as Subscription;\n      destination.add(notifierSubscription);\n      this.delayNotifierSubscriptions.push(notifierSubscription);\n    }\n  }\n\n  private tryComplete(): void {\n    if (this.completed && this.delayNotifierSubscriptions.length === 0) {\n      this.destination.complete();\n    }\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SubscriptionDelayObservable<T> extends Observable<T> {\n  constructor(public source: Observable<T>, private subscriptionDelay: Observable<any>) {\n    super();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>) {\n    this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber, this.source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SubscriptionDelaySubscriber<T> extends Subscriber<T> {\n  private sourceSubscribed: boolean = false;\n\n  constructor(private parent: Subscriber<T>, private source: Observable<T>) {\n    super();\n  }\n\n  protected _next(unused: any) {\n    this.subscribeToSource();\n  }\n\n  protected _error(err: any) {\n    this.unsubscribe();\n    this.parent.error(err);\n  }\n\n  protected _complete() {\n    this.unsubscribe();\n    this.subscribeToSource();\n  }\n\n  private subscribeToSource(): void {\n    if (!this.sourceSubscribed) {\n      this.sourceSubscribed = true;\n      this.unsubscribe();\n      this.source.subscribe(this.parent);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nimport { OperatorFunction } from '../types';\n\n/**\n * Converts an Observable of {@link Notification} objects into the emissions\n * that they represent.\n *\n * <span class=\"informal\">Unwraps {@link Notification} objects as actual `next`,\n * `error` and `complete` emissions. The opposite of {@link materialize}.</span>\n *\n * ![](dematerialize.png)\n *\n * `dematerialize` is assumed to operate an Observable that only emits\n * {@link Notification} objects as `next` emissions, and does not emit any\n * `error`. Such Observable is the output of a `materialize` operation. Those\n * notifications are then unwrapped using the metadata they contain, and emitted\n * as `next`, `error`, and `complete` on the output Observable.\n *\n * Use this operator in conjunction with {@link materialize}.\n *\n * ## Example\n * Convert an Observable of Notifications to an actual Observable\n * ```ts\n * import { of, Notification } from 'rxjs';\n * import { dematerialize } from 'rxjs/operators';\n *\n * const notifA = new Notification('N', 'A');\n * const notifB = new Notification('N', 'B');\n * const notifE = new Notification('E', undefined,\n *   new TypeError('x.toUpperCase is not a function')\n * );\n * const materialized = of(notifA, notifB, notifE);\n * const upperCase = materialized.pipe(dematerialize());\n * upperCase.subscribe(x => console.log(x), e => console.error(e));\n *\n * // Results in:\n * // A\n * // B\n * // TypeError: x.toUpperCase is not a function\n * ```\n *\n * @see {@link Notification}\n * @see {@link materialize}\n *\n * @return {Observable} An Observable that emits items and notifications\n * embedded in Notification objects emitted by the source Observable.\n * @method dematerialize\n * @owner Observable\n */\nexport function dematerialize<T>(): OperatorFunction<Notification<T>, T> {\n  return function dematerializeOperatorFunction(source: Observable<Notification<T>>) {\n    return source.lift(new DeMaterializeOperator());\n  };\n}\n\nclass DeMaterializeOperator<T extends Notification<any>, R> implements Operator<T, R> {\n  call(subscriber: Subscriber<any>, source: any): any {\n    return source.subscribe(new DeMaterializeSubscriber(subscriber));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DeMaterializeSubscriber<T extends Notification<any>> extends Subscriber<T> {\n  constructor(destination: Subscriber<any>) {\n    super(destination);\n  }\n\n  protected _next(value: T) {\n    value.observe(this.destination);\n  }\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from previous items.\n *\n * If a keySelector function is provided, then it will project each value from the source observable into a new value that it will\n * check for equality with previously projected values. If a keySelector function is not provided, it will use each value from the\n * source observable directly with an equality check against previous values.\n *\n * In JavaScript runtimes that support `Set`, this operator will use a `Set` to improve performance of the distinct value checking.\n *\n * In other runtimes, this operator will use a minimal implementation of `Set` that relies on an `Array` and `indexOf` under the\n * hood, so performance will degrade as more values are checked for distinction. Even in newer browsers, a long-running `distinct`\n * use might result in memory leaks. To help alleviate this in some scenarios, an optional `flushes` parameter is also provided so\n * that the internal `Set` can be \"flushed\", basically clearing it of values.\n *\n * ## Examples\n * A simple example with numbers\n * ```ts\n * import { of } from 'rxjs';\n * import { distinct } from 'rxjs/operators';\n *\n * of(1, 1, 2, 2, 2, 1, 2, 3, 4, 3, 2, 1).pipe(\n *     distinct(),\n *   )\n *   .subscribe(x => console.log(x)); // 1, 2, 3, 4\n * ```\n *\n * An example using a keySelector function\n * ```typescript\n * import { of } from 'rxjs';\n * import { distinct } from 'rxjs/operators';\n *\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'},\n *   ).pipe(\n *     distinct((p: Person) => p.name),\n *   )\n *   .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * ```\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [keySelector] Optional function to select which value you want to check as distinct.\n * @param {Observable} [flushes] Optional Observable for flushing the internal HashSet of the operator.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinct\n * @owner Observable\n */\nexport function distinct<T, K>(keySelector?: (value: T) => K,\n                               flushes?: Observable<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new DistinctOperator(keySelector, flushes));\n}\n\nclass DistinctOperator<T, K> implements Operator<T, T> {\n  constructor(private keySelector: (value: T) => K, private flushes: Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new DistinctSubscriber(subscriber, this.keySelector, this.flushes));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class DistinctSubscriber<T, K> extends OuterSubscriber<T, T> {\n  private values = new Set<K>();\n\n  constructor(destination: Subscriber<T>, private keySelector: (value: T) => K, flushes: Observable<any>) {\n    super(destination);\n\n    if (flushes) {\n      this.add(subscribeToResult(this, flushes));\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: T,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, T>): void {\n    this.values.clear();\n  }\n\n  notifyError(error: any, innerSub: InnerSubscriber<T, T>): void {\n    this._error(error);\n  }\n\n  protected _next(value: T): void {\n    if (this.keySelector) {\n      this._useKeySelector(value);\n    } else {\n      this._finalizeNext(value, value);\n    }\n  }\n\n  private _useKeySelector(value: T): void {\n    let key: K;\n    const { destination } = this;\n    try {\n      key = this.keySelector(value);\n    } catch (err) {\n      destination.error(err);\n      return;\n    }\n    this._finalizeNext(key, value);\n  }\n\n  private _finalizeNext(key: K|T, value: T) {\n    const { values } = this;\n    if (!values.has(<K>key)) {\n      values.add(<K>key);\n      this.destination.next(value);\n    }\n  }\n\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function distinctUntilChanged<T>(compare?: (x: T, y: T) => boolean): MonoTypeOperatorFunction<T>;\nexport function distinctUntilChanged<T, K>(compare: (x: K, y: K) => boolean, keySelector: (x: T) => K): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * ## Example\n * A simple example with numbers\n * ```ts\n * import { of } from 'rxjs';\n * import { distinctUntilChanged } from 'rxjs/operators';\n *\n * of(1, 1, 2, 2, 2, 1, 1, 2, 3, 3, 4).pipe(\n *     distinctUntilChanged(),\n *   )\n *   .subscribe(x => console.log(x)); // 1, 2, 1, 2, 3, 4\n * ```\n *\n * An example using a compare function\n * ```typescript\n * import { of } from 'rxjs';\n * import { distinctUntilChanged } from 'rxjs/operators';\n *\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'},\n *     { age: 6, name: 'Foo'},\n *   ).pipe(\n *     distinctUntilChanged((p: Person, q: Person) => p.name === q.name),\n *   )\n *   .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinctUntilChanged\n * @owner Observable\n */\nexport function distinctUntilChanged<T, K>(compare?: (x: K, y: K) => boolean, keySelector?: (x: T) => K): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new DistinctUntilChangedOperator<T, K>(compare, keySelector));\n}\n\nclass DistinctUntilChangedOperator<T, K> implements Operator<T, T> {\n  constructor(private compare: (x: K, y: K) => boolean,\n              private keySelector: (x: T) => K) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DistinctUntilChangedSubscriber<T, K> extends Subscriber<T> {\n  private key: K;\n  private hasKey: boolean = false;\n\n  constructor(destination: Subscriber<T>,\n              compare: (x: K, y: K) => boolean,\n              private keySelector: (x: T) => K) {\n    super(destination);\n    if (typeof compare === 'function') {\n      this.compare = compare;\n    }\n  }\n\n  private compare(x: any, y: any): boolean {\n    return x === y;\n  }\n\n  protected _next(value: T): void {\n    let key: any;\n    try {\n      const { keySelector } = this;\n      key = keySelector ? keySelector(value) : value;\n    } catch (err) {\n      return this.destination.error(err);\n    }\n    let result = false;\n    if (this.hasKey) {\n      try {\n        const { compare } = this;\n        result = compare(this.key, key);\n      } catch (err) {\n        return this.destination.error(err);\n      }\n    } else {\n      this.hasKey = true;\n    }\n    if (!result) {\n      this.key = key;\n      this.destination.next(value);\n    }\n  }\n}\n","import { distinctUntilChanged } from './distinctUntilChanged';\nimport { MonoTypeOperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function distinctUntilKeyChanged<T>(key: keyof T): MonoTypeOperatorFunction<T>;\nexport function distinctUntilKeyChanged<T, K extends keyof T>(key: K, compare: (x: T[K], y: T[K]) => boolean): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item,\n * using a property accessed by using the key provided to check if the two items are distinct.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * ## Examples\n * An example comparing the name of persons\n * ```typescript\n * import { of } from 'rxjs';\n * import { distinctUntilKeyChanged } from 'rxjs/operators';\n *\n *  interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'},\n *     { age: 6, name: 'Foo'},\n *   ).pipe(\n *     distinctUntilKeyChanged('name'),\n *   )\n *   .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n * ```\n *\n * An example comparing the first letters of the name\n * ```typescript\n * import { of } from 'rxjs';\n * import { distinctUntilKeyChanged } from 'rxjs/operators';\n *\n * interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * of<Person>(\n *     { age: 4, name: 'Foo1'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo2'},\n *     { age: 6, name: 'Foo3'},\n *   ).pipe(\n *     distinctUntilKeyChanged('name', (x: string, y: string) => x.substring(0, 3) === y.substring(0, 3)),\n *   )\n *   .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo1' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo2' }\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n *\n * @param {string} key String key for object property lookup on each item.\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values based on the key specified.\n * @method distinctUntilKeyChanged\n * @owner Observable\n */\nexport function distinctUntilKeyChanged<T, K extends keyof T>(key: K, compare?: (x: T[K], y: T[K]) => boolean): MonoTypeOperatorFunction<T> {\n  return distinctUntilChanged((x: T, y: T) => compare ? compare(x[key], y[key]) : x[key] === y[key]);\n}\n","import { EmptyError } from '../util/EmptyError';\nimport { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { TeardownLogic, MonoTypeOperatorFunction } from '../types';\n\n/**\n * If the source observable completes without emitting a value, it will emit\n * an error. The error will be created at that time by the optional\n * `errorFactory` argument, otherwise, the error will be {@link EmptyError}.\n *\n * ![](throwIfEmpty.png)\n *\n * ## Example\n * ```ts\n * import { fromEvent, timer } from 'rxjs';\n * import { throwIfEmpty, takeUntil } from 'rxjs/operators';\n *\n * const click$ = fromEvent(document, 'click');\n *\n * click$.pipe(\n *   takeUntil(timer(1000)),\n *   throwIfEmpty(\n *     () => new Error('the document was not clicked within 1 second')\n *   ),\n * )\n * .subscribe({\n *   next() { console.log('The button was clicked'); },\n *   error(err) { console.error(err); }\n * });\n * ```\n *\n * @param errorFactory A factory function called to produce the\n * error to be thrown when the source observable completes without emitting a\n * value.\n */\nexport function throwIfEmpty <T>(errorFactory: (() => any) = defaultErrorFactory): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => {\n    return source.lift(new ThrowIfEmptyOperator(errorFactory));\n  };\n}\n\nclass ThrowIfEmptyOperator<T> implements Operator<T, T> {\n  constructor(private errorFactory: () => any) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new ThrowIfEmptySubscriber(subscriber, this.errorFactory));\n  }\n}\n\nclass ThrowIfEmptySubscriber<T> extends Subscriber<T> {\n  private hasValue: boolean = false;\n\n  constructor(destination: Subscriber<T>, private errorFactory: () => any) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    this.hasValue = true;\n    this.destination.next(value);\n  }\n\n  protected _complete() {\n    if (!this.hasValue) {\n      let err: any;\n      try {\n        err = this.errorFactory();\n      } catch (e) {\n        err = e;\n      }\n      this.destination.error(err);\n    } else {\n        return this.destination.complete();\n    }\n  }\n}\n\nfunction defaultErrorFactory() {\n  return new EmptyError();\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * ![](take.png)\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * ## Example\n * Take the first 5 seconds of an infinite 1-second interval Observable\n * ```ts\n * import { interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const intervalCount = interval(1000);\n * const takeFive = intervalCount.pipe(take(5));\n * takeFive.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 0\n * // 1\n * // 2\n * // 3\n * // 4\n * ```\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `take(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of `next` values to emit.\n * @return {Observable<T>} An Observable that emits only the first `count`\n * values emitted by the source Observable, or all of the values from the source\n * if the source emits fewer than `count` values.\n * @method take\n * @owner Observable\n */\nexport function take<T>(count: number): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => {\n    if (count === 0) {\n      return empty();\n    } else {\n      return source.lift(new TakeOperator(count));\n    }\n  };\n}\n\nclass TakeOperator<T> implements Operator<T, T> {\n  constructor(private total: number) {\n    if (this.total < 0) {\n      throw new ArgumentOutOfRangeError;\n    }\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new TakeSubscriber(subscriber, this.total));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass TakeSubscriber<T> extends Subscriber<T> {\n  private count: number = 0;\n\n  constructor(destination: Subscriber<T>, private total: number) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    const total = this.total;\n    const count = ++this.count;\n    if (count <= total) {\n      this.destination.next(value);\n      if (count === total) {\n        this.destination.complete();\n        this.unsubscribe();\n      }\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\nimport { filter } from './filter';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { take } from './take';\n\n/**\n * Emits the single value at the specified `index` in a sequence of emissions\n * from the source Observable.\n *\n * <span class=\"informal\">Emits only the i-th value, then completes.</span>\n *\n * ![](elementAt.png)\n *\n * `elementAt` returns an Observable that emits the item at the specified\n * `index` in the source Observable, or a default value if that `index` is out\n * of range and the `default` argument is provided. If the `default` argument is\n * not given and the `index` is out of range, the output Observable will emit an\n * `ArgumentOutOfRangeError` error.\n *\n * ## Example\n * Emit only the third click event\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { elementAt } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(elementAt(2));\n * result.subscribe(x => console.log(x));\n *\n * // Results in:\n * // click 1 = nothing\n * // click 2 = nothing\n * // click 3 = MouseEvent object logged to console\n * ```\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link skip}\n * @see {@link single}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `elementAt(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0` or the\n * Observable has completed before emitting the i-th `next` notification.\n *\n * @param {number} index Is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {T} [defaultValue] The default value returned for missing indices.\n * @return {Observable} An Observable that emits a single item, if it is found.\n * Otherwise, will emit the default value if given. If not, then emits an error.\n * @method elementAt\n * @owner Observable\n */\nexport function elementAt<T>(index: number, defaultValue?: T): MonoTypeOperatorFunction<T> {\n  if (index < 0) { throw new ArgumentOutOfRangeError(); }\n  const hasDefaultValue = arguments.length >= 2;\n  return (source: Observable<T>) => source.pipe(\n    filter((v, i) => i === index),\n    take(1),\n    hasDefaultValue\n      ? defaultIfEmpty(defaultValue)\n      : throwIfEmpty(() => new ArgumentOutOfRangeError()),\n  );\n}\n","import { Observable } from '../Observable';\nimport { concat } from '../observable/concat';\nimport { of } from '../observable/of';\nimport { MonoTypeOperatorFunction, SchedulerLike, OperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T>(scheduler: SchedulerLike): MonoTypeOperatorFunction<T>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T, A>(v1: A, scheduler: SchedulerLike): OperatorFunction<T, T | A>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T, A, B>(v1: A, v2: B, scheduler: SchedulerLike): OperatorFunction<T, T | A | B>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T, A, B, C>(v1: A, v2: B, v3: C, scheduler: SchedulerLike): OperatorFunction<T, T | A | B | C>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T, A, B, C, D>(v1: A, v2: B, v3: C, v4: D, scheduler: SchedulerLike): OperatorFunction<T, T | A | B | C | D>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T, A, B, C, D, E>(v1: A, v2: B, v3: C, v4: D, v5: E, scheduler: SchedulerLike): OperatorFunction<T, T | A | B | C | D | E>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T, A, B, C, D, E, F>(v1: A, v2: B, v3: C, v4: D, v5: E, v6: F, scheduler: SchedulerLike): OperatorFunction<T, T | A | B | C | D | E | F>;\n\nexport function endWith<T, A>(v1: A): OperatorFunction<T, T | A>;\nexport function endWith<T, A, B>(v1: A, v2: B): OperatorFunction<T, T | A | B>;\nexport function endWith<T, A, B, C>(v1: A, v2: B, v3: C): OperatorFunction<T, T | A | B | C>;\nexport function endWith<T, A, B, C, D>(v1: A, v2: B, v3: C, v4: D): OperatorFunction<T, T | A | B | C | D>;\nexport function endWith<T, A, B, C, D, E>(v1: A, v2: B, v3: C, v4: D, v5: E): OperatorFunction<T, T | A | B | C | D | E>;\nexport function endWith<T, A, B, C, D, E, F>(v1: A, v2: B, v3: C, v4: D, v5: E, v6: F): OperatorFunction<T, T | A | B | C | D | E | F>;\nexport function endWith<T, Z = T>(...array: Z[]): OperatorFunction<T, T | Z>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([source, [a, b, c]], scheduler).pipe(concatAll())`) */\nexport function endWith<T, Z = T>(...array: Array<Z | SchedulerLike>): OperatorFunction<T, T | Z>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns an Observable that emits the items you specify as arguments after it finishes emitting\n * items emitted by the source Observable.\n *\n * ![](endWith.png)\n *\n * ## Example\n * ### After the source observable completes, appends an emission and then completes too.\n *\n * ```ts\n * import { of } from 'rxjs';\n * import { endWith } from 'rxjs/operators';\n *\n * of('hi', 'how are you?', 'sorry, I have to go now').pipe(\n *   endWith('goodbye!'),\n * )\n * .subscribe(word => console.log(word));\n * // result:\n * // 'hi'\n * // 'how are you?'\n * // 'sorry, I have to go now'\n * // 'goodbye!'\n * ```\n *\n * @param {...T} values - Items you want the modified Observable to emit last.\n * @param {SchedulerLike} [scheduler] - A {@link SchedulerLike} to use for scheduling\n * the emissions of the `next` notifications.\n * @return {Observable} An Observable that emits the items emitted by the source Observable\n *  and then emits the items in the specified Iterable.\n * @method endWith\n * @owner Observable\n */\nexport function endWith<T>(...array: Array<T | SchedulerLike>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => concat(source, of(...array)) as Observable<T>;\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Observer, OperatorFunction } from '../types';\n\n/**\n * Returns an Observable that emits whether or not every item of the source satisfies the condition specified.\n *\n * ## Example\n * A simple example emitting true if all elements are less than 5, false otherwise\n * ```ts\n * import { of } from 'rxjs';\n * import { every } from 'rxjs/operators';\n *\n *  of(1, 2, 3, 4, 5, 6).pipe(\n *     every(x => x < 5),\n * )\n * .subscribe(x => console.log(x)); // -> false\n * ```\n *\n * @param {function} predicate A function for determining if an item meets a specified condition.\n * @param {any} [thisArg] Optional object to use for `this` in the callback.\n * @return {Observable} An Observable of booleans that determines if all items of the source Observable meet the condition specified.\n * @method every\n * @owner Observable\n */\nexport function every<T>(predicate: (value: T, index: number, source: Observable<T>) => boolean,\n                         thisArg?: any): OperatorFunction<T, boolean> {\n  return (source: Observable<T>) => source.lift(new EveryOperator(predicate, thisArg, source));\n}\n\nclass EveryOperator<T> implements Operator<T, boolean> {\n  constructor(private predicate: (value: T, index: number, source: Observable<T>) => boolean,\n              private thisArg?: any,\n              private source?: Observable<T>) {\n  }\n\n  call(observer: Subscriber<boolean>, source: any): any {\n    return source.subscribe(new EverySubscriber(observer, this.predicate, this.thisArg, this.source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass EverySubscriber<T> extends Subscriber<T> {\n  private index: number = 0;\n\n  constructor(destination: Observer<boolean>,\n              private predicate: (value: T, index: number, source: Observable<T>) => boolean,\n              private thisArg: any,\n              private source?: Observable<T>) {\n    super(destination);\n    this.thisArg = thisArg || this;\n  }\n\n  private notifyComplete(everyValueMatch: boolean): void {\n    this.destination.next(everyValueMatch);\n    this.destination.complete();\n  }\n\n  protected _next(value: T): void {\n    let result = false;\n    try {\n      result = this.predicate.call(this.thisArg, value, this.index++, this.source);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n\n    if (!result) {\n      this.notifyComplete(false);\n    }\n  }\n\n  protected _complete(): void {\n    this.notifyComplete(true);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction, TeardownLogic } from '../types';\n\nexport function exhaust<T>(): OperatorFunction<ObservableInput<T>, T>;\nexport function exhaust<R>(): OperatorFunction<any, R>;\n\n/**\n * Converts a higher-order Observable into a first-order Observable by dropping\n * inner Observables while the previous inner Observable has not yet completed.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by dropping the\n * next inner Observables while the current inner is still executing.</span>\n *\n * ![](exhaust.png)\n *\n * `exhaust` subscribes to an Observable that emits Observables, also known as a\n * higher-order Observable. Each time it observes one of these emitted inner\n * Observables, the output Observable begins emitting the items emitted by that\n * inner Observable. So far, it behaves like {@link mergeAll}. However,\n * `exhaust` ignores every new inner Observable if the previous Observable has\n * not yet completed. Once that one completes, it will accept and flatten the\n * next inner Observable and repeat this process.\n *\n * ## Example\n * Run a finite timer for each click, only if there is no currently active timer\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { exhaust, map, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map((ev) => interval(1000).pipe(take(5))),\n * );\n * const result = higherOrder.pipe(exhaust());\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link mergeAll}\n * @see {@link exhaustMap}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable that takes a source of Observables and propagates the first observable\n * exclusively until it completes before subscribing to the next.\n * @method exhaust\n * @owner Observable\n */\nexport function exhaust<T>(): OperatorFunction<any, T> {\n  return (source: Observable<T>) => source.lift(new SwitchFirstOperator<T>());\n}\n\nclass SwitchFirstOperator<T> implements Operator<T, T> {\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new SwitchFirstSubscriber(subscriber));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SwitchFirstSubscriber<T> extends OuterSubscriber<T, T> {\n  private hasCompleted: boolean = false;\n  private hasSubscription: boolean = false;\n\n  constructor(destination: Subscriber<T>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    if (!this.hasSubscription) {\n      this.hasSubscription = true;\n      this.add(subscribeToResult(this, value));\n    }\n  }\n\n  protected _complete(): void {\n    this.hasCompleted = true;\n    if (!this.hasSubscription) {\n      this.destination.complete();\n    }\n  }\n\n  notifyComplete(innerSub: Subscription): void {\n    this.remove(innerSub);\n    this.hasSubscription = false;\n    if (this.hasCompleted) {\n      this.destination.complete();\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { map } from './map';\nimport { from } from '../observable/from';\n\n/* tslint:disable:max-line-length */\nexport function exhaustMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) => O): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector is no longer supported. Use inner map instead. */\nexport function exhaustMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) => O, resultSelector: undefined): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector is no longer supported. Use inner map instead. */\nexport function exhaustMap<T, I, R>(project: (value: T, index: number) => ObservableInput<I>, resultSelector: (outerValue: T, innerValue: I, outerIndex: number, innerIndex: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable only if the previous projected Observable has completed.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link exhaust}.</span>\n *\n * ![](exhaustMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. When it projects a source value to\n * an Observable, the output Observable begins emitting the items emitted by\n * that projected Observable. However, `exhaustMap` ignores every new projected\n * Observable if the previous projected Observable has not yet completed. Once\n * that one completes, it will accept and flatten the next projected Observable\n * and repeat this process.\n *\n * ## Example\n * Run a finite timer for each click, only if there is no currently active timer\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { exhaustMap, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   exhaustMap(ev => interval(1000).pipe(take(5)))\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link concatMap}\n * @see {@link exhaust}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable containing projected Observables\n * of each item of the source, ignoring projected Observables that start before\n * their preceding Observable has completed.\n * @method exhaustMap\n * @owner Observable\n */\nexport function exhaustMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R,\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  if (resultSelector) {\n    // DEPRECATED PATH\n    return (source: Observable<T>) => source.pipe(\n      exhaustMap((a, i) => from(project(a, i)).pipe(\n        map((b: any, ii: any) => resultSelector(a, b, i, ii)),\n      )),\n    );\n  }\n  return (source: Observable<T>) =>\n    source.lift(new ExhaustMapOperator(project));\n}\n\nclass ExhaustMapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => ObservableInput<R>) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new ExhaustMapSubscriber(subscriber, this.project));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass ExhaustMapSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private hasSubscription = false;\n  private hasCompleted = false;\n  private index = 0;\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => ObservableInput<R>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    if (!this.hasSubscription) {\n      this.tryNext(value);\n    }\n  }\n\n  private tryNext(value: T): void {\n    let result: ObservableInput<R>;\n    const index = this.index++;\n    try {\n      result = this.project(value, index);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.hasSubscription = true;\n    this._innerSub(result, value, index);\n  }\n\n  private _innerSub(result: ObservableInput<R>, value: T, index: number): void {\n    const innerSubscriber = new InnerSubscriber(this, value, index);\n    const destination = this.destination as Subscription;\n    destination.add(innerSubscriber);\n    const innerSubscription = subscribeToResult<T, R>(this, result, undefined, undefined, innerSubscriber);\n    // The returned subscription will usually be the subscriber that was\n    // passed. However, interop subscribers will be wrapped and for\n    // unsubscriptions to chain correctly, the wrapper needs to be added, too.\n    if (innerSubscription !== innerSubscriber) {\n      destination.add(innerSubscription);\n    }\n  }\n\n  protected _complete(): void {\n    this.hasCompleted = true;\n    if (!this.hasSubscription) {\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.destination.next(innerValue);\n  }\n\n  notifyError(err: any): void {\n    this.destination.error(err);\n  }\n\n  notifyComplete(innerSub: Subscription): void {\n    const destination = this.destination as Subscription;\n    destination.remove(innerSub);\n\n    this.hasSubscription = false;\n    if (this.hasCompleted) {\n      this.destination.complete();\n    }\n  }\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { MonoTypeOperatorFunction, OperatorFunction, ObservableInput, SchedulerLike } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function expand<T, R>(project: (value: T, index: number) => ObservableInput<R>, concurrent?: number, scheduler?: SchedulerLike): OperatorFunction<T, R>;\nexport function expand<T>(project: (value: T, index: number) => ObservableInput<T>, concurrent?: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Recursively projects each source value to an Observable which is merged in\n * the output Observable.\n *\n * <span class=\"informal\">It's similar to {@link mergeMap}, but applies the\n * projection function to every source value as well as every output value.\n * It's recursive.</span>\n *\n * ![](expand.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger. *Expand* will re-emit on the output\n * Observable every source value. Then, each output value is given to the\n * `project` function which returns an inner Observable to be merged on the\n * output Observable. Those output values resulting from the projection are also\n * given to the `project` function to produce new output values. This is how\n * *expand* behaves recursively.\n *\n * ## Example\n * Start emitting the powers of two on every click, at most 10 of them\n * ```ts\n * import { fromEvent, of } from 'rxjs';\n * import { expand, mapTo, delay, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const powersOfTwo = clicks.pipe(\n *   mapTo(1),\n *   expand(x => of(2 * x).pipe(delay(1000))),\n *   take(10),\n * );\n * powersOfTwo.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n *\n * @param {function(value: T, index: number) => Observable} project A function\n * that, when applied to an item emitted by the source or the output Observable,\n * returns an Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {SchedulerLike} [scheduler=null] The {@link SchedulerLike} to use for subscribing to\n * each projected inner Observable.\n * @return {Observable} An Observable that emits the source values and also\n * result of applying the projection function to each value emitted on the\n * output Observable and and merging the results of the Observables obtained\n * from this transformation.\n * @method expand\n * @owner Observable\n */\nexport function expand<T, R>(project: (value: T, index: number) => ObservableInput<R>,\n                             concurrent: number = Number.POSITIVE_INFINITY,\n                             scheduler: SchedulerLike = undefined): OperatorFunction<T, R> {\n  concurrent = (concurrent || 0) < 1 ? Number.POSITIVE_INFINITY : concurrent;\n\n  return (source: Observable<T>) => source.lift(new ExpandOperator(project, concurrent, scheduler));\n}\n\nexport class ExpandOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => ObservableInput<R>,\n              private concurrent: number,\n              private scheduler: SchedulerLike) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new ExpandSubscriber(subscriber, this.project, this.concurrent, this.scheduler));\n  }\n}\n\ninterface DispatchArg<T, R> {\n  subscriber: ExpandSubscriber<T, R>;\n  result: ObservableInput<R>;\n  value: any;\n  index: number;\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class ExpandSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private index: number = 0;\n  private active: number = 0;\n  private hasCompleted: boolean = false;\n  private buffer: any[];\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => ObservableInput<R>,\n              private concurrent: number,\n              private scheduler: SchedulerLike) {\n    super(destination);\n    if (concurrent < Number.POSITIVE_INFINITY) {\n      this.buffer = [];\n    }\n  }\n\n  private static dispatch<T, R>(arg: DispatchArg<T, R>): void {\n    const {subscriber, result, value, index} = arg;\n    subscriber.subscribeToProjection(result, value, index);\n  }\n\n  protected _next(value: any): void {\n    const destination = this.destination;\n\n    if (destination.closed) {\n      this._complete();\n      return;\n    }\n\n    const index = this.index++;\n    if (this.active < this.concurrent) {\n      destination.next(value);\n      try {\n        const { project } = this;\n        const result = project(value, index);\n        if (!this.scheduler) {\n          this.subscribeToProjection(result, value, index);\n        } else {\n          const state: DispatchArg<T, R> = { subscriber: this, result, value, index };\n          const destination = this.destination as Subscription;\n          destination.add(this.scheduler.schedule<DispatchArg<T, R>>(ExpandSubscriber.dispatch, 0, state));\n        }\n      } catch (e) {\n        destination.error(e);\n      }\n    } else {\n      this.buffer.push(value);\n    }\n  }\n\n  private subscribeToProjection(result: any, value: T, index: number): void {\n    this.active++;\n    const destination = this.destination as Subscription;\n    destination.add(subscribeToResult<T, R>(this, result, value, index));\n  }\n\n  protected _complete(): void {\n    this.hasCompleted = true;\n    if (this.hasCompleted && this.active === 0) {\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this._next(innerValue);\n  }\n\n  notifyComplete(innerSub: Subscription): void {\n    const buffer = this.buffer;\n    const destination = this.destination as Subscription;\n    destination.remove(innerSub);\n    this.active--;\n    if (buffer && buffer.length > 0) {\n      this._next(buffer.shift());\n    }\n    if (this.hasCompleted && this.active === 0) {\n      this.destination.complete();\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * @param {function} callback Function to be called when source terminates.\n * @return {Observable} An Observable that mirrors the source, but will call the specified function on termination.\n * @method finally\n * @owner Observable\n */\nexport function finalize<T>(callback: () => void): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new FinallyOperator(callback));\n}\n\nclass FinallyOperator<T> implements Operator<T, T> {\n  constructor(private callback: () => void) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new FinallySubscriber(subscriber, this.callback));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass FinallySubscriber<T> extends Subscriber<T> {\n  constructor(destination: Subscriber<T>, callback: () => void) {\n    super(destination);\n    this.add(new Subscription(callback));\n  }\n}\n","import {Observable} from '../Observable';\nimport {Operator} from '../Operator';\nimport {Subscriber} from '../Subscriber';\nimport {OperatorFunction} from '../types';\n\nexport function find<T, S extends T>(predicate: (value: T, index: number, source: Observable<T>) => value is S,\n                                     thisArg?: any): OperatorFunction<T, S | undefined>;\nexport function find<T>(predicate: (value: T, index: number, source: Observable<T>) => boolean,\n                        thisArg?: any): OperatorFunction<T, T | undefined>;\n/**\n * Emits only the first value emitted by the source Observable that meets some\n * condition.\n *\n * <span class=\"informal\">Finds the first value that passes some test and emits\n * that.</span>\n *\n * ![](find.png)\n *\n * `find` searches for the first item in the source Observable that matches the\n * specified condition embodied by the `predicate`, and returns the first\n * occurrence in the source. Unlike {@link first}, the `predicate` is required\n * in `find`, and does not emit an error if a valid value is not found.\n *\n * ## Example\n * Find and emit the first click that happens on a DIV element\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { find } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(find(ev => ev.target.tagName === 'DIV'));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link filter}\n * @see {@link first}\n * @see {@link findIndex}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable<T>} An Observable of the first item that matches the\n * condition.\n * @method find\n * @owner Observable\n */\nexport function find<T>(predicate: (value: T, index: number, source: Observable<T>) => boolean,\n                        thisArg?: any): OperatorFunction<T, T | undefined> {\n  if (typeof predicate !== 'function') {\n    throw new TypeError('predicate is not a function');\n  }\n  return (source: Observable<T>) => source.lift(new FindValueOperator(predicate, source, false, thisArg)) as Observable<T | undefined>;\n}\n\nexport class FindValueOperator<T> implements Operator<T, T | number | undefined> {\n  constructor(private predicate: (value: T, index: number, source: Observable<T>) => boolean,\n              private source: Observable<T>,\n              private yieldIndex: boolean,\n              private thisArg?: any) {\n  }\n\n  call(observer: Subscriber<T>, source: any): any {\n    return source.subscribe(new FindValueSubscriber(observer, this.predicate, this.source, this.yieldIndex, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class FindValueSubscriber<T> extends Subscriber<T> {\n  private index: number = 0;\n\n  constructor(destination: Subscriber<T>,\n              private predicate: (value: T, index: number, source: Observable<T>) => boolean,\n              private source: Observable<T>,\n              private yieldIndex: boolean,\n              private thisArg?: any) {\n    super(destination);\n  }\n\n  private notifyComplete(value: any): void {\n    const destination = this.destination;\n\n    destination.next(value);\n    destination.complete();\n    this.unsubscribe();\n  }\n\n  protected _next(value: T): void {\n    const {predicate, thisArg} = this;\n    const index = this.index++;\n    try {\n      const result = predicate.call(thisArg || this, value, index, this.source);\n      if (result) {\n        this.notifyComplete(this.yieldIndex ? index : value);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  }\n\n  protected _complete(): void {\n    this.notifyComplete(this.yieldIndex ? -1 : undefined);\n  }\n}\n","import { Observable } from '../Observable';\nimport { FindValueOperator } from '../operators/find';\nimport { OperatorFunction } from '../types';\n/**\n * Emits only the index of the first value emitted by the source Observable that\n * meets some condition.\n *\n * <span class=\"informal\">It's like {@link find}, but emits the index of the\n * found value, not the value itself.</span>\n *\n * ![](findIndex.png)\n *\n * `findIndex` searches for the first item in the source Observable that matches\n * the specified condition embodied by the `predicate`, and returns the\n * (zero-based) index of the first occurrence in the source. Unlike\n * {@link first}, the `predicate` is required in `findIndex`, and does not emit\n * an error if a valid value is not found.\n *\n * ## Example\n * Emit the index of first click that happens on a DIV element\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { findIndex } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(findIndex(ev => ev.target.tagName === 'DIV'));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link first}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of the index of the first item that\n * matches the condition.\n * @method find\n * @owner Observable\n */\nexport function findIndex<T>(predicate: (value: T, index: number, source: Observable<T>) => boolean,\n                             thisArg?: any): OperatorFunction<T, number> {\n  return (source: Observable<T>) => source.lift(new FindValueOperator(predicate, source, true, thisArg)) as Observable<any>;\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { EmptyError } from '../util/EmptyError';\nimport { OperatorFunction } from '../../internal/types';\nimport { filter } from './filter';\nimport { take } from './take';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { identity } from '../util/identity';\n\n/* tslint:disable:max-line-length */\nexport function first<T, D = T>(\n  predicate?: null,\n  defaultValue?: D\n): OperatorFunction<T, T | D>;\nexport function first<T, S extends T>(\n  predicate: (value: T, index: number, source: Observable<T>) => value is S,\n  defaultValue?: S\n): OperatorFunction<T, S>;\nexport function first<T, D = T>(\n  predicate: (value: T, index: number, source: Observable<T>) => boolean,\n  defaultValue?: D\n): OperatorFunction<T, T | D>;\n/* tslint:enable:max-line-length */\n\n/**\n * Emits only the first value (or the first value that meets some condition)\n * emitted by the source Observable.\n *\n * <span class=\"informal\">Emits only the first value. Or emits only the first\n * value that passes some test.</span>\n *\n * ![](first.png)\n *\n * If called with no arguments, `first` emits the first value of the source\n * Observable, then completes. If called with a `predicate` function, `first`\n * emits the first value of the source that matches the specified condition. It\n * may also take a deprecated `resultSelector` function to produce the output\n * value from the input value, and a `defaultValue` to emit in case the source\n * completes before it is able to emit a valid value. Throws an error if\n * `defaultValue` was not provided and a matching element is not found.\n *\n * ## Examples\n * Emit only the first click that happens on the DOM\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { first } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(first());\n * result.subscribe(x => console.log(x));\n * ```\n *\n * Emits the first click that happens on a DIV\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { first } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(first(ev => ev.target.tagName === 'DIV'));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link take}\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} [predicate]\n * An optional function called with each item to test for condition matching.\n * @param {R} [defaultValue] The default value emitted in case no valid value\n * was found on the source.\n * @return {Observable<T|R>} An Observable of the first item that matches the\n * condition.\n * @method first\n * @owner Observable\n */\nexport function first<T, D>(\n  predicate?: ((value: T, index: number, source: Observable<T>) => boolean) | null,\n  defaultValue?: D\n): OperatorFunction<T, T | D> {\n  const hasDefaultValue = arguments.length >= 2;\n  return (source: Observable<T>) => source.pipe(\n    predicate ? filter((v, i) => predicate(v, i, source)) : identity,\n    take(1),\n    hasDefaultValue ? defaultIfEmpty<T | D>(defaultValue) : throwIfEmpty(() => new EmptyError()),\n  );\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction } from '../types';\n\n/**\n * Ignores all items emitted by the source Observable and only passes calls of `complete` or `error`.\n *\n * ![](ignoreElements.png)\n *\n * ## Examples\n * ### Ignores emitted values, reacts to observable's completion.\n * ```ts\n * import { of } from 'rxjs';\n * import { ignoreElements } from 'rxjs/operators';\n *\n * of('you', 'talking', 'to', 'me').pipe(\n *   ignoreElements(),\n * )\n * .subscribe(\n *   word => console.log(word),\n *   err => console.log('error:', err),\n *   () => console.log('the end'),\n * );\n * // result:\n * // 'the end'\n * ```\n * @return {Observable} An empty Observable that only calls `complete`\n * or `error`, based on which one is called by the source Observable.\n * @method ignoreElements\n * @owner Observable\n */\nexport function ignoreElements(): OperatorFunction<any, never> {\n  return function ignoreElementsOperatorFunction(source: Observable<any>) {\n    return source.lift(new IgnoreElementsOperator());\n  };\n}\n\nclass IgnoreElementsOperator<T, R> implements Operator<T, R> {\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new IgnoreElementsSubscriber(subscriber));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass IgnoreElementsSubscriber<T> extends Subscriber<T> {\n  protected _next(unused: T): void {\n    // Do nothing\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction } from '../types';\n\n/**\n * Emits false if the input observable emits any values, or emits true if the\n * input observable completes without emitting any values.\n *\n * <span class=\"informal\">Tells whether any values are emitted by an observable</span>\n *\n * ![](isEmpty.png)\n *\n * `isEmpty` transforms an Observable that emits values into an Observable that\n * emits a single boolean value representing whether or not any values were\n * emitted by the source Observable. As soon as the source Observable emits a\n * value, `isEmpty` will emit a `false` and complete.  If the source Observable\n * completes having not emitted anything, `isEmpty` will emit a `true` and\n * complete.\n *\n * A similar effect could be achieved with {@link count}, but `isEmpty` can emit\n * a `false` value sooner.\n *\n * ## Examples\n *\n * Emit `false` for a non-empty Observable\n * ```javascript\n * import { Subject } from 'rxjs';\n * import { isEmpty } from 'rxjs/operators';\n *\n * const source = new Subject<string>();\n * const result = source.pipe(isEmpty());\n * source.subscribe(x => console.log(x));\n * result.subscribe(x => console.log(x));\n * source.next('a');\n * source.next('b');\n * source.next('c');\n * source.complete();\n *\n * // Results in:\n * // a\n * // false\n * // b\n * // c\n * ```\n *\n * Emit `true` for an empty Observable\n * ```javascript\n * import { EMPTY } from 'rxjs';\n * import { isEmpty } from 'rxjs/operators';\n *\n * const result = EMPTY.pipe(isEmpty());\n * result.subscribe(x => console.log(x));\n * // Results in:\n * // true\n * ```\n *\n * @see {@link count}\n * @see {@link EMPTY}\n *\n * @return {OperatorFunction<T, boolean>} An Observable of a boolean value indicating whether observable was empty or not\n * @method isEmpty\n * @owner Observable\n */\n\nexport function isEmpty<T>(): OperatorFunction<T, boolean> {\n  return (source: Observable<T>) => source.lift(new IsEmptyOperator());\n}\n\nclass IsEmptyOperator implements Operator<any, boolean> {\n  call (observer: Subscriber<boolean>, source: any): any {\n    return source.subscribe(new IsEmptySubscriber(observer));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass IsEmptySubscriber extends Subscriber<any> {\n  constructor(destination: Subscriber<boolean>) {\n    super(destination);\n  }\n\n  private notifyComplete(isEmpty: boolean): void {\n    const destination = this.destination;\n\n    destination.next(isEmpty);\n    destination.complete();\n  }\n\n  protected _next(value: boolean) {\n    this.notifyComplete(false);\n  }\n\n  protected _complete() {\n    this.notifyComplete(true);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Emits only the last `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Remembers the latest `count` values, then emits those\n * only when the source completes.</span>\n *\n * ![](takeLast.png)\n *\n * `takeLast` returns an Observable that emits at most the last `count` values\n * emitted by the source Observable. If the source emits fewer than `count`\n * values then all of its values are emitted. This operator must wait until the\n * `complete` notification emission from the source in order to emit the `next`\n * values on the output Observable, because otherwise it is impossible to know\n * whether or not more values will be emitted on the source. For this reason,\n * all values are emitted synchronously, followed by the complete notification.\n *\n * ## Example\n * Take the last 3 values of an Observable with many values\n * ```ts\n * import { range } from 'rxjs';\n * import { takeLast } from 'rxjs/operators';\n *\n * const many = range(1, 100);\n * const lastThree = many.pipe(takeLast(3));\n * lastThree.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `takeLast(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of values to emit from the end of\n * the sequence of values emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits at most the last count\n * values emitted by the source Observable.\n * @method takeLast\n * @owner Observable\n */\nexport function takeLast<T>(count: number): MonoTypeOperatorFunction<T> {\n  return function takeLastOperatorFunction(source: Observable<T>): Observable<T> {\n    if (count === 0) {\n      return empty();\n    } else {\n      return source.lift(new TakeLastOperator(count));\n    }\n  };\n}\n\nclass TakeLastOperator<T> implements Operator<T, T> {\n  constructor(private total: number) {\n    if (this.total < 0) {\n      throw new ArgumentOutOfRangeError;\n    }\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass TakeLastSubscriber<T> extends Subscriber<T> {\n  private ring: Array<T> = new Array();\n  private count: number = 0;\n\n  constructor(destination: Subscriber<T>, private total: number) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    const ring = this.ring;\n    const total = this.total;\n    const count = this.count++;\n\n    if (ring.length < total) {\n      ring.push(value);\n    } else {\n      const index = count % total;\n      ring[index] = value;\n    }\n  }\n\n  protected _complete(): void {\n    const destination = this.destination;\n    let count = this.count;\n\n    if (count > 0) {\n      const total = this.count >= this.total ? this.total : this.count;\n      const ring  = this.ring;\n\n      for (let i = 0; i < total; i++) {\n        const idx = (count++) % total;\n        destination.next(ring[idx]);\n      }\n    }\n\n    destination.complete();\n  }\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { EmptyError } from '../util/EmptyError';\nimport { OperatorFunction } from '../../internal/types';\nimport { filter } from './filter';\nimport { takeLast } from './takeLast';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { identity } from '../util/identity';\n\n/* tslint:disable:max-line-length */\nexport function last<T, D = T>(\n  predicate?: null,\n  defaultValue?: D\n): OperatorFunction<T, T | D>;\nexport function last<T, S extends T>(\n  predicate: (value: T, index: number, source: Observable<T>) => value is S,\n  defaultValue?: S\n): OperatorFunction<T, S>;\nexport function last<T, D = T>(\n  predicate: (value: T, index: number, source: Observable<T>) => boolean,\n  defaultValue?: D\n): OperatorFunction<T, T | D>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns an Observable that emits only the last item emitted by the source Observable.\n * It optionally takes a predicate function as a parameter, in which case, rather than emitting\n * the last item from the source Observable, the resulting Observable will emit the last item\n * from the source Observable that satisfies the predicate.\n *\n * ![](last.png)\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {function} [predicate] - The condition any source emitted item has to satisfy.\n * @param {any} [defaultValue] - An optional default value to provide if last\n * predicate isn't met or no values were emitted.\n * @return {Observable} An Observable that emits only the last item satisfying the given condition\n * from the source, or an NoSuchElementException if no such items are emitted.\n * @throws - Throws if no items that match the predicate are emitted by the source Observable.\n */\nexport function last<T, D>(\n  predicate?: ((value: T, index: number, source: Observable<T>) => boolean) | null,\n  defaultValue?: D\n): OperatorFunction<T, T | D> {\n  const hasDefaultValue = arguments.length >= 2;\n  return (source: Observable<T>) => source.pipe(\n    predicate ? filter((v, i) => predicate(v, i, source)) : identity,\n    takeLast(1),\n    hasDefaultValue ? defaultIfEmpty<T | D>(defaultValue) : throwIfEmpty(() => new EmptyError()),\n  );\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction } from '../types';\n\n/**\n * Emits the given constant value on the output Observable every time the source\n * Observable emits a value.\n *\n * <span class=\"informal\">Like {@link map}, but it maps every source value to\n * the same output value every time.</span>\n *\n * ![](mapTo.png)\n *\n * Takes a constant `value` as argument, and emits that whenever the source\n * Observable emits a value. In other words, ignores the actual source value,\n * and simply uses the emission moment to know when to emit the given `value`.\n *\n * ## Example\n * Map every click to the string 'Hi'\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { mapTo } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const greetings = clicks.pipe(mapTo('Hi'));\n * greetings.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link map}\n *\n * @param {any} value The value to map each source value to.\n * @return {Observable} An Observable that emits the given `value` every time\n * the source Observable emits something.\n * @method mapTo\n * @owner Observable\n */\nexport function mapTo<T, R>(value: R): OperatorFunction<T, R> {\n  return (source: Observable<T>) => source.lift(new MapToOperator(value));\n}\n\nclass MapToOperator<T, R> implements Operator<T, R> {\n\n  value: R;\n\n  constructor(value: R) {\n    this.value = value;\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new MapToSubscriber(subscriber, this.value));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass MapToSubscriber<T, R> extends Subscriber<T> {\n\n  value: R;\n\n  constructor(destination: Subscriber<R>, value: R) {\n    super(destination);\n    this.value = value;\n  }\n\n  protected _next(x: T) {\n    this.destination.next(this.value);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nimport { OperatorFunction } from '../types';\n\n/**\n * Represents all of the notifications from the source Observable as `next`\n * emissions marked with their original types within {@link Notification}\n * objects.\n *\n * <span class=\"informal\">Wraps `next`, `error` and `complete` emissions in\n * {@link Notification} objects, emitted as `next` on the output Observable.\n * </span>\n *\n * ![](materialize.png)\n *\n * `materialize` returns an Observable that emits a `next` notification for each\n * `next`, `error`, or `complete` emission of the source Observable. When the\n * source Observable emits `complete`, the output Observable will emit `next` as\n * a Notification of type \"complete\", and then it will emit `complete` as well.\n * When the source Observable emits `error`, the output will emit `next` as a\n * Notification of type \"error\", and then `complete`.\n *\n * This operator is useful for producing metadata of the source Observable, to\n * be consumed as `next` emissions. Use it in conjunction with\n * {@link dematerialize}.\n *\n * ## Example\n * Convert a faulty Observable to an Observable of Notifications\n * ```ts\n * import { of } from 'rxjs';\n * import { materialize, map } from 'rxjs/operators';\n *\n * const letters = of('a', 'b', 13, 'd');\n * const upperCase = letters.pipe(map(x => x.toUpperCase()));\n * const materialized = upperCase.pipe(materialize());\n * materialized.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - Notification {kind: \"N\", value: \"A\", error: undefined, hasValue: true}\n * // - Notification {kind: \"N\", value: \"B\", error: undefined, hasValue: true}\n * // - Notification {kind: \"E\", value: undefined, error: TypeError:\n * //   x.toUpperCase is not a function at MapSubscriber.letters.map.x\n * //   [as project] (http://1, hasValue: false}\n * ```\n *\n * @see {@link Notification}\n * @see {@link dematerialize}\n *\n * @return {Observable<Notification<T>>} An Observable that emits\n * {@link Notification} objects that wrap the original emissions from the source\n * Observable with metadata.\n * @method materialize\n * @owner Observable\n */\nexport function materialize<T>(): OperatorFunction<T, Notification<T>> {\n  return function materializeOperatorFunction(source: Observable<T>) {\n    return source.lift(new MaterializeOperator());\n  };\n}\n\nclass MaterializeOperator<T> implements Operator<T, Notification<T>> {\n  call(subscriber: Subscriber<Notification<T>>, source: any): any {\n    return source.subscribe(new MaterializeSubscriber(subscriber));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass MaterializeSubscriber<T> extends Subscriber<T> {\n  constructor(destination: Subscriber<Notification<T>>) {\n    super(destination);\n  }\n\n  protected _next(value: T) {\n    this.destination.next(Notification.createNext(value));\n  }\n\n  protected _error(err: any) {\n    const destination = this.destination;\n    destination.next(Notification.createError(err));\n    destination.complete();\n  }\n\n  protected _complete() {\n    const destination = this.destination;\n    destination.next(Notification.createComplete());\n    destination.complete();\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction, MonoTypeOperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function scan<T, R>(accumulator: (acc: R, value: T, index: number) => R, seed: R): OperatorFunction<T, R>;\nexport function scan<T>(accumulator: (acc: T, value: T, index: number) => T, seed?: T): MonoTypeOperatorFunction<T>;\nexport function scan<T, R>(accumulator: (acc: R, value: T, index: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Applies an accumulator function over the source Observable, and returns each\n * intermediate result, with an optional seed value.\n *\n * <span class=\"informal\">It's like {@link reduce}, but emits the current\n * accumulation whenever the source emits a value.</span>\n *\n * ![](scan.png)\n *\n * Combines together all values emitted on the source, using an accumulator\n * function that knows how to join a new source value into the accumulation from\n * the past. Is similar to {@link reduce}, but emits the intermediate\n * accumulations.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * ## Example\n * Count the number of click events\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { scan, mapTo } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const ones = clicks.pipe(mapTo(1));\n * const seed = 0;\n * const count = ones.pipe(scan((acc, one) => acc + one, seed));\n * count.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link reduce}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator\n * The accumulator function called on each source value.\n * @param {T|R} [seed] The initial accumulation value.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method scan\n * @owner Observable\n */\nexport function scan<T, R>(accumulator: (acc: R, value: T, index: number) => R, seed?: T | R): OperatorFunction<T, R> {\n  let hasSeed = false;\n  // providing a seed of `undefined` *should* be valid and trigger\n  // hasSeed! so don't use `seed !== undefined` checks!\n  // For this reason, we have to check it here at the original call site\n  // otherwise inside Operator/Subscriber we won't know if `undefined`\n  // means they didn't provide anything or if they literally provided `undefined`\n  if (arguments.length >= 2) {\n    hasSeed = true;\n  }\n\n  return function scanOperatorFunction(source: Observable<T>): Observable<R> {\n    return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n  };\n}\n\nclass ScanOperator<T, R> implements Operator<T, R> {\n  constructor(private accumulator: (acc: R, value: T, index: number) => R, private seed?: T | R, private hasSeed: boolean = false) {}\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass ScanSubscriber<T, R> extends Subscriber<T> {\n  private index: number = 0;\n\n  get seed(): T | R {\n    return this._seed;\n  }\n\n  set seed(value: T | R) {\n    this.hasSeed = true;\n    this._seed = value;\n  }\n\n  constructor(destination: Subscriber<R>, private accumulator: (acc: R, value: T, index: number) => R, private _seed: T | R,\n              private hasSeed: boolean) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    if (!this.hasSeed) {\n      this.seed = value;\n      this.destination.next(value);\n    } else {\n      return this._tryNext(value);\n    }\n  }\n\n  private _tryNext(value: T): void {\n    const index = this.index++;\n    let result: any;\n    try {\n      result = this.accumulator(<R>this.seed, value, index);\n    } catch (err) {\n      this.destination.error(err);\n    }\n    this.seed = result;\n    this.destination.next(result);\n  }\n}\n","import { Observable } from '../Observable';\nimport { scan } from './scan';\nimport { takeLast } from './takeLast';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { OperatorFunction, MonoTypeOperatorFunction } from '../types';\nimport { pipe } from '../util/pipe';\n\n/* tslint:disable:max-line-length */\nexport function reduce<T, R>(accumulator: (acc: R, value: T, index: number) => R, seed: R): OperatorFunction<T, R>;\nexport function reduce<T>(accumulator: (acc: T, value: T, index: number) => T, seed?: T): MonoTypeOperatorFunction<T>;\nexport function reduce<T, R>(accumulator: (acc: R, value: T, index: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Applies an accumulator function over the source Observable, and returns the\n * accumulated result when the source completes, given an optional seed value.\n *\n * <span class=\"informal\">Combines together all values emitted on the source,\n * using an accumulator function that knows how to join a new source value into\n * the accumulation from the past.</span>\n *\n * ![](reduce.png)\n *\n * Like\n * [Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce),\n * `reduce` applies an `accumulator` function against an accumulation and each\n * value of the source Observable (from the past) to reduce it to a single\n * value, emitted on the output Observable. Note that `reduce` will only emit\n * one value, only when the source Observable completes. It is equivalent to\n * applying operator {@link scan} followed by operator {@link last}.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * ## Example\n * Count the number of click events that happened in 5 seconds\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { reduce, takeUntil, mapTo } from 'rxjs/operators';\n *\n * const clicksInFiveSeconds = fromEvent(document, 'click').pipe(\n *   takeUntil(interval(5000)),\n * );\n * const ones = clicksInFiveSeconds.pipe(mapTo(1));\n * const seed = 0;\n * const count = ones.pipe(reduce((acc, one) => acc + one, seed));\n * count.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link count}\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link scan}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator The accumulator function\n * called on each source value.\n * @param {R} [seed] The initial accumulation value.\n * @return {Observable<R>} An Observable that emits a single value that is the\n * result of accumulating the values emitted by the source Observable.\n * @method reduce\n * @owner Observable\n */\nexport function reduce<T, R>(accumulator: (acc: T | R, value: T, index?: number) => T | R, seed?: T | R): OperatorFunction<T, T | R> {\n  // providing a seed of `undefined` *should* be valid and trigger\n  // hasSeed! so don't use `seed !== undefined` checks!\n  // For this reason, we have to check it here at the original call site\n  // otherwise inside Operator/Subscriber we won't know if `undefined`\n  // means they didn't provide anything or if they literally provided `undefined`\n  if (arguments.length >= 2) {\n    return function reduceOperatorFunctionWithSeed(source: Observable<T>): Observable<T | R> {\n      return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n    };\n  }\n  return function reduceOperatorFunction(source: Observable<T>): Observable<T | R> {\n    return pipe(\n      scan<T, T | R>((acc, value, index) => accumulator(acc, value, index + 1)),\n      takeLast(1),\n    )(source);\n  };\n}\n","import { reduce } from './reduce';\nimport { MonoTypeOperatorFunction } from '../types';\n\n/**\n * The Max operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the largest value.\n *\n * ![](max.png)\n *\n * ## Examples\n * Get the maximal value of a series of numbers\n * ```ts\n * import { of } from 'rxjs';\n * import { max } from 'rxjs/operators';\n *\n * of(5, 4, 7, 2, 8).pipe(\n *   max(),\n * )\n * .subscribe(x => console.log(x)); // -> 8\n * ```\n *\n * Use a comparer function to get the maximal item\n * ```typescript\n * import { of } from 'rxjs';\n * import { max } from 'rxjs/operators';\n *\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * of<Person>(\n *   {age: 7, name: 'Foo'},\n *   {age: 5, name: 'Bar'},\n *   {age: 9, name: 'Beer'},\n * ).pipe(\n *   max<Person>((a: Person, b: Person) => a.age < b.age ? -1 : 1),\n * )\n * .subscribe((x: Person) => console.log(x.name)); // -> 'Beer'\n * ```\n *\n * @see {@link min}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable} An Observable that emits item with the largest value.\n * @method max\n * @owner Observable\n */\nexport function max<T>(comparer?: (x: T, y: T) => number): MonoTypeOperatorFunction<T> {\n  const max: (x: T, y: T) => T = (typeof comparer === 'function')\n    ? (x, y) => comparer(x, y) > 0 ? x : y\n    : (x, y) => x > y ? x : y;\n\n  return reduce(max);\n}\n","import { merge as mergeStatic } from '../observable/merge';\nimport { Observable } from '../Observable';\nimport { ObservableInput, OperatorFunction, MonoTypeOperatorFunction, SchedulerLike } from '../types';\n\n/* tslint:disable:max-line-length */\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T>(scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T>(concurrent?: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2>(v2: ObservableInput<T2>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2>(v2: ObservableInput<T2>, concurrent?: number, scheduler?: SchedulerLike): OperatorFunction<T, T | T2>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, concurrent?: number, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3, T4>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3, T4>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, concurrent?: number, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3, T4, T5>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4 | T5>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3, T4, T5>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, concurrent?: number, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4 | T5>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3, T4, T5, T6>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4 | T5 | T6>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, T2, T3, T4, T5, T6>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, concurrent?: number, scheduler?: SchedulerLike): OperatorFunction<T, T | T2 | T3 | T4 | T5 | T6>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T>(...observables: Array<ObservableInput<T> | SchedulerLike | number>): MonoTypeOperatorFunction<T>;\n/** @deprecated Deprecated in favor of static merge. */\nexport function merge<T, R>(...observables: Array<ObservableInput<any> | SchedulerLike | number>): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * @deprecated Deprecated in favor of static {@link merge}.\n */\nexport function merge<T, R>(...observables: Array<ObservableInput<any> | SchedulerLike | number>): OperatorFunction<T, R> {\n  return (source: Observable<T>) => source.lift.call(mergeStatic(source, ...observables));\n}\n","import { Observable } from '../Observable';\nimport { OperatorFunction, ObservedValueOf } from '../../internal/types';\nimport { mergeMap } from './mergeMap';\nimport { ObservableInput } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function mergeMapTo<T, O extends ObservableInput<any>>(innerObservable: O, concurrent?: number): OperatorFunction<any, ObservedValueOf<O>>;\n/** @deprecated */\nexport function mergeMapTo<T, R, O extends ObservableInput<any>>(innerObservable: O, resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R, concurrent?: number): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in the output Observable.\n *\n * <span class=\"informal\">It's like {@link mergeMap}, but maps each value always\n * to the same inner Observable.</span>\n *\n * ![](mergeMapTo.png)\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then merges those resulting Observables into one\n * single Observable, which is the output Observable.\n *\n * ## Example\n * For each click event, start an interval Observable ticking every 1 second\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { mergeMapTo } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(mergeMapTo(interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link concatMapTo}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable`\n * @method mergeMapTo\n * @owner Observable\n */\nexport function mergeMapTo<T, R, O extends ObservableInput<any>>(\n  innerObservable: O,\n  resultSelector?: ((outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R) | number,\n  concurrent: number = Number.POSITIVE_INFINITY\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  if (typeof resultSelector === 'function') {\n    return mergeMap(() => innerObservable, resultSelector, concurrent);\n  }\n  if (typeof resultSelector === 'number') {\n    concurrent = resultSelector;\n  }\n  return mergeMap(() => innerObservable, concurrent);\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { ObservableInput, OperatorFunction } from '../types';\n\n/**\n * Applies an accumulator function over the source Observable where the\n * accumulator function itself returns an Observable, then each intermediate\n * Observable returned is merged into the output Observable.\n *\n * <span class=\"informal\">It's like {@link scan}, but the Observables returned\n * by the accumulator are merged into the outer Observable.</span>\n *\n * ## Example\n * Count the number of click events\n * ```ts\n * import { fromEvent, of } from 'rxjs';\n * import { mapTo, mergeScan } from 'rxjs/operators';\n *\n * const click$ = fromEvent(document, 'click');\n * const one$ = click$.pipe(mapTo(1));\n * const seed = 0;\n * const count$ = one$.pipe(\n *   mergeScan((acc, one) => of(acc + one), seed),\n * );\n * count$.subscribe(x => console.log(x));\n *\n * // Results:\n * // 1\n * // 2\n * // 3\n * // 4\n * // ...and so on for each click\n * ```\n *\n * @param {function(acc: R, value: T): Observable<R>} accumulator\n * The accumulator function called on each source value.\n * @param seed The initial accumulation value.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of\n * input Observables being subscribed to concurrently.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method mergeScan\n * @owner Observable\n */\nexport function mergeScan<T, R>(accumulator: (acc: R, value: T, index: number) => ObservableInput<R>,\n                                seed: R,\n                                concurrent: number = Number.POSITIVE_INFINITY): OperatorFunction<T, R> {\n  return (source: Observable<T>) => source.lift(new MergeScanOperator(accumulator, seed, concurrent));\n}\n\nexport class MergeScanOperator<T, R> implements Operator<T, R> {\n  constructor(private accumulator: (acc: R, value: T, index: number) => ObservableInput<R>,\n              private seed: R,\n              private concurrent: number) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new MergeScanSubscriber(\n      subscriber, this.accumulator, this.seed, this.concurrent\n    ));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class MergeScanSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private hasValue: boolean = false;\n  private hasCompleted: boolean = false;\n  private buffer: Observable<any>[] = [];\n  private active: number = 0;\n  protected index: number = 0;\n\n  constructor(destination: Subscriber<R>,\n              private accumulator: (acc: R, value: T, index: number) => ObservableInput<R>,\n              private acc: R,\n              private concurrent: number) {\n    super(destination);\n  }\n\n  protected _next(value: any): void {\n    if (this.active < this.concurrent) {\n      const index = this.index++;\n      const destination = this.destination;\n      let ish;\n      try {\n        const { accumulator } = this;\n        ish = accumulator(this.acc, value, index);\n      } catch (e) {\n        return destination.error(e);\n      }\n      this.active++;\n      this._innerSub(ish, value, index);\n    } else {\n      this.buffer.push(value);\n    }\n  }\n\n  private _innerSub(ish: any, value: T, index: number): void {\n    const innerSubscriber = new InnerSubscriber(this, value, index);\n    const destination = this.destination as Subscription;\n    destination.add(innerSubscriber);\n    const innerSubscription = subscribeToResult<T, R>(this, ish, undefined, undefined, innerSubscriber);\n    // The returned subscription will usually be the subscriber that was\n    // passed. However, interop subscribers will be wrapped and for\n    // unsubscriptions to chain correctly, the wrapper needs to be added, too.\n    if (innerSubscription !== innerSubscriber) {\n      destination.add(innerSubscription);\n    }\n  }\n\n  protected _complete(): void {\n    this.hasCompleted = true;\n    if (this.active === 0 && this.buffer.length === 0) {\n      if (this.hasValue === false) {\n        this.destination.next(this.acc);\n      }\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    const { destination } = this;\n    this.acc = innerValue;\n    this.hasValue = true;\n    destination.next(innerValue);\n  }\n\n  notifyComplete(innerSub: Subscription): void {\n    const buffer = this.buffer;\n    const destination = this.destination as Subscription;\n    destination.remove(innerSub);\n    this.active--;\n    if (buffer.length > 0) {\n      this._next(buffer.shift());\n    } else if (this.active === 0 && this.hasCompleted) {\n      if (this.hasValue === false) {\n        this.destination.next(this.acc);\n      }\n      this.destination.complete();\n    }\n  }\n}\n","import { reduce } from './reduce';\nimport { MonoTypeOperatorFunction } from '../types';\n\n/**\n * The Min operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the smallest value.\n *\n * ![](min.png)\n *\n * ## Examples\n * Get the minimal value of a series of numbers\n * ```ts\n * import { of } from 'rxjs';\n * import { min } from 'rxjs/operators';\n *\n * of(5, 4, 7, 2, 8).pipe(\n *   min(),\n * )\n * .subscribe(x => console.log(x)); // -> 2\n * ```\n *\n * Use a comparer function to get the minimal item\n * ```typescript\n * import { of } from 'rxjs';\n * import { min } from 'rxjs/operators';\n *\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * of<Person>(\n *   {age: 7, name: 'Foo'},\n *   {age: 5, name: 'Bar'},\n *   {age: 9, name: 'Beer'},\n * ).pipe(\n *   min<Person>( (a: Person, b: Person) => a.age < b.age ? -1 : 1),\n * )\n * .subscribe((x: Person) => console.log(x.name)); // -> 'Bar'\n * ```\n * @see {@link max}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable<R>} An Observable that emits item with the smallest value.\n * @method min\n * @owner Observable\n */\nexport function min<T>(comparer?: (x: T, y: T) => number): MonoTypeOperatorFunction<T> {\n  const min: (x: T, y: T) => T = (typeof comparer === 'function')\n    ? (x, y) => comparer(x, y) < 0 ? x : y\n    : (x, y) => x < y ? x : y;\n  return reduce(min);\n}\n","import { Subject } from '../Subject';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { ConnectableObservable, connectableObservableDescriptor } from '../observable/ConnectableObservable';\nimport { MonoTypeOperatorFunction, OperatorFunction, UnaryFunction, ObservedValueOf, ObservableInput } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function multicast<T>(subject: Subject<T>): UnaryFunction<Observable<T>, ConnectableObservable<T>>;\nexport function multicast<T, O extends ObservableInput<any>>(subject: Subject<T>, selector: (shared: Observable<T>) => O): UnaryFunction<Observable<T>, ConnectableObservable<ObservedValueOf<O>>>;\nexport function multicast<T>(subjectFactory: (this: Observable<T>) => Subject<T>): UnaryFunction<Observable<T>, ConnectableObservable<T>>;\nexport function multicast<T, O extends ObservableInput<any>>(SubjectFactory: (this: Observable<T>) => Subject<T>, selector: (shared: Observable<T>) => O): OperatorFunction<T, ObservedValueOf<O>>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns an Observable that emits the results of invoking a specified selector on items\n * emitted by a ConnectableObservable that shares a single subscription to the underlying stream.\n *\n * ![](multicast.png)\n *\n * @param {Function|Subject} subjectOrSubjectFactory - Factory function to create an intermediate subject through\n * which the source sequence's elements will be multicast to the selector function\n * or Subject to push source elements into.\n * @param {Function} [selector] - Optional selector function that can use the multicasted source stream\n * as many times as needed, without causing multiple subscriptions to the source stream.\n * Subscribers to the given source will receive all notifications of the source from the\n * time of the subscription forward.\n * @return {Observable} An Observable that emits the results of invoking the selector\n * on the items emitted by a `ConnectableObservable` that shares a single subscription to\n * the underlying stream.\n * @method multicast\n * @owner Observable\n */\nexport function multicast<T, R>(subjectOrSubjectFactory: Subject<T> | (() => Subject<T>),\n                                selector?: (source: Observable<T>) => Observable<R>): OperatorFunction<T, R> {\n  return function multicastOperatorFunction(source: Observable<T>): Observable<R> {\n    let subjectFactory: () => Subject<T>;\n    if (typeof subjectOrSubjectFactory === 'function') {\n      subjectFactory = <() => Subject<T>>subjectOrSubjectFactory;\n    } else {\n      subjectFactory = function subjectFactory() {\n        return <Subject<T>>subjectOrSubjectFactory;\n      };\n    }\n\n    if (typeof selector === 'function') {\n      return source.lift(new MulticastOperator(subjectFactory, selector));\n    }\n\n    const connectable: any = Object.create(source, connectableObservableDescriptor);\n    connectable.source = source;\n    connectable.subjectFactory = subjectFactory;\n\n    return <ConnectableObservable<R>> connectable;\n  };\n}\n\nexport class MulticastOperator<T, R> implements Operator<T, R> {\n  constructor(private subjectFactory: () => Subject<T>,\n              private selector: (source: Observable<T>) => Observable<R>) {\n  }\n  call(subscriber: Subscriber<R>, source: any): any {\n    const { selector } = this;\n    const subject = this.subjectFactory();\n    const subscription = selector(subject).subscribe(subscriber);\n    subscription.add(source.subscribe(subject));\n    return subscription;\n  }\n}\n","import { Observable } from '../Observable';\nimport { from } from '../observable/from';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { isArray } from '../util/isArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function onErrorResumeNext<T>(): OperatorFunction<T, T>;\nexport function onErrorResumeNext<T, T2>(v: ObservableInput<T2>): OperatorFunction<T, T | T2>;\nexport function onErrorResumeNext<T, T2, T3>(v: ObservableInput<T2>, v2: ObservableInput<T3>): OperatorFunction<T, T | T2 | T3>;\nexport function onErrorResumeNext<T, T2, T3, T4>(v: ObservableInput<T2>, v2: ObservableInput<T3>, v3: ObservableInput<T4>): OperatorFunction<T, T | T2 | T3 | T4>;\nexport function onErrorResumeNext<T, T2, T3, T4, T5>(v: ObservableInput<T2>, v2: ObservableInput<T3>, v3: ObservableInput<T4>, v4: ObservableInput<T5>): OperatorFunction<T, T | T2 | T3 | T4 | T5>;\nexport function onErrorResumeNext<T, T2, T3, T4, T5, T6>(v: ObservableInput<T2>, v2: ObservableInput<T3>, v3: ObservableInput<T4>, v4: ObservableInput<T5>, v5: ObservableInput<T6>): OperatorFunction<T, T | T2 | T3 | T4 | T5 | T6>;\nexport function onErrorResumeNext<T, T2, T3, T4, T5, T6, T7>(v: ObservableInput<T2>, v2: ObservableInput<T3>, v3: ObservableInput<T4>, v4: ObservableInput<T5>, v5: ObservableInput<T6>, v6: ObservableInput<T7>): OperatorFunction<T, T | T2 | T3 | T4 | T5 | T6 | T7>;\nexport function onErrorResumeNext<T, R>(...observables: Array<ObservableInput<any>>): OperatorFunction<T, T | R>;\nexport function onErrorResumeNext<T, R>(array: ObservableInput<any>[]): OperatorFunction<T, T | R>;\n/* tslint:enable:max-line-length */\n\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * ![](onErrorResumeNext.png)\n *\n * `onErrorResumeNext` is an operator that accepts a series of Observables, provided either directly as\n * arguments or as an array. If no single Observable is provided, returned Observable will simply behave the same\n * as the source.\n *\n * `onErrorResumeNext` returns an Observable that starts by subscribing and re-emitting values from the source Observable.\n * When its stream of values ends - no matter if Observable completed or emitted an error - `onErrorResumeNext`\n * will subscribe to the first Observable that was passed as an argument to the method. It will start re-emitting\n * its values as well and - again - when that stream ends, `onErrorResumeNext` will proceed to subscribing yet another\n * Observable in provided series, no matter if previous Observable completed or ended with an error. This will\n * be happening until there is no more Observables left in the series, at which point returned Observable will\n * complete - even if the last subscribed stream ended with an error.\n *\n * `onErrorResumeNext` can be therefore thought of as version of {@link concat} operator, which is more permissive\n * when it comes to the errors emitted by its input Observables. While `concat` subscribes to the next Observable\n * in series only if previous one successfully completed, `onErrorResumeNext` subscribes even if it ended with\n * an error.\n *\n * Note that you do not get any access to errors emitted by the Observables. In particular do not\n * expect these errors to appear in error callback passed to {@link Observable#subscribe}. If you want to take\n * specific actions based on what error was emitted by an Observable, you should try out {@link catchError} instead.\n *\n *\n * ## Example\n * Subscribe to the next Observable after map fails\n * ```ts\n * import { of } from 'rxjs';\n * import { onErrorResumeNext, map } from 'rxjs/operators';\n *\n * of(1, 2, 3, 0).pipe(\n *   map(x => {\n *       if (x === 0) { throw Error(); }\n *        return 10 / x;\n *   }),\n *   onErrorResumeNext(of(1, 2, 3)),\n * )\n * .subscribe(\n *   val => console.log(val),\n *   err => console.log(err),          // Will never be called.\n *   () => console.log('that\\'s it!')\n * );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"that's it!\"\n * ```\n *\n * @see {@link concat}\n * @see {@link catchError}\n *\n * @param {...ObservableInput} observables Observables passed either directly or as an array.\n * @return {Observable} An Observable that emits values from source Observable, but - if it errors - subscribes\n * to the next passed Observable and so on, until it completes or runs out of Observables.\n * @method onErrorResumeNext\n * @owner Observable\n */\n\nexport function onErrorResumeNext<T, R>(...nextSources: Array<ObservableInput<any> |\n                                                       Array<ObservableInput<any>>>): OperatorFunction<T, R> {\n  if (nextSources.length === 1 && isArray(nextSources[0])) {\n    nextSources = <Array<Observable<any>>>nextSources[0];\n  }\n\n  return (source: Observable<T>) => source.lift(new OnErrorResumeNextOperator<T, R>(nextSources));\n}\n\n/* tslint:disable:max-line-length */\nexport function onErrorResumeNextStatic<R>(v: ObservableInput<R>): Observable<R>;\nexport function onErrorResumeNextStatic<T2, T3, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>): Observable<R>;\nexport function onErrorResumeNextStatic<T2, T3, T4, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>): Observable<R>;\nexport function onErrorResumeNextStatic<T2, T3, T4, T5, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>): Observable<R>;\nexport function onErrorResumeNextStatic<T2, T3, T4, T5, T6, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>): Observable<R>;\n\nexport function onErrorResumeNextStatic<R>(...observables: Array<ObservableInput<any> | ((...values: Array<any>) => R)>): Observable<R>;\nexport function onErrorResumeNextStatic<R>(array: ObservableInput<any>[]): Observable<R>;\n/* tslint:enable:max-line-length */\n\nexport function onErrorResumeNextStatic<T, R>(...nextSources: Array<ObservableInput<any> |\n  Array<ObservableInput<any>> |\n  ((...values: Array<any>) => R)>): Observable<R> {\n  let source: ObservableInput<any> = null;\n\n  if (nextSources.length === 1 && isArray(nextSources[0])) {\n    nextSources = <Array<ObservableInput<any>>>nextSources[0];\n  }\n  source = nextSources.shift();\n\n  return from(source, null).lift(new OnErrorResumeNextOperator<T, R>(nextSources));\n}\n\nclass OnErrorResumeNextOperator<T, R> implements Operator<T, R> {\n  constructor(private nextSources: Array<ObservableInput<any>>) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new OnErrorResumeNextSubscriber(subscriber, this.nextSources));\n  }\n}\n\nclass OnErrorResumeNextSubscriber<T, R> extends OuterSubscriber<T, R> {\n  constructor(protected destination: Subscriber<T>,\n              private nextSources: Array<ObservableInput<any>>) {\n    super(destination);\n  }\n\n  notifyError(error: any, innerSub: InnerSubscriber<T, any>): void {\n    this.subscribeToNextSource();\n  }\n\n  notifyComplete(innerSub: InnerSubscriber<T, any>): void {\n    this.subscribeToNextSource();\n  }\n\n  protected _error(err: any): void {\n    this.subscribeToNextSource();\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.subscribeToNextSource();\n    this.unsubscribe();\n  }\n\n  private subscribeToNextSource(): void {\n    const next = this.nextSources.shift();\n    if (!!next) {\n      const innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n      const destination = this.destination as Subscription;\n      destination.add(innerSubscriber);\n      const innerSubscription = subscribeToResult(this, next, undefined, undefined, innerSubscriber);\n      // The returned subscription will usually be the subscriber that was\n      // passed. However, interop subscribers will be wrapped and for\n      // unsubscriptions to chain correctly, the wrapper needs to be added, too.\n      if (innerSubscription !== innerSubscriber) {\n        destination.add(innerSubscription);\n      }\n    } else {\n      this.destination.complete();\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction } from '../types';\n\n/**\n * Groups pairs of consecutive emissions together and emits them as an array of\n * two values.\n *\n * <span class=\"informal\">Puts the current value and previous value together as\n * an array, and emits that.</span>\n *\n * ![](pairwise.png)\n *\n * The Nth emission from the source Observable will cause the output Observable\n * to emit an array [(N-1)th, Nth] of the previous and the current value, as a\n * pair. For this reason, `pairwise` emits on the second and subsequent\n * emissions from the source Observable, but not on the first emission, because\n * there is no previous value in that case.\n *\n * ## Example\n * On every click (starting from the second), emit the relative distance to the previous click\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { pairwise, map } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const pairs = clicks.pipe(pairwise());\n * const distance = pairs.pipe(\n *   map(pair => {\n *     const x0 = pair[0].clientX;\n *     const y0 = pair[0].clientY;\n *     const x1 = pair[1].clientX;\n *     const y1 = pair[1].clientY;\n *     return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n *   }),\n * );\n * distance.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n *\n * @return {Observable<Array<T>>} An Observable of pairs (as arrays) of\n * consecutive values from the source Observable.\n * @method pairwise\n * @owner Observable\n */\nexport function pairwise<T>(): OperatorFunction<T, [T, T]> {\n  return (source: Observable<T>) => source.lift(new PairwiseOperator());\n}\n\nclass PairwiseOperator<T> implements Operator<T, [T, T]> {\n  call(subscriber: Subscriber<[T, T]>, source: any): any {\n    return source.subscribe(new PairwiseSubscriber(subscriber));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass PairwiseSubscriber<T> extends Subscriber<T> {\n  private prev: T;\n  private hasPrev: boolean = false;\n\n  constructor(destination: Subscriber<[T, T]>) {\n    super(destination);\n  }\n\n  _next(value: T): void {\n    let pair: [T, T] | undefined;\n\n    if (this.hasPrev) {\n      pair = [this.prev, value];\n    } else {\n      this.hasPrev = true;\n    }\n\n    this.prev = value;\n\n    if (pair) {\n      this.destination.next(pair);\n    }\n  }\n}\n","import { not } from '../util/not';\nimport { filter } from './filter';\nimport { Observable } from '../Observable';\nimport { UnaryFunction } from '../types';\n\n/**\n * Splits the source Observable into two, one with values that satisfy a\n * predicate, and another with values that don't satisfy the predicate.\n *\n * <span class=\"informal\">It's like {@link filter}, but returns two Observables:\n * one like the output of {@link filter}, and the other with values that did not\n * pass the condition.</span>\n *\n * ![](partition.png)\n *\n * `partition` outputs an array with two Observables that partition the values\n * from the source Observable through the given `predicate` function. The first\n * Observable in that array emits source values for which the predicate argument\n * returns true. The second Observable emits source values for which the\n * predicate returns false. The first behaves like {@link filter} and the second\n * behaves like {@link filter} with the predicate negated.\n *\n * ## Example\n * Partition click events into those on DIV elements and those elsewhere\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { partition } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const parts = clicks.pipe(partition(ev => ev.target.tagName === 'DIV'));\n * const clicksOnDivs = parts[0];\n * const clicksElsewhere = parts[1];\n * clicksOnDivs.subscribe(x => console.log('DIV clicked: ', x));\n * clicksElsewhere.subscribe(x => console.log('Other clicked: ', x));\n * ```\n *\n * @see {@link filter}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted on the first Observable in the returned array, if\n * `false` the value is emitted on the second Observable in the array. The\n * `index` parameter is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {[Observable<T>, Observable<T>]} An array with two Observables: one\n * with values that passed the predicate, and another with values that did not\n * pass the predicate.\n * @method partition\n * @owner Observable\n * @deprecated use `partition` static creation function instead\n */\nexport function partition<T>(predicate: (value: T, index: number) => boolean,\n                             thisArg?: any): UnaryFunction<Observable<T>, [Observable<T>, Observable<T>]> {\n  return (source: Observable<T>) => [\n    filter(predicate, thisArg)(source),\n    filter(not(predicate, thisArg) as any)(source)\n  ] as [Observable<T>, Observable<T>];\n}\n","import { Observable } from '../Observable';\nimport { map } from './map';\nimport { OperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function pluck<T, K1 extends keyof T>(k1: K1): OperatorFunction<T, T[K1]>;\nexport function pluck<T, K1 extends keyof T, K2 extends keyof T[K1]>(k1: K1, k2: K2): OperatorFunction<T, T[K1][K2]>;\nexport function pluck<T, K1 extends keyof T, K2 extends keyof T[K1], K3 extends keyof T[K1][K2]>(k1: K1, k2: K2, k3: K3): OperatorFunction<T, T[K1][K2][K3]>;\nexport function pluck<T, K1 extends keyof T, K2 extends keyof T[K1], K3 extends keyof T[K1][K2], K4 extends keyof T[K1][K2][K3]>(k1: K1, k2: K2, k3: K3, k4: K4): OperatorFunction<T, T[K1][K2][K3][K4]>;\nexport function pluck<T, K1 extends keyof T, K2 extends keyof T[K1], K3 extends keyof T[K1][K2], K4 extends keyof T[K1][K2][K3], K5 extends keyof T[K1][K2][K3][K4]>(k1: K1, k2: K2, k3: K3, k4: K4, k5: K5): OperatorFunction<T, T[K1][K2][K3][K4][K5]>;\nexport function pluck<T, K1 extends keyof T, K2 extends keyof T[K1], K3 extends keyof T[K1][K2], K4 extends keyof T[K1][K2][K3], K5 extends keyof T[K1][K2][K3][K4], K6 extends keyof T[K1][K2][K3][K4][K5]>(k1: K1, k2: K2, k3: K3, k4: K4, k5: K5, k6: K6): OperatorFunction<T, T[K1][K2][K3][K4][K5][K6]>;\nexport function pluck<T, R>(...properties: string[]): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Maps each source value (an object) to its specified nested property.\n *\n * <span class=\"informal\">Like {@link map}, but meant only for picking one of\n * the nested properties of every emitted object.</span>\n *\n * ![](pluck.png)\n *\n * Given a list of strings describing a path to an object property, retrieves\n * the value of a specified nested property from all values in the source\n * Observable. If a property can't be resolved, it will return `undefined` for\n * that value.\n *\n * ## Example\n * Map every click to the tagName of the clicked target element\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { pluck } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const tagNames = clicks.pipe(pluck('target', 'tagName'));\n * tagNames.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link map}\n *\n * @param {...string} properties The nested properties to pluck from each source\n * value (an object).\n * @return {Observable} A new Observable of property values from the source values.\n * @method pluck\n * @owner Observable\n */\nexport function pluck<T, R>(...properties: string[]): OperatorFunction<T, R> {\n  const length = properties.length;\n  if (length === 0) {\n    throw new Error('list of properties cannot be empty.');\n  }\n  return (source: Observable<T>) => map(plucker(properties, length))(source as any);\n}\n\nfunction plucker(props: string[], length: number): (x: string) => any {\n  const mapper = (x: string) => {\n    let currentProp = x;\n    for (let i = 0; i < length; i++) {\n      const p = currentProp[props[i]];\n      if (typeof p !== 'undefined') {\n        currentProp = p;\n      } else {\n        return undefined;\n      }\n    }\n    return currentProp;\n  };\n\n  return mapper;\n}\n","import { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nimport { multicast } from './multicast';\nimport { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { MonoTypeOperatorFunction, OperatorFunction, UnaryFunction, ObservableInput, ObservedValueOf } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function publish<T>(): UnaryFunction<Observable<T>, ConnectableObservable<T>>;\nexport function publish<T, O extends ObservableInput<any>>(selector: (shared: Observable<T>) => O): OperatorFunction<T, ObservedValueOf<O>>;\nexport function publish<T>(selector: MonoTypeOperatorFunction<T>): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns a ConnectableObservable, which is a variety of Observable that waits until its connect method is called\n * before it begins emitting items to those Observers that have subscribed to it.\n *\n * <span class=\"informal\">Makes a cold Observable hot</span>\n *\n * ![](publish.png)\n *\n * ## Examples\n * Make source$ hot by applying publish operator, then merge each inner observable into a single one\n * and subscribe.\n * ```ts\n * import { of, zip, interval, merge } from \"rxjs\";\n * import { map, publish, tap } from \"rxjs/operators\";\n *\n * const source$ = zip(interval(2000), of(1, 2, 3, 4, 5, 6, 7, 8, 9)).pipe(\n *   map(values => values[1])\n * );\n *\n * source$\n *   .pipe(\n *     publish(multicasted$ =>\n *       merge(\n *         multicasted$.pipe(tap(x => console.log('Stream 1:', x))),\n *         multicasted$.pipe(tap(x => console.log('Stream 2:', x))),\n *         multicasted$.pipe(tap(x => console.log('Stream 3:', x))),\n *       )\n *     )\n *   )\n *   .subscribe();\n *\n * // Results every two seconds\n * // Stream 1: 1\n * // Stream 2: 1\n * // Stream 3: 1\n * // ...\n * // Stream 1: 9\n * // Stream 2: 9\n * // Stream 3: 9\n * ```\n *\n * @param {Function} [selector] - Optional selector function which can use the multicasted source sequence as many times\n * as needed, without causing multiple subscriptions to the source sequence.\n * Subscribers to the given source will receive all notifications of the source from the time of the subscription on.\n * @return A ConnectableObservable that upon connection causes the source Observable to emit items to its Observers.\n * @method publish\n * @owner Observable\n *\n *\n */\nexport function publish<T, R>(selector?: OperatorFunction<T, R>): MonoTypeOperatorFunction<T> | OperatorFunction<T, R> {\n  return selector ?\n    multicast(() => new Subject<T>(), selector) :\n    multicast(new Subject<T>());\n}\n","import { Observable } from '../Observable';\nimport { BehaviorSubject } from '../BehaviorSubject';\nimport { multicast } from './multicast';\nimport { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { UnaryFunction } from '../types';\n\n/**\n * @param value\n * @return {ConnectableObservable<T>}\n * @method publishBehavior\n * @owner Observable\n */\nexport function publishBehavior<T>(value: T):  UnaryFunction<Observable<T>, ConnectableObservable<T>> {\n  return (source: Observable<T>) => multicast(new BehaviorSubject<T>(value))(source) as ConnectableObservable<T>;\n}\n","import { Observable } from '../Observable';\nimport { AsyncSubject } from '../AsyncSubject';\nimport { multicast } from './multicast';\nimport { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { UnaryFunction } from '../types';\n\n/**\n * Returns a connectable observable sequence that shares a single subscription to the\n * underlying sequence containing only the last notification.\n *\n * ![](publishLast.png)\n *\n * Similar to {@link publish}, but it waits until the source observable completes and stores\n * the last emitted value.\n * Similarly to {@link publishReplay} and {@link publishBehavior}, this keeps storing the last\n * value even if it has no more subscribers. If subsequent subscriptions happen, they will\n * immediately get that last stored value and complete.\n *\n * ## Example\n *\n * ```ts\n * import { interval } from 'rxjs';\n * import { publishLast, tap, take } from 'rxjs/operators';\n *\n * const connectable =\n *   interval(1000)\n *     .pipe(\n *       tap(x => console.log(\"side effect\", x)),\n *       take(3),\n *       publishLast());\n *\n * connectable.subscribe(\n *   x => console.log(  \"Sub. A\", x),\n *   err => console.log(\"Sub. A Error\", err),\n *   () => console.log( \"Sub. A Complete\"));\n *\n * connectable.subscribe(\n *   x => console.log(  \"Sub. B\", x),\n *   err => console.log(\"Sub. B Error\", err),\n *   () => console.log( \"Sub. B Complete\"));\n *\n * connectable.connect();\n *\n * // Results:\n * //    \"side effect 0\"\n * //    \"side effect 1\"\n * //    \"side effect 2\"\n * //    \"Sub. A 2\"\n * //    \"Sub. B 2\"\n * //    \"Sub. A Complete\"\n * //    \"Sub. B Complete\"\n * ```\n *\n * @see {@link ConnectableObservable}\n * @see {@link publish}\n * @see {@link publishReplay}\n * @see {@link publishBehavior}\n *\n * @return {ConnectableObservable} An observable sequence that contains the elements of a\n * sequence produced by multicasting the source sequence.\n * @method publishLast\n * @owner Observable\n */\n\nexport function publishLast<T>(): UnaryFunction<Observable<T>, ConnectableObservable<T>> {\n  return (source: Observable<T>) => multicast(new AsyncSubject<T>())(source);\n}\n","import { Observable } from '../Observable';\nimport { ReplaySubject } from '../ReplaySubject';\nimport { multicast } from './multicast';\nimport { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { UnaryFunction, MonoTypeOperatorFunction, OperatorFunction, SchedulerLike, ObservableInput, ObservedValueOf } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function publishReplay<T>(bufferSize?: number, windowTime?: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\nexport function publishReplay<T, O extends ObservableInput<any>>(bufferSize?: number, windowTime?: number, selector?: (shared: Observable<T>) => O, scheduler?: SchedulerLike): OperatorFunction<T, ObservedValueOf<O>>;\n/* tslint:enable:max-line-length */\n\nexport function publishReplay<T, R>(bufferSize?: number,\n                                    windowTime?: number,\n                                    selectorOrScheduler?: SchedulerLike | OperatorFunction<T, R>,\n                                    scheduler?: SchedulerLike): UnaryFunction<Observable<T>, ConnectableObservable<R>> {\n\n  if (selectorOrScheduler && typeof selectorOrScheduler !== 'function') {\n    scheduler = selectorOrScheduler;\n  }\n\n  const selector = typeof selectorOrScheduler === 'function' ? selectorOrScheduler : undefined;\n  const subject = new ReplaySubject<T>(bufferSize, windowTime, scheduler);\n\n  return (source: Observable<T>) => multicast(() => subject, selector)(source) as ConnectableObservable<R>;\n}\n","import { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { MonoTypeOperatorFunction, OperatorFunction } from '../types';\nimport { race as raceStatic } from '../observable/race';\n\n/* tslint:disable:max-line-length */\n/** @deprecated Deprecated in favor of static race. */\nexport function race<T>(observables: Array<Observable<T>>): MonoTypeOperatorFunction<T>;\n/** @deprecated Deprecated in favor of static race. */\nexport function race<T, R>(observables: Array<Observable<T>>): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static race. */\nexport function race<T>(...observables: Array<Observable<T> | Array<Observable<T>>>): MonoTypeOperatorFunction<T>;\n/** @deprecated Deprecated in favor of static race. */\nexport function race<T, R>(...observables: Array<Observable<any> | Array<Observable<any>>>): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns an Observable that mirrors the first source Observable to emit a next,\n * error or complete notification from the combination of this Observable and supplied Observables.\n * @param {...Observables} ...observables Sources used to race for which Observable emits first.\n * @return {Observable} An Observable that mirrors the output of the first Observable to emit an item.\n * @method race\n * @owner Observable\n * @deprecated Deprecated in favor of static {@link race}.\n */\nexport function race<T>(...observables: (Observable<T> | Observable<T>[])[]): MonoTypeOperatorFunction<T> {\n  return function raceOperatorFunction(source: Observable<T>) {\n    // if the only argument is an array, it was most likely called with\n    // `pair([obs1, obs2, ...])`\n    if (observables.length === 1 && isArray(observables[0])) {\n      observables = observables[0] as Observable<T>[];\n    }\n\n    return source.lift.call(raceStatic(source, ...(observables as Observable<T>[])));\n  };\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { empty } from '../observable/empty';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that will resubscribe to the source stream when the source stream completes, at most count times.\n *\n * <span class=\"informal\">Repeats all values emitted on the source. It's like {@link retry}, but for non error cases.</span>\n *\n * ![](repeat.png)\n *\n * Similar to {@link retry}, this operator repeats the stream of items emitted by the source for non error cases.\n * Repeat can be useful for creating observables that are meant to have some repeated pattern or rhythm.\n *\n * Note: `repeat(0)` returns an empty observable and `repeat()` will repeat forever\n *\n * ## Example\n * Repeat a message stream\n * ```ts\n * import { of } from 'rxjs';\n * import { repeat, delay } from 'rxjs/operators';\n *\n * const source = of('Repeat message');\n * const example = source.pipe(repeat(3));\n * example.subscribe(x => console.log(x));\n *\n * // Results\n * // Repeat message\n * // Repeat message\n * // Repeat message\n * ```\n *\n * Repeat 3 values, 2 times\n * ```ts\n * import { interval } from 'rxjs';\n * import { repeat, take } from 'rxjs/operators';\n *\n * const source = interval(1000);\n * const example = source.pipe(take(3), repeat(2));\n * example.subscribe(x => console.log(x));\n *\n * // Results every second\n * // 0\n * // 1\n * // 2\n * // 0\n * // 1\n * // 2\n * ```\n *\n * @see {@link repeatWhen}\n * @see {@link retry}\n *\n * @param {number} [count] The number of times the source Observable items are repeated, a count of 0 will yield\n * an empty Observable.\n * @return {Observable} An Observable that will resubscribe to the source stream when the source stream completes\n * , at most count times.\n * @method repeat\n * @owner Observable\n */\nexport function repeat<T>(count: number = -1): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => {\n    if (count === 0) {\n      return empty();\n    } else if (count < 0) {\n      return source.lift(new RepeatOperator(-1, source));\n    } else {\n      return source.lift(new RepeatOperator(count - 1, source));\n    }\n  };\n}\n\nclass RepeatOperator<T> implements Operator<T, T> {\n  constructor(private count: number,\n              private source: Observable<T>) {\n  }\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new RepeatSubscriber(subscriber, this.count, this.source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass RepeatSubscriber<T> extends Subscriber<T> {\n  constructor(destination: Subscriber<any>,\n              private count: number,\n              private source: Observable<T>) {\n    super(destination);\n  }\n  complete() {\n    if (!this.isStopped) {\n      const { source, count } = this;\n      if (count === 0) {\n        return super.complete();\n      } else if (count > -1) {\n        this.count = count - 1;\n      }\n      source.subscribe(this._unsubscribeAndRecycle());\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\n\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that mirrors the source Observable with the exception of a `complete`. If the source\n * Observable calls `complete`, this method will emit to the Observable returned from `notifier`. If that Observable\n * calls `complete` or `error`, then this method will call `complete` or `error` on the child subscription. Otherwise\n * this method will resubscribe to the source Observable.\n *\n * ![](repeatWhen.png)\n *\n * ## Example\n * Repeat a message stream on click\n * ```ts\n * import { of, fromEvent } from 'rxjs';\n * import { repeatWhen } from 'rxjs/operators';\n *\n * const source = of('Repeat message');\n * const documentClick$ = fromEvent(document, 'click');\n *\n * source.pipe(repeatWhen(() => documentClick$)\n * ).subscribe(data => console.log(data))\n * ```\n * @see {@link repeat}\n * @see {@link retry}\n * @see {@link retryWhen}\n *\n * @param {function(notifications: Observable): Observable} notifier - Receives an Observable of notifications with\n * which a user can `complete` or `error`, aborting the repetition.\n * @return {Observable} The source Observable modified with repeat logic.\n * @method repeatWhen\n * @owner Observable\n */\nexport function repeatWhen<T>(notifier: (notifications: Observable<any>) => Observable<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new RepeatWhenOperator(notifier));\n}\n\nclass RepeatWhenOperator<T> implements Operator<T, T> {\n  constructor(protected notifier: (notifications: Observable<any>) => Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new RepeatWhenSubscriber(subscriber, this.notifier, source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass RepeatWhenSubscriber<T, R> extends OuterSubscriber<T, R> {\n\n  private notifications: Subject<any>;\n  private retries: Observable<any>;\n  private retriesSubscription: Subscription;\n  private sourceIsBeingSubscribedTo: boolean = true;\n\n  constructor(destination: Subscriber<R>,\n              private notifier: (notifications: Observable<any>) => Observable<any>,\n              private source: Observable<T>) {\n    super(destination);\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.sourceIsBeingSubscribedTo = true;\n    this.source.subscribe(this);\n  }\n\n  notifyComplete(innerSub: InnerSubscriber<T, R>): void {\n    if (this.sourceIsBeingSubscribedTo === false) {\n      return super.complete();\n    }\n  }\n\n  complete() {\n    this.sourceIsBeingSubscribedTo = false;\n\n    if (!this.isStopped) {\n      if (!this.retries) {\n        this.subscribeToRetries();\n      }\n      if (!this.retriesSubscription || this.retriesSubscription.closed) {\n        return super.complete();\n      }\n\n      this._unsubscribeAndRecycle();\n      this.notifications.next();\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    const { notifications, retriesSubscription } = this;\n    if (notifications) {\n      notifications.unsubscribe();\n      this.notifications = null;\n    }\n    if (retriesSubscription) {\n      retriesSubscription.unsubscribe();\n      this.retriesSubscription = null;\n    }\n    this.retries = null;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribeAndRecycle(): Subscriber<T> {\n    const { _unsubscribe } = this;\n\n    this._unsubscribe = null;\n    super._unsubscribeAndRecycle();\n    this._unsubscribe = _unsubscribe;\n\n    return this;\n  }\n\n  private subscribeToRetries() {\n    this.notifications = new Subject();\n    let retries;\n    try {\n      const { notifier } = this;\n      retries = notifier(this.notifications);\n    } catch (e) {\n      return super.complete();\n    }\n    this.retries = retries;\n    this.retriesSubscription = subscribeToResult(this, retries);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\n\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will resubscribe to the source Observable for a maximum of `count` resubscriptions (given\n * as a number parameter) rather than propagating the `error` call.\n *\n * ![](retry.png)\n *\n * Any and all items emitted by the source Observable will be emitted by the resulting Observable, even those emitted\n * during failed subscriptions. For example, if an Observable fails at first but emits [1, 2] then succeeds the second\n * time and emits: [1, 2, 3, 4, 5] then the complete stream of emissions and notifications\n * would be: [1, 2, 1, 2, 3, 4, 5, `complete`].\n *\n * ## Example\n * ```ts\n * import { interval, of, throwError } from 'rxjs';\n * import { mergeMap, retry } from 'rxjs/operators';\n *\n * const source = interval(1000);\n * const example = source.pipe(\n *   mergeMap(val => {\n *     if(val > 5){\n *       return throwError('Error!');\n *     }\n *     return of(val);\n *   }),\n *   //retry 2 times on error\n *   retry(2)\n * );\n *\n * const subscribe = example.subscribe({\n *   next: val => console.log(val),\n *   error: val => console.log(`${val}: Retried 2 times then quit!`)\n * });\n *\n * // Output:\n * // 0..1..2..3..4..5..\n * // 0..1..2..3..4..5..\n * // 0..1..2..3..4..5..\n * // \"Error!: Retried 2 times then quit!\"\n * ```\n *\n * @param {number} count - Number of retry attempts before failing.\n * @return {Observable} The source Observable modified with the retry logic.\n * @method retry\n * @owner Observable\n */\nexport function retry<T>(count: number = -1): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new RetryOperator(count, source));\n}\n\nclass RetryOperator<T> implements Operator<T, T> {\n  constructor(private count: number,\n              private source: Observable<T>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new RetrySubscriber(subscriber, this.count, this.source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass RetrySubscriber<T> extends Subscriber<T> {\n  constructor(destination: Subscriber<any>,\n              private count: number,\n              private source: Observable<T>) {\n    super(destination);\n  }\n  error(err: any) {\n    if (!this.isStopped) {\n      const { source, count } = this;\n      if (count === 0) {\n        return super.error(err);\n      } else if (count > -1) {\n        this.count = count - 1;\n      }\n      source.subscribe(this._unsubscribeAndRecycle());\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\n\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will emit the Throwable that caused the error to the Observable returned from `notifier`.\n * If that Observable calls `complete` or `error` then this method will call `complete` or `error` on the child\n * subscription. Otherwise this method will resubscribe to the source Observable.\n *\n * ![](retryWhen.png)\n *\n * @param {function(errors: Observable): Observable} notifier - Receives an Observable of notifications with which a\n * user can `complete` or `error`, aborting the retry.\n * @return {Observable} The source Observable modified with retry logic.\n * @method retryWhen\n * @owner Observable\n */\nexport function retryWhen<T>(notifier: (errors: Observable<any>) => Observable<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new RetryWhenOperator(notifier, source));\n}\n\nclass RetryWhenOperator<T> implements Operator<T, T> {\n  constructor(protected notifier: (errors: Observable<any>) => Observable<any>,\n              protected source: Observable<T>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new RetryWhenSubscriber(subscriber, this.notifier, this.source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass RetryWhenSubscriber<T, R> extends OuterSubscriber<T, R> {\n\n  private errors: Subject<any>;\n  private retries: Observable<any>;\n  private retriesSubscription: Subscription;\n\n  constructor(destination: Subscriber<R>,\n              private notifier: (errors: Observable<any>) => Observable<any>,\n              private source: Observable<T>) {\n    super(destination);\n  }\n\n  error(err: any) {\n    if (!this.isStopped) {\n\n      let errors = this.errors;\n      let retries: any = this.retries;\n      let retriesSubscription = this.retriesSubscription;\n\n      if (!retries) {\n        errors = new Subject();\n        try {\n          const { notifier } = this;\n          retries = notifier(errors);\n        } catch (e) {\n          return super.error(e);\n        }\n        retriesSubscription = subscribeToResult(this, retries);\n      } else {\n        this.errors = null;\n        this.retriesSubscription = null;\n      }\n\n      this._unsubscribeAndRecycle();\n\n      this.errors = errors;\n      this.retries = retries;\n      this.retriesSubscription = retriesSubscription;\n\n      errors.next(err);\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    const { errors, retriesSubscription } = this;\n    if (errors) {\n      errors.unsubscribe();\n      this.errors = null;\n    }\n    if (retriesSubscription) {\n      retriesSubscription.unsubscribe();\n      this.retriesSubscription = null;\n    }\n    this.retries = null;\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    const { _unsubscribe } = this;\n\n    this._unsubscribe = null;\n    this._unsubscribeAndRecycle();\n    this._unsubscribe = _unsubscribe;\n\n    this.source.subscribe(this);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Emits the most recently emitted value from the source Observable whenever\n * another Observable, the `notifier`, emits.\n *\n * <span class=\"informal\">It's like {@link sampleTime}, but samples whenever\n * the `notifier` Observable emits something.</span>\n *\n * ![](sample.png)\n *\n * Whenever the `notifier` Observable emits a value or completes, `sample`\n * looks at the source Observable and emits whichever value it has most recently\n * emitted since the previous sampling, unless the source has not emitted\n * anything since the previous sampling. The `notifier` is subscribed to as soon\n * as the output Observable is subscribed.\n *\n * ## Example\n * On every click, sample the most recent \"seconds\" timer\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { sample } from 'rxjs/operators';\n *\n * const seconds = interval(1000);\n * const clicks = fromEvent(document, 'click');\n * const result = seconds.pipe(sample(clicks));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {Observable<any>} notifier The Observable to use for sampling the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable whenever the notifier Observable\n * emits value or completes.\n * @method sample\n * @owner Observable\n */\nexport function sample<T>(notifier: Observable<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new SampleOperator(notifier));\n}\n\nclass SampleOperator<T> implements Operator<T, T> {\n  constructor(private notifier: Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    const sampleSubscriber = new SampleSubscriber(subscriber);\n    const subscription = source.subscribe(sampleSubscriber);\n    subscription.add(subscribeToResult(sampleSubscriber, this.notifier));\n    return subscription;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SampleSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private value: T;\n  private hasValue: boolean = false;\n\n  protected _next(value: T) {\n    this.value = value;\n    this.hasValue = true;\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.emitValue();\n  }\n\n  notifyComplete(): void {\n    this.emitValue();\n  }\n\n  emitValue() {\n    if (this.hasValue) {\n      this.hasValue = false;\n      this.destination.next(this.value);\n    }\n  }\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nimport { MonoTypeOperatorFunction, SchedulerAction, SchedulerLike, TeardownLogic } from '../types';\n\n/**\n * Emits the most recently emitted value from the source Observable within\n * periodic time intervals.\n *\n * <span class=\"informal\">Samples the source Observable at periodic time\n * intervals, emitting what it samples.</span>\n *\n * ![](sampleTime.png)\n *\n * `sampleTime` periodically looks at the source Observable and emits whichever\n * value it has most recently emitted since the previous sampling, unless the\n * source has not emitted anything since the previous sampling. The sampling\n * happens periodically in time every `period` milliseconds (or the time unit\n * defined by the optional `scheduler` argument). The sampling starts as soon as\n * the output Observable is subscribed.\n *\n * ## Example\n * Every second, emit the most recent click at most once\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { sampleTime } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(sampleTime(1000));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {number} period The sampling period expressed in milliseconds or the\n * time unit determined internally by the optional `scheduler`.\n * @param {SchedulerLike} [scheduler=async] The {@link SchedulerLike} to use for\n * managing the timers that handle the sampling.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable at the specified time interval.\n * @method sampleTime\n * @owner Observable\n */\nexport function sampleTime<T>(period: number, scheduler: SchedulerLike = async): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new SampleTimeOperator(period, scheduler));\n}\n\nclass SampleTimeOperator<T> implements Operator<T, T> {\n  constructor(private period: number,\n              private scheduler: SchedulerLike) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new SampleTimeSubscriber(subscriber, this.period, this.scheduler));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SampleTimeSubscriber<T> extends Subscriber<T> {\n  lastValue: T;\n  hasValue: boolean = false;\n\n  constructor(destination: Subscriber<T>,\n              private period: number,\n              private scheduler: SchedulerLike) {\n    super(destination);\n    this.add(scheduler.schedule(dispatchNotification, period, { subscriber: this, period }));\n  }\n\n  protected _next(value: T) {\n    this.lastValue = value;\n    this.hasValue = true;\n  }\n\n  notifyNext() {\n    if (this.hasValue) {\n      this.hasValue = false;\n      this.destination.next(this.lastValue);\n    }\n  }\n}\n\nfunction dispatchNotification<T>(this: SchedulerAction<any>, state: any) {\n  let { subscriber, period } = state;\n  subscriber.notifyNext();\n  this.schedule(state, period);\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\n\nimport { Observer, OperatorFunction } from '../types';\n\n/**\n * Compares all values of two observables in sequence using an optional comparator function\n * and returns an observable of a single boolean value representing whether or not the two sequences\n * are equal.\n *\n * <span class=\"informal\">Checks to see of all values emitted by both observables are equal, in order.</span>\n *\n * ![](sequenceEqual.png)\n *\n * `sequenceEqual` subscribes to two observables and buffers incoming values from each observable. Whenever either\n * observable emits a value, the value is buffered and the buffers are shifted and compared from the bottom\n * up; If any value pair doesn't match, the returned observable will emit `false` and complete. If one of the\n * observables completes, the operator will wait for the other observable to complete; If the other\n * observable emits before completing, the returned observable will emit `false` and complete. If one observable never\n * completes or emits after the other complets, the returned observable will never complete.\n *\n * ## Example\n * figure out if the Konami code matches\n * ```ts\n * import { from, fromEvent } from 'rxjs';\n * import { sequenceEqual, bufferCount, mergeMap, map } from 'rxjs/operators';\n *\n * const codes = from([\n *   'ArrowUp',\n *   'ArrowUp',\n *   'ArrowDown',\n *   'ArrowDown',\n *   'ArrowLeft',\n *   'ArrowRight',\n *   'ArrowLeft',\n *   'ArrowRight',\n *   'KeyB',\n *   'KeyA',\n *   'Enter', // no start key, clearly.\n * ]);\n *\n * const keys = fromEvent(document, 'keyup').pipe(map(e => e.code));\n * const matches = keys.pipe(\n *   bufferCount(11, 1),\n *   mergeMap(\n *     last11 => from(last11).pipe(sequenceEqual(codes)),\n *   ),\n * );\n * matches.subscribe(matched => console.log('Successful cheat at Contra? ', matched));\n * ```\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n * @see {@link withLatestFrom}\n *\n * @param {Observable} compareTo The observable sequence to compare the source sequence to.\n * @param {function} [comparator] An optional function to compare each value pair\n * @return {Observable} An Observable of a single boolean value representing whether or not\n * the values emitted by both observables were equal in sequence.\n * @method sequenceEqual\n * @owner Observable\n */\nexport function sequenceEqual<T>(compareTo: Observable<T>,\n                                 comparator?: (a: T, b: T) => boolean): OperatorFunction<T, boolean> {\n  return (source: Observable<T>) => source.lift(new SequenceEqualOperator(compareTo, comparator));\n}\n\nexport class SequenceEqualOperator<T> implements Operator<T, boolean> {\n  constructor(private compareTo: Observable<T>,\n              private comparator: (a: T, b: T) => boolean) {\n  }\n\n  call(subscriber: Subscriber<boolean>, source: any): any {\n    return source.subscribe(new SequenceEqualSubscriber(subscriber, this.compareTo, this.comparator));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SequenceEqualSubscriber<T, R> extends Subscriber<T> {\n  private _a: T[] = [];\n  private _b: T[] = [];\n  private _oneComplete = false;\n\n  constructor(destination: Observer<R>,\n              private compareTo: Observable<T>,\n              private comparator: (a: T, b: T) => boolean) {\n    super(destination);\n    (this.destination as Subscription).add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination, this)));\n  }\n\n  protected _next(value: T): void {\n    if (this._oneComplete && this._b.length === 0) {\n      this.emit(false);\n    } else {\n      this._a.push(value);\n      this.checkValues();\n    }\n  }\n\n  public _complete(): void {\n    if (this._oneComplete) {\n      this.emit(this._a.length === 0 && this._b.length === 0);\n    } else {\n      this._oneComplete = true;\n    }\n    this.unsubscribe();\n  }\n\n  checkValues() {\n    const { _a, _b, comparator } = this;\n    while (_a.length > 0 && _b.length > 0) {\n      let a = _a.shift();\n      let b = _b.shift();\n      let areEqual = false;\n      try {\n        areEqual = comparator ? comparator(a, b) : a === b;\n      } catch (e) {\n        this.destination.error(e);\n      }\n      if (!areEqual) {\n        this.emit(false);\n      }\n    }\n  }\n\n  emit(value: boolean) {\n    const { destination } = this;\n    destination.next(value);\n    destination.complete();\n  }\n\n  nextB(value: T) {\n    if (this._oneComplete && this._a.length === 0) {\n      this.emit(false);\n    } else {\n      this._b.push(value);\n      this.checkValues();\n    }\n  }\n\n  completeB() {\n    if (this._oneComplete) {\n      this.emit(this._a.length === 0 && this._b.length === 0);\n    } else {\n      this._oneComplete = true;\n    }\n  }\n}\n\nclass SequenceEqualCompareToSubscriber<T, R> extends Subscriber<T> {\n  constructor(destination: Observer<R>, private parent: SequenceEqualSubscriber<T, R>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    this.parent.nextB(value);\n  }\n\n  protected _error(err: any): void {\n    this.parent.error(err);\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.parent.completeB();\n    this.unsubscribe();\n  }\n}\n","import { Observable } from '../Observable';\nimport { multicast } from './multicast';\nimport { refCount } from './refCount';\nimport { Subject } from '../Subject';\n\nimport { MonoTypeOperatorFunction } from '../types';\n\nfunction shareSubjectFactory() {\n  return new Subject();\n}\n\n/**\n * Returns a new Observable that multicasts (shares) the original Observable. As long as there is at least one\n * Subscriber this Observable will be subscribed and emitting data. When all subscribers have unsubscribed it will\n * unsubscribe from the source Observable. Because the Observable is multicasting it makes the stream `hot`.\n * This is an alias for `multicast(() => new Subject()), refCount()`.\n *\n * ![](share.png)\n *\n * @return {Observable<T>} An Observable that upon connection causes the source Observable to emit items to its Observers.\n * @method share\n * @owner Observable\n */\nexport function share<T>(): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => refCount()(multicast(shareSubjectFactory)(source)) as Observable<T>;\n}\n","import { Observable } from '../Observable';\nimport { ReplaySubject } from '../ReplaySubject';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { Subscriber } from '../Subscriber';\n\nexport interface ShareReplayConfig {\n  bufferSize?: number;\n  windowTime?: number;\n  refCount: boolean;\n  scheduler?: SchedulerLike;\n}\n\n/**\n * Share source and replay specified number of emissions on subscription.\n *\n * This operator is a specialization of `replay` that connects to a source observable\n * and multicasts through a `ReplaySubject` constructed with the specified arguments.\n * A successfully completed source will stay cached in the `shareReplayed observable` forever,\n * but an errored source can be retried.\n *\n * ## Why use shareReplay?\n * You generally want to use `shareReplay` when you have side-effects or taxing computations\n * that you do not wish to be executed amongst multiple subscribers.\n * It may also be valuable in situations where you know you will have late subscribers to\n * a stream that need access to previously emitted values.\n * This ability to replay values on subscription is what differentiates {@link share} and `shareReplay`.\n *\n * ![](shareReplay.png)\n *\n * ## Example\n * ```ts\n * import { interval } from 'rxjs';\n * import { shareReplay, take } from 'rxjs/operators';\n *\n * const obs$ = interval(1000);\n * const shared$ = obs$.pipe(\n *   take(4),\n *   shareReplay(3)\n * );\n * shared$.subscribe(x => console.log('source A: ', x));\n * shared$.subscribe(y => console.log('source B: ', y));\n *\n * ```\n *\n * @see {@link publish}\n * @see {@link share}\n * @see {@link publishReplay}\n *\n * @param {Number} [bufferSize=Number.POSITIVE_INFINITY] Maximum element count of the replay buffer.\n * @param {Number} [windowTime=Number.POSITIVE_INFINITY] Maximum time length of the replay buffer in milliseconds.\n * @param {Scheduler} [scheduler] Scheduler where connected observers within the selector function\n * will be invoked on.\n * @return {Observable} An observable sequence that contains the elements of a sequence produced\n * by multicasting the source sequence within a selector function.\n * @method shareReplay\n * @owner Observable\n */\nexport function shareReplay<T>(config: ShareReplayConfig): MonoTypeOperatorFunction<T>;\nexport function shareReplay<T>(bufferSize?: number, windowTime?: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\nexport function shareReplay<T>(\n  configOrBufferSize?: ShareReplayConfig | number,\n  windowTime?: number,\n  scheduler?: SchedulerLike\n): MonoTypeOperatorFunction<T> {\n  let config: ShareReplayConfig;\n  if (configOrBufferSize && typeof configOrBufferSize === 'object') {\n    config = configOrBufferSize as ShareReplayConfig;\n  } else {\n    config = {\n      bufferSize: configOrBufferSize as number | undefined,\n      windowTime,\n      refCount: false,\n      scheduler\n    };\n  }\n  return (source: Observable<T>) => source.lift(shareReplayOperator(config));\n}\n\nfunction shareReplayOperator<T>({\n  bufferSize = Number.POSITIVE_INFINITY,\n  windowTime = Number.POSITIVE_INFINITY,\n  refCount: useRefCount,\n  scheduler\n}: ShareReplayConfig) {\n  let subject: ReplaySubject<T> | undefined;\n  let refCount = 0;\n  let subscription: Subscription | undefined;\n  let hasError = false;\n  let isComplete = false;\n\n  return function shareReplayOperation(this: Subscriber<T>, source: Observable<T>) {\n    refCount++;\n    if (!subject || hasError) {\n      hasError = false;\n      subject = new ReplaySubject<T>(bufferSize, windowTime, scheduler);\n      subscription = source.subscribe({\n        next(value) { subject.next(value); },\n        error(err) {\n          hasError = true;\n          subject.error(err);\n        },\n        complete() {\n          isComplete = true;\n          subscription = undefined;\n          subject.complete();\n        },\n      });\n    }\n\n    const innerSub = subject.subscribe(this);\n    this.add(() => {\n      refCount--;\n      innerSub.unsubscribe();\n      if (subscription && !isComplete && useRefCount && refCount === 0) {\n        subscription.unsubscribe();\n        subscription = undefined;\n        subject = undefined;\n      }\n    });\n  };\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { EmptyError } from '../util/EmptyError';\n\nimport { Observer, MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that emits the single item emitted by the source Observable that matches a specified\n * predicate, if that Observable emits one such item. If the source Observable emits more than one such item or no\n * items, notify of an IllegalArgumentException or NoSuchElementException respectively. If the source Observable\n * emits items but none match the specified predicate then `undefined` is emitted.\n *\n * <span class=\"informal\">Like {@link first}, but emit with error notification if there is more than one value.</span>\n * ![](single.png)\n *\n * ## Example\n * emits 'error'\n * ```ts\n * import { range } from 'rxjs';\n * import { single } from 'rxjs/operators';\n *\n * const numbers = range(1,5).pipe(single());\n * numbers.subscribe(x => console.log('never get called'), e => console.log('error'));\n * // result\n * // 'error'\n * ```\n *\n * emits 'undefined'\n * ```ts\n * import { range } from 'rxjs';\n * import { single } from 'rxjs/operators';\n *\n * const numbers = range(1,5).pipe(single(x => x === 10));\n * numbers.subscribe(x => console.log(x));\n * // result\n * // 'undefined'\n * ```\n *\n * @see {@link first}\n * @see {@link find}\n * @see {@link findIndex}\n * @see {@link elementAt}\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {Function} predicate - A predicate function to evaluate items emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits the single item emitted by the source Observable that matches\n * the predicate or `undefined` when no items match.\n *\n * @method single\n * @owner Observable\n */\nexport function single<T>(predicate?: (value: T, index: number, source: Observable<T>) => boolean): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new SingleOperator(predicate, source));\n}\n\nclass SingleOperator<T> implements Operator<T, T> {\n  constructor(private predicate?: (value: T, index: number, source: Observable<T>) => boolean,\n              private source?: Observable<T>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new SingleSubscriber(subscriber, this.predicate, this.source));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SingleSubscriber<T> extends Subscriber<T> {\n  private seenValue: boolean = false;\n  private singleValue: T;\n  private index: number = 0;\n\n  constructor(destination: Observer<T>,\n              private predicate?: (value: T, index: number, source: Observable<T>) => boolean,\n              private source?: Observable<T>) {\n    super(destination);\n  }\n\n  private applySingleValue(value: T): void {\n    if (this.seenValue) {\n      this.destination.error('Sequence contains more than one element');\n    } else {\n      this.seenValue = true;\n      this.singleValue = value;\n    }\n  }\n\n  protected _next(value: T): void {\n    const index = this.index++;\n\n    if (this.predicate) {\n      this.tryNext(value, index);\n    } else {\n      this.applySingleValue(value);\n    }\n  }\n\n  private tryNext(value: T, index: number): void {\n    try {\n      if (this.predicate(value, index, this.source)) {\n        this.applySingleValue(value);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  }\n\n  protected _complete(): void {\n    const destination = this.destination;\n\n    if (this.index > 0) {\n      destination.next(this.seenValue ? this.singleValue : undefined);\n      destination.complete();\n    } else {\n      destination.error(new EmptyError);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that skips the first `count` items emitted by the source Observable.\n *\n * ![](skip.png)\n *\n * @param {Number} count - The number of times, items emitted by source Observable should be skipped.\n * @return {Observable} An Observable that skips values emitted by the source Observable.\n *\n * @method skip\n * @owner Observable\n */\nexport function skip<T>(count: number): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new SkipOperator(count));\n}\n\nclass SkipOperator<T> implements Operator<T, T> {\n  constructor(private total: number) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new SkipSubscriber(subscriber, this.total));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SkipSubscriber<T> extends Subscriber<T> {\n  count: number = 0;\n\n  constructor(destination: Subscriber<T>, private total: number) {\n    super(destination);\n  }\n\n  protected _next(x: T) {\n    if (++this.count > this.total) {\n      this.destination.next(x);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Skip the last `count` values emitted by the source Observable.\n *\n * ![](skipLast.png)\n *\n * `skipLast` returns an Observable that accumulates a queue with a length\n * enough to store the first `count` values. As more values are received,\n * values are taken from the front of the queue and produced on the result\n * sequence. This causes values to be delayed.\n *\n * ## Example\n * Skip the last 2 values of an Observable with many values\n * ```ts\n * import { range } from 'rxjs';\n * import { skipLast } from 'rxjs/operators';\n *\n * const many = range(1, 5);\n * const skipLastTwo = many.pipe(skipLast(2));\n * skipLastTwo.subscribe(x => console.log(x));\n *\n * // Results in:\n * // 1 2 3\n * ```\n *\n * @see {@link skip}\n * @see {@link skipUntil}\n * @see {@link skipWhile}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `skipLast(i)`, it throws\n * ArgumentOutOrRangeError if `i < 0`.\n *\n * @param {number} count Number of elements to skip from the end of the source Observable.\n * @returns {Observable<T>} An Observable that skips the last count values\n * emitted by the source Observable.\n * @method skipLast\n * @owner Observable\n */\nexport function skipLast<T>(count: number): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new SkipLastOperator(count));\n}\n\nclass SkipLastOperator<T> implements Operator<T, T> {\n  constructor(private _skipCount: number) {\n    if (this._skipCount < 0) {\n      throw new ArgumentOutOfRangeError;\n    }\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    if (this._skipCount === 0) {\n      // If we don't want to skip any values then just subscribe\n      // to Subscriber without any further logic.\n      return source.subscribe(new Subscriber(subscriber));\n    } else {\n      return source.subscribe(new SkipLastSubscriber(subscriber, this._skipCount));\n    }\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SkipLastSubscriber<T> extends Subscriber<T> {\n  private _ring: T[];\n  private _count: number = 0;\n\n  constructor(destination: Subscriber<T>, private _skipCount: number) {\n    super(destination);\n    this._ring = new Array<T>(_skipCount);\n  }\n\n  protected _next(value: T): void {\n    const skipCount = this._skipCount;\n    const count = this._count++;\n\n    if (count < skipCount) {\n      this._ring[count] = value;\n    } else {\n      const currentIndex = count % skipCount;\n      const ring = this._ring;\n      const oldValue = ring[currentIndex];\n\n      ring[currentIndex] = value;\n      this.destination.next(oldValue);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { MonoTypeOperatorFunction, TeardownLogic, ObservableInput } from '../types';\nimport { Subscription } from '../Subscription';\n\n/**\n * Returns an Observable that skips items emitted by the source Observable until a second Observable emits an item.\n *\n * The `skipUntil` operator causes the observable stream to skip the emission of values until the passed in observable emits the first value.\n * This can be particularly useful in combination with user interactions, responses of http requests or waiting for specific times to pass by.\n *\n * ![](skipUntil.png)\n *\n * Internally the `skipUntil` operator subscribes to the passed in observable (in the following called *notifier*) in order to recognize the emission\n * of its first value. When this happens, the operator unsubscribes from the *notifier* and starts emitting the values of the *source*\n * observable. It will never let the *source* observable emit any values if the *notifier* completes or throws an error without emitting\n * a value before.\n *\n * ## Example\n *\n * In the following example, all emitted values of the interval observable are skipped until the user clicks anywhere within the page.\n *\n * ```ts\n * import { interval, fromEvent } from 'rxjs';\n * import { skipUntil } from 'rxjs/operators';\n *\n * const intervalObservable = interval(1000);\n * const click = fromEvent(document, 'click');\n *\n * const emitAfterClick = intervalObservable.pipe(\n *   skipUntil(click)\n * );\n * // clicked at 4.6s. output: 5...6...7...8........ or\n * // clicked at 7.3s. output: 8...9...10..11.......\n * const subscribe = emitAfterClick.subscribe(value => console.log(value));\n * ```\n *\n * @param {Observable} notifier - The second Observable that has to emit an item before the source Observable's elements begin to\n * be mirrored by the resulting Observable.\n * @return {Observable<T>} An Observable that skips items from the source Observable until the second Observable emits\n * an item, then emits the remaining items.\n * @method skipUntil\n * @owner Observable\n */\nexport function skipUntil<T>(notifier: Observable<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new SkipUntilOperator(notifier));\n}\n\nclass SkipUntilOperator<T> implements Operator<T, T> {\n  constructor(private notifier: Observable<any>) {\n  }\n\n  call(destination: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new SkipUntilSubscriber(destination, this.notifier));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SkipUntilSubscriber<T, R> extends OuterSubscriber<T, R> {\n\n  private hasValue: boolean = false;\n  private innerSubscription: Subscription;\n\n  constructor(destination: Subscriber<R>, notifier: ObservableInput<any>) {\n    super(destination);\n    const innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n    this.add(innerSubscriber);\n    this.innerSubscription = innerSubscriber;\n    const innerSubscription = subscribeToResult(this, notifier, undefined, undefined, innerSubscriber);\n    // The returned subscription will usually be the subscriber that was\n    // passed. However, interop subscribers will be wrapped and for\n    // unsubscriptions to chain correctly, the wrapper needs to be added, too.\n    if (innerSubscription !== innerSubscriber) {\n      this.add(innerSubscription);\n      this.innerSubscription = innerSubscription;\n    }\n  }\n\n  protected _next(value: T) {\n    if (this.hasValue) {\n      super._next(value);\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.hasValue = true;\n    if (this.innerSubscription) {\n      this.innerSubscription.unsubscribe();\n    }\n  }\n\n  notifyComplete() {\n    /* do nothing */\n  }\n}\n","import { Observable } from '../Observable';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Returns an Observable that skips all items emitted by the source Observable as long as a specified condition holds\n * true, but emits all further source items as soon as the condition becomes false.\n *\n * ![](skipWhile.png)\n *\n * @param {Function} predicate - A function to test each item emitted from the source Observable.\n * @return {Observable<T>} An Observable that begins emitting items emitted by the source Observable when the\n * specified predicate becomes false.\n * @method skipWhile\n * @owner Observable\n */\nexport function skipWhile<T>(predicate: (value: T, index: number) => boolean): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new SkipWhileOperator(predicate));\n}\n\nclass SkipWhileOperator<T> implements Operator<T, T> {\n  constructor(private predicate: (value: T, index: number) => boolean) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new SkipWhileSubscriber(subscriber, this.predicate));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SkipWhileSubscriber<T> extends Subscriber<T> {\n  private skipping: boolean = true;\n  private index: number = 0;\n\n  constructor(destination: Subscriber<T>,\n              private predicate: (value: T, index: number) => boolean) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    const destination = this.destination;\n    if (this.skipping) {\n      this.tryCallPredicate(value);\n    }\n\n    if (!this.skipping) {\n      destination.next(value);\n    }\n  }\n\n  private tryCallPredicate(value: T): void {\n    try {\n      const result = this.predicate(value, this.index++);\n      this.skipping = Boolean(result);\n    } catch (err) {\n      this.destination.error(err);\n    }\n  }\n}\n","import { Observable } from '../Observable';\nimport { concat } from '../observable/concat';\nimport { isScheduler } from '../util/isScheduler';\nimport { MonoTypeOperatorFunction, OperatorFunction, SchedulerLike } from '../types';\n\n/* tslint:disable:max-line-length */\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T>(scheduler: SchedulerLike): MonoTypeOperatorFunction<T>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T, D>(v1: D, scheduler: SchedulerLike): OperatorFunction<T, T | D>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T, D, E>(v1: D, v2: E, scheduler: SchedulerLike): OperatorFunction<T, T | D | E>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T, D, E, F>(v1: D, v2: E, v3: F, scheduler: SchedulerLike): OperatorFunction<T, T | D | E | F>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T, D, E, F, G>(v1: D, v2:  E, v3: F, v4: G, scheduler: SchedulerLike): OperatorFunction<T, T | D | E | F | G>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T, D, E, F, G, H>(v1: D, v2: E, v3: F, v4: G, v5: H, scheduler: SchedulerLike): OperatorFunction<T, T | D | E | F | G | H>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T, D, E, F, G, H, I>(v1: D, v2: E, v3: F, v4: G, v5: H, v6: I, scheduler: SchedulerLike): OperatorFunction<T, T | D | E | F | G | H | I>;\n\nexport function startWith<T, D>(v1: D): OperatorFunction<T, T | D>;\nexport function startWith<T, D, E>(v1: D, v2: E): OperatorFunction<T, T | D | E>;\nexport function startWith<T, D, E, F>(v1: D, v2: E, v3: F): OperatorFunction<T, T | D | E | F>;\nexport function startWith<T, D, E, F, G>(v1: D, v2:  E, v3: F, v4: G): OperatorFunction<T, T | D | E | F | G>;\nexport function startWith<T, D, E, F, G, H>(v1: D, v2: E, v3: F, v4: G, v5: H): OperatorFunction<T, T | D | E | F | G | H>;\nexport function startWith<T, D, E, F, G, H, I>(v1: D, v2: E, v3: F, v4: G, v5: H, v6: I): OperatorFunction<T, T | D | E | F | G | H | I>;\nexport function startWith<T, D = T>(...array: D[]): OperatorFunction<T, T | D>;\n/** @deprecated use {@link scheduled} and {@link concatAll} (e.g. `scheduled([[a, b, c], source], scheduler).pipe(concatAll())`) */\nexport function startWith<T, D = T>(...array: Array<D | SchedulerLike>): OperatorFunction<T, T | D>;\n/* tslint:enable:max-line-length */\n\n/**\n * Returns an Observable that emits the items you specify as arguments before it begins to emit\n * items emitted by the source Observable.\n *\n * <span class=\"informal\">First emits its arguments in order, and then any\n * emissions from the source.</span>\n *\n * ![](startWith.png)\n *\n * ## Examples\n *\n * Start the chain of emissions with `\"first\"`, `\"second\"`\n *\n * ```ts\n * import { of } from 'rxjs';\n * import { startWith } from 'rxjs/operators';\n *\n * of(\"from source\")\n *   .pipe(startWith(\"first\", \"second\"))\n *   .subscribe(x => console.log(x));\n *\n * // results:\n * //   \"first\"\n * //   \"second\"\n * //   \"from source\"\n * ```\n *\n * @param {...T} values - Items you want the modified Observable to emit first.\n * @param {SchedulerLike} [scheduler] - A {@link SchedulerLike} to use for scheduling\n * the emissions of the `next` notifications.\n * @return {Observable} An Observable that emits the items in the specified Iterable and then emits the items\n * emitted by the source Observable.\n * @method startWith\n * @owner Observable\n */\nexport function startWith<T, D>(...array: Array<T | SchedulerLike>): OperatorFunction<T, T | D> {\n  const scheduler = array[array.length - 1] as SchedulerLike;\n  if (isScheduler(scheduler)) {\n    // deprecated path\n    array.pop();\n    return (source: Observable<T>) => concat(array as T[], source, scheduler);\n  } else {\n    return (source: Observable<T>) => concat(array as T[], source);\n  }\n}\n","import { SchedulerLike, SchedulerAction } from '../types';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { Observable } from '../Observable';\nimport { asap } from '../scheduler/asap';\nimport { isNumeric } from '../util/isNumeric';\n\nexport interface DispatchArg<T> {\n  source: Observable<T>;\n  subscriber: Subscriber<T>;\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nexport class SubscribeOnObservable<T> extends Observable<T> {\n  /** @nocollapse */\n  static create<T>(source: Observable<T>, delay: number = 0, scheduler: SchedulerLike = asap): Observable<T> {\n    return new SubscribeOnObservable(source, delay, scheduler);\n  }\n\n  /** @nocollapse */\n  static dispatch<T>(this: SchedulerAction<T>, arg: DispatchArg<T>): Subscription {\n    const { source, subscriber } = arg;\n    return this.add(source.subscribe(subscriber));\n  }\n\n  constructor(public source: Observable<T>,\n              private delayTime: number = 0,\n              private scheduler: SchedulerLike = asap) {\n    super();\n    if (!isNumeric(delayTime) || delayTime < 0) {\n      this.delayTime = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== 'function') {\n      this.scheduler = asap;\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>) {\n    const delay = this.delayTime;\n    const source = this.source;\n    const scheduler = this.scheduler;\n\n    return scheduler.schedule<DispatchArg<any>>(SubscribeOnObservable.dispatch, delay, {\n      source, subscriber\n    });\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { SubscribeOnObservable } from '../observable/SubscribeOnObservable';\nimport { MonoTypeOperatorFunction, SchedulerLike, TeardownLogic } from '../types';\n\n/**\n * Asynchronously subscribes Observers to this Observable on the specified {@link SchedulerLike}.\n *\n * With `subscribeOn` you can decide what type of scheduler a specific Observable will be using when it is subscribed to.\n *\n * Schedulers control the speed and order of emissions to observers from an Observable stream.\n *\n * ![](subscribeOn.png)\n *\n * ## Example\n * Given the following code:\n * ```javascript\n * import { of, merge } from 'rxjs';\n *\n * const a = of(1, 2, 3, 4);\n * const b = of(5, 6, 7, 8, 9);\n * merge(a, b).subscribe(console.log);\n * ```\n *\n * Both Observable `a` and `b` will emit their values directly and synchronously once they are subscribed to.\n * This will result in the output of `1 2 3 4 5 6 7 8 9`.\n *\n * But if we instead us the `subscribeOn` operator declaring that we want to use the {@link asyncScheduler} for values emited by Observable `a`:\n * ```javascript\n * import { of, merge, asyncScheduler } from 'rxjs';\n * import { subscribeOn } from 'rxjs/operators';\n *\n * const a = of(1, 2, 3, 4).pipe(subscribeOn(asyncScheduler));\n * const b = of(5, 6, 7, 8, 9);\n * merge(a, b).subscribe(console.log);\n * ```\n *\n * The output will instead be `5 6 7 8 9 1 2 3 4`.\n * The reason for this is that Observable `b` emits its values directly and synchronously like before\n * but the emissions from `a` are scheduled on the event loop because we are now using the {@link asyncScheduler} for that specific Observable.\n *\n * @param {SchedulerLike} scheduler - The {@link SchedulerLike} to perform subscription actions on.\n * @return {Observable<T>} The source Observable modified so that its subscriptions happen on the specified {@link SchedulerLike}.\n .\n * @method subscribeOn\n * @owner Observable\n */\nexport function subscribeOn<T>(scheduler: SchedulerLike, delay: number = 0): MonoTypeOperatorFunction<T> {\n  return function subscribeOnOperatorFunction(source: Observable<T>): Observable<T> {\n    return source.lift(new SubscribeOnOperator<T>(scheduler, delay));\n  };\n}\n\nclass SubscribeOnOperator<T> implements Operator<T, T> {\n  constructor(private scheduler: SchedulerLike,\n              private delay: number) {\n  }\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return new SubscribeOnObservable<T>(\n      source, this.delay, this.scheduler\n    ).subscribe(subscriber);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { map } from './map';\nimport { from } from '../observable/from';\n\n/* tslint:disable:max-line-length */\nexport function switchMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) => O): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector is no longer supported, use inner map instead */\nexport function switchMap<T, O extends ObservableInput<any>>(project: (value: T, index: number) => O, resultSelector: undefined): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated resultSelector is no longer supported, use inner map instead */\nexport function switchMap<T, R, O extends ObservableInput<any>>(project: (value: T, index: number) => O, resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables.</span>\n *\n * ![](switchMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * ## Example\n * Generate new Observable according to source Observable values\n * ```typescript\n * import { of } from 'rxjs';\n * import { switchMap } from 'rxjs/operators';\n *\n * const switched = of(1, 2, 3).pipe(switchMap((x: number) => of(x, x ** 2, x ** 3)));\n * switched.subscribe(x => console.log(x));\n * // outputs\n * // 1\n * // 1\n * // 1\n * // 2\n * // 4\n * // 8\n * // ... and so on\n * ```\n *\n * Rerun an interval Observable on every click event\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { switchMap } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(switchMap((ev) => interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchAll}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional deprecated `resultSelector`) to each item\n * emitted by the source Observable and taking only the values from the most recently\n * projected inner Observable.\n * @method switchMap\n * @owner Observable\n */\nexport function switchMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R,\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  if (typeof resultSelector === 'function') {\n    return (source: Observable<T>) => source.pipe(\n      switchMap((a, i) => from(project(a, i)).pipe(\n        map((b, ii) => resultSelector(a, b, i, ii))\n      ))\n    );\n  }\n  return (source: Observable<T>) => source.lift(new SwitchMapOperator(project));\n}\n\nclass SwitchMapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => ObservableInput<R>) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new SwitchMapSubscriber(subscriber, this.project));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SwitchMapSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private index: number = 0;\n  private innerSubscription: Subscription;\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => ObservableInput<R>) {\n    super(destination);\n  }\n\n  protected _next(value: T) {\n    let result: ObservableInput<R>;\n    const index = this.index++;\n    try {\n      result = this.project(value, index);\n    } catch (error) {\n      this.destination.error(error);\n      return;\n    }\n    this._innerSub(result, value, index);\n  }\n\n  private _innerSub(result: ObservableInput<R>, value: T, index: number) {\n    const innerSubscription = this.innerSubscription;\n    if (innerSubscription) {\n      innerSubscription.unsubscribe();\n    }\n    const innerSubscriber = new InnerSubscriber(this, value, index);\n    const destination = this.destination as Subscription;\n    destination.add(innerSubscriber);\n    this.innerSubscription = subscribeToResult(this, result, undefined, undefined, innerSubscriber);\n    // The returned subscription will usually be the subscriber that was\n    // passed. However, interop subscribers will be wrapped and for\n    // unsubscriptions to chain correctly, the wrapper needs to be added, too.\n    if (this.innerSubscription !== innerSubscriber) {\n      destination.add(this.innerSubscription);\n    }\n  }\n\n  protected _complete(): void {\n    const {innerSubscription} = this;\n    if (!innerSubscription || innerSubscription.closed) {\n      super._complete();\n    }\n    this.unsubscribe();\n  }\n\n  protected _unsubscribe() {\n    this.innerSubscription = null;\n  }\n\n  notifyComplete(innerSub: Subscription): void {\n    const destination = this.destination as Subscription;\n    destination.remove(innerSub);\n    this.innerSubscription = null;\n    if (this.isStopped) {\n      super._complete();\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n      this.destination.next(innerValue);\n  }\n}\n","import {OperatorFunction, ObservableInput} from '../types';\nimport { switchMap } from './switchMap';\nimport { identity } from '../util/identity';\n\nexport function switchAll<T>(): OperatorFunction<ObservableInput<T>, T>;\nexport function switchAll<R>(): OperatorFunction<any, R>;\n\n/**\n * Converts a higher-order Observable into a first-order Observable\n * producing values only from the most recent observable sequence\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables.</span>\n *\n * ![](switchAll.png)\n *\n * `switchAll` subscribes to a source that is an observable of observables, also known as a\n * \"higher-order observable\" (or `Observable<Observable<T>>`). It subscribes to the most recently\n * provided \"inner observable\" emitted by the source, unsubscribing from any previously subscribed\n * to inner observable, such that only the most recent inner observable may be subscribed to at\n * any point in time. The resulting observable returned by `switchAll` will only complete if the\n * source observable completes, *and* any currently subscribed to inner observable also has completed,\n * if there are any.\n *\n * ## Examples\n * Spawn a new interval observable for each click event, but for every new\n * click, cancel the previous interval and subscribe to the new one.\n *\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { switchAll, map, tap } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click').pipe(tap(() => console.log('click')));\n * const source = clicks.pipe(map((ev) => interval(1000)));\n *\n * source.pipe(\n *   switchAll()\n * ).subscribe(x => console.log(x));\n *\n /* Output\n *  click\n *  1\n *  2\n *  3\n *  4\n *  ...\n *  click\n *  1\n *  2\n *  3\n *  ...\n *  click\n *  ...\n * ```\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link exhaust}\n * @see {@link switchMap}\n * @see {@link switchMapTo}\n * @see {@link mergeAll}\n */\n\nexport function switchAll<T>(): OperatorFunction<ObservableInput<T>, T> {\n  return switchMap(identity);\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction } from '../types';\nimport { switchMap } from './switchMap';\n\n/* tslint:disable:max-line-length */\nexport function switchMapTo<R>(observable: ObservableInput<R>): OperatorFunction<any, R>;\n/** @deprecated resultSelector is no longer supported. Switch to using switchMap with an inner map */\nexport function switchMapTo<T, R>(observable: ObservableInput<R>, resultSelector: undefined): OperatorFunction<T, R>;\n/** @deprecated resultSelector is no longer supported. Switch to using switchMap with an inner map */\nexport function switchMapTo<T, I, R>(observable: ObservableInput<I>, resultSelector: (outerValue: T, innerValue: I, outerIndex: number, innerIndex: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to the same Observable which is flattened multiple\n * times with {@link switchMap} in the output Observable.\n *\n * <span class=\"informal\">It's like {@link switchMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * ![](switchMapTo.png)\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. The output Observables\n * emits values only from the most recently emitted instance of\n * `innerObservable`.\n *\n * ## Example\n * Rerun an interval Observable on every click event\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { switchMapTo } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(switchMapTo(interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link concatMapTo}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link mergeMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable` (and optionally transformed through the deprecated `resultSelector`)\n * every time a value is emitted on the source Observable, and taking only the values\n * from the most recently projected inner Observable.\n * @method switchMapTo\n * @owner Observable\n */\nexport function switchMapTo<T, I, R>(\n  innerObservable: ObservableInput<I>,\n  resultSelector?: (outerValue: T, innerValue: I, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, I|R> {\n  return resultSelector ? switchMap(() => innerObservable, resultSelector) : switchMap(() => innerObservable);\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\n\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Emits the values emitted by the source Observable until a `notifier`\n * Observable emits a value.\n *\n * <span class=\"informal\">Lets values pass until a second Observable,\n * `notifier`, emits a value. Then, it completes.</span>\n *\n * ![](takeUntil.png)\n *\n * `takeUntil` subscribes and begins mirroring the source Observable. It also\n * monitors a second Observable, `notifier` that you provide. If the `notifier`\n * emits a value, the output Observable stops mirroring the source Observable\n * and completes. If the `notifier` doesn't emit any value and completes\n * then `takeUntil` will pass all values.\n *\n * ## Example\n * Tick every second until the first click happens\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { takeUntil } from 'rxjs/operators';\n *\n * const source = interval(1000);\n * const clicks = fromEvent(document, 'click');\n * const result = source.pipe(takeUntil(clicks));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param {Observable} notifier The Observable whose first emitted value will\n * cause the output Observable of `takeUntil` to stop emitting values from the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable until such time as `notifier` emits its first value.\n * @method takeUntil\n * @owner Observable\n */\nexport function takeUntil<T>(notifier: Observable<any>): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new TakeUntilOperator(notifier));\n}\n\nclass TakeUntilOperator<T> implements Operator<T, T> {\n  constructor(private notifier: Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    const takeUntilSubscriber = new TakeUntilSubscriber(subscriber);\n    const notifierSubscription = subscribeToResult(takeUntilSubscriber, this.notifier);\n    if (notifierSubscription && !takeUntilSubscriber.seenValue) {\n      takeUntilSubscriber.add(notifierSubscription);\n      return source.subscribe(takeUntilSubscriber);\n    }\n    return takeUntilSubscriber;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass TakeUntilSubscriber<T, R> extends OuterSubscriber<T, R> {\n  seenValue = false;\n\n  constructor(destination: Subscriber<any>, ) {\n    super(destination);\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.seenValue = true;\n    this.complete();\n  }\n\n  notifyComplete(): void {\n    // noop\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction, MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S, inclusive: false): OperatorFunction<T, S>;\nexport function takeWhile<T>(predicate: (value: T, index: number) => boolean, inclusive?: boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Emits values emitted by the source Observable so long as each value satisfies\n * the given `predicate`, and then completes as soon as this `predicate` is not\n * satisfied.\n *\n * <span class=\"informal\">Takes values from the source only while they pass the\n * condition given. When the first value does not satisfy, it completes.</span>\n *\n * ![](takeWhile.png)\n *\n * `takeWhile` subscribes and begins mirroring the source Observable. Each value\n * emitted on the source is given to the `predicate` function which returns a\n * boolean, representing a condition to be satisfied by the source values. The\n * output Observable emits the source values until such time as the `predicate`\n * returns false, at which point `takeWhile` stops mirroring the source\n * Observable and completes the output Observable.\n *\n * ## Example\n * Emit click events only while the clientX property is greater than 200\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { takeWhile } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(takeWhile(ev => ev.clientX > 200));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates a value emitted by the source Observable and returns a boolean.\n * Also takes the (zero-based) index as the second argument.\n * @param {boolean} inclusive When set to `true` the value that caused\n * `predicate` to return `false` will also be emitted.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable so long as each value satisfies the condition defined by the\n * `predicate`, then completes.\n * @method takeWhile\n * @owner Observable\n */\nexport function takeWhile<T>(\n    predicate: (value: T, index: number) => boolean,\n    inclusive = false): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) =>\n             source.lift(new TakeWhileOperator(predicate, inclusive));\n}\n\nclass TakeWhileOperator<T> implements Operator<T, T> {\n  constructor(\n      private predicate: (value: T, index: number) => boolean,\n      private inclusive: boolean) {}\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(\n        new TakeWhileSubscriber(subscriber, this.predicate, this.inclusive));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass TakeWhileSubscriber<T> extends Subscriber<T> {\n  private index: number = 0;\n\n  constructor(\n      destination: Subscriber<T>,\n      private predicate: (value: T, index: number) => boolean,\n      private inclusive: boolean) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    const destination = this.destination;\n    let result: boolean;\n    try {\n      result = this.predicate(value, this.index++);\n    } catch (err) {\n      destination.error(err);\n      return;\n    }\n    this.nextOrComplete(value, result);\n  }\n\n  private nextOrComplete(value: T, predicateResult: boolean): void {\n    const destination = this.destination;\n    if (Boolean(predicateResult)) {\n      destination.next(value);\n    } else {\n      if (this.inclusive) {\n        destination.next(value);\n      }\n      destination.complete();\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, PartialObserver, TeardownLogic } from '../types';\nimport { noop } from '../util/noop';\nimport { isFunction } from '../util/isFunction';\n\n/* tslint:disable:max-line-length */\n/** @deprecated Use an observer instead of a complete callback */\nexport function tap<T>(next: null | undefined, error: null | undefined, complete: () => void): MonoTypeOperatorFunction<T>;\n/** @deprecated Use an observer instead of an error callback */\nexport function tap<T>(next: null | undefined, error: (error: any) => void, complete?: () => void): MonoTypeOperatorFunction<T>;\n/** @deprecated Use an observer instead of a complete callback */\nexport function tap<T>(next: (value: T) => void, error: null | undefined, complete: () => void): MonoTypeOperatorFunction<T>;\nexport function tap<T>(next?: (x: T) => void, error?: (e: any) => void, complete?: () => void): MonoTypeOperatorFunction<T>;\nexport function tap<T>(observer: PartialObserver<T>): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Perform a side effect for every emission on the source Observable, but return\n * an Observable that is identical to the source.\n *\n * <span class=\"informal\">Intercepts each emission on the source and runs a\n * function, but returns an output which is identical to the source as long as errors don't occur.</span>\n *\n * ![](do.png)\n *\n * Returns a mirrored Observable of the source Observable, but modified so that\n * the provided Observer is called to perform a side effect for every value,\n * error, and completion emitted by the source. Any errors that are thrown in\n * the aforementioned Observer or handlers are safely sent down the error path\n * of the output Observable.\n *\n * This operator is useful for debugging your Observables for the correct values\n * or performing other side effects.\n *\n * Note: this is different to a `subscribe` on the Observable. If the Observable\n * returned by `tap` is not subscribed, the side effects specified by the\n * Observer will never happen. `tap` therefore simply spies on existing\n * execution, it does not trigger an execution to happen like `subscribe` does.\n *\n * ## Example\n * Map every click to the clientX position of that click, while also logging the click event\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { tap, map } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const positions = clicks.pipe(\n *   tap(ev => console.log(ev)),\n *   map(ev => ev.clientX),\n * );\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link map}\n * @see {@link Observable#subscribe}\n *\n * @param {Observer|function} [nextOrObserver] A normal Observer object or a\n * callback for `next`.\n * @param {function} [error] Callback for errors in the source.\n * @param {function} [complete] Callback for the completion of the source.\n * @return {Observable} An Observable identical to the source, but runs the\n * specified Observer or callback(s) for each item.\n * @name tap\n */\nexport function tap<T>(nextOrObserver?: PartialObserver<T> | ((x: T) => void),\n                       error?: (e: any) => void,\n                       complete?: () => void): MonoTypeOperatorFunction<T> {\n  return function tapOperatorFunction(source: Observable<T>): Observable<T> {\n    return source.lift(new DoOperator(nextOrObserver, error, complete));\n  };\n}\n\nclass DoOperator<T> implements Operator<T, T> {\n  constructor(private nextOrObserver?: PartialObserver<T> | ((x: T) => void),\n              private error?: (e: any) => void,\n              private complete?: () => void) {\n  }\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new TapSubscriber(subscriber, this.nextOrObserver, this.error, this.complete));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\n\nclass TapSubscriber<T> extends Subscriber<T> {\n  private _context: any;\n\n  private _tapNext: ((value: T) => void) = noop;\n\n  private _tapError: ((err: any) => void) = noop;\n\n  private _tapComplete: (() => void) = noop;\n\n  constructor(destination: Subscriber<T>,\n              observerOrNext?: PartialObserver<T> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n      super(destination);\n      this._tapError = error || noop;\n      this._tapComplete = complete || noop;\n      if (isFunction(observerOrNext)) {\n        this._context = this;\n        this._tapNext = observerOrNext;\n      } else if (observerOrNext) {\n        this._context = observerOrNext;\n        this._tapNext = observerOrNext.next || noop;\n        this._tapError = observerOrNext.error || noop;\n        this._tapComplete = observerOrNext.complete || noop;\n      }\n    }\n\n  _next(value: T) {\n    try {\n      this._tapNext.call(this._context, value);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(value);\n  }\n\n  _error(err: any) {\n    try {\n      this._tapError.call(this._context, err);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.error(err);\n  }\n\n  _complete() {\n    try {\n      this._tapComplete.call(this._context, );\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    return this.destination.complete();\n  }\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\n\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n\nimport { MonoTypeOperatorFunction, SubscribableOrPromise, TeardownLogic } from '../types';\n\nexport interface ThrottleConfig {\n  leading?: boolean;\n  trailing?: boolean;\n}\n\nexport const defaultThrottleConfig: ThrottleConfig = {\n  leading: true,\n  trailing: false\n};\n\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for a duration determined by another Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link throttleTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * ![](throttle.png)\n *\n * `throttle` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled by calling the `durationSelector` function with the source value,\n * which returns the \"duration\" Observable. When the duration Observable emits a\n * value or completes, the timer is disabled, and this process repeats for the\n * next source value.\n *\n * ## Example\n * Emit clicks at a rate of at most one click per second\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { throttle } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(throttle(ev => interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration for each source value, returned as an Observable or a Promise.\n * @param {Object} config a configuration object to define `leading` and `trailing` behavior. Defaults\n * to `{ leading: true, trailing: false }`.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttle\n * @owner Observable\n */\nexport function throttle<T>(durationSelector: (value: T) => SubscribableOrPromise<any>,\n                            config: ThrottleConfig = defaultThrottleConfig): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new ThrottleOperator(durationSelector, config.leading, config.trailing));\n}\n\nclass ThrottleOperator<T> implements Operator<T, T> {\n  constructor(private durationSelector: (value: T) => SubscribableOrPromise<any>,\n              private leading: boolean,\n              private trailing: boolean) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(\n      new ThrottleSubscriber(subscriber, this.durationSelector, this.leading, this.trailing)\n    );\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc\n * @ignore\n * @extends {Ignored}\n */\nclass ThrottleSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private _throttled: Subscription;\n  private _sendValue: T;\n  private _hasValue = false;\n\n  constructor(protected destination: Subscriber<T>,\n              private durationSelector: (value: T) => SubscribableOrPromise<number>,\n              private _leading: boolean,\n              private _trailing: boolean) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    this._hasValue = true;\n    this._sendValue = value;\n\n    if (!this._throttled) {\n      if (this._leading) {\n        this.send();\n      } else {\n        this.throttle(value);\n      }\n    }\n  }\n\n  private send() {\n    const { _hasValue, _sendValue } = this;\n    if (_hasValue) {\n      this.destination.next(_sendValue);\n      this.throttle(_sendValue);\n    }\n    this._hasValue = false;\n    this._sendValue = null;\n  }\n\n  private throttle(value: T): void {\n    const duration = this.tryDurationSelector(value);\n    if (!!duration) {\n      this.add(this._throttled = subscribeToResult(this, duration));\n    }\n  }\n\n  private tryDurationSelector(value: T): SubscribableOrPromise<any> {\n    try {\n      return this.durationSelector(value);\n    } catch (err) {\n      this.destination.error(err);\n      return null;\n    }\n  }\n\n  private throttlingDone() {\n    const { _throttled, _trailing } = this;\n    if (_throttled) {\n      _throttled.unsubscribe();\n    }\n    this._throttled = null;\n\n    if (_trailing) {\n      this.send();\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.throttlingDone();\n  }\n\n  notifyComplete(): void {\n    this.throttlingDone();\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { async } from '../scheduler/async';\nimport { Observable } from '../Observable';\nimport { ThrottleConfig, defaultThrottleConfig } from './throttle';\nimport { MonoTypeOperatorFunction, SchedulerLike, TeardownLogic } from '../types';\n\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for `duration` milliseconds, then repeats this process.\n *\n * <span class=\"informal\">Lets a value pass, then ignores source values for the\n * next `duration` milliseconds.</span>\n *\n * ![](throttleTime.png)\n *\n * `throttleTime` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled. After `duration` milliseconds (or the time unit determined\n * internally by the optional `scheduler`) has passed, the timer is disabled,\n * and this process repeats for the next source value. Optionally takes a\n * {@link SchedulerLike} for managing timers.\n *\n * ## Examples\n *\n * #### Limit click rate\n *\n * Emit clicks at a rate of at most one click per second\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { throttleTime } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(throttleTime(1000));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * #### Double Click\n *\n * The following example only emits clicks which happen within a subsequent\n * delay of 400ms of the previous click. This for example can emulate a double\n * click. It makes use of the `trailing` parameter of the throttle configuration.\n *\n * ```ts\n * import { fromEvent, asyncScheduler } from 'rxjs';\n * import { throttleTime, withLatestFrom } from 'rxjs/operators';\n *\n * // defaultThottleConfig = { leading: true, trailing: false }\n * const throttleConfig = {\n *   leading: false,\n *   trailing: true\n * }\n *\n * const click = fromEvent(document, 'click');\n * const doubleClick = click.pipe(\n *   throttleTime(400, asyncScheduler, throttleConfig)\n * );\n *\n * doubleClick.subscribe((throttleValue: Event) => {\n *   console.log(`Double-clicked! Timestamp: ${throttleValue.timeStamp}`);\n * });\n * ```\n *\n * If you enable the `leading` parameter in this example, the output would be the primary click and\n * the double click, but restricts additional clicks within 400ms.\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {number} duration Time to wait before emitting another value after\n * emitting the last value, measured in milliseconds or the time unit determined\n * internally by the optional `scheduler`.\n * @param {SchedulerLike} [scheduler=async] The {@link SchedulerLike} to use for\n * managing the timers that handle the throttling.\n * @param {Object} config a configuration object to define `leading` and\n * `trailing` behavior. Defaults to `{ leading: true, trailing: false }`.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttleTime\n * @owner Observable\n */\nexport function throttleTime<T>(duration: number,\n                                scheduler: SchedulerLike = async,\n                                config: ThrottleConfig = defaultThrottleConfig): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => source.lift(new ThrottleTimeOperator(duration, scheduler, config.leading, config.trailing));\n}\n\nclass ThrottleTimeOperator<T> implements Operator<T, T> {\n  constructor(private duration: number,\n              private scheduler: SchedulerLike,\n              private leading: boolean,\n              private trailing: boolean) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(\n      new ThrottleTimeSubscriber(subscriber, this.duration, this.scheduler, this.leading, this.trailing)\n    );\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass ThrottleTimeSubscriber<T> extends Subscriber<T> {\n  private throttled: Subscription;\n  private _hasTrailingValue: boolean = false;\n  private _trailingValue: T = null;\n\n  constructor(destination: Subscriber<T>,\n              private duration: number,\n              private scheduler: SchedulerLike,\n              private leading: boolean,\n              private trailing: boolean) {\n    super(destination);\n  }\n\n  protected _next(value: T) {\n    if (this.throttled) {\n      if (this.trailing) {\n        this._trailingValue = value;\n        this._hasTrailingValue = true;\n      }\n    } else {\n      this.add(this.throttled = this.scheduler.schedule<DispatchArg<T>>(dispatchNext, this.duration, { subscriber: this }));\n      if (this.leading) {\n        this.destination.next(value);\n      } else if (this.trailing) {\n        this._trailingValue = value;\n        this._hasTrailingValue = true;\n      }\n    }\n  }\n\n  protected _complete() {\n    if (this._hasTrailingValue) {\n      this.destination.next(this._trailingValue);\n      this.destination.complete();\n    } else {\n      this.destination.complete();\n    }\n  }\n\n  clearThrottle() {\n    const throttled = this.throttled;\n    if (throttled) {\n      if (this.trailing && this._hasTrailingValue) {\n        this.destination.next(this._trailingValue);\n        this._trailingValue = null;\n        this._hasTrailingValue = false;\n      }\n      throttled.unsubscribe();\n      this.remove(throttled);\n      this.throttled = null;\n    }\n  }\n}\n\ninterface DispatchArg<T> {\n  subscriber: ThrottleTimeSubscriber<T>;\n}\n\nfunction dispatchNext<T>(arg: DispatchArg<T>) {\n  const { subscriber } = arg;\n  subscriber.clearThrottle();\n}\n","\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { SchedulerLike, OperatorFunction } from '../types';\nimport { scan } from './scan';\nimport { defer } from '../observable/defer';\nimport { map } from './map';\n\n/**\n *\n * Emits an object containing the current value, and the time that has\n * passed between emitting the current value and the previous value, which is\n * calculated by using the provided `scheduler`'s `now()` method to retrieve\n * the current time at each emission, then calculating the difference. The `scheduler`\n * defaults to {@link asyncScheduler}, so by default, the `interval` will be in\n * milliseconds.\n *\n * <span class=\"informal\">Convert an Observable that emits items into one that\n * emits indications of the amount of time elapsed between those emissions.</span>\n *\n * ![](timeinterval.png)\n *\n * ## Examples\n * Emit inteval between current value with the last value\n *\n * ```ts\n * const seconds = interval(1000);\n *\n * seconds.pipe(timeInterval())\n * .subscribe(\n *     value => console.log(value),\n *     err => console.log(err),\n * );\n *\n * seconds.pipe(timeout(900))\n * .subscribe(\n *     value => console.log(value),\n *     err => console.log(err),\n * );\n *\n * // NOTE: The values will never be this precise,\n * // intervals created with `interval` or `setInterval`\n * // are non-deterministic.\n *\n * // {value: 0, interval: 1000}\n * // {value: 1, interval: 1000}\n * // {value: 2, interval: 1000}\n * ```\n *\n * @param {SchedulerLike} [scheduler] Scheduler used to get the current time.\n * @return {Observable<{ interval: number, value: T }>} Observable that emit infomation about value and interval\n * @method timeInterval\n */\nexport function timeInterval<T>(scheduler: SchedulerLike = async): OperatorFunction<T, TimeInterval<T>> {\n  return (source: Observable<T>) => defer(() => {\n    return source.pipe(\n      // TODO(benlesh): correct these typings.\n      scan(\n        ({ current }, value) => ({ value, current: scheduler.now(), last: current }),\n        { current: scheduler.now(), value: undefined,  last: undefined }\n      ) as any,\n      map<any, TimeInterval<T>>(({ current, last, value }) => new TimeInterval(value, current - last)),\n    );\n  });\n}\n\n// TODO(benlesh): make this an interface, export the interface, but not the implemented class,\n// there's no reason users should be manually creating this type.\n\n/**\n * @deprecated exposed API, use as interface only.\n */\nexport class TimeInterval<T> {\n  constructor(public value: T, public interval: number) {}\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nimport { Observable } from '../Observable';\nimport { isDate } from '../util/isDate';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction, MonoTypeOperatorFunction, SchedulerAction, SchedulerLike, TeardownLogic } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function timeoutWith<T, R>(due: number | Date, withObservable: ObservableInput<R>, scheduler?: SchedulerLike): OperatorFunction<T, T | R>;\n/* tslint:enable:max-line-length */\n\n/**\n *\n * Errors if Observable does not emit a value in given time span, in case of which\n * subscribes to the second Observable.\n *\n * <span class=\"informal\">It's a version of `timeout` operator that let's you specify fallback Observable.</span>\n *\n * ![](timeoutWith.png)\n *\n * `timeoutWith` is a variation of `timeout` operator. It behaves exactly the same,\n * still accepting as a first argument either a number or a Date, which control - respectively -\n * when values of source Observable should be emitted or when it should complete.\n *\n * The only difference is that it accepts a second, required parameter. This parameter\n * should be an Observable which will be subscribed when source Observable fails any timeout check.\n * So whenever regular `timeout` would emit an error, `timeoutWith` will instead start re-emitting\n * values from second Observable. Note that this fallback Observable is not checked for timeouts\n * itself, so it can emit values and complete at arbitrary points in time. From the moment of a second\n * subscription, Observable returned from `timeoutWith` simply mirrors fallback stream. When that\n * stream completes, it completes as well.\n *\n * Scheduler, which in case of `timeout` is provided as as second argument, can be still provided\n * here - as a third, optional parameter. It still is used to schedule timeout checks and -\n * as a consequence - when second Observable will be subscribed, since subscription happens\n * immediately after failing check.\n *\n * ## Example\n * Add fallback observable\n * ```ts\n * import { intrerval } from 'rxjs';\n * import { timeoutWith } from 'rxjs/operators';\n *\n * const seconds = interval(1000);\n * const minutes = interval(60 * 1000);\n *\n * seconds.pipe(timeoutWith(900, minutes))\n *   .subscribe(\n *     value => console.log(value), // After 900ms, will start emitting `minutes`,\n *                                  // since first value of `seconds` will not arrive fast enough.\n *     err => console.log(err),     // Would be called after 900ms in case of `timeout`,\n *                                  // but here will never be called.\n *   );\n * ```\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {Observable<T>} withObservable Observable which will be subscribed if source fails timeout check.\n * @param {SchedulerLike} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source or, when timeout check fails, of an Observable\n *                          passed as a second parameter.\n * @method timeoutWith\n * @owner Observable\n */\nexport function timeoutWith<T, R>(due: number | Date,\n                                  withObservable: ObservableInput<R>,\n                                  scheduler: SchedulerLike = async): OperatorFunction<T, T | R> {\n  return (source: Observable<T>) => {\n    let absoluteTimeout = isDate(due);\n    let waitFor = absoluteTimeout ? (+due - scheduler.now()) : Math.abs(<number>due);\n    return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n  };\n}\n\nclass TimeoutWithOperator<T> implements Operator<T, T> {\n  constructor(private waitFor: number,\n              private absoluteTimeout: boolean,\n              private withObservable: ObservableInput<any>,\n              private scheduler: SchedulerLike) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new TimeoutWithSubscriber(\n      subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler\n    ));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass TimeoutWithSubscriber<T, R> extends OuterSubscriber<T, R> {\n\n  private action: SchedulerAction<TimeoutWithSubscriber<T, R>> = null;\n\n  constructor(destination: Subscriber<T>,\n              private absoluteTimeout: boolean,\n              private waitFor: number,\n              private withObservable: ObservableInput<any>,\n              private scheduler: SchedulerLike) {\n    super(destination);\n    this.scheduleTimeout();\n  }\n\n  private static dispatchTimeout<T, R>(subscriber: TimeoutWithSubscriber<T, R>): void {\n    const { withObservable } = subscriber;\n    (<any> subscriber)._unsubscribeAndRecycle();\n    subscriber.add(subscribeToResult(subscriber, withObservable));\n  }\n\n  private scheduleTimeout(): void {\n    const { action } = this;\n    if (action) {\n      // Recycle the action if we've already scheduled one. All the production\n      // Scheduler Actions mutate their state/delay time and return themeselves.\n      // VirtualActions are immutable, so they create and return a clone. In this\n      // case, we need to set the action reference to the most recent VirtualAction,\n      // to ensure that's the one we clone from next time.\n      this.action = (<SchedulerAction<TimeoutWithSubscriber<T, R>>> action.schedule(this, this.waitFor));\n    } else {\n      this.add(this.action = (<SchedulerAction<TimeoutWithSubscriber<T, R>>> this.scheduler.schedule<TimeoutWithSubscriber<T, R>>(\n        TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this\n      )));\n    }\n  }\n\n  protected _next(value: T): void {\n    if (!this.absoluteTimeout) {\n      this.scheduleTimeout();\n    }\n    super._next(value);\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    this.action = null;\n    this.scheduler = null;\n    this.withObservable = null;\n  }\n}\n","import { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { TimeoutError } from '../util/TimeoutError';\nimport { MonoTypeOperatorFunction, SchedulerAction, SchedulerLike, TeardownLogic } from '../types';\nimport { timeoutWith } from './timeoutWith';\nimport { throwError } from '../observable/throwError';\n\n/**\n *\n * Errors if Observable does not emit a value in given time span.\n *\n * <span class=\"informal\">Timeouts on Observable that doesn't emit values fast enough.</span>\n *\n * ![](timeout.png)\n *\n * `timeout` operator accepts as an argument either a number or a Date.\n *\n * If number was provided, it returns an Observable that behaves like a source\n * Observable, unless there is a period of time where there is no value emitted.\n * So if you provide `100` as argument and first value comes after 50ms from\n * the moment of subscription, this value will be simply re-emitted by the resulting\n * Observable. If however after that 100ms passes without a second value being emitted,\n * stream will end with an error and source Observable will be unsubscribed.\n * These checks are performed throughout whole lifecycle of Observable - from the moment\n * it was subscribed to, until it completes or errors itself. Thus every value must be\n * emitted within specified period since previous value.\n *\n * If provided argument was Date, returned Observable behaves differently. It throws\n * if Observable did not complete before provided Date. This means that periods between\n * emission of particular values do not matter in this case. If Observable did not complete\n * before provided Date, source Observable will be unsubscribed. Other than that, resulting\n * stream behaves just as source Observable.\n *\n * `timeout` accepts also a Scheduler as a second parameter. It is used to schedule moment (or moments)\n * when returned Observable will check if source stream emitted value or completed.\n *\n * ## Examples\n * Check if ticks are emitted within certain timespan\n * ```ts\n * import { interval } from 'rxjs';\n * import { timeout } from 'rxjs/operators';\n *\n * const seconds = interval(1000);\n *\n * seconds.pipe(timeout(1100))      // Let's use bigger timespan to be safe,\n *                                  // since `interval` might fire a bit later then scheduled.\n * .subscribe(\n *     value => console.log(value), // Will emit numbers just as regular `interval` would.\n *     err => console.log(err),     // Will never be called.\n * );\n *\n * seconds.pipe(timeout(900))\n * .subscribe(\n *     value => console.log(value), // Will never be called.\n *     err => console.log(err),     // Will emit error before even first value is emitted,\n *                                  // since it did not arrive within 900ms period.\n * );\n * ```\n *\n * Use Date to check if Observable completed\n * ```ts\n * import { interval } from 'rxjs';\n * import { timeout } from 'rxjs/operators';\n *\n * const seconds = interval(1000);\n *\n * seconds.pipe(\n *   timeout(new Date(\"December 17, 2020 03:24:00\")),\n * )\n * .subscribe(\n *     value => console.log(value), // Will emit values as regular `interval` would\n *                                  // until December 17, 2020 at 03:24:00.\n *     err => console.log(err)      // On December 17, 2020 at 03:24:00 it will emit an error,\n *                                  // since Observable did not complete by then.\n * );\n * ```\n * @see {@link timeoutWith}\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {SchedulerLike} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source, unless timeout checks fail.\n * @method timeout\n * @owner Observable\n */\nexport function timeout<T>(due: number | Date,\n                           scheduler: SchedulerLike = async): MonoTypeOperatorFunction<T> {\n  return timeoutWith(due, throwError(new TimeoutError()), scheduler);\n}\n","\nimport { async } from '../scheduler/async';\nimport { OperatorFunction, SchedulerLike, Timestamp as TimestampInterface } from '../types';\nimport { map } from './map';\n\n/**\n * Attaches a timestamp to each item emitted by an observable indicating when it was emitted\n *\n * The `timestamp` operator maps the *source* observable stream to an object of type\n * `{value: T, timestamp: R}`. The properties are generically typed. The `value` property contains the value\n * and type of the *source* observable. The `timestamp` is generated by the schedulers `now` function. By\n * default it uses the *async* scheduler which simply returns `Date.now()` (milliseconds since 1970/01/01\n * 00:00:00:000) and therefore is of type `number`.\n *\n * ![](timestamp.png)\n *\n * ## Example\n *\n * In this example there is a timestamp attached to the documents click event.\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { timestamp } from 'rxjs/operators';\n *\n * const clickWithTimestamp = fromEvent(document, 'click').pipe(\n *   timestamp()\n * );\n *\n * // Emits data of type {value: MouseEvent, timestamp: number}\n * clickWithTimestamp.subscribe(data => {\n *   console.log(data);\n * });\n * ```\n *\n * @param scheduler\n * @return {Observable<Timestamp<any>>|WebSocketSubject<T>|Observable<T>}\n * @method timestamp\n * @owner Observable\n */\nexport function timestamp<T>(scheduler: SchedulerLike = async): OperatorFunction<T, Timestamp<T>> {\n  return map((value: T) => new Timestamp(value, scheduler.now()));\n  // return (source: Observable<T>) => source.lift(new TimestampOperator(scheduler));\n}\n\nexport class Timestamp<T> implements TimestampInterface<T> {\n  constructor(public value: T, public timestamp: number) {\n  }\n}\n","import { reduce } from './reduce';\nimport { OperatorFunction } from '../types';\n\nfunction toArrayReducer<T>(arr: T[], item: T, index: number) {\n  if (index === 0) {\n    return [item];\n  }\n  arr.push(item);\n  return arr;\n}\n\n/**\n * Collects all source emissions and emits them as an array when the source completes.\n *\n * <span class=\"informal\">Get all values inside an array when the source completes</span>\n *\n * ![](toArray.png)\n *\n * `toArray` will wait until the source Observable completes before emitting\n * the array containing all emissions. When the source Observable errors no\n * array will be emitted.\n *\n *  ## Example\n * ```ts\n * import { interval } from 'rxjs';\n * import { toArray, take } from 'rxjs/operators';\n *\n * const source = interval(1000);\n * const example = source.pipe(\n *   take(10),\n *   toArray()\n * );\n *\n * const subscribe = example.subscribe(val => console.log(val));\n *\n * // output: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n *\n * ```\n* @return An array from an observable sequence.\n* @method toArray\n* @owner Observable\n*/\nexport function toArray<T>(): OperatorFunction<T, T[]> {\n  return reduce(toArrayReducer, [] as T[]);\n}\n","import { Observable } from '../Observable';\nimport { OperatorFunction } from '../types';\nimport { Subject } from '../Subject';\nimport { Subscriber } from '../Subscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { Operator } from '../Operator';\n\n/**\n * Branch out the source Observable values as a nested Observable whenever\n * `windowBoundaries` emits.\n *\n * <span class=\"informal\">It's like {@link buffer}, but emits a nested Observable\n * instead of an array.</span>\n *\n * ![](window.png)\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping\n * windows. It emits the current window and opens a new one whenever the\n * Observable `windowBoundaries` emits an item. Because each window is an\n * Observable, the output is a higher-order Observable.\n *\n * ## Example\n * In every window of 1 second each, emit at most 2 click events\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { window, mergeAll, map, take } from 'rxjs/operators';\n *\n *  const clicks = fromEvent(document, 'click');\n *  const sec = interval(1000);\n *  const result = clicks.pipe(\n *      window(sec),\n *      map(win => win.pipe(take(2))), // each window has at most 2 emissions\n *      mergeAll(),              // flatten the Observable-of-Observables\n *  );\n *  result.subscribe(x => console.log(x));\n * ```\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link buffer}\n *\n * @param {Observable<any>} windowBoundaries An Observable that completes the\n * previous window and starts a new window.\n * @return {Observable<Observable<T>>} An Observable of windows, which are\n * Observables emitting values of the source Observable.\n * @method window\n * @owner Observable\n */\nexport function window<T>(windowBoundaries: Observable<any>): OperatorFunction<T, Observable<T>> {\n  return function windowOperatorFunction(source: Observable<T>) {\n    return source.lift(new WindowOperator(windowBoundaries));\n  };\n}\n\nclass WindowOperator<T> implements Operator<T, Observable<T>> {\n\n  constructor(private windowBoundaries: Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<Observable<T>>, source: any): any {\n    const windowSubscriber = new WindowSubscriber(subscriber);\n    const sourceSubscription = source.subscribe(windowSubscriber);\n    if (!sourceSubscription.closed) {\n      windowSubscriber.add(subscribeToResult(windowSubscriber, this.windowBoundaries));\n    }\n    return sourceSubscription;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass WindowSubscriber<T> extends OuterSubscriber<T, any> {\n\n  private window: Subject<T> = new Subject<T>();\n\n  constructor(destination: Subscriber<Observable<T>>) {\n    super(destination);\n    destination.next(this.window);\n  }\n\n  notifyNext(outerValue: T, innerValue: any,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, any>): void {\n    this.openWindow();\n  }\n\n  notifyError(error: any, innerSub: InnerSubscriber<T, any>): void {\n    this._error(error);\n  }\n\n  notifyComplete(innerSub: InnerSubscriber<T, any>): void {\n    this._complete();\n  }\n\n  protected _next(value: T): void {\n    this.window.next(value);\n  }\n\n  protected _error(err: any): void {\n    this.window.error(err);\n    this.destination.error(err);\n  }\n\n  protected _complete(): void {\n    this.window.complete();\n    this.destination.complete();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    this.window = null;\n  }\n\n  private openWindow(): void  {\n    const prevWindow = this.window;\n    if (prevWindow) {\n      prevWindow.complete();\n    }\n    const destination = this.destination;\n    const newWindow = this.window = new Subject<T>();\n    destination.next(newWindow);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nimport { OperatorFunction } from '../types';\n\n/**\n * Branch out the source Observable values as a nested Observable with each\n * nested Observable emitting at most `windowSize` values.\n *\n * <span class=\"informal\">It's like {@link bufferCount}, but emits a nested\n * Observable instead of an array.</span>\n *\n * ![](windowCount.png)\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows every `startWindowEvery`\n * items, each containing no more than `windowSize` items. When the source\n * Observable completes or encounters an error, the output Observable emits\n * the current window and propagates the notification from the source\n * Observable. If `startWindowEvery` is not provided, then new windows are\n * started immediately at the start of the source and when each window completes\n * with size `windowSize`.\n *\n * ## Examples\n * Ignore every 3rd click event, starting from the first one\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { windowCount, map, mergeAll, skip } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowCount(3),\n *   map(win => win.pipe(skip(1))), // skip first of every 3 clicks\n *   mergeAll()                     // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * Ignore every 3rd click event, starting from the third one\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { windowCount, mergeAll } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowCount(2, 3),\n *   mergeAll(),              // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link window}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link bufferCount}\n *\n * @param {number} windowSize The maximum number of values emitted by each\n * window.\n * @param {number} [startWindowEvery] Interval at which to start a new window.\n * For example if `startWindowEvery` is `2`, then a new window will be started\n * on every other value from the source. A new window is started at the\n * beginning of the source by default.\n * @return {Observable<Observable<T>>} An Observable of windows, which in turn\n * are Observable of values.\n * @method windowCount\n * @owner Observable\n */\nexport function windowCount<T>(windowSize: number,\n                               startWindowEvery: number = 0): OperatorFunction<T, Observable<T>> {\n  return function windowCountOperatorFunction(source: Observable<T>) {\n    return source.lift(new WindowCountOperator<T>(windowSize, startWindowEvery));\n  };\n}\n\nclass WindowCountOperator<T> implements Operator<T, Observable<T>> {\n\n  constructor(private windowSize: number,\n              private startWindowEvery: number) {\n  }\n\n  call(subscriber: Subscriber<Observable<T>>, source: any): any {\n    return source.subscribe(new WindowCountSubscriber(subscriber, this.windowSize, this.startWindowEvery));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass WindowCountSubscriber<T> extends Subscriber<T> {\n  private windows: Subject<T>[] = [ new Subject<T>() ];\n  private count: number = 0;\n\n  constructor(protected destination: Subscriber<Observable<T>>,\n              private windowSize: number,\n              private startWindowEvery: number) {\n    super(destination);\n    destination.next(this.windows[0]);\n  }\n\n  protected _next(value: T) {\n    const startWindowEvery = (this.startWindowEvery > 0) ? this.startWindowEvery : this.windowSize;\n    const destination = this.destination;\n    const windowSize = this.windowSize;\n    const windows = this.windows;\n    const len = windows.length;\n\n    for (let i = 0; i < len && !this.closed; i++) {\n      windows[i].next(value);\n    }\n    const c = this.count - windowSize + 1;\n    if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n      windows.shift().complete();\n    }\n    if (++this.count % startWindowEvery === 0 && !this.closed) {\n      const window = new Subject<T>();\n      windows.push(window);\n      destination.next(window);\n    }\n  }\n\n  protected _error(err: any) {\n    const windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().error(err);\n      }\n    }\n    this.destination.error(err);\n  }\n\n  protected _complete() {\n    const windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().complete();\n      }\n    }\n    this.destination.complete();\n  }\n\n  protected _unsubscribe() {\n    this.count = 0;\n    this.windows = null;\n  }\n}\n","import { Subject } from '../Subject';\nimport { Operator } from '../Operator';\nimport { async } from '../scheduler/async';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nimport { OperatorFunction, SchedulerLike, SchedulerAction } from '../types';\n\n/**\n * Branch out the source Observable values as a nested Observable periodically\n * in time.\n *\n * <span class=\"informal\">It's like {@link bufferTime}, but emits a nested\n * Observable instead of an array.</span>\n *\n * ![](windowTime.png)\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable starts a new window periodically, as\n * determined by the `windowCreationInterval` argument. It emits each window\n * after a fixed timespan, specified by the `windowTimeSpan` argument. When the\n * source Observable completes or encounters an error, the output Observable\n * emits the current window and propagates the notification from the source\n * Observable. If `windowCreationInterval` is not provided, the output\n * Observable starts a new window when the previous window of duration\n * `windowTimeSpan` completes. If `maxWindowCount` is provided, each window\n * will emit at most fixed number of values. Window will complete immediately\n * after emitting last value and next one still will open as specified by\n * `windowTimeSpan` and `windowCreationInterval` arguments.\n *\n * ## Examples\n * In every window of 1 second each, emit at most 2 click events\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { windowTime, map, mergeAll, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowTime(1000),\n *   map(win => win.pipe(take(2))), // each window has at most 2 emissions\n *   mergeAll(),                    // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * Every 5 seconds start a window 1 second long, and emit at most 2 click events per window\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { windowTime, map, mergeAll, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowTime(1000, 5000),\n *   map(win => win.pipe(take(2))), // each window has at most 2 emissions\n *   mergeAll(),                    // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * Same as example above but with maxWindowCount instead of take\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { windowTime, mergeAll } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowTime(1000, 5000, 2), // each window has still at most 2 emissions\n *   mergeAll(),                // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link bufferTime}\n *\n * @param {number} windowTimeSpan The amount of time to fill each window.\n * @param {number} [windowCreationInterval] The interval at which to start new\n * windows.\n * @param {number} [maxWindowSize=Number.POSITIVE_INFINITY] Max number of\n * values each window can emit before completion.\n * @param {SchedulerLike} [scheduler=async] The scheduler on which to schedule the\n * intervals that determine window boundaries.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowTime\n * @owner Observable\n */\nexport function windowTime<T>(windowTimeSpan: number,\n                              scheduler?: SchedulerLike): OperatorFunction<T, Observable<T>>;\nexport function windowTime<T>(windowTimeSpan: number,\n                              windowCreationInterval: number,\n                              scheduler?: SchedulerLike): OperatorFunction<T, Observable<T>>;\nexport function windowTime<T>(windowTimeSpan: number,\n                              windowCreationInterval: number,\n                              maxWindowSize: number,\n                              scheduler?: SchedulerLike): OperatorFunction<T, Observable<T>>;\n\nexport function windowTime<T>(windowTimeSpan: number): OperatorFunction<T, Observable<T>> {\n  let scheduler: SchedulerLike = async;\n  let windowCreationInterval: number = null;\n  let maxWindowSize: number = Number.POSITIVE_INFINITY;\n\n  if (isScheduler(arguments[3])) {\n    scheduler = arguments[3];\n  }\n\n  if (isScheduler(arguments[2])) {\n    scheduler = arguments[2];\n  } else if (isNumeric(arguments[2])) {\n    maxWindowSize = arguments[2];\n  }\n\n  if (isScheduler(arguments[1])) {\n    scheduler = arguments[1];\n  } else if (isNumeric(arguments[1])) {\n    windowCreationInterval = arguments[1];\n  }\n\n  return function windowTimeOperatorFunction(source: Observable<T>) {\n    return source.lift(new WindowTimeOperator<T>(windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler));\n  };\n}\n\nclass WindowTimeOperator<T> implements Operator<T, Observable<T>> {\n\n  constructor(private windowTimeSpan: number,\n              private windowCreationInterval: number | null,\n              private maxWindowSize: number,\n              private scheduler: SchedulerLike) {\n  }\n\n  call(subscriber: Subscriber<Observable<T>>, source: any): any {\n    return source.subscribe(new WindowTimeSubscriber(\n      subscriber, this.windowTimeSpan, this.windowCreationInterval, this.maxWindowSize, this.scheduler\n    ));\n  }\n}\n\ninterface CreationState<T> {\n  windowTimeSpan: number;\n  windowCreationInterval: number;\n  subscriber: WindowTimeSubscriber<T>;\n  scheduler: SchedulerLike;\n}\n\ninterface TimeSpanOnlyState<T> {\n    window: CountedSubject<T>;\n    windowTimeSpan: number;\n    subscriber: WindowTimeSubscriber<T>;\n  }\n\ninterface CloseWindowContext<T> {\n  action: SchedulerAction<CreationState<T>>;\n  subscription: Subscription;\n}\n\ninterface CloseState<T> {\n  subscriber: WindowTimeSubscriber<T>;\n  window: CountedSubject<T>;\n  context: CloseWindowContext<T>;\n}\n\nclass CountedSubject<T> extends Subject<T> {\n  private _numberOfNextedValues: number = 0;\n\n  next(value?: T): void {\n    this._numberOfNextedValues++;\n    super.next(value);\n  }\n\n  get numberOfNextedValues(): number {\n    return this._numberOfNextedValues;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass WindowTimeSubscriber<T> extends Subscriber<T> {\n  private windows: CountedSubject<T>[] = [];\n\n  constructor(protected destination: Subscriber<Observable<T>>,\n              private windowTimeSpan: number,\n              private windowCreationInterval: number | null,\n              private maxWindowSize: number,\n              private scheduler: SchedulerLike) {\n    super(destination);\n\n    const window = this.openWindow();\n    if (windowCreationInterval !== null && windowCreationInterval >= 0) {\n      const closeState: CloseState<T> = { subscriber: this, window, context: <any>null };\n      const creationState: CreationState<T> = { windowTimeSpan, windowCreationInterval, subscriber: this, scheduler };\n      this.add(scheduler.schedule<CloseState<T>>(dispatchWindowClose, windowTimeSpan, closeState));\n      this.add(scheduler.schedule<CreationState<T>>(dispatchWindowCreation, windowCreationInterval, creationState));\n    } else {\n      const timeSpanOnlyState: TimeSpanOnlyState<T> = { subscriber: this, window, windowTimeSpan };\n      this.add(scheduler.schedule<TimeSpanOnlyState<T>>(dispatchWindowTimeSpanOnly, windowTimeSpan, timeSpanOnlyState));\n    }\n  }\n\n  protected _next(value: T): void {\n    const windows = this.windows;\n    const len = windows.length;\n    for (let i = 0; i < len; i++) {\n      const window = windows[i];\n      if (!window.closed) {\n        window.next(value);\n        if (window.numberOfNextedValues >= this.maxWindowSize) {\n          this.closeWindow(window);\n        }\n      }\n    }\n  }\n\n  protected _error(err: any): void {\n    const windows = this.windows;\n    while (windows.length > 0) {\n      windows.shift().error(err);\n    }\n    this.destination.error(err);\n  }\n\n  protected _complete(): void {\n    const windows = this.windows;\n    while (windows.length > 0) {\n      const window = windows.shift();\n      if (!window.closed) {\n        window.complete();\n      }\n    }\n    this.destination.complete();\n  }\n\n  public openWindow(): CountedSubject<T> {\n    const window = new CountedSubject<T>();\n    this.windows.push(window);\n    const destination = this.destination;\n    destination.next(window);\n    return window;\n  }\n\n  public closeWindow(window: CountedSubject<T>): void {\n    window.complete();\n    const windows = this.windows;\n    windows.splice(windows.indexOf(window), 1);\n  }\n}\n\nfunction dispatchWindowTimeSpanOnly<T>(this: SchedulerAction<TimeSpanOnlyState<T>>, state: TimeSpanOnlyState<T>): void {\n  const { subscriber, windowTimeSpan, window } = state;\n  if (window) {\n    subscriber.closeWindow(window);\n  }\n  state.window = subscriber.openWindow();\n  this.schedule(state, windowTimeSpan);\n}\n\nfunction dispatchWindowCreation<T>(this: SchedulerAction<CreationState<T>>, state: CreationState<T>): void {\n  const { windowTimeSpan, subscriber, scheduler, windowCreationInterval } = state;\n  const window = subscriber.openWindow();\n  const action = this;\n  let context: CloseWindowContext<T> = { action, subscription: <any>null };\n  const timeSpanState: CloseState<T> = { subscriber, window, context };\n  context.subscription = scheduler.schedule<CloseState<T>>(dispatchWindowClose, windowTimeSpan, timeSpanState);\n  action.add(context.subscription);\n  action.schedule(state, windowCreationInterval);\n}\n\nfunction dispatchWindowClose<T>(state: CloseState<T>): void {\n  const { subscriber, window, context } = state;\n  if (context && context.action && context.subscription) {\n    context.action.remove(context.subscription);\n  }\n  subscriber.closeWindow(window);\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OperatorFunction } from '../types';\n\n/**\n * Branch out the source Observable values as a nested Observable starting from\n * an emission from `openings` and ending when the output of `closingSelector`\n * emits.\n *\n * <span class=\"informal\">It's like {@link bufferToggle}, but emits a nested\n * Observable instead of an array.</span>\n *\n * ![](windowToggle.png)\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows that contain those items\n * emitted by the source Observable between the time when the `openings`\n * Observable emits an item and when the Observable returned by\n * `closingSelector` emits an item.\n *\n * ## Example\n * Every other second, emit the click events from the next 500ms\n * ```ts\n * import { fromEvent, interval, EMPTY } from 'rxjs';\n * import { windowToggle, mergeAll } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const openings = interval(1000);\n * const result = clicks.pipe(\n *   windowToggle(openings, i => i % 2 ? interval(500) : EMPTY),\n *   mergeAll()\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowWhen}\n * @see {@link bufferToggle}\n *\n * @param {Observable<O>} openings An observable of notifications to start new\n * windows.\n * @param {function(value: O): Observable} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns an Observable,\n * which, when it emits (either `next` or `complete`), signals that the\n * associated window should complete.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowToggle\n * @owner Observable\n */\nexport function windowToggle<T, O>(openings: Observable<O>,\n                                   closingSelector: (openValue: O) => Observable<any>): OperatorFunction<T, Observable<T>> {\n  return (source: Observable<T>) => source.lift(new WindowToggleOperator<T, O>(openings, closingSelector));\n}\n\nclass WindowToggleOperator<T, O> implements Operator<T, Observable<T>> {\n\n  constructor(private openings: Observable<O>,\n              private closingSelector: (openValue: O) => Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<Observable<T>>, source: any): any {\n    return source.subscribe(new WindowToggleSubscriber(\n      subscriber, this.openings, this.closingSelector\n    ));\n  }\n}\n\ninterface WindowContext<T> {\n  window: Subject<T>;\n  subscription: Subscription;\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass WindowToggleSubscriber<T, O> extends OuterSubscriber<T, any> {\n  private contexts: WindowContext<T>[] = [];\n  private openSubscription: Subscription;\n\n  constructor(destination: Subscriber<Observable<T>>,\n              private openings: Observable<O>,\n              private closingSelector: (openValue: O) => Observable<any>) {\n    super(destination);\n    this.add(this.openSubscription = subscribeToResult(this, openings, openings as any));\n  }\n\n  protected _next(value: T) {\n    const { contexts } = this;\n    if (contexts) {\n      const len = contexts.length;\n      for (let i = 0; i < len; i++) {\n        contexts[i].window.next(value);\n      }\n    }\n  }\n\n  protected _error(err: any) {\n\n    const { contexts } = this;\n    this.contexts = null;\n\n    if (contexts) {\n      const len = contexts.length;\n      let index = -1;\n\n      while (++index < len) {\n        const context = contexts[index];\n        context.window.error(err);\n        context.subscription.unsubscribe();\n      }\n    }\n\n    super._error(err);\n  }\n\n  protected _complete() {\n    const { contexts } = this;\n    this.contexts = null;\n    if (contexts) {\n      const len = contexts.length;\n      let index = -1;\n      while (++index < len) {\n        const context = contexts[index];\n        context.window.complete();\n        context.subscription.unsubscribe();\n      }\n    }\n    super._complete();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribe() {\n    const { contexts } = this;\n    this.contexts = null;\n    if (contexts) {\n      const len = contexts.length;\n      let index = -1;\n      while (++index < len) {\n        const context = contexts[index];\n        context.window.unsubscribe();\n        context.subscription.unsubscribe();\n      }\n    }\n  }\n\n  notifyNext(outerValue: any, innerValue: any,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, any>): void {\n\n    if (outerValue === this.openings) {\n      let closingNotifier;\n      try {\n        const { closingSelector } = this;\n        closingNotifier = closingSelector(innerValue);\n      } catch (e) {\n        return this.error(e);\n      }\n\n      const window = new Subject<T>();\n      const subscription = new Subscription();\n      const context = { window, subscription };\n      this.contexts.push(context);\n      const innerSubscription = subscribeToResult(this, closingNotifier, context as any);\n\n      if (innerSubscription.closed) {\n        this.closeWindow(this.contexts.length - 1);\n      } else {\n        (<any>innerSubscription).context = context;\n        subscription.add(innerSubscription);\n      }\n\n      this.destination.next(window);\n    } else {\n      this.closeWindow(this.contexts.indexOf(outerValue));\n    }\n  }\n\n  notifyError(err: any): void {\n    this.error(err);\n  }\n\n  notifyComplete(inner: Subscription): void {\n    if (inner !== this.openSubscription) {\n      this.closeWindow(this.contexts.indexOf((<any> inner).context));\n    }\n  }\n\n  private closeWindow(index: number): void {\n    if (index === -1) {\n      return;\n    }\n\n    const { contexts } = this;\n    const context = contexts[index];\n    const { window, subscription } = context;\n    contexts.splice(index, 1);\n    window.complete();\n    subscription.unsubscribe();\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OperatorFunction } from '../types';\n\n/**\n * Branch out the source Observable values as a nested Observable using a\n * factory function of closing Observables to determine when to start a new\n * window.\n *\n * <span class=\"informal\">It's like {@link bufferWhen}, but emits a nested\n * Observable instead of an array.</span>\n *\n * ![](windowWhen.png)\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping windows.\n * It emits the current window and opens a new one whenever the Observable\n * produced by the specified `closingSelector` function emits an item. The first\n * window is opened immediately when subscribing to the output Observable.\n *\n * ## Example\n * Emit only the first two clicks events in every window of [1-5] random seconds\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { windowWhen, map, mergeAll, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   windowWhen(() => interval(1000 + Math.random() * 4000)),\n *   map(win => win.pipe(take(2))),     // each window has at most 2 emissions\n *   mergeAll()                         // flatten the Observable-of-Observables\n * );\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link bufferWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals (on either `next` or\n * `complete`) when to close the previous window and start a new one.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowWhen\n * @owner Observable\n */\nexport function windowWhen<T>(closingSelector: () => Observable<any>): OperatorFunction<T, Observable<T>> {\n  return function windowWhenOperatorFunction(source: Observable<T>) {\n    return source.lift(new WindowOperator<T>(closingSelector));\n  };\n}\n\nclass WindowOperator<T> implements Operator<T, Observable<T>> {\n  constructor(private closingSelector: () => Observable<any>) {\n  }\n\n  call(subscriber: Subscriber<Observable<T>>, source: any): any {\n    return source.subscribe(new WindowSubscriber(subscriber, this.closingSelector));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass WindowSubscriber<T> extends OuterSubscriber<T, any> {\n  private window: Subject<T>;\n  private closingNotification: Subscription;\n\n  constructor(protected destination: Subscriber<Observable<T>>,\n              private closingSelector: () => Observable<any>) {\n    super(destination);\n    this.openWindow();\n  }\n\n  notifyNext(outerValue: T, innerValue: any,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, any>): void {\n    this.openWindow(innerSub);\n  }\n\n  notifyError(error: any, innerSub: InnerSubscriber<T, any>): void {\n    this._error(error);\n  }\n\n  notifyComplete(innerSub: InnerSubscriber<T, any>): void {\n    this.openWindow(innerSub);\n  }\n\n  protected _next(value: T): void {\n    this.window.next(value);\n  }\n\n  protected _error(err: any): void {\n    this.window.error(err);\n    this.destination.error(err);\n    this.unsubscribeClosingNotification();\n  }\n\n  protected _complete(): void {\n    this.window.complete();\n    this.destination.complete();\n    this.unsubscribeClosingNotification();\n  }\n\n  private unsubscribeClosingNotification(): void {\n    if (this.closingNotification) {\n      this.closingNotification.unsubscribe();\n    }\n  }\n\n  private openWindow(innerSub: InnerSubscriber<T, any> = null): void {\n    if (innerSub) {\n      this.remove(innerSub);\n      innerSub.unsubscribe();\n    }\n\n    const prevWindow = this.window;\n    if (prevWindow) {\n      prevWindow.complete();\n    }\n\n    const window = this.window = new Subject<T>();\n    this.destination.next(window);\n\n    let closingNotifier;\n    try {\n      const { closingSelector } = this;\n      closingNotifier = closingSelector();\n    } catch (e) {\n      this.destination.error(e);\n      this.window.error(e);\n      return;\n    }\n    this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function withLatestFrom<T, R>(project: (v1: T) => R): OperatorFunction<T, R>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, R>(source2: O2, project: (v1: T, v2: ObservedValueOf<O2>) => R): OperatorFunction<T, R>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, R>(v2: O2, v3: O3, project: (v1: T, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>) => R): OperatorFunction<T, R>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, R>(v2: O2, v3: O3, v4: O4, project: (v1: T, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>) => R): OperatorFunction<T, R>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, R>(v2: O2, v3: O3, v4: O4, v5: O5, project: (v1: T, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>) => R): OperatorFunction<T, R>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>, R>(v2: O2, v3: O3, v4: O4, v5: O5, v6: O6, project: (v1: T, v2: ObservedValueOf<O2>, v3: ObservedValueOf<O3>, v4: ObservedValueOf<O4>, v5: ObservedValueOf<O5>, v6: ObservedValueOf<O6>) => R): OperatorFunction<T, R>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>>(source2: O2): OperatorFunction<T, [T, ObservedValueOf<O2>]>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>>(v2: O2, v3: O3): OperatorFunction<T, [T, ObservedValueOf<O2>, ObservedValueOf<O3>]>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>>(v2: O2, v3: O3, v4: O4): OperatorFunction<T, [T, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>]>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>>(v2: O2, v3: O3, v4: O4, v5: O5): OperatorFunction<T, [T, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>]>;\nexport function withLatestFrom<T, O2 extends ObservableInput<any>, O3 extends ObservableInput<any>, O4 extends ObservableInput<any>, O5 extends ObservableInput<any>, O6 extends ObservableInput<any>>(v2: O2, v3: O3, v4: O4, v5: O5, v6: O6): OperatorFunction<T, [T, ObservedValueOf<O2>, ObservedValueOf<O3>, ObservedValueOf<O4>, ObservedValueOf<O5>, ObservedValueOf<O6>]>;\nexport function withLatestFrom<T, R>(...observables: Array<ObservableInput<any> | ((...values: Array<any>) => R)>): OperatorFunction<T, R>;\nexport function withLatestFrom<T, R>(array: ObservableInput<any>[]): OperatorFunction<T, R>;\nexport function withLatestFrom<T, R>(array: ObservableInput<any>[], project: (...values: Array<any>) => R): OperatorFunction<T, R>;\n\n/* tslint:enable:max-line-length */\n\n/**\n * Combines the source Observable with other Observables to create an Observable\n * whose values are calculated from the latest values of each, only when the\n * source emits.\n *\n * <span class=\"informal\">Whenever the source Observable emits a value, it\n * computes a formula using that value plus the latest values from other input\n * Observables, then emits the output of that formula.</span>\n *\n * ![](withLatestFrom.png)\n *\n * `withLatestFrom` combines each value from the source Observable (the\n * instance) with the latest values from the other input Observables only when\n * the source emits a value, optionally using a `project` function to determine\n * the value to be emitted on the output Observable. All input Observables must\n * emit at least one value before the output Observable will emit a value.\n *\n * ## Example\n * On every click event, emit an array with the latest timer event plus the click event\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { withLatestFrom } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const timer = interval(1000);\n * const result = clicks.pipe(withLatestFrom(timer));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link combineLatest}\n *\n * @param {ObservableInput} other An input Observable to combine with the source\n * Observable. More than one input Observables may be given as argument.\n * @param {Function} [project] Projection function for combining values\n * together. Receives all values in order of the Observables passed, where the\n * first parameter is a value from the source Observable. (e.g.\n * `a.pipe(withLatestFrom(b, c), map(([a1, b1, c1]) => a1 + b1 + c1))`). If this is not\n * passed, arrays will be emitted on the output Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n * @method withLatestFrom\n * @owner Observable\n */\nexport function withLatestFrom<T, R>(...args: Array<ObservableInput<any> | ((...values: Array<any>) => R)>): OperatorFunction<T, R> {\n  return (source: Observable<T>) => {\n    let project: any;\n    if (typeof args[args.length - 1] === 'function') {\n      project = args.pop();\n    }\n    const observables = <Observable<any>[]>args;\n    return source.lift(new WithLatestFromOperator(observables, project));\n  };\n}\n\nclass WithLatestFromOperator<T, R> implements Operator<T, R> {\n  constructor(private observables: Observable<any>[],\n              private project?: (...values: any[]) => Observable<R>) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new WithLatestFromSubscriber(subscriber, this.observables, this.project));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass WithLatestFromSubscriber<T, R> extends OuterSubscriber<T, R> {\n  private values: any[];\n  private toRespond: number[] = [];\n\n  constructor(destination: Subscriber<R>,\n              private observables: Observable<any>[],\n              private project?: (...values: any[]) => Observable<R>) {\n    super(destination);\n    const len = observables.length;\n    this.values = new Array(len);\n\n    for (let i = 0; i < len; i++) {\n      this.toRespond.push(i);\n    }\n\n    for (let i = 0; i < len; i++) {\n      let observable = observables[i];\n      this.add(subscribeToResult<T, R>(this, observable, <any>observable, i));\n    }\n  }\n\n  notifyNext(outerValue: T, innerValue: R,\n             outerIndex: number, innerIndex: number,\n             innerSub: InnerSubscriber<T, R>): void {\n    this.values[outerIndex] = innerValue;\n    const toRespond = this.toRespond;\n    if (toRespond.length > 0) {\n      const found = toRespond.indexOf(outerIndex);\n      if (found !== -1) {\n        toRespond.splice(found, 1);\n      }\n    }\n  }\n\n  notifyComplete() {\n    // noop\n  }\n\n  protected _next(value: T) {\n    if (this.toRespond.length === 0) {\n      const args = [value, ...this.values];\n      if (this.project) {\n        this._tryProject(args);\n      } else {\n        this.destination.next(args);\n      }\n    }\n  }\n\n  private _tryProject(args: any[]) {\n    let result: any;\n    try {\n      result = this.project.apply(this, args);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  }\n}\n","import { zip as zipStatic } from '../observable/zip';\nimport { Observable } from '../Observable';\nimport { ObservableInput, OperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, R>(project: (v1: T) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, R>(v2: ObservableInput<T2>, project: (v1: T, v2: T2) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, project: (v1: T, v2: T2, v3: T3) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3, T4, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, project: (v1: T, v2: T2, v3: T3, v4: T4) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3, T4, T5, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, project: (v1: T, v2: T2, v3: T3, v4: T4, v5: T5) => R): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3, T4, T5, T6, R>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>, project: (v1: T, v2: T2, v3: T3, v4: T4, v5: T5, v6: T6) => R): OperatorFunction<T, R> ;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2>(v2: ObservableInput<T2>): OperatorFunction<T, [T, T2]>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3>(v2: ObservableInput<T2>, v3: ObservableInput<T3>): OperatorFunction<T, [T, T2, T3]>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3, T4>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>): OperatorFunction<T, [T, T2, T3, T4]>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3, T4, T5>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>): OperatorFunction<T, [T, T2, T3, T4, T5]>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, T2, T3, T4, T5, T6>(v2: ObservableInput<T2>, v3: ObservableInput<T3>, v4: ObservableInput<T4>, v5: ObservableInput<T5>, v6: ObservableInput<T6>): OperatorFunction<T, [T, T2, T3, T4, T5, T6]> ;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, R>(...observables: Array<ObservableInput<T> | ((...values: Array<T>) => R)>): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, R>(array: Array<ObservableInput<T>>): OperatorFunction<T, R>;\n/** @deprecated Deprecated in favor of static zip. */\nexport function zip<T, TOther, R>(array: Array<ObservableInput<TOther>>, project: (v1: T, ...values: Array<TOther>) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * @deprecated Deprecated in favor of static {@link zip}.\n */\nexport function zip<T, R>(...observables: Array<ObservableInput<any> | ((...values: Array<any>) => R)>): OperatorFunction<T, R> {\n  return function zipOperatorFunction(source: Observable<T>) {\n    return source.lift.call(zipStatic<R>(source, ...observables));\n  };\n}","import { ZipOperator } from '../observable/zip';\nimport { Observable } from '../Observable';\nimport { OperatorFunction, ObservableInput } from '../types';\n\nexport function zipAll<T>(): OperatorFunction<ObservableInput<T>, T[]>;\nexport function zipAll<T>(): OperatorFunction<any, T[]>;\nexport function zipAll<T, R>(project: (...values: T[]) => R): OperatorFunction<ObservableInput<T>, R>;\nexport function zipAll<R>(project: (...values: Array<any>) => R): OperatorFunction<any, R>;\n\nexport function zipAll<T, R>(project?: (...values: Array<any>) => R): OperatorFunction<T, R> {\n  return (source: Observable<T>) => source.lift(new ZipOperator(project));\n}\n","\n/* Operator exports */\nexport { audit } from '../internal/operators/audit';\nexport { auditTime } from '../internal/operators/auditTime';\nexport { buffer } from '../internal/operators/buffer';\nexport { bufferCount } from '../internal/operators/bufferCount';\nexport { bufferTime } from '../internal/operators/bufferTime';\nexport { bufferToggle } from '../internal/operators/bufferToggle';\nexport { bufferWhen } from '../internal/operators/bufferWhen';\nexport { catchError } from '../internal/operators/catchError';\nexport { combineAll } from '../internal/operators/combineAll';\nexport { combineLatest } from '../internal/operators/combineLatest';\nexport { concat } from '../internal/operators/concat';\nexport { concatAll } from '../internal/operators/concatAll';\nexport { concatMap } from '../internal/operators/concatMap';\nexport { concatMapTo } from '../internal/operators/concatMapTo';\nexport { count } from '../internal/operators/count';\nexport { debounce } from '../internal/operators/debounce';\nexport { debounceTime } from '../internal/operators/debounceTime';\nexport { defaultIfEmpty } from '../internal/operators/defaultIfEmpty';\nexport { delay } from '../internal/operators/delay';\nexport { delayWhen } from '../internal/operators/delayWhen';\nexport { dematerialize } from '../internal/operators/dematerialize';\nexport { distinct } from '../internal/operators/distinct';\nexport { distinctUntilChanged } from '../internal/operators/distinctUntilChanged';\nexport { distinctUntilKeyChanged } from '../internal/operators/distinctUntilKeyChanged';\nexport { elementAt } from '../internal/operators/elementAt';\nexport { endWith } from '../internal/operators/endWith';\nexport { every } from '../internal/operators/every';\nexport { exhaust } from '../internal/operators/exhaust';\nexport { exhaustMap } from '../internal/operators/exhaustMap';\nexport { expand } from '../internal/operators/expand';\nexport { filter } from '../internal/operators/filter';\nexport { finalize } from '../internal/operators/finalize';\nexport { find } from '../internal/operators/find';\nexport { findIndex } from '../internal/operators/findIndex';\nexport { first } from '../internal/operators/first';\nexport { groupBy } from '../internal/operators/groupBy';\nexport { ignoreElements } from '../internal/operators/ignoreElements';\nexport { isEmpty } from '../internal/operators/isEmpty';\nexport { last } from '../internal/operators/last';\nexport { map } from '../internal/operators/map';\nexport { mapTo } from '../internal/operators/mapTo';\nexport { materialize } from '../internal/operators/materialize';\nexport { max } from '../internal/operators/max';\nexport { merge } from '../internal/operators/merge';\nexport { mergeAll } from '../internal/operators/mergeAll';\nexport { mergeMap } from '../internal/operators/mergeMap';\nexport { mergeMap as flatMap } from '../internal/operators/mergeMap';\nexport { mergeMapTo } from '../internal/operators/mergeMapTo';\nexport { mergeScan } from '../internal/operators/mergeScan';\nexport { min } from '../internal/operators/min';\nexport { multicast } from '../internal/operators/multicast';\nexport { observeOn } from '../internal/operators/observeOn';\nexport { onErrorResumeNext } from '../internal/operators/onErrorResumeNext';\nexport { pairwise } from '../internal/operators/pairwise';\nexport { partition } from '../internal/operators/partition';\nexport { pluck } from '../internal/operators/pluck';\nexport { publish } from '../internal/operators/publish';\nexport { publishBehavior } from '../internal/operators/publishBehavior';\nexport { publishLast } from '../internal/operators/publishLast';\nexport { publishReplay } from '../internal/operators/publishReplay';\nexport { race } from '../internal/operators/race';\nexport { reduce } from '../internal/operators/reduce';\nexport { repeat } from '../internal/operators/repeat';\nexport { repeatWhen } from '../internal/operators/repeatWhen';\nexport { retry } from '../internal/operators/retry';\nexport { retryWhen } from '../internal/operators/retryWhen';\nexport { refCount } from '../internal/operators/refCount';\nexport { sample } from '../internal/operators/sample';\nexport { sampleTime } from '../internal/operators/sampleTime';\nexport { scan } from '../internal/operators/scan';\nexport { sequenceEqual } from '../internal/operators/sequenceEqual';\nexport { share } from '../internal/operators/share';\nexport { shareReplay } from '../internal/operators/shareReplay';\nexport { single } from '../internal/operators/single';\nexport { skip } from '../internal/operators/skip';\nexport { skipLast } from '../internal/operators/skipLast';\nexport { skipUntil } from '../internal/operators/skipUntil';\nexport { skipWhile } from '../internal/operators/skipWhile';\nexport { startWith } from '../internal/operators/startWith';\nexport { subscribeOn } from '../internal/operators/subscribeOn';\nexport { switchAll } from '../internal/operators/switchAll';\nexport { switchMap } from '../internal/operators/switchMap';\nexport { switchMapTo } from '../internal/operators/switchMapTo';\nexport { take } from '../internal/operators/take';\nexport { takeLast } from '../internal/operators/takeLast';\nexport { takeUntil } from '../internal/operators/takeUntil';\nexport { takeWhile } from '../internal/operators/takeWhile';\nexport { tap } from '../internal/operators/tap';\nexport { throttle } from '../internal/operators/throttle';\nexport { throttleTime } from '../internal/operators/throttleTime';\nexport { throwIfEmpty } from '../internal/operators/throwIfEmpty';\nexport { timeInterval } from '../internal/operators/timeInterval';\nexport { timeout } from '../internal/operators/timeout';\nexport { timeoutWith } from '../internal/operators/timeoutWith';\nexport { timestamp } from '../internal/operators/timestamp';\nexport { toArray } from '../internal/operators/toArray';\nexport { window } from '../internal/operators/window';\nexport { windowCount } from '../internal/operators/windowCount';\nexport { windowTime } from '../internal/operators/windowTime';\nexport { windowToggle } from '../internal/operators/windowToggle';\nexport { windowWhen } from '../internal/operators/windowWhen';\nexport { withLatestFrom } from '../internal/operators/withLatestFrom';\nexport { zip } from '../internal/operators/zip';\nexport { zipAll } from '../internal/operators/zipAll';\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Used for setting prototype methods that IE8 chokes on.\nvar DELETE = 'delete';\n\n// Constants describing the size of trie nodes.\nvar SHIFT = 5; // Resulted in best performance after ______?\nvar SIZE = 1 << SHIFT;\nvar MASK = SIZE - 1;\n\n// A consistent shared value representing \"not set\" which equals nothing other\n// than itself, and nothing that could be provided externally.\nvar NOT_SET = {};\n\n// Boolean references, Rough equivalent of `bool &`.\nfunction MakeRef() {\n  return { value: false };\n}\n\nfunction SetRef(ref) {\n  if (ref) {\n    ref.value = true;\n  }\n}\n\n// A function which returns a value representing an \"owner\" for transient writes\n// to tries. The return value will only ever equal itself, and will not equal\n// the return of any subsequent call of this function.\nfunction OwnerID() {}\n\nfunction ensureSize(iter) {\n  if (iter.size === undefined) {\n    iter.size = iter.__iterate(returnTrue);\n  }\n  return iter.size;\n}\n\nfunction wrapIndex(iter, index) {\n  // This implements \"is array index\" which the ECMAString spec defines as:\n  //\n  //     A String property name P is an array index if and only if\n  //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n  //     to 2^321.\n  //\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n  if (typeof index !== 'number') {\n    var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n    if ('' + uint32Index !== index || uint32Index === 4294967295) {\n      return NaN;\n    }\n    index = uint32Index;\n  }\n  return index < 0 ? ensureSize(iter) + index : index;\n}\n\nfunction returnTrue() {\n  return true;\n}\n\nfunction wholeSlice(begin, end, size) {\n  return (\n    ((begin === 0 && !isNeg(begin)) ||\n      (size !== undefined && begin <= -size)) &&\n    (end === undefined || (size !== undefined && end >= size))\n  );\n}\n\nfunction resolveBegin(begin, size) {\n  return resolveIndex(begin, size, 0);\n}\n\nfunction resolveEnd(end, size) {\n  return resolveIndex(end, size, size);\n}\n\nfunction resolveIndex(index, size, defaultIndex) {\n  // Sanitize indices using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  return index === undefined\n    ? defaultIndex\n    : isNeg(index)\n      ? size === Infinity\n        ? size\n        : Math.max(0, size + index) | 0\n      : size === undefined || size === index\n        ? index\n        : Math.min(size, index) | 0;\n}\n\nfunction isNeg(value) {\n  // Account for -0 which is negative, but not less than 0.\n  return value < 0 || (value === 0 && 1 / value === -Infinity);\n}\n\n// Note: value is unchanged to not break immutable-devtools.\nvar IS_COLLECTION_SYMBOL = '@@__IMMUTABLE_ITERABLE__@@';\n\nfunction isCollection(maybeCollection) {\n  return Boolean(maybeCollection && maybeCollection[IS_COLLECTION_SYMBOL]);\n}\n\nvar IS_KEYED_SYMBOL = '@@__IMMUTABLE_KEYED__@@';\n\nfunction isKeyed(maybeKeyed) {\n  return Boolean(maybeKeyed && maybeKeyed[IS_KEYED_SYMBOL]);\n}\n\nvar IS_INDEXED_SYMBOL = '@@__IMMUTABLE_INDEXED__@@';\n\nfunction isIndexed(maybeIndexed) {\n  return Boolean(maybeIndexed && maybeIndexed[IS_INDEXED_SYMBOL]);\n}\n\nfunction isAssociative(maybeAssociative) {\n  return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n}\n\nvar Collection = function Collection(value) {\n  return isCollection(value) ? value : Seq(value);\n};\n\nvar KeyedCollection = /*@__PURE__*/(function (Collection) {\n  function KeyedCollection(value) {\n    return isKeyed(value) ? value : KeyedSeq(value);\n  }\n\n  if ( Collection ) KeyedCollection.__proto__ = Collection;\n  KeyedCollection.prototype = Object.create( Collection && Collection.prototype );\n  KeyedCollection.prototype.constructor = KeyedCollection;\n\n  return KeyedCollection;\n}(Collection));\n\nvar IndexedCollection = /*@__PURE__*/(function (Collection) {\n  function IndexedCollection(value) {\n    return isIndexed(value) ? value : IndexedSeq(value);\n  }\n\n  if ( Collection ) IndexedCollection.__proto__ = Collection;\n  IndexedCollection.prototype = Object.create( Collection && Collection.prototype );\n  IndexedCollection.prototype.constructor = IndexedCollection;\n\n  return IndexedCollection;\n}(Collection));\n\nvar SetCollection = /*@__PURE__*/(function (Collection) {\n  function SetCollection(value) {\n    return isCollection(value) && !isAssociative(value) ? value : SetSeq(value);\n  }\n\n  if ( Collection ) SetCollection.__proto__ = Collection;\n  SetCollection.prototype = Object.create( Collection && Collection.prototype );\n  SetCollection.prototype.constructor = SetCollection;\n\n  return SetCollection;\n}(Collection));\n\nCollection.Keyed = KeyedCollection;\nCollection.Indexed = IndexedCollection;\nCollection.Set = SetCollection;\n\nvar IS_SEQ_SYMBOL = '@@__IMMUTABLE_SEQ__@@';\n\nfunction isSeq(maybeSeq) {\n  return Boolean(maybeSeq && maybeSeq[IS_SEQ_SYMBOL]);\n}\n\nvar IS_RECORD_SYMBOL = '@@__IMMUTABLE_RECORD__@@';\n\nfunction isRecord(maybeRecord) {\n  return Boolean(maybeRecord && maybeRecord[IS_RECORD_SYMBOL]);\n}\n\nfunction isImmutable(maybeImmutable) {\n  return isCollection(maybeImmutable) || isRecord(maybeImmutable);\n}\n\nvar IS_ORDERED_SYMBOL = '@@__IMMUTABLE_ORDERED__@@';\n\nfunction isOrdered(maybeOrdered) {\n  return Boolean(maybeOrdered && maybeOrdered[IS_ORDERED_SYMBOL]);\n}\n\nvar ITERATE_KEYS = 0;\nvar ITERATE_VALUES = 1;\nvar ITERATE_ENTRIES = 2;\n\nvar REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nvar ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\nvar Iterator = function Iterator(next) {\n  this.next = next;\n};\n\nIterator.prototype.toString = function toString () {\n  return '[Iterator]';\n};\n\nIterator.KEYS = ITERATE_KEYS;\nIterator.VALUES = ITERATE_VALUES;\nIterator.ENTRIES = ITERATE_ENTRIES;\n\nIterator.prototype.inspect = Iterator.prototype.toSource = function() {\n  return this.toString();\n};\nIterator.prototype[ITERATOR_SYMBOL] = function() {\n  return this;\n};\n\nfunction iteratorValue(type, k, v, iteratorResult) {\n  var value = type === 0 ? k : type === 1 ? v : [k, v];\n  iteratorResult\n    ? (iteratorResult.value = value)\n    : (iteratorResult = {\n        value: value,\n        done: false,\n      });\n  return iteratorResult;\n}\n\nfunction iteratorDone() {\n  return { value: undefined, done: true };\n}\n\nfunction hasIterator(maybeIterable) {\n  return !!getIteratorFn(maybeIterable);\n}\n\nfunction isIterator(maybeIterator) {\n  return maybeIterator && typeof maybeIterator.next === 'function';\n}\n\nfunction getIterator(iterable) {\n  var iteratorFn = getIteratorFn(iterable);\n  return iteratorFn && iteratorFn.call(iterable);\n}\n\nfunction getIteratorFn(iterable) {\n  var iteratorFn =\n    iterable &&\n    ((REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]);\n  if (typeof iteratorFn === 'function') {\n    return iteratorFn;\n  }\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isArrayLike(value) {\n  if (Array.isArray(value) || typeof value === 'string') {\n    return true;\n  }\n\n  return (\n    value &&\n    typeof value === 'object' &&\n    Number.isInteger(value.length) &&\n    value.length >= 0 &&\n    (value.length === 0\n      ? // Only {length: 0} is considered Array-like.\n        Object.keys(value).length === 1\n      : // An object is only Array-like if it has a property where the last value\n        // in the array-like may be found (which could be undefined).\n        value.hasOwnProperty(value.length - 1))\n  );\n}\n\nvar Seq = /*@__PURE__*/(function (Collection$$1) {\n  function Seq(value) {\n    return value === null || value === undefined\n      ? emptySequence()\n      : isImmutable(value)\n        ? value.toSeq()\n        : seqFromValue(value);\n  }\n\n  if ( Collection$$1 ) Seq.__proto__ = Collection$$1;\n  Seq.prototype = Object.create( Collection$$1 && Collection$$1.prototype );\n  Seq.prototype.constructor = Seq;\n\n  Seq.prototype.toSeq = function toSeq () {\n    return this;\n  };\n\n  Seq.prototype.toString = function toString () {\n    return this.__toString('Seq {', '}');\n  };\n\n  Seq.prototype.cacheResult = function cacheResult () {\n    if (!this._cache && this.__iterateUncached) {\n      this._cache = this.entrySeq().toArray();\n      this.size = this._cache.length;\n    }\n    return this;\n  };\n\n  // abstract __iterateUncached(fn, reverse)\n\n  Seq.prototype.__iterate = function __iterate (fn, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      while (i !== size) {\n        var entry = cache[reverse ? size - ++i : i++];\n        if (fn(entry[1], entry[0], this) === false) {\n          break;\n        }\n      }\n      return i;\n    }\n    return this.__iterateUncached(fn, reverse);\n  };\n\n  // abstract __iteratorUncached(type, reverse)\n\n  Seq.prototype.__iterator = function __iterator (type, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      return new Iterator(function () {\n        if (i === size) {\n          return iteratorDone();\n        }\n        var entry = cache[reverse ? size - ++i : i++];\n        return iteratorValue(type, entry[0], entry[1]);\n      });\n    }\n    return this.__iteratorUncached(type, reverse);\n  };\n\n  return Seq;\n}(Collection));\n\nvar KeyedSeq = /*@__PURE__*/(function (Seq) {\n  function KeyedSeq(value) {\n    return value === null || value === undefined\n      ? emptySequence().toKeyedSeq()\n      : isCollection(value)\n        ? isKeyed(value)\n          ? value.toSeq()\n          : value.fromEntrySeq()\n        : isRecord(value)\n          ? value.toSeq()\n          : keyedSeqFromValue(value);\n  }\n\n  if ( Seq ) KeyedSeq.__proto__ = Seq;\n  KeyedSeq.prototype = Object.create( Seq && Seq.prototype );\n  KeyedSeq.prototype.constructor = KeyedSeq;\n\n  KeyedSeq.prototype.toKeyedSeq = function toKeyedSeq () {\n    return this;\n  };\n\n  return KeyedSeq;\n}(Seq));\n\nvar IndexedSeq = /*@__PURE__*/(function (Seq) {\n  function IndexedSeq(value) {\n    return value === null || value === undefined\n      ? emptySequence()\n      : isCollection(value)\n        ? isKeyed(value)\n          ? value.entrySeq()\n          : value.toIndexedSeq()\n        : isRecord(value)\n          ? value.toSeq().entrySeq()\n          : indexedSeqFromValue(value);\n  }\n\n  if ( Seq ) IndexedSeq.__proto__ = Seq;\n  IndexedSeq.prototype = Object.create( Seq && Seq.prototype );\n  IndexedSeq.prototype.constructor = IndexedSeq;\n\n  IndexedSeq.of = function of (/*...values*/) {\n    return IndexedSeq(arguments);\n  };\n\n  IndexedSeq.prototype.toIndexedSeq = function toIndexedSeq () {\n    return this;\n  };\n\n  IndexedSeq.prototype.toString = function toString () {\n    return this.__toString('Seq [', ']');\n  };\n\n  return IndexedSeq;\n}(Seq));\n\nvar SetSeq = /*@__PURE__*/(function (Seq) {\n  function SetSeq(value) {\n    return (isCollection(value) && !isAssociative(value)\n      ? value\n      : IndexedSeq(value)\n    ).toSetSeq();\n  }\n\n  if ( Seq ) SetSeq.__proto__ = Seq;\n  SetSeq.prototype = Object.create( Seq && Seq.prototype );\n  SetSeq.prototype.constructor = SetSeq;\n\n  SetSeq.of = function of (/*...values*/) {\n    return SetSeq(arguments);\n  };\n\n  SetSeq.prototype.toSetSeq = function toSetSeq () {\n    return this;\n  };\n\n  return SetSeq;\n}(Seq));\n\nSeq.isSeq = isSeq;\nSeq.Keyed = KeyedSeq;\nSeq.Set = SetSeq;\nSeq.Indexed = IndexedSeq;\n\nSeq.prototype[IS_SEQ_SYMBOL] = true;\n\n// #pragma Root Sequences\n\nvar ArraySeq = /*@__PURE__*/(function (IndexedSeq) {\n  function ArraySeq(array) {\n    this._array = array;\n    this.size = array.length;\n  }\n\n  if ( IndexedSeq ) ArraySeq.__proto__ = IndexedSeq;\n  ArraySeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ArraySeq.prototype.constructor = ArraySeq;\n\n  ArraySeq.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n  };\n\n  ArraySeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    while (i !== size) {\n      var ii = reverse ? size - ++i : i++;\n      if (fn(array[ii], ii, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ArraySeq.prototype.__iterator = function __iterator (type, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var ii = reverse ? size - ++i : i++;\n      return iteratorValue(type, ii, array[ii]);\n    });\n  };\n\n  return ArraySeq;\n}(IndexedSeq));\n\nvar ObjectSeq = /*@__PURE__*/(function (KeyedSeq) {\n  function ObjectSeq(object) {\n    var keys = Object.keys(object);\n    this._object = object;\n    this._keys = keys;\n    this.size = keys.length;\n  }\n\n  if ( KeyedSeq ) ObjectSeq.__proto__ = KeyedSeq;\n  ObjectSeq.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ObjectSeq.prototype.constructor = ObjectSeq;\n\n  ObjectSeq.prototype.get = function get (key, notSetValue) {\n    if (notSetValue !== undefined && !this.has(key)) {\n      return notSetValue;\n    }\n    return this._object[key];\n  };\n\n  ObjectSeq.prototype.has = function has (key) {\n    return hasOwnProperty.call(this._object, key);\n  };\n\n  ObjectSeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    while (i !== size) {\n      var key = keys[reverse ? size - ++i : i++];\n      if (fn(object[key], key, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ObjectSeq.prototype.__iterator = function __iterator (type, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var key = keys[reverse ? size - ++i : i++];\n      return iteratorValue(type, key, object[key]);\n    });\n  };\n\n  return ObjectSeq;\n}(KeyedSeq));\nObjectSeq.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar CollectionSeq = /*@__PURE__*/(function (IndexedSeq) {\n  function CollectionSeq(collection) {\n    this._collection = collection;\n    this.size = collection.length || collection.size;\n  }\n\n  if ( IndexedSeq ) CollectionSeq.__proto__ = IndexedSeq;\n  CollectionSeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  CollectionSeq.prototype.constructor = CollectionSeq;\n\n  CollectionSeq.prototype.__iterateUncached = function __iterateUncached (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    var iterations = 0;\n    if (isIterator(iterator)) {\n      var step;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n    }\n    return iterations;\n  };\n\n  CollectionSeq.prototype.__iteratorUncached = function __iteratorUncached (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    if (!isIterator(iterator)) {\n      return new Iterator(iteratorDone);\n    }\n    var iterations = 0;\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, iterations++, step.value);\n    });\n  };\n\n  return CollectionSeq;\n}(IndexedSeq));\n\n// # pragma Helper functions\n\nvar EMPTY_SEQ;\n\nfunction emptySequence() {\n  return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n}\n\nfunction keyedSeqFromValue(value) {\n  var seq = Array.isArray(value)\n    ? new ArraySeq(value)\n    : hasIterator(value)\n      ? new CollectionSeq(value)\n      : undefined;\n  if (seq) {\n    return seq.fromEntrySeq();\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of [k, v] entries, or keyed object: ' +\n      value\n  );\n}\n\nfunction indexedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values: ' + value\n  );\n}\n\nfunction seqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values, or keyed object: ' + value\n  );\n}\n\nfunction maybeIndexedSeqFromValue(value) {\n  return isArrayLike(value)\n    ? new ArraySeq(value)\n    : hasIterator(value)\n      ? new CollectionSeq(value)\n      : undefined;\n}\n\nvar IS_MAP_SYMBOL = '@@__IMMUTABLE_MAP__@@';\n\nfunction isMap(maybeMap) {\n  return Boolean(maybeMap && maybeMap[IS_MAP_SYMBOL]);\n}\n\nfunction isOrderedMap(maybeOrderedMap) {\n  return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n}\n\nfunction isValueObject(maybeValue) {\n  return Boolean(\n    maybeValue &&\n      typeof maybeValue.equals === 'function' &&\n      typeof maybeValue.hashCode === 'function'\n  );\n}\n\n/**\n * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n *\n * NaN is considered the same as NaN, however -0 and 0 are considered the same\n * value, which is different from the algorithm described by\n * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n *\n * This is extended further to allow Objects to describe the values they\n * represent, by way of `valueOf` or `equals` (and `hashCode`).\n *\n * Note: because of this extension, the key equality of Immutable.Map and the\n * value equality of Immutable.Set will differ from ES6 Map and Set.\n *\n * ### Defining custom values\n *\n * The easiest way to describe the value an object represents is by implementing\n * `valueOf`. For example, `Date` represents a value by returning a unix\n * timestamp for `valueOf`:\n *\n *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n *     var date2 = new Date(1234567890000);\n *     date1.valueOf(); // 1234567890000\n *     assert( date1 !== date2 );\n *     assert( Immutable.is( date1, date2 ) );\n *\n * Note: overriding `valueOf` may have other implications if you use this object\n * where JavaScript expects a primitive, such as implicit string coercion.\n *\n * For more complex types, especially collections, implementing `valueOf` may\n * not be performant. An alternative is to implement `equals` and `hashCode`.\n *\n * `equals` takes another object, presumably of similar type, and returns true\n * if it is equal. Equality is symmetrical, so the same result should be\n * returned if this and the argument are flipped.\n *\n *     assert( a.equals(b) === b.equals(a) );\n *\n * `hashCode` returns a 32bit integer number representing the object which will\n * be used to determine how to store the value object in a Map or Set. You must\n * provide both or neither methods, one must not exist without the other.\n *\n * Also, an important relationship between these methods must be upheld: if two\n * values are equal, they *must* return the same hashCode. If the values are not\n * equal, they might have the same hashCode; this is called a hash collision,\n * and while undesirable for performance reasons, it is acceptable.\n *\n *     if (a.equals(b)) {\n *       assert( a.hashCode() === b.hashCode() );\n *     }\n *\n * All Immutable collections are Value Objects: they implement `equals()`\n * and `hashCode()`.\n */\nfunction is(valueA, valueB) {\n  if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n    return true;\n  }\n  if (!valueA || !valueB) {\n    return false;\n  }\n  if (\n    typeof valueA.valueOf === 'function' &&\n    typeof valueB.valueOf === 'function'\n  ) {\n    valueA = valueA.valueOf();\n    valueB = valueB.valueOf();\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n  }\n  return !!(\n    isValueObject(valueA) &&\n    isValueObject(valueB) &&\n    valueA.equals(valueB)\n  );\n}\n\nvar imul =\n  typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2\n    ? Math.imul\n    : function imul(a, b) {\n        a |= 0; // int\n        b |= 0; // int\n        var c = a & 0xffff;\n        var d = b & 0xffff;\n        // Shift by 0 fixes the sign on the high part.\n        return (c * d + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0)) | 0; // int\n      };\n\n// v8 has an optimization for storing 31-bit signed numbers.\n// Values which have either 00 or 11 as the high order bits qualify.\n// This function drops the highest order bit in a signed number, maintaining\n// the sign bit.\nfunction smi(i32) {\n  return ((i32 >>> 1) & 0x40000000) | (i32 & 0xbfffffff);\n}\n\nvar defaultValueOf = Object.prototype.valueOf;\n\nfunction hash(o) {\n  switch (typeof o) {\n    case 'boolean':\n      // The hash values for built-in constants are a 1 value for each 5-byte\n      // shift region expect for the first, which encodes the value. This\n      // reduces the odds of a hash collision for these common values.\n      return o ? 0x42108421 : 0x42108420;\n    case 'number':\n      return hashNumber(o);\n    case 'string':\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN\n        ? cachedHashString(o)\n        : hashString(o);\n    case 'object':\n    case 'function':\n      if (o === null) {\n        return 0x42108422;\n      }\n      if (typeof o.hashCode === 'function') {\n        // Drop any high bits from accidentally long hash codes.\n        return smi(o.hashCode(o));\n      }\n      if (o.valueOf !== defaultValueOf && typeof o.valueOf === 'function') {\n        o = o.valueOf(o);\n      }\n      return hashJSObj(o);\n    case 'undefined':\n      return 0x42108423;\n    default:\n      if (typeof o.toString === 'function') {\n        return hashString(o.toString());\n      }\n      throw new Error('Value type ' + typeof o + ' cannot be hashed.');\n  }\n}\n\n// Compress arbitrarily large numbers into smi hashes.\nfunction hashNumber(n) {\n  if (n !== n || n === Infinity) {\n    return 0;\n  }\n  var hash = n | 0;\n  if (hash !== n) {\n    hash ^= n * 0xffffffff;\n  }\n  while (n > 0xffffffff) {\n    n /= 0xffffffff;\n    hash ^= n;\n  }\n  return smi(hash);\n}\n\nfunction cachedHashString(string) {\n  var hashed = stringHashCache[string];\n  if (hashed === undefined) {\n    hashed = hashString(string);\n    if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n      STRING_HASH_CACHE_SIZE = 0;\n      stringHashCache = {};\n    }\n    STRING_HASH_CACHE_SIZE++;\n    stringHashCache[string] = hashed;\n  }\n  return hashed;\n}\n\n// http://jsperf.com/hashing-strings\nfunction hashString(string) {\n  // This is the hash from JVM\n  // The hash code for a string is computed as\n  // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n  // where s[i] is the ith character of the string and n is the length of\n  // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n  // (exclusive) by dropping high bits.\n  var hashed = 0;\n  for (var ii = 0; ii < string.length; ii++) {\n    hashed = (31 * hashed + string.charCodeAt(ii)) | 0;\n  }\n  return smi(hashed);\n}\n\nfunction hashJSObj(obj) {\n  var hashed;\n  if (usingWeakMap) {\n    hashed = weakMap.get(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = obj[UID_HASH_KEY];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  if (!canDefineProperty) {\n    hashed = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n    if (hashed !== undefined) {\n      return hashed;\n    }\n\n    hashed = getIENodeHash(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = ++objHashUID;\n  if (objHashUID & 0x40000000) {\n    objHashUID = 0;\n  }\n\n  if (usingWeakMap) {\n    weakMap.set(obj, hashed);\n  } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n    throw new Error('Non-extensible objects are not allowed as keys.');\n  } else if (canDefineProperty) {\n    Object.defineProperty(obj, UID_HASH_KEY, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: hashed,\n    });\n  } else if (\n    obj.propertyIsEnumerable !== undefined &&\n    obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable\n  ) {\n    // Since we can't define a non-enumerable property on the object\n    // we'll hijack one of the less-used non-enumerable properties to\n    // save our hash on it. Since this is a function it will not show up in\n    // `JSON.stringify` which is what we want.\n    obj.propertyIsEnumerable = function() {\n      return this.constructor.prototype.propertyIsEnumerable.apply(\n        this,\n        arguments\n      );\n    };\n    obj.propertyIsEnumerable[UID_HASH_KEY] = hashed;\n  } else if (obj.nodeType !== undefined) {\n    // At this point we couldn't get the IE `uniqueID` to use as a hash\n    // and we couldn't use a non-enumerable property to exploit the\n    // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n    // itself.\n    obj[UID_HASH_KEY] = hashed;\n  } else {\n    throw new Error('Unable to set a non-enumerable property on object.');\n  }\n\n  return hashed;\n}\n\n// Get references to ES5 object methods.\nvar isExtensible = Object.isExtensible;\n\n// True if Object.defineProperty works as expected. IE8 fails this test.\nvar canDefineProperty = (function() {\n  try {\n    Object.defineProperty({}, '@', {});\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n// IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n// and avoid memory leaks from the IE cloneNode bug.\nfunction getIENodeHash(node) {\n  if (node && node.nodeType > 0) {\n    switch (node.nodeType) {\n      case 1: // Element\n        return node.uniqueID;\n      case 9: // Document\n        return node.documentElement && node.documentElement.uniqueID;\n    }\n  }\n}\n\n// If possible, use a WeakMap.\nvar usingWeakMap = typeof WeakMap === 'function';\nvar weakMap;\nif (usingWeakMap) {\n  weakMap = new WeakMap();\n}\n\nvar objHashUID = 0;\n\nvar UID_HASH_KEY = '__immutablehash__';\nif (typeof Symbol === 'function') {\n  UID_HASH_KEY = Symbol(UID_HASH_KEY);\n}\n\nvar STRING_HASH_CACHE_MIN_STRLEN = 16;\nvar STRING_HASH_CACHE_MAX_SIZE = 255;\nvar STRING_HASH_CACHE_SIZE = 0;\nvar stringHashCache = {};\n\nvar ToKeyedSequence = /*@__PURE__*/(function (KeyedSeq$$1) {\n  function ToKeyedSequence(indexed, useKeys) {\n    this._iter = indexed;\n    this._useKeys = useKeys;\n    this.size = indexed.size;\n  }\n\n  if ( KeyedSeq$$1 ) ToKeyedSequence.__proto__ = KeyedSeq$$1;\n  ToKeyedSequence.prototype = Object.create( KeyedSeq$$1 && KeyedSeq$$1.prototype );\n  ToKeyedSequence.prototype.constructor = ToKeyedSequence;\n\n  ToKeyedSequence.prototype.get = function get (key, notSetValue) {\n    return this._iter.get(key, notSetValue);\n  };\n\n  ToKeyedSequence.prototype.has = function has (key) {\n    return this._iter.has(key);\n  };\n\n  ToKeyedSequence.prototype.valueSeq = function valueSeq () {\n    return this._iter.valueSeq();\n  };\n\n  ToKeyedSequence.prototype.reverse = function reverse () {\n    var this$1 = this;\n\n    var reversedSequence = reverseFactory(this, true);\n    if (!this._useKeys) {\n      reversedSequence.valueSeq = function () { return this$1._iter.toSeq().reverse(); };\n    }\n    return reversedSequence;\n  };\n\n  ToKeyedSequence.prototype.map = function map (mapper, context) {\n    var this$1 = this;\n\n    var mappedSequence = mapFactory(this, mapper, context);\n    if (!this._useKeys) {\n      mappedSequence.valueSeq = function () { return this$1._iter.toSeq().map(mapper, context); };\n    }\n    return mappedSequence;\n  };\n\n  ToKeyedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._iter.__iterate(function (v, k) { return fn(v, k, this$1); }, reverse);\n  };\n\n  ToKeyedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    return this._iter.__iterator(type, reverse);\n  };\n\n  return ToKeyedSequence;\n}(KeyedSeq));\nToKeyedSequence.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar ToIndexedSequence = /*@__PURE__*/(function (IndexedSeq$$1) {\n  function ToIndexedSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( IndexedSeq$$1 ) ToIndexedSequence.__proto__ = IndexedSeq$$1;\n  ToIndexedSequence.prototype = Object.create( IndexedSeq$$1 && IndexedSeq$$1.prototype );\n  ToIndexedSequence.prototype.constructor = ToIndexedSequence;\n\n  ToIndexedSequence.prototype.includes = function includes (value) {\n    return this._iter.includes(value);\n  };\n\n  ToIndexedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(this);\n    return this._iter.__iterate(\n      function (v) { return fn(v, reverse ? this$1.size - ++i : i++, this$1); },\n      reverse\n    );\n  };\n\n  ToIndexedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1 = this;\n\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    var i = 0;\n    reverse && ensureSize(this);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(\n            type,\n            reverse ? this$1.size - ++i : i++,\n            step.value,\n            step\n          );\n    });\n  };\n\n  return ToIndexedSequence;\n}(IndexedSeq));\n\nvar ToSetSequence = /*@__PURE__*/(function (SetSeq$$1) {\n  function ToSetSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( SetSeq$$1 ) ToSetSequence.__proto__ = SetSeq$$1;\n  ToSetSequence.prototype = Object.create( SetSeq$$1 && SetSeq$$1.prototype );\n  ToSetSequence.prototype.constructor = ToSetSequence;\n\n  ToSetSequence.prototype.has = function has (key) {\n    return this._iter.includes(key);\n  };\n\n  ToSetSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._iter.__iterate(function (v) { return fn(v, v, this$1); }, reverse);\n  };\n\n  ToSetSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(type, step.value, step.value, step);\n    });\n  };\n\n  return ToSetSequence;\n}(SetSeq));\n\nvar FromEntriesSequence = /*@__PURE__*/(function (KeyedSeq$$1) {\n  function FromEntriesSequence(entries) {\n    this._iter = entries;\n    this.size = entries.size;\n  }\n\n  if ( KeyedSeq$$1 ) FromEntriesSequence.__proto__ = KeyedSeq$$1;\n  FromEntriesSequence.prototype = Object.create( KeyedSeq$$1 && KeyedSeq$$1.prototype );\n  FromEntriesSequence.prototype.constructor = FromEntriesSequence;\n\n  FromEntriesSequence.prototype.entrySeq = function entrySeq () {\n    return this._iter.toSeq();\n  };\n\n  FromEntriesSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._iter.__iterate(function (entry) {\n      // Check if entry exists first so array access doesn't throw for holes\n      // in the parent iteration.\n      if (entry) {\n        validateEntry(entry);\n        var indexedCollection = isCollection(entry);\n        return fn(\n          indexedCollection ? entry.get(1) : entry[1],\n          indexedCollection ? entry.get(0) : entry[0],\n          this$1\n        );\n      }\n    }, reverse);\n  };\n\n  FromEntriesSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedCollection = isCollection(entry);\n          return iteratorValue(\n            type,\n            indexedCollection ? entry.get(0) : entry[0],\n            indexedCollection ? entry.get(1) : entry[1],\n            step\n          );\n        }\n      }\n    });\n  };\n\n  return FromEntriesSequence;\n}(KeyedSeq));\n\nToIndexedSequence.prototype.cacheResult = ToKeyedSequence.prototype.cacheResult = ToSetSequence.prototype.cacheResult = FromEntriesSequence.prototype.cacheResult = cacheResultThrough;\n\nfunction flipFactory(collection) {\n  var flipSequence = makeSequence(collection);\n  flipSequence._iter = collection;\n  flipSequence.size = collection.size;\n  flipSequence.flip = function () { return collection; };\n  flipSequence.reverse = function() {\n    var reversedSequence = collection.reverse.apply(this); // super.reverse()\n    reversedSequence.flip = function () { return collection.reverse(); };\n    return reversedSequence;\n  };\n  flipSequence.has = function (key) { return collection.includes(key); };\n  flipSequence.includes = function (key) { return collection.has(key); };\n  flipSequence.cacheResult = cacheResultThrough;\n  flipSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    return collection.__iterate(function (v, k) { return fn(k, v, this$1) !== false; }, reverse);\n  };\n  flipSequence.__iteratorUncached = function(type, reverse) {\n    if (type === ITERATE_ENTRIES) {\n      var iterator = collection.__iterator(type, reverse);\n      return new Iterator(function () {\n        var step = iterator.next();\n        if (!step.done) {\n          var k = step.value[0];\n          step.value[0] = step.value[1];\n          step.value[1] = k;\n        }\n        return step;\n      });\n    }\n    return collection.__iterator(\n      type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n      reverse\n    );\n  };\n  return flipSequence;\n}\n\nfunction mapFactory(collection, mapper, context) {\n  var mappedSequence = makeSequence(collection);\n  mappedSequence.size = collection.size;\n  mappedSequence.has = function (key) { return collection.has(key); };\n  mappedSequence.get = function (key, notSetValue) {\n    var v = collection.get(key, NOT_SET);\n    return v === NOT_SET\n      ? notSetValue\n      : mapper.call(context, v, key, collection);\n  };\n  mappedSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    return collection.__iterate(\n      function (v, k, c) { return fn(mapper.call(context, v, k, c), k, this$1) !== false; },\n      reverse\n    );\n  };\n  mappedSequence.__iteratorUncached = function(type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var key = entry[0];\n      return iteratorValue(\n        type,\n        key,\n        mapper.call(context, entry[1], key, collection),\n        step\n      );\n    });\n  };\n  return mappedSequence;\n}\n\nfunction reverseFactory(collection, useKeys) {\n  var this$1 = this;\n\n  var reversedSequence = makeSequence(collection);\n  reversedSequence._iter = collection;\n  reversedSequence.size = collection.size;\n  reversedSequence.reverse = function () { return collection; };\n  if (collection.flip) {\n    reversedSequence.flip = function() {\n      var flipSequence = flipFactory(collection);\n      flipSequence.reverse = function () { return collection.flip(); };\n      return flipSequence;\n    };\n  }\n  reversedSequence.get = function (key, notSetValue) { return collection.get(useKeys ? key : -1 - key, notSetValue); };\n  reversedSequence.has = function (key) { return collection.has(useKeys ? key : -1 - key); };\n  reversedSequence.includes = function (value) { return collection.includes(value); };\n  reversedSequence.cacheResult = cacheResultThrough;\n  reversedSequence.__iterate = function(fn, reverse) {\n    var this$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(collection);\n    return collection.__iterate(\n      function (v, k) { return fn(v, useKeys ? k : reverse ? this$1.size - ++i : i++, this$1); },\n      !reverse\n    );\n  };\n  reversedSequence.__iterator = function (type, reverse) {\n    var i = 0;\n    reverse && ensureSize(collection);\n    var iterator = collection.__iterator(ITERATE_ENTRIES, !reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      return iteratorValue(\n        type,\n        useKeys ? entry[0] : reverse ? this$1.size - ++i : i++,\n        entry[1],\n        step\n      );\n    });\n  };\n  return reversedSequence;\n}\n\nfunction filterFactory(collection, predicate, context, useKeys) {\n  var filterSequence = makeSequence(collection);\n  if (useKeys) {\n    filterSequence.has = function (key) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && !!predicate.call(context, v, key, collection);\n    };\n    filterSequence.get = function (key, notSetValue) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && predicate.call(context, v, key, collection)\n        ? v\n        : notSetValue;\n    };\n  }\n  filterSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1);\n      }\n    }, reverse);\n    return iterations;\n  };\n  filterSequence.__iteratorUncached = function(type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterations = 0;\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        var value = entry[1];\n        if (predicate.call(context, value, key, collection)) {\n          return iteratorValue(type, useKeys ? key : iterations++, value, step);\n        }\n      }\n    });\n  };\n  return filterSequence;\n}\n\nfunction countByFactory(collection, grouper, context) {\n  var groups = Map().asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(grouper.call(context, v, k, collection), 0, function (a) { return a + 1; });\n  });\n  return groups.asImmutable();\n}\n\nfunction groupByFactory(collection, grouper, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = (isOrdered(collection) ? OrderedMap() : Map()).asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(\n      grouper.call(context, v, k, collection),\n      function (a) { return ((a = a || []), a.push(isKeyedIter ? [k, v] : v), a); }\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); }).asImmutable();\n}\n\nfunction sliceFactory(collection, begin, end, useKeys) {\n  var originalSize = collection.size;\n\n  if (wholeSlice(begin, end, originalSize)) {\n    return collection;\n  }\n\n  var resolvedBegin = resolveBegin(begin, originalSize);\n  var resolvedEnd = resolveEnd(end, originalSize);\n\n  // begin or end will be NaN if they were provided as negative numbers and\n  // this collection's size is unknown. In that case, cache first so there is\n  // a known size and these do not resolve to NaN.\n  if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n    return sliceFactory(collection.toSeq().cacheResult(), begin, end, useKeys);\n  }\n\n  // Note: resolvedEnd is undefined when the original sequence's length is\n  // unknown and this slice did not supply an end and should contain all\n  // elements after resolvedBegin.\n  // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n  var resolvedSize = resolvedEnd - resolvedBegin;\n  var sliceSize;\n  if (resolvedSize === resolvedSize) {\n    sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n  }\n\n  var sliceSeq = makeSequence(collection);\n\n  // If collection.size is undefined, the size of the realized sliceSeq is\n  // unknown at this point unless the number of items to slice is 0\n  sliceSeq.size =\n    sliceSize === 0 ? sliceSize : (collection.size && sliceSize) || undefined;\n\n  if (!useKeys && isSeq(collection) && sliceSize >= 0) {\n    sliceSeq.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return index >= 0 && index < sliceSize\n        ? collection.get(index + resolvedBegin, notSetValue)\n        : notSetValue;\n    };\n  }\n\n  sliceSeq.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    if (sliceSize === 0) {\n      return 0;\n    }\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var skipped = 0;\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k) {\n      if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n        iterations++;\n        return (\n          fn(v, useKeys ? k : iterations - 1, this$1) !== false &&\n          iterations !== sliceSize\n        );\n      }\n    });\n    return iterations;\n  };\n\n  sliceSeq.__iteratorUncached = function(type, reverse) {\n    if (sliceSize !== 0 && reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    // Don't bother instantiating parent iterator if taking 0.\n    if (sliceSize === 0) {\n      return new Iterator(iteratorDone);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var skipped = 0;\n    var iterations = 0;\n    return new Iterator(function () {\n      while (skipped++ < resolvedBegin) {\n        iterator.next();\n      }\n      if (++iterations > sliceSize) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (useKeys || type === ITERATE_VALUES || step.done) {\n        return step;\n      }\n      if (type === ITERATE_KEYS) {\n        return iteratorValue(type, iterations - 1, undefined, step);\n      }\n      return iteratorValue(type, iterations - 1, step.value[1], step);\n    });\n  };\n\n  return sliceSeq;\n}\n\nfunction takeWhileFactory(collection, predicate, context) {\n  var takeSequence = makeSequence(collection);\n  takeSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    collection.__iterate(\n      function (v, k, c) { return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$1); }\n    );\n    return iterations;\n  };\n  takeSequence.__iteratorUncached = function(type, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterating = true;\n    return new Iterator(function () {\n      if (!iterating) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var k = entry[0];\n      var v = entry[1];\n      if (!predicate.call(context, v, k, this$1)) {\n        iterating = false;\n        return iteratorDone();\n      }\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return takeSequence;\n}\n\nfunction skipWhileFactory(collection, predicate, context, useKeys) {\n  var skipSequence = makeSequence(collection);\n  skipSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1);\n      }\n    });\n    return iterations;\n  };\n  skipSequence.__iteratorUncached = function(type, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var skipping = true;\n    var iterations = 0;\n    return new Iterator(function () {\n      var step;\n      var k;\n      var v;\n      do {\n        step = iterator.next();\n        if (step.done) {\n          if (useKeys || type === ITERATE_VALUES) {\n            return step;\n          }\n          if (type === ITERATE_KEYS) {\n            return iteratorValue(type, iterations++, undefined, step);\n          }\n          return iteratorValue(type, iterations++, step.value[1], step);\n        }\n        var entry = step.value;\n        k = entry[0];\n        v = entry[1];\n        skipping && (skipping = predicate.call(context, v, k, this$1));\n      } while (skipping);\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return skipSequence;\n}\n\nfunction concatFactory(collection, values) {\n  var isKeyedCollection = isKeyed(collection);\n  var iters = [collection]\n    .concat(values)\n    .map(function (v) {\n      if (!isCollection(v)) {\n        v = isKeyedCollection\n          ? keyedSeqFromValue(v)\n          : indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedCollection) {\n        v = KeyedCollection(v);\n      }\n      return v;\n    })\n    .filter(function (v) { return v.size !== 0; });\n\n  if (iters.length === 0) {\n    return collection;\n  }\n\n  if (iters.length === 1) {\n    var singleton = iters[0];\n    if (\n      singleton === collection ||\n      (isKeyedCollection && isKeyed(singleton)) ||\n      (isIndexed(collection) && isIndexed(singleton))\n    ) {\n      return singleton;\n    }\n  }\n\n  var concatSeq = new ArraySeq(iters);\n  if (isKeyedCollection) {\n    concatSeq = concatSeq.toKeyedSeq();\n  } else if (!isIndexed(collection)) {\n    concatSeq = concatSeq.toSetSeq();\n  }\n  concatSeq = concatSeq.flatten(true);\n  concatSeq.size = iters.reduce(function (sum, seq) {\n    if (sum !== undefined) {\n      var size = seq.size;\n      if (size !== undefined) {\n        return sum + size;\n      }\n    }\n  }, 0);\n  return concatSeq;\n}\n\nfunction flattenFactory(collection, depth, useKeys) {\n  var flatSequence = makeSequence(collection);\n  flatSequence.__iterateUncached = function(fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    var stopped = false;\n    function flatDeep(iter, currentDepth) {\n      iter.__iterate(function (v, k) {\n        if ((!depth || currentDepth < depth) && isCollection(v)) {\n          flatDeep(v, currentDepth + 1);\n        } else {\n          iterations++;\n          if (fn(v, useKeys ? k : iterations - 1, flatSequence) === false) {\n            stopped = true;\n          }\n        }\n        return !stopped;\n      }, reverse);\n    }\n    flatDeep(collection, 0);\n    return iterations;\n  };\n  flatSequence.__iteratorUncached = function(type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var stack = [];\n    var iterations = 0;\n    return new Iterator(function () {\n      while (iterator) {\n        var step = iterator.next();\n        if (step.done !== false) {\n          iterator = stack.pop();\n          continue;\n        }\n        var v = step.value;\n        if (type === ITERATE_ENTRIES) {\n          v = v[1];\n        }\n        if ((!depth || stack.length < depth) && isCollection(v)) {\n          stack.push(iterator);\n          iterator = v.__iterator(type, reverse);\n        } else {\n          return useKeys ? step : iteratorValue(type, iterations++, v, step);\n        }\n      }\n      return iteratorDone();\n    });\n  };\n  return flatSequence;\n}\n\nfunction flatMapFactory(collection, mapper, context) {\n  var coerce = collectionClass(collection);\n  return collection\n    .toSeq()\n    .map(function (v, k) { return coerce(mapper.call(context, v, k, collection)); })\n    .flatten(true);\n}\n\nfunction interposeFactory(collection, separator) {\n  var interposedSequence = makeSequence(collection);\n  interposedSequence.size = collection.size && collection.size * 2 - 1;\n  interposedSequence.__iterateUncached = function(fn, reverse) {\n    var this$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(\n      function (v) { return (!iterations || fn(separator, iterations++, this$1) !== false) &&\n        fn(v, iterations++, this$1) !== false; },\n      reverse\n    );\n    return iterations;\n  };\n  interposedSequence.__iteratorUncached = function(type, reverse) {\n    var iterator = collection.__iterator(ITERATE_VALUES, reverse);\n    var iterations = 0;\n    var step;\n    return new Iterator(function () {\n      if (!step || iterations % 2) {\n        step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n      }\n      return iterations % 2\n        ? iteratorValue(type, iterations++, separator)\n        : iteratorValue(type, iterations++, step.value, step);\n    });\n  };\n  return interposedSequence;\n}\n\nfunction sortFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  var isKeyedCollection = isKeyed(collection);\n  var index = 0;\n  var entries = collection\n    .toSeq()\n    .map(function (v, k) { return [k, v, index++, mapper ? mapper(v, k, collection) : v]; })\n    .valueSeq()\n    .toArray();\n  entries.sort(function (a, b) { return comparator(a[3], b[3]) || a[2] - b[2]; }).forEach(\n    isKeyedCollection\n      ? function (v, i) {\n          entries[i].length = 2;\n        }\n      : function (v, i) {\n          entries[i] = v[1];\n        }\n  );\n  return isKeyedCollection\n    ? KeyedSeq(entries)\n    : isIndexed(collection)\n      ? IndexedSeq(entries)\n      : SetSeq(entries);\n}\n\nfunction maxFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  if (mapper) {\n    var entry = collection\n      .toSeq()\n      .map(function (v, k) { return [v, mapper(v, k, collection)]; })\n      .reduce(function (a, b) { return (maxCompare(comparator, a[1], b[1]) ? b : a); });\n    return entry && entry[0];\n  }\n  return collection.reduce(function (a, b) { return (maxCompare(comparator, a, b) ? b : a); });\n}\n\nfunction maxCompare(comparator, a, b) {\n  var comp = comparator(b, a);\n  // b is considered the new max if the comparator declares them equal, but\n  // they are not equal and b is in fact a nullish value.\n  return (\n    (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) ||\n    comp > 0\n  );\n}\n\nfunction zipWithFactory(keyIter, zipper, iters, zipAll) {\n  var zipSequence = makeSequence(keyIter);\n  var sizes = new ArraySeq(iters).map(function (i) { return i.size; });\n  zipSequence.size = zipAll ? sizes.max() : sizes.min();\n  // Note: this a generic base implementation of __iterate in terms of\n  // __iterator which may be more generically useful in the future.\n  zipSequence.__iterate = function(fn, reverse) {\n    /* generic:\n    var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      iterations++;\n      if (fn(step.value[1], step.value[0], this) === false) {\n        break;\n      }\n    }\n    return iterations;\n    */\n    // indexed:\n    var iterator = this.__iterator(ITERATE_VALUES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      if (fn(step.value, iterations++, this) === false) {\n        break;\n      }\n    }\n    return iterations;\n  };\n  zipSequence.__iteratorUncached = function(type, reverse) {\n    var iterators = iters.map(\n      function (i) { return ((i = Collection(i)), getIterator(reverse ? i.reverse() : i)); }\n    );\n    var iterations = 0;\n    var isDone = false;\n    return new Iterator(function () {\n      var steps;\n      if (!isDone) {\n        steps = iterators.map(function (i) { return i.next(); });\n        isDone = zipAll ? steps.every(function (s) { return s.done; }) : steps.some(function (s) { return s.done; });\n      }\n      if (isDone) {\n        return iteratorDone();\n      }\n      return iteratorValue(\n        type,\n        iterations++,\n        zipper.apply(null, steps.map(function (s) { return s.value; }))\n      );\n    });\n  };\n  return zipSequence;\n}\n\n// #pragma Helper Functions\n\nfunction reify(iter, seq) {\n  return iter === seq ? iter : isSeq(iter) ? seq : iter.constructor(seq);\n}\n\nfunction validateEntry(entry) {\n  if (entry !== Object(entry)) {\n    throw new TypeError('Expected [K, V] tuple: ' + entry);\n  }\n}\n\nfunction collectionClass(collection) {\n  return isKeyed(collection)\n    ? KeyedCollection\n    : isIndexed(collection)\n      ? IndexedCollection\n      : SetCollection;\n}\n\nfunction makeSequence(collection) {\n  return Object.create(\n    (isKeyed(collection)\n      ? KeyedSeq\n      : isIndexed(collection)\n        ? IndexedSeq\n        : SetSeq\n    ).prototype\n  );\n}\n\nfunction cacheResultThrough() {\n  if (this._iter.cacheResult) {\n    this._iter.cacheResult();\n    this.size = this._iter.size;\n    return this;\n  }\n  return Seq.prototype.cacheResult.call(this);\n}\n\nfunction defaultComparator(a, b) {\n  if (a === undefined && b === undefined) {\n    return 0;\n  }\n\n  if (a === undefined) {\n    return 1;\n  }\n\n  if (b === undefined) {\n    return -1;\n  }\n\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n// http://jsperf.com/copy-array-inline\nfunction arrCopy(arr, offset) {\n  offset = offset || 0;\n  var len = Math.max(0, arr.length - offset);\n  var newArr = new Array(len);\n  for (var ii = 0; ii < len; ii++) {\n    newArr[ii] = arr[ii + offset];\n  }\n  return newArr;\n}\n\nfunction invariant(condition, error) {\n  if (!condition) { throw new Error(error); }\n}\n\nfunction assertNotInfinite(size) {\n  invariant(\n    size !== Infinity,\n    'Cannot perform this action with an infinite size.'\n  );\n}\n\nfunction coerceKeyPath(keyPath) {\n  if (isArrayLike(keyPath) && typeof keyPath !== 'string') {\n    return keyPath;\n  }\n  if (isOrdered(keyPath)) {\n    return keyPath.toArray();\n  }\n  throw new TypeError(\n    'Invalid keyPath: expected Ordered Collection or Array: ' + keyPath\n  );\n}\n\nfunction isPlainObj(value) {\n  return (\n    value &&\n    (typeof value.constructor !== 'function' ||\n      value.constructor.name === 'Object')\n  );\n}\n\n/**\n * Returns true if the value is a potentially-persistent data structure, either\n * provided by Immutable.js or a plain Array or Object.\n */\nfunction isDataStructure(value) {\n  return (\n    typeof value === 'object' &&\n    (isImmutable(value) || Array.isArray(value) || isPlainObj(value))\n  );\n}\n\n/**\n * Converts a value to a string, adding quotes if a string was provided.\n */\nfunction quoteString(value) {\n  try {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  } catch (_ignoreError) {\n    return JSON.stringify(value);\n  }\n}\n\nfunction has(collection, key) {\n  return isImmutable(collection)\n    ? collection.has(key)\n    : isDataStructure(collection) && hasOwnProperty.call(collection, key);\n}\n\nfunction get(collection, key, notSetValue) {\n  return isImmutable(collection)\n    ? collection.get(key, notSetValue)\n    : !has(collection, key)\n      ? notSetValue\n      : typeof collection.get === 'function'\n        ? collection.get(key)\n        : collection[key];\n}\n\nfunction shallowCopy(from) {\n  if (Array.isArray(from)) {\n    return arrCopy(from);\n  }\n  var to = {};\n  for (var key in from) {\n    if (hasOwnProperty.call(from, key)) {\n      to[key] = from[key];\n    }\n  }\n  return to;\n}\n\nfunction remove(collection, key) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.remove) {\n      throw new TypeError(\n        'Cannot update immutable value without .remove() method: ' + collection\n      );\n    }\n    return collection.remove(key);\n  }\n  if (!hasOwnProperty.call(collection, key)) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  if (Array.isArray(collectionCopy)) {\n    collectionCopy.splice(key, 1);\n  } else {\n    delete collectionCopy[key];\n  }\n  return collectionCopy;\n}\n\nfunction set(collection, key, value) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.set) {\n      throw new TypeError(\n        'Cannot update immutable value without .set() method: ' + collection\n      );\n    }\n    return collection.set(key, value);\n  }\n  if (hasOwnProperty.call(collection, key) && value === collection[key]) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  collectionCopy[key] = value;\n  return collectionCopy;\n}\n\nfunction updateIn(collection, keyPath, notSetValue, updater) {\n  if (!updater) {\n    updater = notSetValue;\n    notSetValue = undefined;\n  }\n  var updatedValue = updateInDeeply(\n    isImmutable(collection),\n    collection,\n    coerceKeyPath(keyPath),\n    0,\n    notSetValue,\n    updater\n  );\n  return updatedValue === NOT_SET ? notSetValue : updatedValue;\n}\n\nfunction updateInDeeply(\n  inImmutable,\n  existing,\n  keyPath,\n  i,\n  notSetValue,\n  updater\n) {\n  var wasNotSet = existing === NOT_SET;\n  if (i === keyPath.length) {\n    var existingValue = wasNotSet ? notSetValue : existing;\n    var newValue = updater(existingValue);\n    return newValue === existingValue ? existing : newValue;\n  }\n  if (!wasNotSet && !isDataStructure(existing)) {\n    throw new TypeError(\n      'Cannot update within non-data-structure value in path [' +\n        keyPath.slice(0, i).map(quoteString) +\n        ']: ' +\n        existing\n    );\n  }\n  var key = keyPath[i];\n  var nextExisting = wasNotSet ? NOT_SET : get(existing, key, NOT_SET);\n  var nextUpdated = updateInDeeply(\n    nextExisting === NOT_SET ? inImmutable : isImmutable(nextExisting),\n    nextExisting,\n    keyPath,\n    i + 1,\n    notSetValue,\n    updater\n  );\n  return nextUpdated === nextExisting\n    ? existing\n    : nextUpdated === NOT_SET\n      ? remove(existing, key)\n      : set(\n          wasNotSet ? (inImmutable ? emptyMap() : {}) : existing,\n          key,\n          nextUpdated\n        );\n}\n\nfunction setIn(collection, keyPath, value) {\n  return updateIn(collection, keyPath, NOT_SET, function () { return value; });\n}\n\nfunction setIn$1(keyPath, v) {\n  return setIn(this, keyPath, v);\n}\n\nfunction removeIn(collection, keyPath) {\n  return updateIn(collection, keyPath, function () { return NOT_SET; });\n}\n\nfunction deleteIn(keyPath) {\n  return removeIn(this, keyPath);\n}\n\nfunction update(collection, key, notSetValue, updater) {\n  return updateIn(collection, [key], notSetValue, updater);\n}\n\nfunction update$1(key, notSetValue, updater) {\n  return arguments.length === 1\n    ? key(this)\n    : update(this, key, notSetValue, updater);\n}\n\nfunction updateIn$1(keyPath, notSetValue, updater) {\n  return updateIn(this, keyPath, notSetValue, updater);\n}\n\nfunction merge() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeIntoKeyedWith(this, iters);\n}\n\nfunction mergeWith(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  if (typeof merger !== 'function') {\n    throw new TypeError('Invalid merger function: ' + merger);\n  }\n  return mergeIntoKeyedWith(this, iters, merger);\n}\n\nfunction mergeIntoKeyedWith(collection, collections, merger) {\n  var iters = [];\n  for (var ii = 0; ii < collections.length; ii++) {\n    var collection$1 = KeyedCollection(collections[ii]);\n    if (collection$1.size !== 0) {\n      iters.push(collection$1);\n    }\n  }\n  if (iters.length === 0) {\n    return collection;\n  }\n  if (\n    collection.toSeq().size === 0 &&\n    !collection.__ownerID &&\n    iters.length === 1\n  ) {\n    return collection.constructor(iters[0]);\n  }\n  return collection.withMutations(function (collection) {\n    var mergeIntoCollection = merger\n      ? function (value, key) {\n          update(\n            collection,\n            key,\n            NOT_SET,\n            function (oldVal) { return (oldVal === NOT_SET ? value : merger(oldVal, value, key)); }\n          );\n        }\n      : function (value, key) {\n          collection.set(key, value);\n        };\n    for (var ii = 0; ii < iters.length; ii++) {\n      iters[ii].forEach(mergeIntoCollection);\n    }\n  });\n}\n\nfunction merge$1(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeWithSources(collection, sources);\n}\n\nfunction mergeWith$1(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeWithSources(collection, sources, merger);\n}\n\nfunction mergeDeep(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(collection, sources);\n}\n\nfunction mergeDeepWith(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeDeepWithSources(collection, sources, merger);\n}\n\nfunction mergeDeepWithSources(collection, sources, merger) {\n  return mergeWithSources(collection, sources, deepMergerWith(merger));\n}\n\nfunction mergeWithSources(collection, sources, merger) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot merge into non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    return typeof merger === 'function' && collection.mergeWith\n      ? collection.mergeWith.apply(collection, [ merger ].concat( sources ))\n      : collection.merge\n        ? collection.merge.apply(collection, sources)\n        : collection.concat.apply(collection, sources);\n  }\n  var isArray = Array.isArray(collection);\n  var merged = collection;\n  var Collection$$1 = isArray ? IndexedCollection : KeyedCollection;\n  var mergeItem = isArray\n    ? function (value) {\n        // Copy on write\n        if (merged === collection) {\n          merged = shallowCopy(merged);\n        }\n        merged.push(value);\n      }\n    : function (value, key) {\n        var hasVal = hasOwnProperty.call(merged, key);\n        var nextVal =\n          hasVal && merger ? merger(merged[key], value, key) : value;\n        if (!hasVal || nextVal !== merged[key]) {\n          // Copy on write\n          if (merged === collection) {\n            merged = shallowCopy(merged);\n          }\n          merged[key] = nextVal;\n        }\n      };\n  for (var i = 0; i < sources.length; i++) {\n    Collection$$1(sources[i]).forEach(mergeItem);\n  }\n  return merged;\n}\n\nfunction deepMergerWith(merger) {\n  function deepMerger(oldValue, newValue, key) {\n    return isDataStructure(oldValue) && isDataStructure(newValue)\n      ? mergeWithSources(oldValue, [newValue], deepMerger)\n      : merger\n        ? merger(oldValue, newValue, key)\n        : newValue;\n  }\n  return deepMerger;\n}\n\nfunction mergeDeep$1() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeDeepWithSources(this, iters);\n}\n\nfunction mergeDeepWith$1(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(this, iters, merger);\n}\n\nfunction mergeIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn(this, keyPath, emptyMap(), function (m) { return mergeWithSources(m, iters); });\n}\n\nfunction mergeDeepIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn(this, keyPath, emptyMap(), function (m) { return mergeDeepWithSources(m, iters); }\n  );\n}\n\nfunction withMutations(fn) {\n  var mutable = this.asMutable();\n  fn(mutable);\n  return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n}\n\nfunction asMutable() {\n  return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n}\n\nfunction asImmutable() {\n  return this.__ensureOwner();\n}\n\nfunction wasAltered() {\n  return this.__altered;\n}\n\nvar Map = /*@__PURE__*/(function (KeyedCollection$$1) {\n  function Map(value) {\n    return value === null || value === undefined\n      ? emptyMap()\n      : isMap(value) && !isOrdered(value)\n        ? value\n        : emptyMap().withMutations(function (map) {\n            var iter = KeyedCollection$$1(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v, k) { return map.set(k, v); });\n          });\n  }\n\n  if ( KeyedCollection$$1 ) Map.__proto__ = KeyedCollection$$1;\n  Map.prototype = Object.create( KeyedCollection$$1 && KeyedCollection$$1.prototype );\n  Map.prototype.constructor = Map;\n\n  Map.of = function of () {\n    var keyValues = [], len = arguments.length;\n    while ( len-- ) keyValues[ len ] = arguments[ len ];\n\n    return emptyMap().withMutations(function (map) {\n      for (var i = 0; i < keyValues.length; i += 2) {\n        if (i + 1 >= keyValues.length) {\n          throw new Error('Missing value for key: ' + keyValues[i]);\n        }\n        map.set(keyValues[i], keyValues[i + 1]);\n      }\n    });\n  };\n\n  Map.prototype.toString = function toString () {\n    return this.__toString('Map {', '}');\n  };\n\n  // @pragma Access\n\n  Map.prototype.get = function get (k, notSetValue) {\n    return this._root\n      ? this._root.get(0, undefined, k, notSetValue)\n      : notSetValue;\n  };\n\n  // @pragma Modification\n\n  Map.prototype.set = function set (k, v) {\n    return updateMap(this, k, v);\n  };\n\n  Map.prototype.remove = function remove (k) {\n    return updateMap(this, k, NOT_SET);\n  };\n\n  Map.prototype.deleteAll = function deleteAll (keys) {\n    var collection = Collection(keys);\n\n    if (collection.size === 0) {\n      return this;\n    }\n\n    return this.withMutations(function (map) {\n      collection.forEach(function (key) { return map.remove(key); });\n    });\n  };\n\n  Map.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._root = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyMap();\n  };\n\n  // @pragma Composition\n\n  Map.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator));\n  };\n\n  Map.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator, mapper));\n  };\n\n  Map.prototype.map = function map (mapper, context) {\n    return this.withMutations(function (map) {\n      map.forEach(function (value, key) {\n        map.set(key, mapper.call(context, value, key, map));\n      });\n    });\n  };\n\n  // @pragma Mutability\n\n  Map.prototype.__iterator = function __iterator (type, reverse) {\n    return new MapIterator(this, type, reverse);\n  };\n\n  Map.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    var iterations = 0;\n    this._root &&\n      this._root.iterate(function (entry) {\n        iterations++;\n        return fn(entry[1], entry[0], this$1);\n      }, reverse);\n    return iterations;\n  };\n\n  Map.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeMap(this.size, this._root, ownerID, this.__hash);\n  };\n\n  return Map;\n}(KeyedCollection));\n\nMap.isMap = isMap;\n\nvar MapPrototype = Map.prototype;\nMapPrototype[IS_MAP_SYMBOL] = true;\nMapPrototype[DELETE] = MapPrototype.remove;\nMapPrototype.removeAll = MapPrototype.deleteAll;\nMapPrototype.setIn = setIn$1;\nMapPrototype.removeIn = MapPrototype.deleteIn = deleteIn;\nMapPrototype.update = update$1;\nMapPrototype.updateIn = updateIn$1;\nMapPrototype.merge = MapPrototype.concat = merge;\nMapPrototype.mergeWith = mergeWith;\nMapPrototype.mergeDeep = mergeDeep$1;\nMapPrototype.mergeDeepWith = mergeDeepWith$1;\nMapPrototype.mergeIn = mergeIn;\nMapPrototype.mergeDeepIn = mergeDeepIn;\nMapPrototype.withMutations = withMutations;\nMapPrototype.wasAltered = wasAltered;\nMapPrototype.asImmutable = asImmutable;\nMapPrototype['@@transducer/init'] = MapPrototype.asMutable = asMutable;\nMapPrototype['@@transducer/step'] = function(result, arr) {\n  return result.set(arr[0], arr[1]);\n};\nMapPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\n// #pragma Trie Nodes\n\nvar ArrayMapNode = function ArrayMapNode(ownerID, entries) {\n  this.ownerID = ownerID;\n  this.entries = entries;\n};\n\nArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && entries.length === 1) {\n    return; // undefined\n  }\n\n  if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n    return createNodes(ownerID, entries, key, value);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new ArrayMapNode(ownerID, newEntries);\n};\n\nvar BitmapIndexedNode = function BitmapIndexedNode(ownerID, bitmap, nodes) {\n  this.ownerID = ownerID;\n  this.bitmap = bitmap;\n  this.nodes = nodes;\n};\n\nBitmapIndexedNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var bit = 1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK);\n  var bitmap = this.bitmap;\n  return (bitmap & bit) === 0\n    ? notSetValue\n    : this.nodes[popCount(bitmap & (bit - 1))].get(\n        shift + SHIFT,\n        keyHash,\n        key,\n        notSetValue\n      );\n};\n\nBitmapIndexedNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var bit = 1 << keyHashFrag;\n  var bitmap = this.bitmap;\n  var exists = (bitmap & bit) !== 0;\n\n  if (!exists && value === NOT_SET) {\n    return this;\n  }\n\n  var idx = popCount(bitmap & (bit - 1));\n  var nodes = this.nodes;\n  var node = exists ? nodes[idx] : undefined;\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n\n  if (newNode === node) {\n    return this;\n  }\n\n  if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n    return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n  }\n\n  if (\n    exists &&\n    !newNode &&\n    nodes.length === 2 &&\n    isLeafNode(nodes[idx ^ 1])\n  ) {\n    return nodes[idx ^ 1];\n  }\n\n  if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n    return newNode;\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newBitmap = exists ? (newNode ? bitmap : bitmap ^ bit) : bitmap | bit;\n  var newNodes = exists\n    ? newNode\n      ? setAt(nodes, idx, newNode, isEditable)\n      : spliceOut(nodes, idx, isEditable)\n    : spliceIn(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.bitmap = newBitmap;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n};\n\nvar HashArrayMapNode = function HashArrayMapNode(ownerID, count, nodes) {\n  this.ownerID = ownerID;\n  this.count = count;\n  this.nodes = nodes;\n};\n\nHashArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var node = this.nodes[idx];\n  return node\n    ? node.get(shift + SHIFT, keyHash, key, notSetValue)\n    : notSetValue;\n};\n\nHashArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var removed = value === NOT_SET;\n  var nodes = this.nodes;\n  var node = nodes[idx];\n\n  if (removed && !node) {\n    return this;\n  }\n\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n  if (newNode === node) {\n    return this;\n  }\n\n  var newCount = this.count;\n  if (!node) {\n    newCount++;\n  } else if (!newNode) {\n    newCount--;\n    if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n      return packNodes(ownerID, nodes, newCount, idx);\n    }\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newNodes = setAt(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.count = newCount;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new HashArrayMapNode(ownerID, newCount, newNodes);\n};\n\nvar HashCollisionNode = function HashCollisionNode(ownerID, keyHash, entries) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entries = entries;\n};\n\nHashCollisionNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nHashCollisionNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n\n  var removed = value === NOT_SET;\n\n  if (keyHash !== this.keyHash) {\n    if (removed) {\n      return this;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n  }\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && len === 2) {\n    return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n};\n\nvar ValueNode = function ValueNode(ownerID, keyHash, entry) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entry = entry;\n};\n\nValueNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n};\n\nValueNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n  var keyMatch = is(key, this.entry[0]);\n  if (keyMatch ? value === this.entry[1] : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n\n  if (removed) {\n    SetRef(didChangeSize);\n    return; // undefined\n  }\n\n  if (keyMatch) {\n    if (ownerID && ownerID === this.ownerID) {\n      this.entry[1] = value;\n      return this;\n    }\n    return new ValueNode(ownerID, this.keyHash, [key, value]);\n  }\n\n  SetRef(didChangeSize);\n  return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n};\n\n// #pragma Iterators\n\nArrayMapNode.prototype.iterate = HashCollisionNode.prototype.iterate = function(\n  fn,\n  reverse\n) {\n  var entries = this.entries;\n  for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n    if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n      return false;\n    }\n  }\n};\n\nBitmapIndexedNode.prototype.iterate = HashArrayMapNode.prototype.iterate = function(\n  fn,\n  reverse\n) {\n  var nodes = this.nodes;\n  for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n    var node = nodes[reverse ? maxIndex - ii : ii];\n    if (node && node.iterate(fn, reverse) === false) {\n      return false;\n    }\n  }\n};\n\n// eslint-disable-next-line no-unused-vars\nValueNode.prototype.iterate = function(fn, reverse) {\n  return fn(this.entry);\n};\n\nvar MapIterator = /*@__PURE__*/(function (Iterator$$1) {\n  function MapIterator(map, type, reverse) {\n    this._type = type;\n    this._reverse = reverse;\n    this._stack = map._root && mapIteratorFrame(map._root);\n  }\n\n  if ( Iterator$$1 ) MapIterator.__proto__ = Iterator$$1;\n  MapIterator.prototype = Object.create( Iterator$$1 && Iterator$$1.prototype );\n  MapIterator.prototype.constructor = MapIterator;\n\n  MapIterator.prototype.next = function next () {\n    var type = this._type;\n    var stack = this._stack;\n    while (stack) {\n      var node = stack.node;\n      var index = stack.index++;\n      var maxIndex = (void 0);\n      if (node.entry) {\n        if (index === 0) {\n          return mapIteratorValue(type, node.entry);\n        }\n      } else if (node.entries) {\n        maxIndex = node.entries.length - 1;\n        if (index <= maxIndex) {\n          return mapIteratorValue(\n            type,\n            node.entries[this._reverse ? maxIndex - index : index]\n          );\n        }\n      } else {\n        maxIndex = node.nodes.length - 1;\n        if (index <= maxIndex) {\n          var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n          if (subNode) {\n            if (subNode.entry) {\n              return mapIteratorValue(type, subNode.entry);\n            }\n            stack = this._stack = mapIteratorFrame(subNode, stack);\n          }\n          continue;\n        }\n      }\n      stack = this._stack = this._stack.__prev;\n    }\n    return iteratorDone();\n  };\n\n  return MapIterator;\n}(Iterator));\n\nfunction mapIteratorValue(type, entry) {\n  return iteratorValue(type, entry[0], entry[1]);\n}\n\nfunction mapIteratorFrame(node, prev) {\n  return {\n    node: node,\n    index: 0,\n    __prev: prev,\n  };\n}\n\nfunction makeMap(size, root, ownerID, hash$$1) {\n  var map = Object.create(MapPrototype);\n  map.size = size;\n  map._root = root;\n  map.__ownerID = ownerID;\n  map.__hash = hash$$1;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_MAP;\nfunction emptyMap() {\n  return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n}\n\nfunction updateMap(map, k, v) {\n  var newRoot;\n  var newSize;\n  if (!map._root) {\n    if (v === NOT_SET) {\n      return map;\n    }\n    newSize = 1;\n    newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n  } else {\n    var didChangeSize = MakeRef();\n    var didAlter = MakeRef();\n    newRoot = updateNode(\n      map._root,\n      map.__ownerID,\n      0,\n      undefined,\n      k,\n      v,\n      didChangeSize,\n      didAlter\n    );\n    if (!didAlter.value) {\n      return map;\n    }\n    newSize = map.size + (didChangeSize.value ? (v === NOT_SET ? -1 : 1) : 0);\n  }\n  if (map.__ownerID) {\n    map.size = newSize;\n    map._root = newRoot;\n    map.__hash = undefined;\n    map.__altered = true;\n    return map;\n  }\n  return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n}\n\nfunction updateNode(\n  node,\n  ownerID,\n  shift,\n  keyHash,\n  key,\n  value,\n  didChangeSize,\n  didAlter\n) {\n  if (!node) {\n    if (value === NOT_SET) {\n      return node;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return new ValueNode(ownerID, keyHash, [key, value]);\n  }\n  return node.update(\n    ownerID,\n    shift,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n}\n\nfunction isLeafNode(node) {\n  return (\n    node.constructor === ValueNode || node.constructor === HashCollisionNode\n  );\n}\n\nfunction mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n  if (node.keyHash === keyHash) {\n    return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n  }\n\n  var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n  var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n  var newNode;\n  var nodes =\n    idx1 === idx2\n      ? [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)]\n      : ((newNode = new ValueNode(ownerID, keyHash, entry)),\n        idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n  return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n}\n\nfunction createNodes(ownerID, entries, key, value) {\n  if (!ownerID) {\n    ownerID = new OwnerID();\n  }\n  var node = new ValueNode(ownerID, hash(key), [key, value]);\n  for (var ii = 0; ii < entries.length; ii++) {\n    var entry = entries[ii];\n    node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n  }\n  return node;\n}\n\nfunction packNodes(ownerID, nodes, count, excluding) {\n  var bitmap = 0;\n  var packedII = 0;\n  var packedNodes = new Array(count);\n  for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n    var node = nodes[ii];\n    if (node !== undefined && ii !== excluding) {\n      bitmap |= bit;\n      packedNodes[packedII++] = node;\n    }\n  }\n  return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n}\n\nfunction expandNodes(ownerID, nodes, bitmap, including, node) {\n  var count = 0;\n  var expandedNodes = new Array(SIZE);\n  for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n    expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n  }\n  expandedNodes[including] = node;\n  return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n}\n\nfunction popCount(x) {\n  x -= (x >> 1) & 0x55555555;\n  x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n  x = (x + (x >> 4)) & 0x0f0f0f0f;\n  x += x >> 8;\n  x += x >> 16;\n  return x & 0x7f;\n}\n\nfunction setAt(array, idx, val, canEdit) {\n  var newArray = canEdit ? array : arrCopy(array);\n  newArray[idx] = val;\n  return newArray;\n}\n\nfunction spliceIn(array, idx, val, canEdit) {\n  var newLen = array.length + 1;\n  if (canEdit && idx + 1 === newLen) {\n    array[idx] = val;\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      newArray[ii] = val;\n      after = -1;\n    } else {\n      newArray[ii] = array[ii + after];\n    }\n  }\n  return newArray;\n}\n\nfunction spliceOut(array, idx, canEdit) {\n  var newLen = array.length - 1;\n  if (canEdit && idx === newLen) {\n    array.pop();\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      after = 1;\n    }\n    newArray[ii] = array[ii + after];\n  }\n  return newArray;\n}\n\nvar MAX_ARRAY_MAP_SIZE = SIZE / 4;\nvar MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\nvar MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\nvar IS_LIST_SYMBOL = '@@__IMMUTABLE_LIST__@@';\n\nfunction isList(maybeList) {\n  return Boolean(maybeList && maybeList[IS_LIST_SYMBOL]);\n}\n\nvar List = /*@__PURE__*/(function (IndexedCollection$$1) {\n  function List(value) {\n    var empty = emptyList();\n    if (value === null || value === undefined) {\n      return empty;\n    }\n    if (isList(value)) {\n      return value;\n    }\n    var iter = IndexedCollection$$1(value);\n    var size = iter.size;\n    if (size === 0) {\n      return empty;\n    }\n    assertNotInfinite(size);\n    if (size > 0 && size < SIZE) {\n      return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n    }\n    return empty.withMutations(function (list) {\n      list.setSize(size);\n      iter.forEach(function (v, i) { return list.set(i, v); });\n    });\n  }\n\n  if ( IndexedCollection$$1 ) List.__proto__ = IndexedCollection$$1;\n  List.prototype = Object.create( IndexedCollection$$1 && IndexedCollection$$1.prototype );\n  List.prototype.constructor = List;\n\n  List.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  List.prototype.toString = function toString () {\n    return this.__toString('List [', ']');\n  };\n\n  // @pragma Access\n\n  List.prototype.get = function get (index, notSetValue) {\n    index = wrapIndex(this, index);\n    if (index >= 0 && index < this.size) {\n      index += this._origin;\n      var node = listNodeFor(this, index);\n      return node && node.array[index & MASK];\n    }\n    return notSetValue;\n  };\n\n  // @pragma Modification\n\n  List.prototype.set = function set (index, value) {\n    return updateList(this, index, value);\n  };\n\n  List.prototype.remove = function remove (index) {\n    return !this.has(index)\n      ? this\n      : index === 0\n        ? this.shift()\n        : index === this.size - 1\n          ? this.pop()\n          : this.splice(index, 1);\n  };\n\n  List.prototype.insert = function insert (index, value) {\n    return this.splice(index, 0, value);\n  };\n\n  List.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = this._origin = this._capacity = 0;\n      this._level = SHIFT;\n      this._root = this._tail = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyList();\n  };\n\n  List.prototype.push = function push (/*...values*/) {\n    var values = arguments;\n    var oldSize = this.size;\n    return this.withMutations(function (list) {\n      setListBounds(list, 0, oldSize + values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(oldSize + ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.pop = function pop () {\n    return setListBounds(this, 0, -1);\n  };\n\n  List.prototype.unshift = function unshift (/*...values*/) {\n    var values = arguments;\n    return this.withMutations(function (list) {\n      setListBounds(list, -values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.shift = function shift () {\n    return setListBounds(this, 1);\n  };\n\n  // @pragma Composition\n\n  List.prototype.concat = function concat (/*...collections*/) {\n    var arguments$1 = arguments;\n\n    var seqs = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var argument = arguments$1[i];\n      var seq = IndexedCollection$$1(\n        typeof argument !== 'string' && hasIterator(argument)\n          ? argument\n          : [argument]\n      );\n      if (seq.size !== 0) {\n        seqs.push(seq);\n      }\n    }\n    if (seqs.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && seqs.length === 1) {\n      return this.constructor(seqs[0]);\n    }\n    return this.withMutations(function (list) {\n      seqs.forEach(function (seq) { return seq.forEach(function (value) { return list.push(value); }); });\n    });\n  };\n\n  List.prototype.setSize = function setSize (size) {\n    return setListBounds(this, 0, size);\n  };\n\n  List.prototype.map = function map (mapper, context) {\n    var this$1 = this;\n\n    return this.withMutations(function (list) {\n      for (var i = 0; i < this$1.size; i++) {\n        list.set(i, mapper.call(context, list.get(i), i, list));\n      }\n    });\n  };\n\n  // @pragma Iteration\n\n  List.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    if (wholeSlice(begin, end, size)) {\n      return this;\n    }\n    return setListBounds(\n      this,\n      resolveBegin(begin, size),\n      resolveEnd(end, size)\n    );\n  };\n\n  List.prototype.__iterator = function __iterator (type, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    return new Iterator(function () {\n      var value = values();\n      return value === DONE\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? --index : index++, value);\n    });\n  };\n\n  List.prototype.__iterate = function __iterate (fn, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    var value;\n    while ((value = values()) !== DONE) {\n      if (fn(value, reverse ? --index : index++, this) === false) {\n        break;\n      }\n    }\n    return index;\n  };\n\n  List.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyList();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeList(\n      this._origin,\n      this._capacity,\n      this._level,\n      this._root,\n      this._tail,\n      ownerID,\n      this.__hash\n    );\n  };\n\n  return List;\n}(IndexedCollection));\n\nList.isList = isList;\n\nvar ListPrototype = List.prototype;\nListPrototype[IS_LIST_SYMBOL] = true;\nListPrototype[DELETE] = ListPrototype.remove;\nListPrototype.merge = ListPrototype.concat;\nListPrototype.setIn = setIn$1;\nListPrototype.deleteIn = ListPrototype.removeIn = deleteIn;\nListPrototype.update = update$1;\nListPrototype.updateIn = updateIn$1;\nListPrototype.mergeIn = mergeIn;\nListPrototype.mergeDeepIn = mergeDeepIn;\nListPrototype.withMutations = withMutations;\nListPrototype.wasAltered = wasAltered;\nListPrototype.asImmutable = asImmutable;\nListPrototype['@@transducer/init'] = ListPrototype.asMutable = asMutable;\nListPrototype['@@transducer/step'] = function(result, arr) {\n  return result.push(arr);\n};\nListPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\nvar VNode = function VNode(array, ownerID) {\n  this.array = array;\n  this.ownerID = ownerID;\n};\n\n// TODO: seems like these methods are very similar\n\nVNode.prototype.removeBefore = function removeBefore (ownerID, level, index) {\n  if (index === level ? 1 << level : this.array.length === 0) {\n    return this;\n  }\n  var originIndex = (index >>> level) & MASK;\n  if (originIndex >= this.array.length) {\n    return new VNode([], ownerID);\n  }\n  var removingFirst = originIndex === 0;\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[originIndex];\n    newChild =\n      oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && removingFirst) {\n      return this;\n    }\n  }\n  if (removingFirst && !newChild) {\n    return this;\n  }\n  var editable = editableVNode(this, ownerID);\n  if (!removingFirst) {\n    for (var ii = 0; ii < originIndex; ii++) {\n      editable.array[ii] = undefined;\n    }\n  }\n  if (newChild) {\n    editable.array[originIndex] = newChild;\n  }\n  return editable;\n};\n\nVNode.prototype.removeAfter = function removeAfter (ownerID, level, index) {\n  if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n    return this;\n  }\n  var sizeIndex = ((index - 1) >>> level) & MASK;\n  if (sizeIndex >= this.array.length) {\n    return this;\n  }\n\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[sizeIndex];\n    newChild =\n      oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n      return this;\n    }\n  }\n\n  var editable = editableVNode(this, ownerID);\n  editable.array.splice(sizeIndex + 1);\n  if (newChild) {\n    editable.array[sizeIndex] = newChild;\n  }\n  return editable;\n};\n\nvar DONE = {};\n\nfunction iterateList(list, reverse) {\n  var left = list._origin;\n  var right = list._capacity;\n  var tailPos = getTailOffset(right);\n  var tail = list._tail;\n\n  return iterateNodeOrLeaf(list._root, list._level, 0);\n\n  function iterateNodeOrLeaf(node, level, offset) {\n    return level === 0\n      ? iterateLeaf(node, offset)\n      : iterateNode(node, level, offset);\n  }\n\n  function iterateLeaf(node, offset) {\n    var array = offset === tailPos ? tail && tail.array : node && node.array;\n    var from = offset > left ? 0 : left - offset;\n    var to = right - offset;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      if (from === to) {\n        return DONE;\n      }\n      var idx = reverse ? --to : from++;\n      return array && array[idx];\n    };\n  }\n\n  function iterateNode(node, level, offset) {\n    var values;\n    var array = node && node.array;\n    var from = offset > left ? 0 : (left - offset) >> level;\n    var to = ((right - offset) >> level) + 1;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      while (true) {\n        if (values) {\n          var value = values();\n          if (value !== DONE) {\n            return value;\n          }\n          values = null;\n        }\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        values = iterateNodeOrLeaf(\n          array && array[idx],\n          level - SHIFT,\n          offset + (idx << level)\n        );\n      }\n    };\n  }\n}\n\nfunction makeList(origin, capacity, level, root, tail, ownerID, hash) {\n  var list = Object.create(ListPrototype);\n  list.size = capacity - origin;\n  list._origin = origin;\n  list._capacity = capacity;\n  list._level = level;\n  list._root = root;\n  list._tail = tail;\n  list.__ownerID = ownerID;\n  list.__hash = hash;\n  list.__altered = false;\n  return list;\n}\n\nvar EMPTY_LIST;\nfunction emptyList() {\n  return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n}\n\nfunction updateList(list, index, value) {\n  index = wrapIndex(list, index);\n\n  if (index !== index) {\n    return list;\n  }\n\n  if (index >= list.size || index < 0) {\n    return list.withMutations(function (list) {\n      index < 0\n        ? setListBounds(list, index).set(0, value)\n        : setListBounds(list, 0, index + 1).set(index, value);\n    });\n  }\n\n  index += list._origin;\n\n  var newTail = list._tail;\n  var newRoot = list._root;\n  var didAlter = MakeRef();\n  if (index >= getTailOffset(list._capacity)) {\n    newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n  } else {\n    newRoot = updateVNode(\n      newRoot,\n      list.__ownerID,\n      list._level,\n      index,\n      value,\n      didAlter\n    );\n  }\n\n  if (!didAlter.value) {\n    return list;\n  }\n\n  if (list.__ownerID) {\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n}\n\nfunction updateVNode(node, ownerID, level, index, value, didAlter) {\n  var idx = (index >>> level) & MASK;\n  var nodeHas = node && idx < node.array.length;\n  if (!nodeHas && value === undefined) {\n    return node;\n  }\n\n  var newNode;\n\n  if (level > 0) {\n    var lowerNode = node && node.array[idx];\n    var newLowerNode = updateVNode(\n      lowerNode,\n      ownerID,\n      level - SHIFT,\n      index,\n      value,\n      didAlter\n    );\n    if (newLowerNode === lowerNode) {\n      return node;\n    }\n    newNode = editableVNode(node, ownerID);\n    newNode.array[idx] = newLowerNode;\n    return newNode;\n  }\n\n  if (nodeHas && node.array[idx] === value) {\n    return node;\n  }\n\n  if (didAlter) {\n    SetRef(didAlter);\n  }\n\n  newNode = editableVNode(node, ownerID);\n  if (value === undefined && idx === newNode.array.length - 1) {\n    newNode.array.pop();\n  } else {\n    newNode.array[idx] = value;\n  }\n  return newNode;\n}\n\nfunction editableVNode(node, ownerID) {\n  if (ownerID && node && ownerID === node.ownerID) {\n    return node;\n  }\n  return new VNode(node ? node.array.slice() : [], ownerID);\n}\n\nfunction listNodeFor(list, rawIndex) {\n  if (rawIndex >= getTailOffset(list._capacity)) {\n    return list._tail;\n  }\n  if (rawIndex < 1 << (list._level + SHIFT)) {\n    var node = list._root;\n    var level = list._level;\n    while (node && level > 0) {\n      node = node.array[(rawIndex >>> level) & MASK];\n      level -= SHIFT;\n    }\n    return node;\n  }\n}\n\nfunction setListBounds(list, begin, end) {\n  // Sanitize begin & end using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  if (begin !== undefined) {\n    begin |= 0;\n  }\n  if (end !== undefined) {\n    end |= 0;\n  }\n  var owner = list.__ownerID || new OwnerID();\n  var oldOrigin = list._origin;\n  var oldCapacity = list._capacity;\n  var newOrigin = oldOrigin + begin;\n  var newCapacity =\n    end === undefined\n      ? oldCapacity\n      : end < 0\n        ? oldCapacity + end\n        : oldOrigin + end;\n  if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n    return list;\n  }\n\n  // If it's going to end after it starts, it's empty.\n  if (newOrigin >= newCapacity) {\n    return list.clear();\n  }\n\n  var newLevel = list._level;\n  var newRoot = list._root;\n\n  // New origin might need creating a higher root.\n  var offsetShift = 0;\n  while (newOrigin + offsetShift < 0) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [undefined, newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n    offsetShift += 1 << newLevel;\n  }\n  if (offsetShift) {\n    newOrigin += offsetShift;\n    oldOrigin += offsetShift;\n    newCapacity += offsetShift;\n    oldCapacity += offsetShift;\n  }\n\n  var oldTailOffset = getTailOffset(oldCapacity);\n  var newTailOffset = getTailOffset(newCapacity);\n\n  // New size might need creating a higher root.\n  while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n  }\n\n  // Locate or create the new tail.\n  var oldTail = list._tail;\n  var newTail =\n    newTailOffset < oldTailOffset\n      ? listNodeFor(list, newCapacity - 1)\n      : newTailOffset > oldTailOffset\n        ? new VNode([], owner)\n        : oldTail;\n\n  // Merge Tail into tree.\n  if (\n    oldTail &&\n    newTailOffset > oldTailOffset &&\n    newOrigin < oldCapacity &&\n    oldTail.array.length\n  ) {\n    newRoot = editableVNode(newRoot, owner);\n    var node = newRoot;\n    for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n      var idx = (oldTailOffset >>> level) & MASK;\n      node = node.array[idx] = editableVNode(node.array[idx], owner);\n    }\n    node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n  }\n\n  // If the size has been reduced, there's a chance the tail needs to be trimmed.\n  if (newCapacity < oldCapacity) {\n    newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n  }\n\n  // If the new origin is within the tail, then we do not need a root.\n  if (newOrigin >= newTailOffset) {\n    newOrigin -= newTailOffset;\n    newCapacity -= newTailOffset;\n    newLevel = SHIFT;\n    newRoot = null;\n    newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n  } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n    offsetShift = 0;\n\n    // Identify the new top root node of the subtree of the old root.\n    while (newRoot) {\n      var beginIndex = (newOrigin >>> newLevel) & MASK;\n      if ((beginIndex !== newTailOffset >>> newLevel) & MASK) {\n        break;\n      }\n      if (beginIndex) {\n        offsetShift += (1 << newLevel) * beginIndex;\n      }\n      newLevel -= SHIFT;\n      newRoot = newRoot.array[beginIndex];\n    }\n\n    // Trim the new sides of the new root.\n    if (newRoot && newOrigin > oldOrigin) {\n      newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n    }\n    if (newRoot && newTailOffset < oldTailOffset) {\n      newRoot = newRoot.removeAfter(\n        owner,\n        newLevel,\n        newTailOffset - offsetShift\n      );\n    }\n    if (offsetShift) {\n      newOrigin -= offsetShift;\n      newCapacity -= offsetShift;\n    }\n  }\n\n  if (list.__ownerID) {\n    list.size = newCapacity - newOrigin;\n    list._origin = newOrigin;\n    list._capacity = newCapacity;\n    list._level = newLevel;\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n}\n\nfunction getTailOffset(size) {\n  return size < SIZE ? 0 : ((size - 1) >>> SHIFT) << SHIFT;\n}\n\nvar OrderedMap = /*@__PURE__*/(function (Map$$1) {\n  function OrderedMap(value) {\n    return value === null || value === undefined\n      ? emptyOrderedMap()\n      : isOrderedMap(value)\n        ? value\n        : emptyOrderedMap().withMutations(function (map) {\n            var iter = KeyedCollection(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v, k) { return map.set(k, v); });\n          });\n  }\n\n  if ( Map$$1 ) OrderedMap.__proto__ = Map$$1;\n  OrderedMap.prototype = Object.create( Map$$1 && Map$$1.prototype );\n  OrderedMap.prototype.constructor = OrderedMap;\n\n  OrderedMap.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedMap.prototype.toString = function toString () {\n    return this.__toString('OrderedMap {', '}');\n  };\n\n  // @pragma Access\n\n  OrderedMap.prototype.get = function get (k, notSetValue) {\n    var index = this._map.get(k);\n    return index !== undefined ? this._list.get(index)[1] : notSetValue;\n  };\n\n  // @pragma Modification\n\n  OrderedMap.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._map.clear();\n      this._list.clear();\n      return this;\n    }\n    return emptyOrderedMap();\n  };\n\n  OrderedMap.prototype.set = function set (k, v) {\n    return updateOrderedMap(this, k, v);\n  };\n\n  OrderedMap.prototype.remove = function remove (k) {\n    return updateOrderedMap(this, k, NOT_SET);\n  };\n\n  OrderedMap.prototype.wasAltered = function wasAltered () {\n    return this._map.wasAltered() || this._list.wasAltered();\n  };\n\n  OrderedMap.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._list.__iterate(\n      function (entry) { return entry && fn(entry[1], entry[0], this$1); },\n      reverse\n    );\n  };\n\n  OrderedMap.prototype.__iterator = function __iterator (type, reverse) {\n    return this._list.fromEntrySeq().__iterator(type, reverse);\n  };\n\n  OrderedMap.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    var newList = this._list.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyOrderedMap();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      this._list = newList;\n      return this;\n    }\n    return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n  };\n\n  return OrderedMap;\n}(Map));\n\nOrderedMap.isOrderedMap = isOrderedMap;\n\nOrderedMap.prototype[IS_ORDERED_SYMBOL] = true;\nOrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\nfunction makeOrderedMap(map, list, ownerID, hash) {\n  var omap = Object.create(OrderedMap.prototype);\n  omap.size = map ? map.size : 0;\n  omap._map = map;\n  omap._list = list;\n  omap.__ownerID = ownerID;\n  omap.__hash = hash;\n  return omap;\n}\n\nvar EMPTY_ORDERED_MAP;\nfunction emptyOrderedMap() {\n  return (\n    EMPTY_ORDERED_MAP ||\n    (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()))\n  );\n}\n\nfunction updateOrderedMap(omap, k, v) {\n  var map = omap._map;\n  var list = omap._list;\n  var i = map.get(k);\n  var has = i !== undefined;\n  var newMap;\n  var newList;\n  if (v === NOT_SET) {\n    // removed\n    if (!has) {\n      return omap;\n    }\n    if (list.size >= SIZE && list.size >= map.size * 2) {\n      newList = list.filter(function (entry, idx) { return entry !== undefined && i !== idx; });\n      newMap = newList\n        .toKeyedSeq()\n        .map(function (entry) { return entry[0]; })\n        .flip()\n        .toMap();\n      if (omap.__ownerID) {\n        newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n      }\n    } else {\n      newMap = map.remove(k);\n      newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n    }\n  } else if (has) {\n    if (v === list.get(i)[1]) {\n      return omap;\n    }\n    newMap = map;\n    newList = list.set(i, [k, v]);\n  } else {\n    newMap = map.set(k, list.size);\n    newList = list.set(list.size, [k, v]);\n  }\n  if (omap.__ownerID) {\n    omap.size = newMap.size;\n    omap._map = newMap;\n    omap._list = newList;\n    omap.__hash = undefined;\n    return omap;\n  }\n  return makeOrderedMap(newMap, newList);\n}\n\nvar IS_STACK_SYMBOL = '@@__IMMUTABLE_STACK__@@';\n\nfunction isStack(maybeStack) {\n  return Boolean(maybeStack && maybeStack[IS_STACK_SYMBOL]);\n}\n\nvar Stack = /*@__PURE__*/(function (IndexedCollection$$1) {\n  function Stack(value) {\n    return value === null || value === undefined\n      ? emptyStack()\n      : isStack(value)\n        ? value\n        : emptyStack().pushAll(value);\n  }\n\n  if ( IndexedCollection$$1 ) Stack.__proto__ = IndexedCollection$$1;\n  Stack.prototype = Object.create( IndexedCollection$$1 && IndexedCollection$$1.prototype );\n  Stack.prototype.constructor = Stack;\n\n  Stack.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Stack.prototype.toString = function toString () {\n    return this.__toString('Stack [', ']');\n  };\n\n  // @pragma Access\n\n  Stack.prototype.get = function get (index, notSetValue) {\n    var head = this._head;\n    index = wrapIndex(this, index);\n    while (head && index--) {\n      head = head.next;\n    }\n    return head ? head.value : notSetValue;\n  };\n\n  Stack.prototype.peek = function peek () {\n    return this._head && this._head.value;\n  };\n\n  // @pragma Modification\n\n  Stack.prototype.push = function push (/*...values*/) {\n    var arguments$1 = arguments;\n\n    if (arguments.length === 0) {\n      return this;\n    }\n    var newSize = this.size + arguments.length;\n    var head = this._head;\n    for (var ii = arguments.length - 1; ii >= 0; ii--) {\n      head = {\n        value: arguments$1[ii],\n        next: head,\n      };\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pushAll = function pushAll (iter) {\n    iter = IndexedCollection$$1(iter);\n    if (iter.size === 0) {\n      return this;\n    }\n    if (this.size === 0 && isStack(iter)) {\n      return iter;\n    }\n    assertNotInfinite(iter.size);\n    var newSize = this.size;\n    var head = this._head;\n    iter.__iterate(function (value) {\n      newSize++;\n      head = {\n        value: value,\n        next: head,\n      };\n    }, /* reverse */ true);\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pop = function pop () {\n    return this.slice(1);\n  };\n\n  Stack.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._head = undefined;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyStack();\n  };\n\n  Stack.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    var resolvedBegin = resolveBegin(begin, this.size);\n    var resolvedEnd = resolveEnd(end, this.size);\n    if (resolvedEnd !== this.size) {\n      // super.slice(begin, end);\n      return IndexedCollection$$1.prototype.slice.call(this, begin, end);\n    }\n    var newSize = this.size - resolvedBegin;\n    var head = this._head;\n    while (resolvedBegin--) {\n      head = head.next;\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  // @pragma Mutability\n\n  Stack.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyStack();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeStack(this.size, this._head, ownerID, this.__hash);\n  };\n\n  // @pragma Iteration\n\n  Stack.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterate(\n        function (v, k) { return fn(v, k, this$1); },\n        reverse\n      );\n    }\n    var iterations = 0;\n    var node = this._head;\n    while (node) {\n      if (fn(node.value, iterations++, this) === false) {\n        break;\n      }\n      node = node.next;\n    }\n    return iterations;\n  };\n\n  Stack.prototype.__iterator = function __iterator (type, reverse) {\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterator(type, reverse);\n    }\n    var iterations = 0;\n    var node = this._head;\n    return new Iterator(function () {\n      if (node) {\n        var value = node.value;\n        node = node.next;\n        return iteratorValue(type, iterations++, value);\n      }\n      return iteratorDone();\n    });\n  };\n\n  return Stack;\n}(IndexedCollection));\n\nStack.isStack = isStack;\n\nvar StackPrototype = Stack.prototype;\nStackPrototype[IS_STACK_SYMBOL] = true;\nStackPrototype.shift = StackPrototype.pop;\nStackPrototype.unshift = StackPrototype.push;\nStackPrototype.unshiftAll = StackPrototype.pushAll;\nStackPrototype.withMutations = withMutations;\nStackPrototype.wasAltered = wasAltered;\nStackPrototype.asImmutable = asImmutable;\nStackPrototype['@@transducer/init'] = StackPrototype.asMutable = asMutable;\nStackPrototype['@@transducer/step'] = function(result, arr) {\n  return result.unshift(arr);\n};\nStackPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\nfunction makeStack(size, head, ownerID, hash) {\n  var map = Object.create(StackPrototype);\n  map.size = size;\n  map._head = head;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_STACK;\nfunction emptyStack() {\n  return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n}\n\nvar IS_SET_SYMBOL = '@@__IMMUTABLE_SET__@@';\n\nfunction isSet(maybeSet) {\n  return Boolean(maybeSet && maybeSet[IS_SET_SYMBOL]);\n}\n\nfunction isOrderedSet(maybeOrderedSet) {\n  return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n}\n\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (\n    !isCollection(b) ||\n    (a.size !== undefined && b.size !== undefined && a.size !== b.size) ||\n    (a.__hash !== undefined &&\n      b.__hash !== undefined &&\n      a.__hash !== b.__hash) ||\n    isKeyed(a) !== isKeyed(b) ||\n    isIndexed(a) !== isIndexed(b) ||\n    isOrdered(a) !== isOrdered(b)\n  ) {\n    return false;\n  }\n\n  if (a.size === 0 && b.size === 0) {\n    return true;\n  }\n\n  var notAssociative = !isAssociative(a);\n\n  if (isOrdered(a)) {\n    var entries = a.entries();\n    return (\n      b.every(function (v, k) {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done\n    );\n  }\n\n  var flipped = false;\n\n  if (a.size === undefined) {\n    if (b.size === undefined) {\n      if (typeof a.cacheResult === 'function') {\n        a.cacheResult();\n      }\n    } else {\n      flipped = true;\n      var _ = a;\n      a = b;\n      b = _;\n    }\n  }\n\n  var allEqual = true;\n  var bSize = b.__iterate(function (v, k) {\n    if (\n      notAssociative\n        ? !a.has(v)\n        : flipped\n          ? !is(v, a.get(k, NOT_SET))\n          : !is(a.get(k, NOT_SET), v)\n    ) {\n      allEqual = false;\n      return false;\n    }\n  });\n\n  return allEqual && a.size === bSize;\n}\n\n/**\n * Contributes additional methods to a constructor\n */\nfunction mixin(ctor, methods) {\n  var keyCopier = function (key) {\n    ctor.prototype[key] = methods[key];\n  };\n  Object.keys(methods).forEach(keyCopier);\n  Object.getOwnPropertySymbols &&\n    Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n  return ctor;\n}\n\nfunction toJS(value) {\n  if (!value || typeof value !== 'object') {\n    return value;\n  }\n  if (!isCollection(value)) {\n    if (!isDataStructure(value)) {\n      return value;\n    }\n    value = Seq(value);\n  }\n  if (isKeyed(value)) {\n    var result$1 = {};\n    value.__iterate(function (v, k) {\n      result$1[k] = toJS(v);\n    });\n    return result$1;\n  }\n  var result = [];\n  value.__iterate(function (v) {\n    result.push(toJS(v));\n  });\n  return result;\n}\n\nvar Set = /*@__PURE__*/(function (SetCollection$$1) {\n  function Set(value) {\n    return value === null || value === undefined\n      ? emptySet()\n      : isSet(value) && !isOrdered(value)\n        ? value\n        : emptySet().withMutations(function (set) {\n            var iter = SetCollection$$1(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v) { return set.add(v); });\n          });\n  }\n\n  if ( SetCollection$$1 ) Set.__proto__ = SetCollection$$1;\n  Set.prototype = Object.create( SetCollection$$1 && SetCollection$$1.prototype );\n  Set.prototype.constructor = Set;\n\n  Set.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Set.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  Set.intersect = function intersect (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.intersect.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.union = function union (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.union.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.prototype.toString = function toString () {\n    return this.__toString('Set {', '}');\n  };\n\n  // @pragma Access\n\n  Set.prototype.has = function has (value) {\n    return this._map.has(value);\n  };\n\n  // @pragma Modification\n\n  Set.prototype.add = function add (value) {\n    return updateSet(this, this._map.set(value, value));\n  };\n\n  Set.prototype.remove = function remove (value) {\n    return updateSet(this, this._map.remove(value));\n  };\n\n  Set.prototype.clear = function clear () {\n    return updateSet(this, this._map.clear());\n  };\n\n  // @pragma Composition\n\n  Set.prototype.map = function map (mapper, context) {\n    var this$1 = this;\n\n    var removes = [];\n    var adds = [];\n    this.forEach(function (value) {\n      var mapped = mapper.call(context, value, value, this$1);\n      if (mapped !== value) {\n        removes.push(value);\n        adds.push(mapped);\n      }\n    });\n    return this.withMutations(function (set) {\n      removes.forEach(function (value) { return set.remove(value); });\n      adds.forEach(function (value) { return set.add(value); });\n    });\n  };\n\n  Set.prototype.union = function union () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    iters = iters.filter(function (x) { return x.size !== 0; });\n    if (iters.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n      return this.constructor(iters[0]);\n    }\n    return this.withMutations(function (set) {\n      for (var ii = 0; ii < iters.length; ii++) {\n        SetCollection$$1(iters[ii]).forEach(function (value) { return set.add(value); });\n      }\n    });\n  };\n\n  Set.prototype.intersect = function intersect () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection$$1(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (!iters.every(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.subtract = function subtract () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection$$1(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (iters.some(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator));\n  };\n\n  Set.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator, mapper));\n  };\n\n  Set.prototype.wasAltered = function wasAltered () {\n    return this._map.wasAltered();\n  };\n\n  Set.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1 = this;\n\n    return this._map.__iterate(function (k) { return fn(k, k, this$1); }, reverse);\n  };\n\n  Set.prototype.__iterator = function __iterator (type, reverse) {\n    return this._map.__iterator(type, reverse);\n  };\n\n  Set.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return this.__empty();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      return this;\n    }\n    return this.__make(newMap, ownerID);\n  };\n\n  return Set;\n}(SetCollection));\n\nSet.isSet = isSet;\n\nvar SetPrototype = Set.prototype;\nSetPrototype[IS_SET_SYMBOL] = true;\nSetPrototype[DELETE] = SetPrototype.remove;\nSetPrototype.merge = SetPrototype.concat = SetPrototype.union;\nSetPrototype.withMutations = withMutations;\nSetPrototype.asImmutable = asImmutable;\nSetPrototype['@@transducer/init'] = SetPrototype.asMutable = asMutable;\nSetPrototype['@@transducer/step'] = function(result, arr) {\n  return result.add(arr);\n};\nSetPrototype['@@transducer/result'] = function(obj) {\n  return obj.asImmutable();\n};\n\nSetPrototype.__empty = emptySet;\nSetPrototype.__make = makeSet;\n\nfunction updateSet(set, newMap) {\n  if (set.__ownerID) {\n    set.size = newMap.size;\n    set._map = newMap;\n    return set;\n  }\n  return newMap === set._map\n    ? set\n    : newMap.size === 0\n      ? set.__empty()\n      : set.__make(newMap);\n}\n\nfunction makeSet(map, ownerID) {\n  var set = Object.create(SetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_SET;\nfunction emptySet() {\n  return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n}\n\n/**\n * Returns a lazy seq of nums from start (inclusive) to end\n * (exclusive), by step, where start defaults to 0, step to 1, and end to\n * infinity. When start is equal to end, returns empty list.\n */\nvar Range = /*@__PURE__*/(function (IndexedSeq$$1) {\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      return new Range(start, end, step);\n    }\n    invariant(step !== 0, 'Cannot step a Range by 0');\n    start = start || 0;\n    if (end === undefined) {\n      end = Infinity;\n    }\n    step = step === undefined ? 1 : Math.abs(step);\n    if (end < start) {\n      step = -step;\n    }\n    this._start = start;\n    this._end = end;\n    this._step = step;\n    this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n    if (this.size === 0) {\n      if (EMPTY_RANGE) {\n        return EMPTY_RANGE;\n      }\n      EMPTY_RANGE = this;\n    }\n  }\n\n  if ( IndexedSeq$$1 ) Range.__proto__ = IndexedSeq$$1;\n  Range.prototype = Object.create( IndexedSeq$$1 && IndexedSeq$$1.prototype );\n  Range.prototype.constructor = Range;\n\n  Range.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Range []';\n    }\n    return (\n      'Range [ ' +\n      this._start +\n      '...' +\n      this._end +\n      (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]'\n    );\n  };\n\n  Range.prototype.get = function get (index, notSetValue) {\n    return this.has(index)\n      ? this._start + wrapIndex(this, index) * this._step\n      : notSetValue;\n  };\n\n  Range.prototype.includes = function includes (searchValue) {\n    var possibleIndex = (searchValue - this._start) / this._step;\n    return (\n      possibleIndex >= 0 &&\n      possibleIndex < this.size &&\n      possibleIndex === Math.floor(possibleIndex)\n    );\n  };\n\n  Range.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    begin = resolveBegin(begin, this.size);\n    end = resolveEnd(end, this.size);\n    if (end <= begin) {\n      return new Range(0, 0);\n    }\n    return new Range(\n      this.get(begin, this._end),\n      this.get(end, this._end),\n      this._step\n    );\n  };\n\n  Range.prototype.indexOf = function indexOf (searchValue) {\n    var offsetValue = searchValue - this._start;\n    if (offsetValue % this._step === 0) {\n      var index = offsetValue / this._step;\n      if (index >= 0 && index < this.size) {\n        return index;\n      }\n    }\n    return -1;\n  };\n\n  Range.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    return this.indexOf(searchValue);\n  };\n\n  Range.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    while (i !== size) {\n      if (fn(value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n      value += reverse ? -step : step;\n    }\n    return i;\n  };\n\n  Range.prototype.__iterator = function __iterator (type, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var v = value;\n      value += reverse ? -step : step;\n      return iteratorValue(type, reverse ? size - ++i : i++, v);\n    });\n  };\n\n  Range.prototype.equals = function equals (other) {\n    return other instanceof Range\n      ? this._start === other._start &&\n          this._end === other._end &&\n          this._step === other._step\n      : deepEqual(this, other);\n  };\n\n  return Range;\n}(IndexedSeq));\n\nvar EMPTY_RANGE;\n\nfunction getIn(collection, searchKeyPath, notSetValue) {\n  var keyPath = coerceKeyPath(searchKeyPath);\n  var i = 0;\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n  return collection;\n}\n\nfunction getIn$1(searchKeyPath, notSetValue) {\n  return getIn(this, searchKeyPath, notSetValue);\n}\n\nfunction hasIn(collection, keyPath) {\n  return getIn(collection, keyPath, NOT_SET) !== NOT_SET;\n}\n\nfunction hasIn$1(searchKeyPath) {\n  return hasIn(this, searchKeyPath);\n}\n\nfunction toObject() {\n  assertNotInfinite(this.size);\n  var object = {};\n  this.__iterate(function (v, k) {\n    object[k] = v;\n  });\n  return object;\n}\n\n// Note: all of these methods are deprecated.\nCollection.isIterable = isCollection;\nCollection.isKeyed = isKeyed;\nCollection.isIndexed = isIndexed;\nCollection.isAssociative = isAssociative;\nCollection.isOrdered = isOrdered;\n\nCollection.Iterator = Iterator;\n\nmixin(Collection, {\n  // ### Conversion to other types\n\n  toArray: function toArray() {\n    assertNotInfinite(this.size);\n    var array = new Array(this.size || 0);\n    var useTuples = isKeyed(this);\n    var i = 0;\n    this.__iterate(function (v, k) {\n      // Keyed collections produce an array of tuples.\n      array[i++] = useTuples ? [k, v] : v;\n    });\n    return array;\n  },\n\n  toIndexedSeq: function toIndexedSeq() {\n    return new ToIndexedSequence(this);\n  },\n\n  toJS: function toJS$1() {\n    return toJS(this);\n  },\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, true);\n  },\n\n  toMap: function toMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return Map(this.toKeyedSeq());\n  },\n\n  toObject: toObject,\n\n  toOrderedMap: function toOrderedMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedMap(this.toKeyedSeq());\n  },\n\n  toOrderedSet: function toOrderedSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSet: function toSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return Set(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSetSeq: function toSetSeq() {\n    return new ToSetSequence(this);\n  },\n\n  toSeq: function toSeq() {\n    return isIndexed(this)\n      ? this.toIndexedSeq()\n      : isKeyed(this)\n        ? this.toKeyedSeq()\n        : this.toSetSeq();\n  },\n\n  toStack: function toStack() {\n    // Use Late Binding here to solve the circular dependency.\n    return Stack(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toList: function toList() {\n    // Use Late Binding here to solve the circular dependency.\n    return List(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  // ### Common JavaScript methods and properties\n\n  toString: function toString() {\n    return '[Collection]';\n  },\n\n  __toString: function __toString(head, tail) {\n    if (this.size === 0) {\n      return head + tail;\n    }\n    return (\n      head +\n      ' ' +\n      this.toSeq()\n        .map(this.__toStringMapper)\n        .join(', ') +\n      ' ' +\n      tail\n    );\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  concat: function concat() {\n    var values = [], len = arguments.length;\n    while ( len-- ) values[ len ] = arguments[ len ];\n\n    return reify(this, concatFactory(this, values));\n  },\n\n  includes: function includes(searchValue) {\n    return this.some(function (value) { return is(value, searchValue); });\n  },\n\n  entries: function entries() {\n    return this.__iterator(ITERATE_ENTRIES);\n  },\n\n  every: function every(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = true;\n    this.__iterate(function (v, k, c) {\n      if (!predicate.call(context, v, k, c)) {\n        returnValue = false;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, true));\n  },\n\n  find: function find(predicate, context, notSetValue) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[1] : notSetValue;\n  },\n\n  forEach: function forEach(sideEffect, context) {\n    assertNotInfinite(this.size);\n    return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n  },\n\n  join: function join(separator) {\n    assertNotInfinite(this.size);\n    separator = separator !== undefined ? '' + separator : ',';\n    var joined = '';\n    var isFirst = true;\n    this.__iterate(function (v) {\n      isFirst ? (isFirst = false) : (joined += separator);\n      joined += v !== null && v !== undefined ? v.toString() : '';\n    });\n    return joined;\n  },\n\n  keys: function keys() {\n    return this.__iterator(ITERATE_KEYS);\n  },\n\n  map: function map(mapper, context) {\n    return reify(this, mapFactory(this, mapper, context));\n  },\n\n  reduce: function reduce$1(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      false\n    );\n  },\n\n  reduceRight: function reduceRight(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      true\n    );\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, true));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, true));\n  },\n\n  some: function some(predicate, context) {\n    return !this.every(not(predicate), context);\n  },\n\n  sort: function sort(comparator) {\n    return reify(this, sortFactory(this, comparator));\n  },\n\n  values: function values() {\n    return this.__iterator(ITERATE_VALUES);\n  },\n\n  // ### More sequential methods\n\n  butLast: function butLast() {\n    return this.slice(0, -1);\n  },\n\n  isEmpty: function isEmpty() {\n    return this.size !== undefined ? this.size === 0 : !this.some(function () { return true; });\n  },\n\n  count: function count(predicate, context) {\n    return ensureSize(\n      predicate ? this.toSeq().filter(predicate, context) : this\n    );\n  },\n\n  countBy: function countBy(grouper, context) {\n    return countByFactory(this, grouper, context);\n  },\n\n  equals: function equals(other) {\n    return deepEqual(this, other);\n  },\n\n  entrySeq: function entrySeq() {\n    var collection = this;\n    if (collection._cache) {\n      // We cache as an entries array, so we can just return the cache!\n      return new ArraySeq(collection._cache);\n    }\n    var entriesSequence = collection\n      .toSeq()\n      .map(entryMapper)\n      .toIndexedSeq();\n    entriesSequence.fromEntrySeq = function () { return collection.toSeq(); };\n    return entriesSequence;\n  },\n\n  filterNot: function filterNot(predicate, context) {\n    return this.filter(not(predicate), context);\n  },\n\n  findEntry: function findEntry(predicate, context, notSetValue) {\n    var found = notSetValue;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        found = [k, v];\n        return false;\n      }\n    });\n    return found;\n  },\n\n  findKey: function findKey(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry && entry[0];\n  },\n\n  findLast: function findLast(predicate, context, notSetValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .find(predicate, context, notSetValue);\n  },\n\n  findLastEntry: function findLastEntry(predicate, context, notSetValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .findEntry(predicate, context, notSetValue);\n  },\n\n  findLastKey: function findLastKey(predicate, context) {\n    return this.toKeyedSeq()\n      .reverse()\n      .findKey(predicate, context);\n  },\n\n  first: function first(notSetValue) {\n    return this.find(returnTrue, null, notSetValue);\n  },\n\n  flatMap: function flatMap(mapper, context) {\n    return reify(this, flatMapFactory(this, mapper, context));\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, true));\n  },\n\n  fromEntrySeq: function fromEntrySeq() {\n    return new FromEntriesSequence(this);\n  },\n\n  get: function get(searchKey, notSetValue) {\n    return this.find(function (_, key) { return is(key, searchKey); }, undefined, notSetValue);\n  },\n\n  getIn: getIn$1,\n\n  groupBy: function groupBy(grouper, context) {\n    return groupByFactory(this, grouper, context);\n  },\n\n  has: function has(searchKey) {\n    return this.get(searchKey, NOT_SET) !== NOT_SET;\n  },\n\n  hasIn: hasIn$1,\n\n  isSubset: function isSubset(iter) {\n    iter = typeof iter.includes === 'function' ? iter : Collection(iter);\n    return this.every(function (value) { return iter.includes(value); });\n  },\n\n  isSuperset: function isSuperset(iter) {\n    iter = typeof iter.isSubset === 'function' ? iter : Collection(iter);\n    return iter.isSubset(this);\n  },\n\n  keyOf: function keyOf(searchValue) {\n    return this.findKey(function (value) { return is(value, searchValue); });\n  },\n\n  keySeq: function keySeq() {\n    return this.toSeq()\n      .map(keyMapper)\n      .toIndexedSeq();\n  },\n\n  last: function last(notSetValue) {\n    return this.toSeq()\n      .reverse()\n      .first(notSetValue);\n  },\n\n  lastKeyOf: function lastKeyOf(searchValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .keyOf(searchValue);\n  },\n\n  max: function max(comparator) {\n    return maxFactory(this, comparator);\n  },\n\n  maxBy: function maxBy(mapper, comparator) {\n    return maxFactory(this, comparator, mapper);\n  },\n\n  min: function min(comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator\n    );\n  },\n\n  minBy: function minBy(mapper, comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator,\n      mapper\n    );\n  },\n\n  rest: function rest() {\n    return this.slice(1);\n  },\n\n  skip: function skip(amount) {\n    return amount === 0 ? this : this.slice(Math.max(0, amount));\n  },\n\n  skipLast: function skipLast(amount) {\n    return amount === 0 ? this : this.slice(0, -Math.max(0, amount));\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, true));\n  },\n\n  skipUntil: function skipUntil(predicate, context) {\n    return this.skipWhile(not(predicate), context);\n  },\n\n  sortBy: function sortBy(mapper, comparator) {\n    return reify(this, sortFactory(this, comparator, mapper));\n  },\n\n  take: function take(amount) {\n    return this.slice(0, Math.max(0, amount));\n  },\n\n  takeLast: function takeLast(amount) {\n    return this.slice(-Math.max(0, amount));\n  },\n\n  takeWhile: function takeWhile(predicate, context) {\n    return reify(this, takeWhileFactory(this, predicate, context));\n  },\n\n  takeUntil: function takeUntil(predicate, context) {\n    return this.takeWhile(not(predicate), context);\n  },\n\n  update: function update(fn) {\n    return fn(this);\n  },\n\n  valueSeq: function valueSeq() {\n    return this.toIndexedSeq();\n  },\n\n  // ### Hashable Object\n\n  hashCode: function hashCode() {\n    return this.__hash || (this.__hash = hashCollection(this));\n  },\n\n  // ### Internal\n\n  // abstract __iterate(fn, reverse)\n\n  // abstract __iterator(type, reverse)\n});\n\nvar CollectionPrototype = Collection.prototype;\nCollectionPrototype[IS_COLLECTION_SYMBOL] = true;\nCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.values;\nCollectionPrototype.toJSON = CollectionPrototype.toArray;\nCollectionPrototype.__toStringMapper = quoteString;\nCollectionPrototype.inspect = CollectionPrototype.toSource = function() {\n  return this.toString();\n};\nCollectionPrototype.chain = CollectionPrototype.flatMap;\nCollectionPrototype.contains = CollectionPrototype.includes;\n\nmixin(KeyedCollection, {\n  // ### More sequential methods\n\n  flip: function flip() {\n    return reify(this, flipFactory(this));\n  },\n\n  mapEntries: function mapEntries(mapper, context) {\n    var this$1 = this;\n\n    var iterations = 0;\n    return reify(\n      this,\n      this.toSeq()\n        .map(function (v, k) { return mapper.call(context, [k, v], iterations++, this$1); })\n        .fromEntrySeq()\n    );\n  },\n\n  mapKeys: function mapKeys(mapper, context) {\n    var this$1 = this;\n\n    return reify(\n      this,\n      this.toSeq()\n        .flip()\n        .map(function (k, v) { return mapper.call(context, k, v, this$1); })\n        .flip()\n    );\n  },\n});\n\nvar KeyedCollectionPrototype = KeyedCollection.prototype;\nKeyedCollectionPrototype[IS_KEYED_SYMBOL] = true;\nKeyedCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.entries;\nKeyedCollectionPrototype.toJSON = toObject;\nKeyedCollectionPrototype.__toStringMapper = function (v, k) { return quoteString(k) + ': ' + quoteString(v); };\n\nmixin(IndexedCollection, {\n  // ### Conversion to other types\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, false);\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, false));\n  },\n\n  findIndex: function findIndex(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  indexOf: function indexOf(searchValue) {\n    var key = this.keyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  lastIndexOf: function lastIndexOf(searchValue) {\n    var key = this.lastKeyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, false));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, false));\n  },\n\n  splice: function splice(index, removeNum /*, ...values*/) {\n    var numArgs = arguments.length;\n    removeNum = Math.max(removeNum || 0, 0);\n    if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n      return this;\n    }\n    // If index is negative, it should resolve relative to the size of the\n    // collection. However size may be expensive to compute if not cached, so\n    // only call count() if the number is in fact negative.\n    index = resolveBegin(index, index < 0 ? this.count() : this.size);\n    var spliced = this.slice(0, index);\n    return reify(\n      this,\n      numArgs === 1\n        ? spliced\n        : spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n    );\n  },\n\n  // ### More collection methods\n\n  findLastIndex: function findLastIndex(predicate, context) {\n    var entry = this.findLastEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  first: function first(notSetValue) {\n    return this.get(0, notSetValue);\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, false));\n  },\n\n  get: function get(index, notSetValue) {\n    index = wrapIndex(this, index);\n    return index < 0 ||\n      (this.size === Infinity || (this.size !== undefined && index > this.size))\n      ? notSetValue\n      : this.find(function (_, key) { return key === index; }, undefined, notSetValue);\n  },\n\n  has: function has(index) {\n    index = wrapIndex(this, index);\n    return (\n      index >= 0 &&\n      (this.size !== undefined\n        ? this.size === Infinity || index < this.size\n        : this.indexOf(index) !== -1)\n    );\n  },\n\n  interpose: function interpose(separator) {\n    return reify(this, interposeFactory(this, separator));\n  },\n\n  interleave: function interleave(/*...collections*/) {\n    var collections = [this].concat(arrCopy(arguments));\n    var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, collections);\n    var interleaved = zipped.flatten(true);\n    if (zipped.size) {\n      interleaved.size = zipped.size * collections.length;\n    }\n    return reify(this, interleaved);\n  },\n\n  keySeq: function keySeq() {\n    return Range(0, this.size);\n  },\n\n  last: function last(notSetValue) {\n    return this.get(-1, notSetValue);\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, false));\n  },\n\n  zip: function zip(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections));\n  },\n\n  zipAll: function zipAll(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections, true));\n  },\n\n  zipWith: function zipWith(zipper /*, ...collections */) {\n    var collections = arrCopy(arguments);\n    collections[0] = this;\n    return reify(this, zipWithFactory(this, zipper, collections));\n  },\n});\n\nvar IndexedCollectionPrototype = IndexedCollection.prototype;\nIndexedCollectionPrototype[IS_INDEXED_SYMBOL] = true;\nIndexedCollectionPrototype[IS_ORDERED_SYMBOL] = true;\n\nmixin(SetCollection, {\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  get: function get(value, notSetValue) {\n    return this.has(value) ? value : notSetValue;\n  },\n\n  includes: function includes(value) {\n    return this.has(value);\n  },\n\n  // ### More sequential methods\n\n  keySeq: function keySeq() {\n    return this.valueSeq();\n  },\n});\n\nSetCollection.prototype.has = CollectionPrototype.includes;\nSetCollection.prototype.contains = SetCollection.prototype.includes;\n\n// Mixin subclasses\n\nmixin(KeyedSeq, KeyedCollection.prototype);\nmixin(IndexedSeq, IndexedCollection.prototype);\nmixin(SetSeq, SetCollection.prototype);\n\n// #pragma Helper functions\n\nfunction reduce(collection, reducer, reduction, context, useFirst, reverse) {\n  assertNotInfinite(collection.size);\n  collection.__iterate(function (v, k, c) {\n    if (useFirst) {\n      useFirst = false;\n      reduction = v;\n    } else {\n      reduction = reducer.call(context, reduction, v, k, c);\n    }\n  }, reverse);\n  return reduction;\n}\n\nfunction keyMapper(v, k) {\n  return k;\n}\n\nfunction entryMapper(v, k) {\n  return [k, v];\n}\n\nfunction not(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n\nfunction neg(predicate) {\n  return function() {\n    return -predicate.apply(this, arguments);\n  };\n}\n\nfunction defaultZipper() {\n  return arrCopy(arguments);\n}\n\nfunction defaultNegComparator(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\nfunction hashCollection(collection) {\n  if (collection.size === Infinity) {\n    return 0;\n  }\n  var ordered = isOrdered(collection);\n  var keyed = isKeyed(collection);\n  var h = ordered ? 1 : 0;\n  var size = collection.__iterate(\n    keyed\n      ? ordered\n        ? function (v, k) {\n            h = (31 * h + hashMerge(hash(v), hash(k))) | 0;\n          }\n        : function (v, k) {\n            h = (h + hashMerge(hash(v), hash(k))) | 0;\n          }\n      : ordered\n        ? function (v) {\n            h = (31 * h + hash(v)) | 0;\n          }\n        : function (v) {\n            h = (h + hash(v)) | 0;\n          }\n  );\n  return murmurHashOfSize(size, h);\n}\n\nfunction murmurHashOfSize(size, h) {\n  h = imul(h, 0xcc9e2d51);\n  h = imul((h << 15) | (h >>> -15), 0x1b873593);\n  h = imul((h << 13) | (h >>> -13), 5);\n  h = ((h + 0xe6546b64) | 0) ^ size;\n  h = imul(h ^ (h >>> 16), 0x85ebca6b);\n  h = imul(h ^ (h >>> 13), 0xc2b2ae35);\n  h = smi(h ^ (h >>> 16));\n  return h;\n}\n\nfunction hashMerge(a, b) {\n  return (a ^ (b + 0x9e3779b9 + (a << 6) + (a >> 2))) | 0; // int\n}\n\nvar OrderedSet = /*@__PURE__*/(function (Set$$1) {\n  function OrderedSet(value) {\n    return value === null || value === undefined\n      ? emptyOrderedSet()\n      : isOrderedSet(value)\n        ? value\n        : emptyOrderedSet().withMutations(function (set) {\n            var iter = SetCollection(value);\n            assertNotInfinite(iter.size);\n            iter.forEach(function (v) { return set.add(v); });\n          });\n  }\n\n  if ( Set$$1 ) OrderedSet.__proto__ = Set$$1;\n  OrderedSet.prototype = Object.create( Set$$1 && Set$$1.prototype );\n  OrderedSet.prototype.constructor = OrderedSet;\n\n  OrderedSet.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedSet.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  OrderedSet.prototype.toString = function toString () {\n    return this.__toString('OrderedSet {', '}');\n  };\n\n  return OrderedSet;\n}(Set));\n\nOrderedSet.isOrderedSet = isOrderedSet;\n\nvar OrderedSetPrototype = OrderedSet.prototype;\nOrderedSetPrototype[IS_ORDERED_SYMBOL] = true;\nOrderedSetPrototype.zip = IndexedCollectionPrototype.zip;\nOrderedSetPrototype.zipWith = IndexedCollectionPrototype.zipWith;\n\nOrderedSetPrototype.__empty = emptyOrderedSet;\nOrderedSetPrototype.__make = makeOrderedSet;\n\nfunction makeOrderedSet(map, ownerID) {\n  var set = Object.create(OrderedSetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_ORDERED_SET;\nfunction emptyOrderedSet() {\n  return (\n    EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()))\n  );\n}\n\nvar Record = function Record(defaultValues, name) {\n  var hasInitialized;\n\n  var RecordType = function Record(values) {\n    var this$1 = this;\n\n    if (values instanceof RecordType) {\n      return values;\n    }\n    if (!(this instanceof RecordType)) {\n      return new RecordType(values);\n    }\n    if (!hasInitialized) {\n      hasInitialized = true;\n      var keys = Object.keys(defaultValues);\n      var indices = (RecordTypePrototype._indices = {});\n      // Deprecated: left to attempt not to break any external code which\n      // relies on a ._name property existing on record instances.\n      // Use Record.getDescriptiveName() instead\n      RecordTypePrototype._name = name;\n      RecordTypePrototype._keys = keys;\n      RecordTypePrototype._defaultValues = defaultValues;\n      for (var i = 0; i < keys.length; i++) {\n        var propName = keys[i];\n        indices[propName] = i;\n        if (RecordTypePrototype[propName]) {\n          /* eslint-disable no-console */\n          typeof console === 'object' &&\n            console.warn &&\n            console.warn(\n              'Cannot define ' +\n                recordName(this) +\n                ' with property \"' +\n                propName +\n                '\" since that property name is part of the Record API.'\n            );\n          /* eslint-enable no-console */\n        } else {\n          setProp(RecordTypePrototype, propName);\n        }\n      }\n    }\n    this.__ownerID = undefined;\n    this._values = List().withMutations(function (l) {\n      l.setSize(this$1._keys.length);\n      KeyedCollection(values).forEach(function (v, k) {\n        l.set(this$1._indices[k], v === this$1._defaultValues[k] ? undefined : v);\n      });\n    });\n  };\n\n  var RecordTypePrototype = (RecordType.prototype = Object.create(\n    RecordPrototype\n  ));\n  RecordTypePrototype.constructor = RecordType;\n\n  if (name) {\n    RecordType.displayName = name;\n  }\n\n  return RecordType;\n};\n\nRecord.prototype.toString = function toString () {\n  var str = recordName(this) + ' { ';\n  var keys = this._keys;\n  var k;\n  for (var i = 0, l = keys.length; i !== l; i++) {\n    k = keys[i];\n    str += (i ? ', ' : '') + k + ': ' + quoteString(this.get(k));\n  }\n  return str + ' }';\n};\n\nRecord.prototype.equals = function equals (other) {\n  return (\n    this === other ||\n    (other &&\n      this._keys === other._keys &&\n      recordSeq(this).equals(recordSeq(other)))\n  );\n};\n\nRecord.prototype.hashCode = function hashCode () {\n  return recordSeq(this).hashCode();\n};\n\n// @pragma Access\n\nRecord.prototype.has = function has (k) {\n  return this._indices.hasOwnProperty(k);\n};\n\nRecord.prototype.get = function get (k, notSetValue) {\n  if (!this.has(k)) {\n    return notSetValue;\n  }\n  var index = this._indices[k];\n  var value = this._values.get(index);\n  return value === undefined ? this._defaultValues[k] : value;\n};\n\n// @pragma Modification\n\nRecord.prototype.set = function set (k, v) {\n  if (this.has(k)) {\n    var newValues = this._values.set(\n      this._indices[k],\n      v === this._defaultValues[k] ? undefined : v\n    );\n    if (newValues !== this._values && !this.__ownerID) {\n      return makeRecord(this, newValues);\n    }\n  }\n  return this;\n};\n\nRecord.prototype.remove = function remove (k) {\n  return this.set(k);\n};\n\nRecord.prototype.clear = function clear () {\n  var newValues = this._values.clear().setSize(this._keys.length);\n  return this.__ownerID ? this : makeRecord(this, newValues);\n};\n\nRecord.prototype.wasAltered = function wasAltered () {\n  return this._values.wasAltered();\n};\n\nRecord.prototype.toSeq = function toSeq () {\n  return recordSeq(this);\n};\n\nRecord.prototype.toJS = function toJS$1 () {\n  return toJS(this);\n};\n\nRecord.prototype.entries = function entries () {\n  return this.__iterator(ITERATE_ENTRIES);\n};\n\nRecord.prototype.__iterator = function __iterator (type, reverse) {\n  return recordSeq(this).__iterator(type, reverse);\n};\n\nRecord.prototype.__iterate = function __iterate (fn, reverse) {\n  return recordSeq(this).__iterate(fn, reverse);\n};\n\nRecord.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n  if (ownerID === this.__ownerID) {\n    return this;\n  }\n  var newValues = this._values.__ensureOwner(ownerID);\n  if (!ownerID) {\n    this.__ownerID = ownerID;\n    this._values = newValues;\n    return this;\n  }\n  return makeRecord(this, newValues, ownerID);\n};\n\nRecord.isRecord = isRecord;\nRecord.getDescriptiveName = recordName;\nvar RecordPrototype = Record.prototype;\nRecordPrototype[IS_RECORD_SYMBOL] = true;\nRecordPrototype[DELETE] = RecordPrototype.remove;\nRecordPrototype.deleteIn = RecordPrototype.removeIn = deleteIn;\nRecordPrototype.getIn = getIn$1;\nRecordPrototype.hasIn = CollectionPrototype.hasIn;\nRecordPrototype.merge = merge;\nRecordPrototype.mergeWith = mergeWith;\nRecordPrototype.mergeIn = mergeIn;\nRecordPrototype.mergeDeep = mergeDeep$1;\nRecordPrototype.mergeDeepWith = mergeDeepWith$1;\nRecordPrototype.mergeDeepIn = mergeDeepIn;\nRecordPrototype.setIn = setIn$1;\nRecordPrototype.update = update$1;\nRecordPrototype.updateIn = updateIn$1;\nRecordPrototype.withMutations = withMutations;\nRecordPrototype.asMutable = asMutable;\nRecordPrototype.asImmutable = asImmutable;\nRecordPrototype[ITERATOR_SYMBOL] = RecordPrototype.entries;\nRecordPrototype.toJSON = RecordPrototype.toObject =\n  CollectionPrototype.toObject;\nRecordPrototype.inspect = RecordPrototype.toSource = function() {\n  return this.toString();\n};\n\nfunction makeRecord(likeRecord, values, ownerID) {\n  var record = Object.create(Object.getPrototypeOf(likeRecord));\n  record._values = values;\n  record.__ownerID = ownerID;\n  return record;\n}\n\nfunction recordName(record) {\n  return record.constructor.displayName || record.constructor.name || 'Record';\n}\n\nfunction recordSeq(record) {\n  return keyedSeqFromValue(record._keys.map(function (k) { return [k, record.get(k)]; }));\n}\n\nfunction setProp(prototype, name) {\n  try {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      },\n    });\n  } catch (error) {\n    // Object.defineProperty failed. Probably IE8.\n  }\n}\n\n/**\n * Returns a lazy Seq of `value` repeated `times` times. When `times` is\n * undefined, returns an infinite sequence of `value`.\n */\nvar Repeat = /*@__PURE__*/(function (IndexedSeq$$1) {\n  function Repeat(value, times) {\n    if (!(this instanceof Repeat)) {\n      return new Repeat(value, times);\n    }\n    this._value = value;\n    this.size = times === undefined ? Infinity : Math.max(0, times);\n    if (this.size === 0) {\n      if (EMPTY_REPEAT) {\n        return EMPTY_REPEAT;\n      }\n      EMPTY_REPEAT = this;\n    }\n  }\n\n  if ( IndexedSeq$$1 ) Repeat.__proto__ = IndexedSeq$$1;\n  Repeat.prototype = Object.create( IndexedSeq$$1 && IndexedSeq$$1.prototype );\n  Repeat.prototype.constructor = Repeat;\n\n  Repeat.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Repeat []';\n    }\n    return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n  };\n\n  Repeat.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._value : notSetValue;\n  };\n\n  Repeat.prototype.includes = function includes (searchValue) {\n    return is(this._value, searchValue);\n  };\n\n  Repeat.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    return wholeSlice(begin, end, size)\n      ? this\n      : new Repeat(\n          this._value,\n          resolveEnd(end, size) - resolveBegin(begin, size)\n        );\n  };\n\n  Repeat.prototype.reverse = function reverse () {\n    return this;\n  };\n\n  Repeat.prototype.indexOf = function indexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return 0;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return this.size;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var i = 0;\n    while (i !== size) {\n      if (fn(this._value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  Repeat.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1 = this;\n\n    var size = this.size;\n    var i = 0;\n    return new Iterator(\n      function () { return i === size\n          ? iteratorDone()\n          : iteratorValue(type, reverse ? size - ++i : i++, this$1._value); }\n    );\n  };\n\n  Repeat.prototype.equals = function equals (other) {\n    return other instanceof Repeat\n      ? is(this._value, other._value)\n      : deepEqual(other);\n  };\n\n  return Repeat;\n}(IndexedSeq));\n\nvar EMPTY_REPEAT;\n\nfunction fromJS(value, converter) {\n  return fromJSWith(\n    [],\n    converter || defaultConverter,\n    value,\n    '',\n    converter && converter.length > 2 ? [] : undefined,\n    { '': value }\n  );\n}\n\nfunction fromJSWith(stack, converter, value, key, keyPath, parentValue) {\n  var toSeq = Array.isArray(value)\n    ? IndexedSeq\n    : isPlainObj(value)\n      ? KeyedSeq\n      : null;\n  if (toSeq) {\n    if (~stack.indexOf(value)) {\n      throw new TypeError('Cannot convert circular structure to Immutable');\n    }\n    stack.push(value);\n    keyPath && key !== '' && keyPath.push(key);\n    var converted = converter.call(\n      parentValue,\n      key,\n      toSeq(value).map(function (v, k) { return fromJSWith(stack, converter, v, k, keyPath, value); }\n      ),\n      keyPath && keyPath.slice()\n    );\n    stack.pop();\n    keyPath && keyPath.pop();\n    return converted;\n  }\n  return value;\n}\n\nfunction defaultConverter(k, v) {\n  return isKeyed(v) ? v.toMap() : v.toList();\n}\n\nvar version = \"4.0.0-rc.11\";\n\nvar Immutable = {\n  version: version,\n\n  Collection: Collection,\n  // Note: Iterable is deprecated\n  Iterable: Collection,\n\n  Seq: Seq,\n  Map: Map,\n  OrderedMap: OrderedMap,\n  List: List,\n  Stack: Stack,\n  Set: Set,\n  OrderedSet: OrderedSet,\n\n  Record: Record,\n  Range: Range,\n  Repeat: Repeat,\n\n  is: is,\n  fromJS: fromJS,\n  hash: hash,\n\n  isImmutable: isImmutable,\n  isCollection: isCollection,\n  isKeyed: isKeyed,\n  isIndexed: isIndexed,\n  isAssociative: isAssociative,\n  isOrdered: isOrdered,\n  isValueObject: isValueObject,\n  isSeq: isSeq,\n  isList: isList,\n  isMap: isMap,\n  isOrderedMap: isOrderedMap,\n  isStack: isStack,\n  isSet: isSet,\n  isOrderedSet: isOrderedSet,\n  isRecord: isRecord,\n\n  get: get,\n  getIn: getIn,\n  has: has,\n  hasIn: hasIn,\n  merge: merge$1,\n  mergeDeep: mergeDeep,\n  mergeWith: mergeWith$1,\n  mergeDeepWith: mergeDeepWith,\n  remove: remove,\n  removeIn: removeIn,\n  set: set,\n  setIn: setIn,\n  update: update,\n  updateIn: updateIn,\n};\n\n// Note: Iterable is deprecated\nvar Iterable = Collection;\n\nexport default Immutable;\nexport { version, Collection, Iterable, Seq, Map, OrderedMap, List, Stack, Set, OrderedSet, Record, Range, Repeat, is, fromJS, hash, isImmutable, isCollection, isKeyed, isIndexed, isAssociative, isOrdered, isValueObject, get, getIn, has, hasIn, merge$1 as merge, mergeDeep, mergeWith$1 as mergeWith, mergeDeepWith, remove, removeIn, set, setIn, update, updateIn };\n","import {hash, is, ValueObject} from \"immutable\"\nimport {Skill as Data} from \"./data\"\n\nexport class Skill implements ValueObject {\n  static ofData = ({id}: Data) => new Skill(id)\n\n  constructor(readonly id: string) {}\n\n  data = (): Data => ({id: this.id})\n  equals = (other: any) => is(this.id, other.id)\n  hashCode = () => hash(this.id)\n}\n","import {Skill} from \"/logic/search/Skill\"\nimport {LeveledSkill as Data} from \"./data\"\n\nexport class LeveledSkill {\n  static from = ({level, skill}: {level: number; skill: Skill}) => new LeveledSkill(level, skill)\n  static of = (skill: string, level: number) => new LeveledSkill(level, new Skill(skill))\n  static ofData = ({level, skill}: Data) => new LeveledSkill(level, Skill.ofData(skill))\n\n  constructor(readonly level: number, readonly skill: Skill) {}\n\n  isBetterOrSameLevelThan(other: LeveledSkill): boolean {\n    return other.skill.id === this.skill.id && this.level >= other.level\n  }\n\n  plus = (other: LeveledSkill) => new LeveledSkill(this.level + other.level, this.skill)\n  minus = (other: LeveledSkill) => new LeveledSkill(this.level - other.level, this.skill)\n\n  data = (): Data => ({skill: this.skill.data(), level: this.level})\n}\n","import {Build, SearchRequest, Size} from \"./data\"\nimport {LeveledSkill} from \"/logic/search/LeveledSkill\"\nimport {PartsCandidate} from \"/logic/search/PartsCandidate\"\nimport {SearchContext} from \"/logic/search/searchContext\"\nimport {Decoration} from \"/logic/search/Decoration\"\nimport {Map} from \"immutable\"\nimport {Skill} from \"/logic/search/Skill\"\n\nexport function searchBuild(\n  partsCandidate: PartsCandidate,\n  request: SearchRequest,\n  context: SearchContext\n): Build | undefined {\n  return satisfy() ? fillDecorations() : undefined\n\n  function satisfy(): boolean {\n    return !calcMissingSlots().some(({missing}) => missing > 0)\n  }\n\n  function fillDecorations(): Build {\n    return partsCandidate.withDecorations(getDecorationsFor())\n  }\n\n  function getDecorationsFor(): Decoration[] {\n    const decorations = context.decorations.mutableCopy()\n\n    return skillsNotInParts()\n      .flatMap(leveledSkill => Array<Skill>(leveledSkill.level).fill(leveledSkill.skill))\n      .map(skill => decorations.takeMinDecoration(skill))\n      .filter<Decoration>((dec): dec is Decoration => dec !== undefined)\n  }\n\n  function calcNeedsPerSlot(): Map<Size | undefined, {nb: number; skills: Skill[]}> {\n    const decorations = context.decorations.mutableCopy()\n    return skillsNotInParts()\n      .flatMap(leveledSkill => Array<Skill>(leveledSkill.level).fill(leveledSkill.skill))\n      .reduce(\n        (acc, neededSkill) =>\n          acc.update(decorations.takeMinDecoration(neededSkill)?.size, (v = {nb: 0, skills: []}) => {\n            v.nb += 1\n            v.skills.push(neededSkill)\n            return v\n          }),\n        Map<Size | undefined, {nb: number; skills: Skill[]}>()\n      )\n  }\n\n  function skillsNotInParts(): LeveledSkill[] {\n    return request.leveledSkills\n      .map(LeveledSkill.ofData)\n      .map(leveledSkill => leveledSkill.minus(partsCandidate.skillFor(leveledSkill.skill)))\n      .filter(skill => skill.level > 0)\n  }\n\n  function calcMissingSlots(): Map<Size | undefined, {missing: number; skills: Skill[]}> {\n    const needsPerSlot = calcNeedsPerSlot()\n    const availableSlots = partsCandidate.availableSlots() as Map<Size | undefined, number>\n    return [undefined, Size.lvl1, Size.lvl2, Size.lvl3, Size.lvl4]\n      .reduce((map, slot) => {\n        const slotInfo = needsPerSlot.get(slot) || {nb: 0, skills: []}\n        return map.set(slot, {missing: slotInfo.nb - availableSlots.get(slot, 0), skills: slotInfo.skills})\n      }, Map<Size | undefined, {missing: number; skills: Skill[]}>().asMutable())\n      .withMutations(recycleUnusedSlots)\n      .asImmutable()\n  }\n\n  function recycleUnusedSlots(missingSlots: Map<Size | undefined, {missing: number; skills: Skill[]}>) {\n    ;[Size.lvl1, Size.lvl2, Size.lvl3].reduce<Size[]>((unplaced, slotSize) => {\n      const sizeInfo = missingSlots.get(slotSize) || {missing: 0, skills: []}\n\n      for (let i = 0; i < sizeInfo.missing; i++) {\n        unplaced.push(slotSize)\n      }\n\n      for (let i = 0; i < -1 * sizeInfo.missing; i++) {\n        const DecoSizeToPlace = unplaced.pop()\n        if (DecoSizeToPlace !== undefined) {\n          missingSlots.update(DecoSizeToPlace, sizeInfo => ({missing: sizeInfo.missing - 1, skills: sizeInfo.skills}))\n          missingSlots.update(slotSize, sizeInfo => ({missing: sizeInfo.missing + 1, skills: sizeInfo.skills}))\n        }\n      }\n\n      return unplaced\n    }, [])\n  }\n}\n","import {ArmorPart} from \"./ArmorPart\"\nimport {searchBuild} from \"./searchBuild\"\nimport {LeveledSkill} from \"./LeveledSkill\"\nimport {Skill} from \"./Skill\"\nimport {SearchContext} from \"./searchContext\"\nimport {Decoration} from \"./Decoration\"\nimport {List, Map} from \"immutable\"\nimport {Build, PartType, SearchRequest, Size} from \"./data\"\nimport {SetSkill} from \"./SetSkill\"\n\nexport class PartsCandidate {\n  constructor(readonly parts: ArmorPart[]) {}\n\n  searchBuild(request: SearchRequest, context: SearchContext): Build | undefined {\n    return searchBuild(this, request, context)\n  }\n\n  skillFor(searchedSkill: Skill): LeveledSkill {\n    return this.skills()\n      .filter(skill => skill.skill.id === searchedSkill.id)\n      .reduce((skill1, skill2) => skill1.plus(skill2), new LeveledSkill(0, searchedSkill))\n  }\n\n  availableSlots(): Map<Size, number> {\n    return this.parts\n      .flatMap(part => part.slots)\n      .reduce((nbBySlot, slot) => nbBySlot.update(slot, (nb = 0) => nb + 1), Map<Size, number>())\n  }\n\n  withDecorations(decorations: Decoration[]): Build {\n    return {\n      head: this.part(PartType.head)?.data() || null,\n      chest: this.part(PartType.chest)?.data() || null,\n      arm: this.part(PartType.arm)?.data() || null,\n      waist: this.part(PartType.waist)?.data() || null,\n      legs: this.part(PartType.legs)?.data() || null,\n      decorations: List(decorations)\n        .countBy(dec => dec)\n        .mapKeys(dec => dec.data())\n        .toArray(),\n    }\n  }\n\n  part(partType: PartType): ArmorPart | undefined {\n    return this.parts.find(part => part.partType === partType)\n  }\n\n  private skills(): LeveledSkill[] {\n    return [\n      ...this.parts.flatMap(part => part.skills),\n      ...this.activatedSetSkills().map(skill => new LeveledSkill(1, skill)),\n    ]\n  }\n\n  private activatedSetSkills(): Skill[] {\n    return List(this.parts.flatMap(part => part.set).flatMap(set => set.setSkills))\n      .countBy(v => v)\n      .filter((nb, setSkills: SetSkill) => setSkills.activationPartCount <= nb)\n      .keySeq()\n      .map(setSkill => setSkill.skill)\n      .toArray()\n  }\n}\n","import {ArmorPart} from \"logic/search/ArmorPart\"\nimport {Observable} from \"rxjs\"\nimport {filter, map} from \"rxjs/operators\"\nimport {PartsCandidate} from \"./PartsCandidate\"\nimport {SearchContext} from \"./searchContext\"\nimport {Build, PartType, SearchRequest} from \"./data\"\n\nexport function search(request: SearchRequest, context: SearchContext): Observable<Build> {\n  context = context.filter(request)\n\n  return allCandidates().pipe(\n    map(candidate => candidate.searchBuild(request, context)),\n    filter((buildOrUndefined): buildOrUndefined is Build => buildOrUndefined !== undefined)\n  )\n\n  function allCandidates(): Observable<PartsCandidate> {\n    const heads = all(PartType.head)\n    const chests = all(PartType.chest)\n    const arms = all(PartType.arm)\n    const waists = all(PartType.waist)\n    const legs = all(PartType.legs)\n\n    return new Observable(subscriber => {\n      for (const headPart of heads) {\n        for (const chestPart of chests) {\n          for (const armsPart of arms) {\n            for (const waistPart of waists) {\n              for (const legsPart of legs) {\n                subscriber.next(\n                  new PartsCandidate(\n                    [headPart, chestPart, armsPart, waistPart, legsPart]\n                      .filter(part => part !== null)\n                      .map(part => part as ArmorPart)\n                  )\n                )\n              }\n            }\n          }\n        }\n      }\n      subscriber.complete()\n    })\n\n    function all(partType: PartType): (ArmorPart | null)[] {\n      return [...context.availableParts.filter(p => p.partType === partType), null]\n    }\n  }\n}\n","import {Observable} from \"rxjs\"\nimport {finalize} from \"rxjs/operators\"\nimport {Build, SearchContext, SearchRequest} from \"./data\"\n\nexport interface Message {\n  readonly type: string\n}\n\nexport class BuildFoundMessage implements Message {\n  readonly type: string = \"build-found\"\n\n  constructor(readonly build: Build) {}\n\n  static is(message: Message): message is BuildFoundMessage {\n    return message.type === \"build-found\"\n  }\n}\n\nexport class EndMessage implements Message {\n  readonly type = \"end\"\n\n  static is(message: Message): message is EndMessage {\n    return message.type === \"end\"\n  }\n}\n\nexport const endMessage = new EndMessage()\n\nexport function startSearch(request: SearchRequest, context: SearchContext): Observable<Build> {\n  let worker: Worker\n  return new Observable<Build>(subscriber => {\n    worker = new Worker(\"./search-in-webworker.ts\")\n    worker.onmessage = ({data: message}) => {\n      if (BuildFoundMessage.is(message)) subscriber.next(message.build)\n      if (EndMessage.is(message)) subscriber.complete()\n    }\n    worker.onerror = ({message}) => subscriber.error(new Error(message))\n    worker.postMessage({type: \"start\", data: {request, context}})\n  }).pipe(finalize(() => worker.terminate()))\n}\n","import {Skill} from \"./Skill\"\nimport {is, ValueObject} from \"immutable\"\nimport {SetSkill as Data} from \"./data\"\n\nexport class SetSkill implements ValueObject {\n  static ofData = ({skill, activationPartCount}: Data) => new SetSkill(Skill.ofData(skill), activationPartCount)\n\n  constructor(readonly skill: Skill, readonly activationPartCount: number) {}\n\n  data = (): Data => ({skill: this.skill.data(), activationPartCount: this.activationPartCount})\n  hashCode = this.skill.hashCode\n  equals = (other: any) =>\n    other instanceof SetSkill && is(this.skill, other.skill) && is(this.activationPartCount, other.activationPartCount)\n}\n","import {SetSkill} from \"./SetSkill\"\nimport {ArmorSet as Data} from \"./data\"\n\nexport class ArmorSet {\n  static ofData = ({id, rarity, setSkills}: Data) => new ArmorSet(id, rarity, setSkills.map(SetSkill.ofData))\n\n  constructor(readonly id: string, readonly rarity: number, readonly setSkills: SetSkill[]) {}\n\n  data = (): Data => ({id: this.id, rarity: this.rarity, setSkills: this.setSkills.map(ss => ss.data())})\n}\n","import {LeveledSkill} from \"./LeveledSkill\"\nimport {ArmorPart as Data, PartType, SearchRequest, Size} from \"./data\"\nimport {ArmorSet} from \"./ArmorSet\"\n\nexport class ArmorPart {\n  static ofData = ({set, partType, skills, slots}: Data) =>\n    new ArmorPart(ArmorSet.ofData(set), partType, skills.map(LeveledSkill.ofData), slots)\n\n  constructor(\n    readonly set: ArmorSet,\n    readonly partType: PartType,\n    readonly skills: LeveledSkill[],\n    readonly slots: Size[]\n  ) {}\n\n  data = (): Data => ({\n    set: this.set.data(),\n    partType: this.partType,\n    skills: this.skills.map(s => s.data()),\n    slots: this.slots,\n  })\n  isABetterPart(other: ArmorPart, request: SearchRequest): boolean {\n    return this.hasBetterSkills(other, request) && this.hasBetterSlots(other) && this.set.rarity >= other.set.rarity\n  }\n\n  private hasBetterSkills(other: ArmorPart, request: SearchRequest) {\n    return other.skills.reduce<boolean>(\n      (acc, otherSkill) =>\n        acc &&\n        (!request.leveledSkills.some(skill => skill.skill.id === otherSkill.skill.id) ||\n          this.skills.some(lskill => lskill.isBetterOrSameLevelThan(otherSkill))),\n      true\n    )\n  }\n\n  private hasBetterSlots(other: ArmorPart) {\n    return [Size.lvl1, Size.lvl2, Size.lvl3, Size.lvl4].every(\n      slot => this.numberOfSlot(slot) >= other.numberOfSlot(slot)\n    )\n  }\n\n  private numberOfSlot(slot: Size) {\n    return this.slots.filter(s => s >= slot).length\n  }\n}\n","import {hash, is, ValueObject} from \"immutable\"\nimport {Skill} from \"./Skill\"\nimport {LeveledSkill} from \"./LeveledSkill\"\nimport {Decoration as Data, Size} from \"./data\"\n\nexport class Decoration implements ValueObject {\n  static ofData = ({size, leveledSkills}: Data) => new Decoration(size, leveledSkills.map(LeveledSkill.ofData))\n  data = (): Data => ({size: this.size, leveledSkills: this.leveledSkills.map(skill => skill.data())})\n\n  static of = (size: number, skill: string) => new Decoration(size, [new LeveledSkill(1, new Skill(skill))])\n  static dual = (skill1: string, skill2: string) =>\n    new Decoration(Size.lvl4, [new LeveledSkill(1, new Skill(skill1)), new LeveledSkill(1, new Skill(skill2))])\n  static pure = (skill: string, level: number) => new Decoration(Size.lvl4, [new LeveledSkill(level, new Skill(skill))])\n\n  constructor(readonly size: Size, readonly leveledSkills: LeveledSkill[]) {}\n\n  hasSkill = (skill: Skill) => this.leveledSkills.some(leveledSkill => leveledSkill.skill.equals(skill))\n  hashCode = () => hash(this.leveledSkills)\n  equals = (other: Decoration) => is(this.size, other.size) && is(this.leveledSkills, other.leveledSkills)\n}\n","import {List, Map, Seq} from \"immutable\"\nimport {Skill} from \"./Skill\"\nimport {Decoration} from \"./Decoration\"\nimport {SearchRequest, Size, Decoration as DecorationData} from \"./data\"\n\nexport class Decorations {\n  static ofData = (data: [DecorationData, number][]) =>\n    new Decorations(Map(data.map(([dec, nb]) => [Decoration.ofData(dec), nb])))\n  static of = (decorations: Decoration[]) => new Decorations(List(decorations).countBy(dec => dec))\n  constructor(readonly decorations: Map<Decoration, number>) {}\n\n  filterFor(request: SearchRequest): Decorations {\n    return new Decorations(\n      Map(\n        this.decorations.filter((_, decoration) =>\n          request.leveledSkills.some(leveledSkill => decoration.hasSkill(Skill.ofData(leveledSkill.skill)))\n        )\n      )\n    )\n  }\n\n  forSkill = (skill: Skill): Seq.Indexed<Decoration> =>\n    this.decorations.keySeq().filter(decoration => decoration.hasSkill(skill))\n\n  minNeededSlot = (skill: Skill): Size | undefined =>\n    this.forSkill(skill)\n      .map(decoration => decoration.size)\n      .min()\n\n  mutableCopy = () => new MutableDecorations(this.decorations.asMutable())\n}\n\nclass MutableDecorations extends Decorations {\n  takeMinDecoration(skill: Skill): Decoration | undefined {\n    const decoration = this.forSkill(skill).min((dec1, dec2) => dec1.size - dec2.size)\n    if (decoration !== undefined) {\n      const nb = this.decorations.get(decoration)\n      if (nb && nb > 1) this.decorations.set(decoration, nb - 1)\n      else this.decorations.delete(decoration)\n    }\n    return decoration\n  }\n}\n","import {SearchContext as Data, SearchRequest} from \"./data\"\nimport {ArmorPart} from \"./ArmorPart\"\nimport {Decorations} from \"./Decorations\"\n\nexport class SearchContext {\n  static ofData = ({availableParts, decorations}: Data) =>\n    new SearchContext(availableParts.map(ArmorPart.ofData), Decorations.ofData(decorations))\n\n  constructor(readonly availableParts: ArmorPart[], readonly decorations: Decorations) {}\n\n  filter(request: SearchRequest): SearchContext {\n    const partsByType = this.availableParts.reduce(\n      (acc, part) => Object.assign(acc, {[part.partType]: [...(acc[part.partType] || []), part]}),\n      {} as any\n    )\n\n    return new SearchContext(\n      (Object.values(partsByType) as ArmorPart[][]).flatMap(removeUselessArmor),\n      this.decorations.filterFor(request)\n    )\n\n    function removeUselessArmor(parts: ArmorPart[]): ArmorPart[] {\n      return parts.reduce((retainedParts, newPart) => {\n        retainedParts = removeObsoleteParts()\n\n        if (!aBetterPartIsAlreadyRetained()) retainedParts.push(newPart)\n\n        return retainedParts\n\n        function removeObsoleteParts(): ArmorPart[] {\n          return retainedParts.filter(aRetainedPart => !newPart.isABetterPart(aRetainedPart, request))\n        }\n\n        function aBetterPartIsAlreadyRetained(): boolean {\n          return retainedParts.some(retainedPart => retainedPart.isABetterPart(newPart, request))\n        }\n      }, [] as ArmorPart[])\n    }\n  }\n}\n","import {Subscription} from \"rxjs\"\nimport {SearchRequest, SearchContext as SearchContextData} from \"./data\"\nimport {search} from \"./search\"\nimport {BuildFoundMessage, endMessage} from \".\"\nimport {SearchContext} from \"./searchContext\"\n\nlet messagePosterBuildSubscription: Subscription\n\nonmessage = ({\n  data: {\n    type,\n    data: {request, context},\n  },\n}: {\n  data: {type: \"start\" | \"stop\"; data: {request: SearchRequest; context: SearchContextData}}\n}) => {\n  switch (type) {\n    case \"start\":\n      messagePosterBuildSubscription = search(request, SearchContext.ofData(context)).subscribe({\n        next: build => postMessage(new BuildFoundMessage(build)),\n        complete: () => postMessage(endMessage),\n      })\n      break\n    case \"stop\":\n      messagePosterBuildSubscription.unsubscribe()\n      break\n  }\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}